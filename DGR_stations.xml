<?xml version="1.0" encoding="utf-8"?>

<TranscendenceModule>
<!-- Abbasid.xml -->
<StationType UNID="&stAbbasidOutpost;"
			name=				"Abbasid outpost"
			sovereign=			"&svAbbasid;"

			attributes=			"abbasid, enemy, envFire, envAvoidsWater, generic, human, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"176"
			fireRateAdj=		"40"
			noFriendlyFire=		"true"
			explosionType=		"&vtBlastExplosion1;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+abbasidSpace;"
				systemAffinity=			"+envFire; -envWater;"
				levelFrequency=			"ccur- ----- ----- ----- -----"

				locationCriteria=		"+outerSystem, -planetary"
				enemyExclusionRadius=	"100"
				/>

		<!-- Treasure and Items -->

		<Items>
			<Item chance="10"	count="1"		item="&itAbbasidThanogram;" />

			<Item chance="60"	count="1d12"	item="&itHelium3FuelRod;" />
			<Item chance="20"	count="1d12"	item="&itWaterIce;" />
			<Item chance="30"	count="1d12"	item="&itFrozenSupplies;" />
			<Table chance="30">
				<Lookup chance="20" count="1" table="&trConsumables2;"/>
				<Lookup chance="20" count="1" table="&trMinorItem2;"/>
				<Lookup chance="10" count="1" table="&trMajorItem2;"/>
				<Item   chance="50" count="1" item="&itLaserArray;" />
			</Table>
		</Items>

		<!-- Configuration -->

		<Hull 	hullType=		"singleHull"
				armorID=		"&itLightTitaniumArmor;"
				hitPoints=		"50"
				regen=			"1"
				/>
		
		<Devices>
			<Device deviceID="&itLaserArray;"	posAngle="15"  posRadius="30" posZ="50"	fireAngle="15"  fireArc="120" />
			<Device deviceID="&itLaserArray;"	posAngle="105" posRadius="30" posZ="50"	fireAngle="105" fireArc="120" />
			<Device deviceID="&itLaserArray;"	posAngle="195" posRadius="30" posZ="50"	fireAngle="195" fireArc="120" />
			<Device deviceID="&itLaserArray;"	posAngle="285" posRadius="30" posZ="50"	fireAngle="285" fireArc="120" />
		</Devices>

		<!-- Satellites -->

		<Satellites>
			<Station type="&stAbbasidOutpostWall;"	imageVariant="north"	yOffset="52"	segment="true"/>
			<Station type="&stAbbasidOutpostWall;"	imageVariant="east"		xOffset="52"	segment="true"/>
			<Station type="&stAbbasidOutpostWall;"	imageVariant="west"		xOffset="-52"	segment="true"/>
			<Station type="&stAbbasidOutpostWall;"	imageVariant="south"	yOffset="-40"	segment="true"/>

			<Orbitals count="1d4+1" distance="2d8+6" angle="random">
				<Station type="&stShipwreck1;">
					<InitialData>
						<!-- We don't want salvagers to take this loot (technically because
							they don't want to get close to the outpost, but game-wise 
							because we want players to get this loot). -->

						<Data id="core.noSalvage">True</Data>
					</InitialData>
				</Station>
			</Orbitals>
		</Satellites>

		<!-- Images and Effects -->

		<Image imageID="&rsAbbasidOutpost;" imageX="0" imageY="0" imageWidth="172" imageHeight="172" viewportRatio="0.02625"/>

		<DockingPorts
				portAngle=		"15"
				portCount=		"4"
				portRadius=		"92"
				/>

		<!-- Events and Data -->

		<Events>
			<GetRumors>
				(append
					(rpgRumorAdd 'commonwealthPub Nil 22 'scan)
					)
			</GetRumors>
		</Events>

		<Language>
			<Text id="rumor.commonwealthPub">

				A woman weeps softly as she tells her story:

				"Our freighter strayed near an Abbasid outpost by mistake.
				They showed no mercy&mdash;they just kept firing on us&mdash;the
				captain begged them to stop, but the blasts kept coming! Then
				our cabin got hit and my husband..."

				She stares into space and says no more. You leave 5 credits for her drinks.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stAbbasidOutpostWall;"
			name=				"Abbasid outpost wall"
			sovereign=			"&svAbbasid;"

			attributes=			"abbasidWall"

			scale=				"ship"
			destroyWhenAbandoned="true"
			paintLayer=			"bringToFront"
			noMapIcon=			"true"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Properties>
			<Constant id="core.noSalvage">True</Constant>
		</Properties>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itLightTitaniumArmor;"
				hitPoints=		"100"
				/>

		<!-- Images and Effects -->

		<ImageVariants>
			<Image id="north"	imageID="&rsAbbasidOutpostWalls;" imageX="0"   imageY="0"   imageWidth="172" imageHeight="68"  viewportRatio="0.02625"/>
			<Image id="east"	imageID="&rsAbbasidOutpostWalls;" imageX="104" imageY="172" imageWidth="68"  imageHeight="172" viewportRatio="0.02625"/>
			<Image id="west"	imageID="&rsAbbasidOutpostWalls;" imageX="0"   imageY="172" imageWidth="68"  imageHeight="172" viewportRatio="0.02625"/>
			<Image id="south"	imageID="&rsAbbasidOutpostWalls;" imageX="0"   imageY="80"  imageWidth="172" imageHeight="92"  viewportRatio="0.02625"/>
		</ImageVariants>

	</StationType>
<!-- Achievements.xml -->
<!-- AgriculturalMission01.xml -->
<!-- Analyzers.xml -->
<!-- Anarchists.xml -->
<StationType UNID="&stAnarchistCell;"
			name=				"Anarchist habitat"
			sovereign=			"&svAnarchists;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"4"

			armorID=			"&itUltraLightTitaniumArmor;"
			hitPoints=			"50"
			fireRateAdj=		"30"
			explosionType=		"&vtKineticExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"anarchists, enemy, envEarth, envAvoidsAir, freeworldAnarchists, generic, human, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+anarchistSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"cuv-- ----- ----- ----- -----"

				locationCriteria=		"+asteroids"
				/>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itLaserCannon;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Squadron table="&tbAnarchistDefenders;"	count="challenge:standard"	reinforce="auto"/>

		<!-- Treasure and Items -->

		<Items>
			<RandomItem chance="30"
					criteria=			"* +Info; -Alien; -NotStandard;"
					levelFrequency=		"c----"
					/>
			<Lookup chance="60" table="&trStdTreasure;"/>
		</Items>

		<!-- Images and Effects -->

		<ImageVariants>
			<Image		imageID="&rsAnarchistStations;" imageX="0"   imageY="0"   imageWidth="112" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="112" imageY="0"   imageWidth="122" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="234" imageY="0"   imageWidth="102" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="0"   imageY="122" imageWidth="100" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="100" imageY="122" imageWidth="128" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="228" imageY="122" imageWidth="120" imageHeight="122"/>
		</ImageVariants>

		<!-- Random Encounters -->

		<Encounters frequency="common">
			<Lookup table="&tbAnarchistEncounters;"/>
		</Encounters>

	</StationType>
<StationType UNID="&stAnarchistGathering;"
			name=				"Anarchist gathering"
			sovereign=			"&svAnarchists;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"4"

			armorID=			"&itTitaniumArmor;"
			hitPoints=			"50"
			fireRateAdj=		"30"
			explosionType=		"&vtKineticExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"anarchists, enemy, envEarth, envAvoidsAir, freeworldAnarchists, generic, human, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+anarchistSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"rcuv- ----- ----- ----- -----"

				locationCriteria=		"+asteroids"
				enemyExclusionRadius=	"50"
				/>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itLaserCannon;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Squadron table="&tbAnarchistDefenders;"	count="challenge:standard"	reinforce="auto"/>

		<!-- Satellites -->

		<Satellites overlapCheck="asteroids">
			<Orbitals count="1d3+1" distance="1d4+6" angle="random">
				<Station type="&stAnarchistGatheringSat;"/>
			</Orbitals>
		</Satellites>

		<!-- Treasure and Items -->

		<Items>
			<RandomItem chance="60"
					criteria=			"* +Info; -Alien; -NotStandard;"
					levelFrequency=		"cu---"
					/>
			<Lookup chance="50" table="&trStdTreasure;"/>
		</Items>

		<!-- Images and Effects -->

		<ImageVariants>
			<Image		imageID="&rsAnarchistStations;" imageX="0"   imageY="0"   imageWidth="112" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="112" imageY="0"   imageWidth="122" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="234" imageY="0"   imageWidth="102" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="0"   imageY="122" imageWidth="100" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="100" imageY="122" imageWidth="128" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="228" imageY="122" imageWidth="120" imageHeight="122"/>
		</ImageVariants>

		<!-- Random Encounters -->

		<Encounters frequency="common">
			<Lookup table="&tbAnarchistEncounters;"/>
		</Encounters>

	</StationType>
<StationType UNID="&stAnarchistGatheringSat;"
			name=				"Anarchist gathering"
			sovereign=			"&svAnarchists;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"4"
			noMapLabel=			"true"

			armorID=			"&itTitaniumArmor;"
			hitPoints=			"50"
			fireRateAdj=		"30"
			explosionType=		"&vtKineticExplosion1;"
			ejectaType=			"&vtWreckEjecta;"
			
			attributes=			"anarchists, enemy, freeworldAnarchists, human, populated"
			>

		<!-- Treasure and Items -->

		<Items>
			<RandomItem chance="30"
					criteria=			"* +Info; -Alien; -NotStandard; "
					levelFrequency=		"cu---"
					/>
			<Lookup chance="25" table="&trStdTreasure;"/>
		</Items>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itLaserCannon;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Squadron table="&tbAnarchistDefenders;"	count="challenge:standard"	reinforce="auto"/>

		<!-- Images and Effects -->

		<ImageVariants>
			<Image		imageID="&rsAnarchistStations;" imageX="0"   imageY="0"   imageWidth="112" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="112" imageY="0"   imageWidth="122" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="234" imageY="0"   imageWidth="102" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="0"   imageY="122" imageWidth="100" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="100" imageY="122" imageWidth="128" imageHeight="122"/>
			<Image		imageID="&rsAnarchistStations;" imageX="228" imageY="122" imageWidth="120" imageHeight="122"/>
		</ImageVariants>

		<!-- Random Encounters -->

		<Encounters frequency="common">
			<Lookup table="&tbAnarchistEncounters;"/>
		</Encounters>

	</StationType>
<StationType UNID="&stAnarchistSettlement;"
			name=				"Anarchist settlement"
			sovereign=			"&svAnarchists;"

			attributes=			"anarchists, enemy, envEarth, envAvoidsAir, freeworldAnarchists, generic, human, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"237"
			fireRateAdj=		"30"
			explosionType=		"&vtKineticExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+anarchistSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"-rcuv ----- ----- ----- -----"

				locationCriteria=		"+asteroids"
				enemyExclusionRadius=	"75"
				/>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itLightPlasteelPlate;"
				hitPoints=		"250"
				regen=			"5"
				/>
		
		<Devices>
			<Device deviceID="&itLaserCannon;"	posAngle="0"   posRadius="60" posZ="10" fireAngle="0"   fireArc="180"  missileDefense="true"/>
			<Device deviceID="&itLaserCannon;"	posAngle="60"  posRadius="60" posZ="10" fireAngle="60"  fireArc="180"  missileDefense="true"/>
			<Device deviceID="&itLaserCannon;"	posAngle="120" posRadius="60" posZ="10" fireAngle="120" fireArc="180"  missileDefense="true"/>
			<Device deviceID="&itLaserCannon;"	posAngle="180" posRadius="60" posZ="10" fireAngle="180" fireArc="180"  missileDefense="true"/>
			<Device deviceID="&itLaserCannon;"	posAngle="240" posRadius="60" posZ="10" fireAngle="240" fireArc="180"  missileDefense="true"/>
			<Device deviceID="&itLaserCannon;"	posAngle="300" posRadius="60" posZ="10" fireAngle="300" fireArc="180"  missileDefense="true"/>
		</Devices>

		<!-- Ships and Defenses -->
		
		<Squadrons>
			<Squadron table="&tbAnarchistHorde;"		count="challenge:standard"	reinforce="auto"/>
			<Squadron table="&tbAnarchistDefenders;"	count="challenge:easy"		reinforce="auto"/>
		</Squadrons>

		<!-- Treasure -->

		<Items value="standard:level=3:x=3">
			<RandomItem count="1d2"
					criteria=			"* +Info; -Alien; -NotStandard;"
					levelFrequency=		"ucur-"
					/>
			<Lookup count="1d3" table="&trStdTreasure;"/>
		</Items>

		<!-- Image and Effects -->

		<ImageVariants>
			<Image		imageID="&rsAnarchistSettlement;" imageX="0"    imageY="0"   imageWidth="260" imageHeight="260" viewportRatio="0.0275"/>
			<Image		imageID="&rsAnarchistSettlement;" imageX="260"  imageY="0"   imageWidth="260" imageHeight="260" viewportRatio="0.0275"/>
			<Image		imageID="&rsAnarchistSettlement;" imageX="0"    imageY="260"   imageWidth="260" imageHeight="260" viewportRatio="0.0275"/>
			<Image		imageID="&rsAnarchistSettlement;" imageX="260"  imageY="260"   imageWidth="260" imageHeight="260" viewportRatio="0.0275"/>
		</ImageVariants>

		<DockingPorts>
			<Port posAngle="45" posRadius="110" rotation="-135"/>
			<Port posAngle="65" posRadius="119" rotation="-135"/>
			<Port posAngle="25" posRadius="119" rotation="-135"/>

			<Port posAngle="135" posRadius="110" rotation="-45"/>
			<Port posAngle="155" posRadius="119" rotation="-45"/>
			<Port posAngle="115" posRadius="119" rotation="-45"/>

			<Port posAngle="225" posRadius="110" rotation="45"/>
			<Port posAngle="245" posRadius="119" rotation="45"/>
			<Port posAngle="205" posRadius="119" rotation="45"/>

			<Port posAngle="315" posRadius="110" rotation="135"/>
			<Port posAngle="335" posRadius="119" rotation="135"/>
			<Port posAngle="295" posRadius="119" rotation="135"/>
		</DockingPorts>

		<!-- Random Encounters -->

		<Encounters frequency="common">
			<Lookup table="&tbAnarchistEncounters;"/>
		</Encounters>

	</StationType>
<!-- Antarctica.xml -->
<!-- Antarctica01.xml -->
<!-- Antarctica02.xml -->
<!-- AntarcticaD01.xml -->
<!-- AresItems.xml -->
<!-- AresOrthodoxy.xml -->
<StationType UNID="&stAresOutpost;"
			name=				"Ares outpost"
			sovereign=			"&svAres;"

			attributes=			"ares, enemy, envAir, envEarth, envFire, envWater, generic, neoHuman, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			armorID=			"&itLightTharsisPlate;"
			hitPoints=			"370"
			multiHull=			"true"
			regen=              "4"

			fireRateAdj=		"40"
			explosionType=		"&vtThermoExplosion1;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				distanceCriteria=		"+aresSpace;"
				distanceFrequency=		"ccccc|rv---"
				systemAffinity=			"*"
				levelFrequency=			"----- rcur- ----- ----- -----"

				locationCriteria=		"-asteroids"
				enemyExclusionRadius=	"80"
				/>

		<Encounters frequency="common">
			<Lookup table="&tbAresEncounters;"/>
		</Encounters>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itLightningCannon;" omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships>
			<Ship		count="1d6"		class="&scSandstorm;" orders="guard"/>
		</Ships>

		<Reinforcements minShips="5">
			<Ship		count="1d4"		class="&scSandstorm;" orders="guard"/>
		</Reinforcements>

		<!-- Treasure -->

		<Items value="standard:level=7:x=1.3">
			<Table>
				<Lookup chance="25" count="1d3" table="&trConsumables7;"/>
				<Lookup chance="25" count="1"	table="&trConsumables8;"/>
				<Lookup chance="25" count="1"	table="&trMinorItem7;"/>
				<Lookup chance="15" count="1"	table="&trMinorItem8;"/>
				<Lookup chance="10" count="1"	table="&trMajorItem7;"/>
			</Table>
		</Items>

		<!-- Image and Effects -->
		
		<Image			imageID="&rsAresOutpost;" imageWidth="160" imageHeight="250"	viewportRatio="0.03"/>

		<DockingPorts
				portAngle=		"15"
				portCount=		"8"
				portRadius=		"95"
				/>

	</StationType>
<StationType UNID="&stAresCommune;"
			name=				"Ares commune"
			sovereign=			"&svAres;"

			attributes=			"ares, aresMajor, enemy, envAir, envEarth, envFire, envWater, generic, majorStation, neoHuman, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			armorID=			"&itTharsisPlate;"
			hitPoints=			"2400"
			multiHull=			"true"
			regen=              "25"

			explosionType=		"&vtThermoExplosion4;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				distanceCriteria=		"+aresSpace;"
				distanceFrequency=		"ccccu|v----"
				systemAffinity=			"*"
				levelFrequency=			"----- -vuur ----- ----- -----"

				locationCriteria=		"-asteroids"
				enemyExclusionRadius=	"100"
				/>

		<Encounters frequency="common">
			<Lookup table="&tbAresEncounters;"/>
		</Encounters>

		<!-- Configuration -->

		<!-- Satellites -->

		<Satellites overlapCheck="asteroids">
			<LevelTable>
				<Orbitals levelFrequency="----- cccur ----- -----" count="3d3" distance="12" angle="equidistant">
					<Ship class="&scAresSentry;" count="1" sovereign="&svAres;" orders="sentry"/>
				</Orbitals>
				<Orbitals levelFrequency="----- --rcu r---- -----" count="2d3" distance="12" angle="equidistant">
					<Ship class="&scAresDualSentry;" count="1" sovereign="&svAres;" orders="sentry"/>
				</Orbitals>
				<Orbitals levelFrequency="----- ---rc ur--- -----" count="1d3+1" distance="12" angle="equidistant">
					<Ship class="&scAresAdvancedSentry;" count="1" sovereign="&svAres;" orders="sentry"/>
				</Orbitals>
			</LevelTable>
		</Satellites>

		<!-- Ships and Defenses -->

		<Ships>
			<Ship		count="1d2"		class="&scTundra;" orders="guard"/>
			<Ship		count="1d6"		class="&scSandstorm;" orders="patrol" patrolDist="5"/>
		</Ships>

		<Reinforcements minShips="6">
			<Table>
				<Ship chance="75"	count="1d4" class="&scSandstorm;" orders="patrol" patrolDist="5"/>
				<Ship chance="25"	count="1" class="&scTundra;" orders="guard" />
			</Table>
		</Reinforcements>

		<!-- Treasure -->

		<Items value="standard:level=8:x=8">
			<Table>
				<Lookup chance="25" count="1d3" table="&trConsumables8;"/>
				<Lookup chance="25" count="1"	table="&trConsumables9;"/>
				<Lookup chance="25" count="1"	table="&trMinorItem8;"/>
				<Lookup chance="15" count="1"	table="&trMinorItem9;"/>
				<Lookup chance="10" count="1"	table="&trMajorItem8;"/>
			</Table>
		</Items>

		<!-- Image and Effects -->

		<Image			imageID="&rsAresCommune;" imageWidth="360" imageHeight="360"	viewportRatio="0.03375"/>

		<DockingPorts>
			<Port posAngle="-75"   posRadius="80"	posZ="0" />
			<Port posAngle="45"    posRadius="80"	posZ="0" />
			<Port posAngle="165"   posRadius="80"	posZ="0"	bringToFront="true" />

			<Port posAngle="-45"   posRadius="120"	posZ="-60"	rotation="75"/>
			<Port posAngle="15"    posRadius="120"	posZ="-60"	rotation="-105"/>

			<Port posAngle="75"    posRadius="120"	posZ="-60"	rotation="-165"/>
			<Port posAngle="135"   posRadius="120"	posZ="-60"	rotation="15"	bringToFront="true"/>

			<Port posAngle="195"   posRadius="120"	posZ="-60"	rotation="-45"	sendToBack="true"/>
			<Port posAngle="-105"  posRadius="120"	posZ="-60"	rotation="135"/>
		</DockingPorts>

	</StationType>
<StationType UNID="&stAresShipyard;"
			name=				"Ares shipyard"
			sovereign=			"&svAres;"

			attributes=			"ares, aresMajor, enemy, envAir, envEarth, envFire, envWater, generic, majorStation, neoHuman, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			armorID=			"&itMassiveTharsisPlate;"
			hitPoints=			"3600"
			multiHull=			"true"
			regen=              "22"

			explosionType=		"&vtPlasmaExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				distanceCriteria=		"+aresSpace;"
				distanceFrequency=		"cccur|-----"
				systemAffinity=			"*"
				levelFrequency=			"----- --vuu ----- ----- -----"

				locationCriteria=		"-asteroids"
				enemyExclusionRadius=	"150"
				/>

		<Encounters frequency="common">
			<Lookup table="&tbAresEncounters;"/>
		</Encounters>

		<!-- Configuration -->

		<!-- Satellites -->

		<Satellites overlapCheck="asteroids">
			<LevelTable>
				<Orbitals levelFrequency="----- cccur ----- -----" count="5d3" distance="18" angle="equidistant">
					<Ship class="&scAresSentry;" count="1" sovereign="&svAres;" orders="sentry"/>
				</Orbitals>
				<Orbitals levelFrequency="----- -rcur ----- -----" count="4d3" distance="18" angle="equidistant">
					<Ship class="&scAresDualSentry;" count="1" sovereign="&svAres;" orders="sentry"/>
				</Orbitals>
				<Orbitals levelFrequency="----- --rcc ur--- -----" count="3d3" distance="18" angle="equidistant">
					<Ship class="&scAresAdvancedSentry;" count="1" sovereign="&svAres;" orders="sentry"/>
				</Orbitals>
			</LevelTable>
		</Satellites>

		<!-- Ships and Defenses -->

		<Ships>
			<Ship		count="1d2"		class="&scTundra;"					orders="guard"/>
			<Ship		count="1d6"		class="&scSandstorm;"				orders="patrol:5"/>
			<Table>
				<Ship	chance="40"	count="1d4+2"	class="&scChasm;"		orders="patrol:5"/>
				<Ship	chance="40" count="1d2"		class="&scDeimos;"		orders="patrol:8"/>
				<Ship	chance="10" count="4d6"		class="&scSandstorm;"	orders="patrol:8"/>
				<Ship	chance="10" count="1"		class="&scPhobos;"		orders="guard"/>
			</Table>
		</Ships>

		<Construction constructionRate="500" maxConstruction="10">
			<Table>
				<Ship chance="40"	count="1"	class="&scSandstorm;"		orders="patrol:5"/>
				<Ship chance="20"	count="1"	class="&scChasm;"			orders="patrol:5"/>
				<Ship chance="20"	count="1"	class="&scTundra;"			orders="patrol:8"/>
				<Ship chance="10"	count="1"	class="&scDeimos;"			orders="patrol:8"/>
				<Ship chance="5"	count="1"	class="&scPhobos;"			orders="patrol:50"/>
				<Ship chance="5"	count="1"	class="&scDeimos;"			eventHandler="&evStdWanderBehavior;"/>
			</Table>
		</Construction>

		<!-- Treasure -->

		<Items value="standard:level=9:x=6">
			<Table>
				<Lookup chance="25" count="1d3" table="&trConsumables9;"/>
				<Lookup chance="25" count="1"	table="&trConsumables10;"/>
				<Lookup chance="25" count="1"	table="&trMinorItem9;"/>
				<Lookup chance="15" count="1"	table="&trMinorItem10;"/>
				<Lookup chance="10" count="1"	table="&trMajorItem9;"/>
			</Table>
		</Items>

		<!-- Image and Effects -->

		<Image			imageID="&rsAresShipyard;" imageWidth="640" imageHeight="640"	viewportRatio="0.04375"/>

		<DockingPorts>

			<!-- Upper Section -->

			<Port posAngle="105"	posRadius="165"		posZ="80"/>
			<Port posAngle="82"		posRadius="165"		posZ="80"		rotation="-75"/>
			<Port posAngle="128"	posRadius="165"		posZ="80"		rotation="-75"/>

			<Port posAngle="63"		posRadius="200"		posZ="50"		rotation="195"/>
			<Port posAngle="75"		posRadius="260"		posZ="50"		rotation="195"/>

			<Port posAngle="147"	posRadius="200"		posZ="50"		rotation="15"/>
			<Port posAngle="135"	posRadius="260"		posZ="50"		rotation="15"/>

			<!-- -120 degrees -->

			<Port posAngle="-15"	posRadius="165"		posZ="80"/>
			<Port posAngle="-38"	posRadius="165"		posZ="80"		rotation="-195"/>
			<Port posAngle="8"		posRadius="165"		posZ="80"		rotation="-195"		bringToFront="true"/>

			<Port posAngle="-57"	posRadius="200"		posZ="50"		rotation="75"/>
			<Port posAngle="-45"	posRadius="260"		posZ="50"		rotation="75"/>

			<Port posAngle="27"		posRadius="200"		posZ="50"		rotation="-105"		bringToFront="true"/>
			<Port posAngle="15"		posRadius="260"		posZ="50"		rotation="-105"		bringToFront="true"/>

			<!-- +120 degrees -->

			<Port posAngle="225"	posRadius="165"		posZ="80"/>
			<Port posAngle="202"	posRadius="165"		posZ="80"		rotation="45"/>
			<Port posAngle="248"	posRadius="165"		posZ="80"		rotation="45"/>

			<Port posAngle="183"	posRadius="200"		posZ="50"		rotation="315"		bringToFront="true"/>
			<Port posAngle="195"	posRadius="260"		posZ="50"		rotation="315"/>

			<Port posAngle="267"	posRadius="200"		posZ="50"		rotation="135"/>
			<Port posAngle="255"	posRadius="260"		posZ="50"		rotation="135"/>

		</DockingPorts>

	</StationType>
<!-- AresShips.xml -->
<!-- ArmorEnhancementItems.xml -->
<!-- ArmorRepairItems.xml -->
<!-- AsteroidFields.xml -->
<!-- Barricades.xml -->
<StationType UNID="&stBarricade1;"
			name=				"titanium barricade"
			sovereign=			"&svNeutral;"
			dockScreen=			"&dsBarricade;"

			armorID=			"&itReinforcedTitanium1;"
			structuralHitPoints="100"
				 
			ejectaType=			"&vtWreckEjecta;"

			scale=				"ship"
			mass=				"8"
			noMapIcon=			"true"
			>

		<Properties>
			<Constant id="core.noSalvage">True</Constant>
		</Properties>

		<Image imageID="&rsBarricades;" imageWidth="80" imageHeight="80" rotationCount="120" rotationColumns="1"/>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>

		<InitialData>
			<Data id="SourceItem">
				(&itReinforcedTitanium1; 1)
			</Data>
		</InitialData>
	</StationType>
<StationType UNID="&stBarricade2;"
			name=				"titanium barricade"
			sovereign=			"&svNeutral;"
			dockScreen=			"&dsBarricade;"
				 
			armorID=			"&itReinforcedTitanium2;"
			structuralHitPoints="200"
				 
			ejectaType=			"&vtWreckEjecta;"

			scale=				"ship"
			mass=				"15"
			noMapIcon=			"true"
			>

		<Properties>
			<Constant id="core.noSalvage">True</Constant>
		</Properties>

		<Image imageID="&rsBarricades;" imageWidth="80" imageHeight="80" rotationCount="120" rotationColumns="1"/>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>

		<InitialData>
			<Data id="SourceItem">
				(&itReinforcedTitanium2; 1)
			</Data>
		</InitialData>
	</StationType>
<StationType UNID="&stBarricade3;"
			name=				"titanium barricade"
			sovereign=			"&svNeutral;"
			dockScreen=			"&dsBarricade;"

			armorID=			"&itReinforcedTitanium3;"
			structuralHitPoints="400"
				 
			ejectaType=			"&vtWreckEjecta;"

			scale=				"ship"
			mass=				"30"
			noMapIcon=			"true"
			>

		<Properties>
			<Constant id="core.noSalvage">True</Constant>
		</Properties>

		<Image imageID="&rsBarricades;" imageWidth="80" imageHeight="80" rotationCount="120" rotationColumns="1"/>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>

		<InitialData>
			<Data id="SourceItem">
				(&itReinforcedTitanium3; 1)
			</Data>
		</InitialData>
	</StationType>
<!-- BattleArena.xml -->
<StationType UNID="&stBattleArena;"
			name=				"Battle Arena Maximus"
			sovereign=			"&svCorporate;"
			inherit=			"&unidCommonText;"

			attributes=			"battleArena, battleArenaMaximus, battleArenaSegment, corporate, corporateCustoms, corporateDecon, friendly, generic, human, majorStation, populated"

			dockScreen=			"Main"
				 
			level=				"5"
			size=				"5000"
			barrier=			"true"
			barrierEffect=		"&efBattleArenaWallHit;"
			canAttack=			"true"
			immutable=			"true"
			paintLayer=			"overhang"
			>

		<Properties>
			<!--
			By default we accept any military ID (even ones from APD or ED).
			-->
			<Definition	id="rpg.checkMilitaryID">"* +militaryID;"</Definition>

			<Definition	id="rpg.checkRadioactive">True</Definition>

			<Definition id="arenaPolygonPoints">
				(list
					{	angle:270	radius:1.0	}

					{	angle:192	radius:21.4	}
					{	angle:181	radius:23.5	}
					{	angle:191	radius:42.3	}
					{	angle:197	radius:58.0	}
					{	angle:213	radius:66.0	}
					{	angle:232	radius:60.2	}
					{	angle:257	radius:60.0	}

					{	angle:-77	radius:60.0	}
					{	angle:-52	radius:60.2	}
					{	angle:-33	radius:66.0	}
					{	angle:-17	radius:58.0	}
					{	angle:-11	radius:42.3	}
					{	angle:-1	radius:23.5	}
					{	angle:-12	radius:21.4 }
					)
			</Definition>
			<Variant id="arenaPolygon">
				(map (typ@ gType 'arenaPolygonPoints) thePoint
					(sysVectorPolarOffset gSource (@ thePoint 'angle) (@ thePoint 'radius))
					)
			</Variant>

			<Data id="firedMilitaryMissileOn"></Data>
			<Data id="usedAutonOn"></Data>
		</Properties>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Refuel			criteria="f +BasicFuel; L:1-5;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-6;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-6; -military;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-6; -military;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-6;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<ConsumeTrade	criteria="{human.armor}"		impact="25"/>
			<ConsumeTrade	criteria="{human.shields}"		impact="25"/>
			<ConsumeTrade	criteria="{human.weapons}"		impact="25"/>

			<BalanceTrade	criteria="{core.fusionFuel}"	impact="20"/>
			<BalanceTrade	criteria="{human.basicFood}"	impact="20"/>
			<BalanceTrade	criteria="{human.lux}"			impact="20"/>
			<BalanceTrade	criteria="{human.meds}"			impact="20"/>
			<BalanceTrade	criteria="{human.res}"			impact="20"/>
		</Trade>
		
		<!-- Satellites -->

		<Satellites>
			<Station type="&stBattleArenaStatic;"	xOffset="-345"	yOffset="5"		imageVariant="3"	segment="true"/>
			<Station type="&stBattleArenaStatic;"	xOffset="345"	yOffset="5"		imageVariant="4"	segment="true"/>
			
			<Station type="&stBattleArenaStatic;"	xOffset="-655"	yOffset="-20"	imageVariant="2"	segment="true"/>
			<Station type="&stBattleArenaStatic;"	xOffset="655"	yOffset="-20"	imageVariant="5"	segment="true"/>
			
			<Station type="&stBattleArenaStatic;"	xOffset="-915"	yOffset="-135"	imageVariant="1"	segment="true"/>
			<Station type="&stBattleArenaStatic;"	xOffset="915"	yOffset="-135"	imageVariant="6"	segment="true"/>
			
			<Station type="&stBattleArenaStatic;"	xOffset="-1185"	yOffset="-275"	imageVariant="11"	segment="true"/>
			<Station type="&stBattleArenaStatic;"	xOffset="1185"	yOffset="-275"	imageVariant="12"	segment="true"/>
			
			<Station type="&stBattleArenaStatic;"	xOffset="-1225"	yOffset="-520"	imageVariant="0"	paintLayer="overhang"	segment="true"/>
			<Station type="&stBattleArenaStatic;"	xOffset="1225"	yOffset="-520"	imageVariant="17"	paintLayer="overhang"	segment="true"/>
			
			<Station type="&stBattleArenaStatic;"	xOffset="-1265"	yOffset="-765"	imageVariant="7"	segment="true"/>
			<Station type="&stBattleArenaStatic;"	xOffset="1265"	yOffset="-765"	imageVariant="18"	segment="true"/>
			
			<Station type="&stBattleArenaStatic;"	xOffset="-1155"	yOffset="-1035"	imageVariant="8"	paintLayer="overhang"	segment="true"/>
			<Station type="&stBattleArenaStatic;"	xOffset="1155"	yOffset="-1035"	imageVariant="19"	paintLayer="overhang"	segment="true"/>
			
			<Station type="&stBattleArenaStatic;"	xOffset="-885"	yOffset="-1163"	imageVariant="9"	paintLayer="overhang"	segment="true"/>
			<Station type="&stBattleArenaStatic;"	xOffset="885"	yOffset="-1163"	imageVariant="14"	paintLayer="overhang"	segment="true"/>
			
			<Station type="&stBattleArenaStatic;"	xOffset="-615"	yOffset="-1283"	imageVariant="10"	paintLayer="overhang"	segment="true"/>
			<Station type="&stBattleArenaStatic;"	xOffset="615"	yOffset="-1283"	imageVariant="13"	paintLayer="overhang"	segment="true"/>
			
			<Station type="&stBattleArenaStatic;"	xOffset="-360"	yOffset="-1318"	imageVariant="15"	paintLayer="overhang"	segment="true"/>
			<Station type="&stBattleArenaStatic;"	xOffset="360"	yOffset="-1318"	imageVariant="16"	paintLayer="overhang"	segment="true"/>
			
			<Station type="&stBattleArenaStatic;"	xOffset="0"		yOffset="-1390"	imageVariant="21"	objName="arenaDoor"	segment="true"/>
		</Satellites>
		
		<!-- Image and Effects -->
		
		<Image			imageID="&rsBattleArenaSegments;" imageX="1240" imageY="0"    imageWidth="320" imageHeight="280"/>
		<HeroImage		imageID="&rsBattleArenaBkgnd;"	imageWidth="950" imageHeight="650"/>
		
		<DockingPorts>
			<Port x="-105"	y="-140" />
			<Port x="0"		y="-140" />
			<Port x="105"	y="-140" />
		</DockingPorts>
		
		<!-- Events and Data -->

		<InitialData>
			<Data id="results">(0 0 0 0)</Data>
			<Data id="rookieScore">0</Data>
		</InitialData>

		<Events>
			<GetGlobalAchievements>
				(block (
					(arenaRank (typGetData &stBattleArena; 'arenaRank))
					(katamiStatus (typGetData &stBattleArena; 'katamiStatus))
					)
					(append
						(if (and arenaRank (!= arenaRank 'rookie))
							(list (list
								(typTranslate &stBattleArena; (cat "achievement.arena." arenaRank))
								Nil 
								(typTranslate &unidCommonText; 'achievementsAndRegrets)
								))
							)

						(if (and katamiStatus (!= katamiStatus 'instructor) (!= katamiStatus 'kidnapped))
							(list (list
								(typTranslate &stBattleArena; (cat "achievement.katami." katamiStatus))
								Nil
								(typTranslate &unidCommonText; 'achievementsAndRegrets)
								))
							)

						;	Missions
						(rpgMissionAchievements &stBattleArena; "* +gladiatorFight;")
						)
					)
			</GetGlobalAchievements>

			<GetRumors>
				(append
					{
						attributes: 'commonwealthHabitat
						priority: 100
						textID: (cat "rumor.commonwealthHabitat.weapon"
							(seededRandom (objGetDestiny (@ gData 'stationObj)) 1 5)
							)
						}
					{
						attributes: 'commonwealthHabitat
						priority: 100
						textID: (cat "rumor.commonwealthHabitat.shield"
							(seededRandom (objGetDestiny (@ gData 'stationObj)) 1 3)
							)
						}
					(rpgRumorAdd 'commonwealthContainer (make 'sequence 1 4) 100)
					)
			</GetRumors>

			<OnGlobalUniverseLoad>
				;	If we're loading because of a resurrect, then update any arena missions
				(if (= aReason 'resurrect)
					(enum (msnFind "a +arenaCombat;") theMission
						(msnFireEvent theMission 'OnPlayerResurrect)
						)
					)
			</OnGlobalUniverseLoad>

			<OnCreate>
				(block (classList gladiatorList markerObj)
					; Load the list of standard gladiator classes
					(setq classList (typFind "s +battleArena; +gladiator"))

					; Create for all the created gladiators
					(setq gladiatorList Nil)

					; Loop over all classes
					(enum classList theClass
						(for i 1 (random '(1 1 1 2 2 3))
							(block (theShip)
								(setq theShip (bamCreateGladiator gSource theClass))
								(setq gladiatorList (append gladiatorList (objGetID theShip)))
								)
							)
						)

					; Remember the list of gladiators
					(objSetData gSource "gladiatorList" (shuffle gladiatorList))
					
					; Make sure doors are open (we need to do this to set the barrier flag
					; property).
					(bamDoorsOpen)

					;	Create a marker at the centre of the arena
					(setq markerObj (sysCreateMarker "battleArenaCenter" (sysVectorPolarOffset gSource 270 28) &svCorporate;))
					(objSetData gSource 'markerID (objGetID markerObj))
					)
			</OnCreate>

			<OnSystemObjCreated>
				;	LATER: These system events are registered in msBattleArenaFight.
				;	In the future, they should be handled by the mission object.

				(switch
					(and (obj@ aObjCreated 'inPlayerSquadron)
							(sysVectorInPolygon aObjCreated (obj@ gSource 'arenaPolygon))
							)
						(block (
							)
							(plyMessage gPlayer (objTranslate gSource 'msgBooAuton))
							(objSet@ gSource 'usedAutonOn (unvGetTick))
							)
					)
			</OnSystemObjCreated>

			<OnSystemWeaponFire>
				(switch
					;	If this is a repeat, then ignore
					(!= aFireRepeat 0)
						Nil
						
					;	If the player fires a missile (or other expensive disposable) she gets a bonus
					(= aWeaponObj gPlayerShip)
						(block (
							(theLevel (itmGetLevel aWeaponUNID))
							)
							(switch
								;	Boos for military missiles

								(itmMatches aWeaponUNID "m +military; | m +illegal;")
									(block (
										(lastBoo (obj@ gSource 'firedMilitaryMissileOn))
										)
										(if (ls (+ lastBoo 150) (unvGetTick))
											(plyMessage gPlayer (objTranslate gSource 'msgBooMilitaryMissile))
											)
										(objSet@ gSource 'firedMilitaryMissileOn (unvGetTick))
										)

								;	Bonus for powerful missiles

								(itmMatches aWeaponUNID "m &gt;=$4")
									(objIncData gSource 'missileRep (* theLevel (- theLevel 1)))
								)
							)

					;	Count up the number of times that the opponent fires
					(= (objGetID aWeaponObj) (objGetData gSource "Opponent1"))
						(objIncData gSource "opponentShots")
					)
			</OnSystemWeaponFire>

			<OnSystemExplosion>
				;	Each explosion is +50
				(objIncData gSource "explosionRep" 50)
			</OnSystemExplosion>
		</Events>

		<DockScreens>
			<Main>
				<InitialPane>
					(block (theMission)
						(switch
							(setq theMission (msnFind gSource "aSP +arenaCombat;"))
								(if (msnFireEvent theMission 'OnDrawAllowed)
									'CheckDraw
									'StillFighting
									)

							;	If there are crates with banned items in the Arena,
							;	then warn that they'll get confiscated.

							(filter (sysFindObject gSource "T +crate;") theObj
									(and (sysVectorInPolygon theObj (obj@ gSource 'arenaPolygon))
										(objGetItems theObj "m +military; | m +illegal; | * +auton;")
										)
									)
								'ConfiscateWarning

							'Default
							)
						)
				</InitialPane>

				<Panes>
					<Default descID="descWelcome">
						<Actions>
						<!--
							<Action name="Purchase Tickets" default="1" key="P">
							</Action>
						-->

							<Action id="actionGladiatorsQuarters" default="1">
								(block (
									(arenaRank (objGetTypeData gSource "arenaRank"))
									(matchCount (count (msnFind gSource "rS +gladiatorFight;")))
									(wingmatesInArena
										(filter (sysFindObject gPlayerShip "sA +property:inPlayerSquadron;") theObj
											(sysVectorInPolygon theObj (obj@ gSource 'arenaPolygon))
											)
										)

									theMission
									)
									(switch
										;	No illegal equipment (except cargo hold)

										(objGetItems gPlayerShip "ad~cI +illegal;")
											(scrShowPane gScreen 'NoIllegalEquipment)

										;	No illegal missiles

										(objGetItems gPlayerShip "m +illegal;")
											(scrShowPane gScreen 'NoIllegalMissiles)

										;	Don't let the player in with military equipment

										(objGetItems gPlayerShip "adI +military;")
											(scrShowPane gScreen 'NoMilitaryEquipment)

										;	No military missiles

										(objGetItems gPlayerShip "m +military;")
											(scrShowPane gScreen 'NoMilitaryMissiles)

										;	No autons

										(objGetItems gPlayerShip "* +auton;")
											(scrShowPane gScreen 'NoAutons)

										;	Don't let the player in with wingmates

										wingmatesInArena
											(scrShowPane gScreen 'NoWingmates)

										;	Get a fight

										(setq theMission (rpgMissionGetAssignment {
												missionCriteria: "n +battleArena;"
												}))
											(scrShowScreen gScreen &dsRPGMission; {
												missionObj: theMission
												})

										(not arenaRank)
											(scrShowPane gScreen "FirstFight")

										(= arenaRank 'rookie)
											(scrShowPane gScreen "NoMoreMelees")

										(= arenaRank 'gladiator)
											(switch
												(not (objGetTypeData gSource "katamiStatus"))
													(scrShowPane gScreen "KatamiIntro")

												(and (geq matchCount 16)
														(ls (objGetTypeData gSource "arenaRep") 500))
													(scrShowPane gScreen "NoMoreGladiators")

												(scrShowScreen gScreen &dsBattleArenaOpponentList;)
												)

										(= arenaRank 'champion)
											(scrShowPane gScreen "Champion")

										(scrShowPane gScreen "Loser")
										)
									)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<NoMoreMelees descID="descNoMoreMelees">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</NoMoreMelees>

					<NoIllegalEquipment descID="descNoIllegalEquipment">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</NoIllegalEquipment>

					<NoIllegalMissiles descID="descNoIllegalMissiles">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</NoIllegalMissiles>

					<NoMilitaryEquipment descID="descNoMilitaryEquipment">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</NoMilitaryEquipment>

					<NoMilitaryMissiles descID="descNoMilitaryMissiles">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</NoMilitaryMissiles>

					<NoAutons descID="descNoAutons">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</NoAutons>

					<NoWingmates descID="descNoWingmates">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</NoWingmates>

					<ConfiscateWarning descID="descConfiscateWarning">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</ConfiscateWarning>

					<KatamiIntro descID="descKatamiIntro1">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen 'KatamiIntro2)
							</Action>
						</Actions>
					</KatamiIntro>

					<KatamiIntro2 descID="descKatamiIntro2">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(block Nil
									(objSetTypeData gSource 'katamiStatus 'instructor)
									(scrShowPane gScreen "Default")
									(scrShowScreen gScreen &dsBattleArenaOpponentList;)
									)
							</Action>
						</Actions>
					</KatamiIntro2>

					<GladiatorDraw descID="descGladiatorDraw">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</GladiatorDraw>

					<NoMoreGladiators descID="descNoMoreGladiators">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(block Nil
									(scrShowPane gScreen "Default")
									(objSetTypeData gSource "arenaRank" 'washout)
									)
							</Action>
						</Actions>
					</NoMoreGladiators>

					<Champion>
						<OnPaneInit>
							(if (or (= (objGetTypeData gSource 'katamiStatus) 'instructor)
									(= (objGetTypeData gSource 'katamiStatus) 'rescued)
									)
								(scrSetDescTranslate gScreen "descChampion:katami")
								(scrSetDescTranslate gScreen "descChampion:empty")
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</Champion>

					<Loser>
						<OnPaneInit>
							(if (or (= (objGetTypeData gSource "katamiStatus") 'instructor)
									(= (objGetTypeData gSource "katamiStatus") 'rescued)
									)
								(scrSetDescTranslate gScreen "descLoser:katami")
								(scrSetDescTranslate gScreen "descLoser:empty")
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</Loser>

					<FirstFight descID="descFirstFight">
						<Actions>
							<Action id="actionSign" default="1">
								(block Nil
									(objSetTypeData gSource "arenaRank" 'rookie)
									(scrShowPane gScreen 'Default)
									(scrShowScreen gScreen &dsRPGMission; {
										missionObj: (msnCreate &msBattleArenaMelee; gSource)
										})
									)
							</Action>

							<Action id="actionBackOut" cancel="1">
								(scrShowScreen gScreen &dsRPGMessage; {
									textID:'descChicken
									nextScreen:'Main
									})
							</Action>
						</Actions>
					</FirstFight>

					<StillFighting descID="descStillFighting">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</StillFighting>
					
					<CheckDraw>
						<OnPaneInit>
							(block (
								(theMission (msnFind gSource "Pa +arenaCombat;"))
								(opponentObj (objGetObjByID (msnGetData theMission 'opponentID)))
								)
								;	Enemy stops attacking
								(shpOrderImmediate opponentObj 'wait)

								;	Description
								(scrSetDescTranslate gScreen 'descDrawOrNot)
								)
						</OnPaneInit>
						
						<Actions>
							<Action id="actionDrawYes" default="1">
								(block (
									(theMission (msnFind gSource "aSP +arenaCombat;"))
									(opponentObj (objGetObjByID (msnGetData theMission 'opponentID)))
									)
									;	The match is over
									(shpCancelOrder opponentObj)
									(msnFailure theMission 'draw)
									(msnSetProperty theMission 'isDebriefed True)

									;	Katami debrief
									(scrShowPane gScreen 'GladiatorDraw)
									)
							</Action>
							
							<Action id="actionDrawNo" cancel="1">
								(block (
									(theMission (msnFind gSource "aSP +arenaCombat;"))
									(opponentObj (objGetObjByID (msnGetData theMission 'opponentID)))
									)
									;	Attack continues
									(shpCancelOrder opponentObj)

									;	Done
									(scrExitScreen gScreen)
									)
							</Action>
						</Actions>
					</CheckDraw>

					<PlayerLeft descID="descPlayerLeft">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</PlayerLeft>
				</Panes>
			</Main>
		</DockScreens>
		
		<Language>
			<Text id="actionGladiatorsQuarters">[G]ladiators' Quarters</Text>
			<Text id="actionDrawYes">[A]ccept a Draw</Text>
			<Text id="actionDrawNo">[C]ontinue Fighting</Text>
			<Text id="actionSign">[S]ign</Text>
			<Text id="actionBackOut">[B]ack Out</Text>
			<Text id="actionFight">[F]ight!</Text>
			
			<Text id="descWelcome">

				Welcome to Battle Arena Maximus! Prepare yourself for the greatest show in space!
				Watch as the best pilots in the Commonwealth compete in mortal combat. The action
				is so real you'll swear it's faked! See your ticket agent for reservations.
				Enquire within to join the elite combatants.

			</Text>
			<Text id="descDrawOrNot">

				An Arena official looks at the battle metrics:
					
				"The crowd is bored and you've officially passed the minimum battle time.
				Do you want to declare a draw?"

			</Text>
			<Text id="descGladiatorDraw">

				Mr. Katami looks disappointed:
					
				"I knew that opponent would be hard to defeat!
				But you survived and now we can learn from our mistake. Perhaps you need to
				upgrade your weapons."

			</Text>
			<Text id="descNoMoreGladiators">

				Katami looks disappointed:

				"I'm sorry, but I was not able to teach you properly. The crowd 
				no longer wants to see you fight."

			</Text>
			<Text id="descFirstFight">

				"Welcome, citizen! You are about to join an elite group of men and women who
				have conquered their fears and proven their courage and skills in the ultimate
				test&#x97;mortal combat."
				
				"All that remains is for you to sign this minor release indemnifying the
				Maximus Corporation against any liability in the event of harm, death, etc."

			</Text>
			<String id="descChicken">

				"This kind of challenge is not for the weak and fearful. You are wise to decline."

			</String>
			<Text id="descNoMoreMelees">

				"I'm sorry, you don't have the killer spirit that we need in a gladiator.
				I'm afraid you'll just have to watch the matches on the 3DV like everyone else."

			</Text>
			<Text id="descNoWingmates">

				"If you're going to fight a battle, you'll do it alone! 
				Wingmates and autons must wait outside the arena."
			
			</Text>
			<Text id="descNoIllegalEquipment">

				"You cannot fight with illegal equipment installed. If you want 
				to fight, you'll have to get rid of it."
			
			</Text>
			<Text id="descNoIllegalMissiles">

				"You cannot use illegal missile! You'll have to get rid of them 
				if you want to fight."
			
			</Text>
			<Text id="descNoMilitaryEquipment">

				"Battle Arena rules forbid military equipment. If you want to 
				fight, you'll have to get rid of it."
			
			</Text>
			<Text id="descNoMilitaryMissiles">

				"Battle Arena rules forbid use of military-grade missiles.
				You'll have to get rid of them if you want to fight."
			
			</Text>
			<Text id="descNoAutons">

				"Autons are not allowed inside the Battle Arena. You'll have to
				get rid of them if you want to fight."
			
			</Text>
			<Text id="descConfiscateWarning">

				As you enter the Battle Arena, a gladiator grabs your arm:

				"Hey meat, you're not as clever as you think! That crate full of
				banned items is gonna get confiscated before the game.

				"I'd pick it up, unless you want to lose it."
			
			</Text>
			<Text id="descKatamiIntro1">

				As you enter the gladiators' quarters, a short man wearing a simple suit approaches you:
				
				"My name is Mr. Katami and I am prepared to train you. I watched you in the arena.
				You've got skills and a good ship, but that's not enough. You have to be smart, and
				I can teach you how."
				
				"Are you ready?"

			</Text>
			<Text id="descKatamiIntro2">

				"First you must be smart in choosing your opponent. Don't just pick someone
				you can kill easily. Pick a fight the crowd wants to see. Win the crowd and you
				will be a Legendary Hero."
				
				"Are you ready?"

			</Text>
			<String id="descStillFighting">

				"You'll get no help here. Fight your own battles!"

			</String>
			<String id="descPlayerLeft">

				"You're banned from the games for leaving the arena in the middle of battle!"
			
			</String>
			<Text id="descChampion:katami">

				Mr. Katami greets you:

				"It's wonderful to see you again! Let's talk about the old times at the Arena."

			</Text>
			<Text id="descChampion:empty">

				The gladiators' quarters feels cold and empty without Mr. Katami.

			</Text>
			<Text id="descLoser:katami">

				Mr. Katami greets you:

				"It's good to see you again. I'm training someone new now.
				Hopefully they won't disappoint me."

			</Text>
			<Text id="descLoser:empty">

				The gladiators' quarters feels cold and empty without Mr. Katami.

			</Text>

			<Text id="gladiator:novice:1">%gladiator% is a young gladiator from %home%.</Text>
			<Text id="gladiator:novice:2">%gladiator% flies a %ship%.</Text>
			<Text id="gladiator:novice:3">%gladiator% is a novice pilot flying a beautiful %ship%.</Text>
			<Text id="gladiator:champion:1">%gladiator% is a former Champion from %home%.</Text>
			<Text id="gladiator:champion:2">The battle-hardened pilot known as %gladiator% will give you the fight of your life!</Text>
			<Text id="gladiator:champion:3">Death comes quickly when you fight %gladiator%.</Text>

			<Text id="rumor.commonwealthHabitat.weapon1">
				"What's your favorite weapon? Personally I favor the AK505 Ballista. It's
				a monster and it will kill a lot of ships with a single punch. When I hit
				something, I want it to go down, you know what I mean?"
			</Text>
			<Text id="rumor.commonwealthHabitat.weapon2">
				"What's your favorite weapon? Personally I favor a particle beam weapon.
				The latest tech is always going to win in the end. You have to keep up
				with technology or you're just another wreck in the Arena."
			</Text>
			<Text id="rumor.commonwealthHabitat.weapon3">
				"What's your favorite weapon? Personally I favor an omni turbolaser. I say
				a computer can hit a target way better than I can, so why not take
				advantage of that? By the time your opponent has lined up his BFG, you've
				already hit him five times!"
			</Text>
			<Text id="rumor.commonwealthHabitat.weapon4">
				"What's your favorite weapon? Personally I favor a slam cannon, enhanced
				if possible. There's nothing better than the thump-thump sounds of a slam
				cannon hitting your enemy's plasteel!"
			</Text>
			<Text id="rumor.commonwealthHabitat.weapon5">
				"What's your favorite weapon? Personally I favor the RK15 Partisan turret.
				Sure, the wimpy omniturbo is a little faster, but I wanna hit my targets
				with a punch, not shine a damn light in their eyes."
			</Text>
			<Text id="rumor.commonwealthHabitat.shield1">
				"So what kind of shields you got? I think a lot of gladiators underestimate
				how important shields are. Even a good monopole deflector is better than
				nothing. I'd enhance the crap out of it, though."
			</Text>
			<Text id="rumor.commonwealthHabitat.shield2">
				"So what kind of shields you got? I think a lot of gladiators underestimate
				how important shields are. The Cyclotron series are my choice at the moment.
				The S55 has more protection than a class III; better yet, get the S1200."
			</Text>
			<Text id="rumor.commonwealthHabitat.shield3">
				"So what kind of shields you got? I think a lot of gladiators underestimate
				how important shields are. If you can afford the Ceratops series then go for
				it. They're the best against missiles anyway, which is what you're gonna get
				hit with in the Arena."
			</Text>
			<String id="rumor.commonwealthContainer.1">
				"The Slicer is the champion of the Arena! No one has been able to defeat him."
			</String>
			<Text id="rumor.commonwealthContainer.2">
				"I don't watch the Arena games anymore; the Black Market has totally
				infiltrated the show and all the fights are rigged now."
			</Text>
			<Text id="rumor.commonwealthContainer.3">
				"I remember watching Kate Morgental fight in the Arena. She put on a great
				show! I don't know what happened to her; probably working for her father now."
			</Text>
			<Text id="rumor.commonwealthContainer.4">
				"Let me tell you a secret about fighting in the Arena: load up with missiles.
				Who cares about beams and whatnot; a good missile will cut through armor like
				a knife through Salmonite!"
			</Text>

			<Text id="msgBooAuton">The crowd boos you for deploying an auton</Text>
			<Text id="msgBooMilitaryMissile">The crowd boos you for using banned missiles</Text>

			<Text id="achievement.arena.gladiator">Became a gladiator in the Arena</Text>
			<Text id="achievement.arena.challenger">Earned the right to challenge The Slicer in the Arena</Text>
			<Text id="achievement.arena.champion">Became Legendary Hero of the Arena</Text>
			<Text id="achievement.arena.loser">Defeated by The Slicer in the Arena</Text>
			<Text id="achievement.arena.washout">Disappointed Mr. Katami</Text>

			<Text id="achievement.katami.betrayed">Betrayed Mr. Katami</Text>
			<Text id="achievement.katami.rescued">Rescued Mr. Katami from the Black Market</Text>
			<Text id="achievement.katami.dead">Failed to save Mr. Katami</Text>

			<Text id="rpg.missionTypeDesc">Gladiator fights</Text>

			<Text id="core.mapDescMain">
				Gladiatorial combat
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stBattleArenaStatic;"
			name=				"(arena wall segment)"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baBattleArenaSegment;"
				 
			attributes=			"battleArenaSegment"

			barrier=			"true"
			barrierEffect=		"&efBattleArenaWallHit;"
			immutable=			"true"

			noMapLabel=			"true"
			>

		<ImageVariants>
			<Image			imageID="&rsBattleArenaSegments;" imageX="0"    imageY="0"    imageWidth="350" imageHeight="220"/>	<!-- 0 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="350"  imageY="0"    imageWidth="270" imageHeight="270"/>	<!-- 1 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="620"  imageY="0"    imageWidth="250" imageHeight="240"/>	<!-- 2 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="870"  imageY="0"    imageWidth="370" imageHeight="270"/>	<!-- 3 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="1560" imageY="0"    imageWidth="370" imageHeight="270"/>	<!-- 4 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="1930" imageY="0"    imageWidth="250" imageHeight="240"/>	<!-- 5 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="2180" imageY="0"    imageWidth="270" imageHeight="270"/>	<!-- 6 -->
			
			<Image			imageID="&rsBattleArenaSegments;" imageX="0"    imageY="280"  imageWidth="270" imageHeight="270"/>	<!-- 7 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="270"  imageY="280"  imageWidth="270" imageHeight="270"/>	<!-- 8 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="540"  imageY="280"  imageWidth="270" imageHeight="270"/>	<!-- 9 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="810"  imageY="280"  imageWidth="270" imageHeight="270"/>	<!-- 10 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="1080" imageY="280"  imageWidth="270" imageHeight="270"/>	<!-- 11 -->
			
			<Image			imageID="&rsBattleArenaSegments;" imageX="1450" imageY="280"  imageWidth="270" imageHeight="270"/>	<!-- 12 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="1720" imageY="280"  imageWidth="270" imageHeight="270"/>	<!-- 13 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="1990" imageY="280"  imageWidth="270" imageHeight="270"/>	<!-- 14 -->
			
			<Image			imageID="&rsBattleArenaSegments;" imageX="0"    imageY="550"  imageWidth="240" imageHeight="200"/>	<!-- 15 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="240"  imageY="550"  imageWidth="240" imageHeight="200"/>	<!-- 16 -->
			
			<Image			imageID="&rsBattleArenaSegments;" imageX="1450" imageY="550"  imageWidth="350" imageHeight="220"/>	<!-- 17 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="1800" imageY="550"  imageWidth="270" imageHeight="270"/>	<!-- 18 -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="2070" imageY="550"  imageWidth="270" imageHeight="270"/>	<!-- 19 -->
			
			<Image			imageID="&rsBattleArenaSegments;" imageX="480"  imageY="550"  imageWidth="480" imageHeight="440"/>	<!-- 20: Closed Door -->
			<Image			imageID="&rsBattleArenaSegments;" imageX="960"  imageY="550"  imageWidth="480" imageHeight="440"/>	<!-- 21: Open Door -->
		</ImageVariants>

	</StationType>
<StationType UNID="&stRigelAureliusStar;"
		name=				"(G class star)"
		scale=				"star"
		sovereign=			"&svNeutral;"
		spaceColor=			"#66664c"
		maxLightRadius=		"300"

		attributes=			"generic, star"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"490"
					intensity=		"25"
					primaryColor=	"#ffffbf"
					secondaryColor=	"#ffffbf"
					/>
		</ImageEffect>
	</StationType>
<!-- BattleArenaChallenger.xml -->
<!-- BattleArenaFight.xml -->
<!-- BattleArenaGladiators.xml -->
<!-- BattleArenaKidnapped.xml -->
<!-- BattleArenaMelee.xml -->
<!-- Benedict.xml -->
<!-- Benedict00.xml -->
<!-- Benedict01.xml -->
<!-- Benedict02.xml -->
<!-- Benedict04.xml -->
<!-- Benedict05.xml -->
<!-- Benedict05A.xml -->
<StationType UNID="&stHandOfSolaceWreck;"
			name=				"wreck of the Hand of Solace"
			sovereign=			"&svNeutral;"
				 
			attributes=			"shipwreck, sistersOfDomina, uncharted"
				 
			dockScreen=			"Main"
				 
			scale=				"ship"
				 
			ejectaType=			"&vtWreckEjecta;"
				 
			definiteArticle=	"true"
			>
		
		<!-- Image and Effects -->
		
		<ImageShipwreck class="&scHandOfDomina;"/>

		<DockingPorts
				portCount=		"6"
				portRadius=		"48"
				maxDist=		"3"
				/>
		
		<!-- Dock Screen -->
		
		<DockScreens>
			<Main>
				<OnScreenInit>
					(block (
						(missionObj (@ (msnFind "a +unid:&msFindHandOfSolace;;") 0))
						(sandovalObj (objGetObjByID (msnGetData missionObj 'sandovalID)))
						)
						(switch
							;	If no mission object, then go to standard loot screen
							
							(not missionObj)
								(scrShowScreen gScreen &dsAbandonedShip;)
								
							;	If Sandoval is dead, we go to special text without Sandoval
							;	[This can't happen because the mission fails if Sandoval is dead.]
							
							(not sandovalObj)
								(scrSetData gScreen 'dialogTree 'dlgBenedictAlone)
								
							;	If Sandoval has not yet docked, then wait for him
							
							(!= (objGetProperty sandovalObj 'dockedAtID) (objGetID gSource))
								(scrSetData gScreen 'dialogTree 'dlgWaitForSandoval)
							
							;	Otherwise, we go to the normal screen
						
							(scrSetData gScreen 'dialogTree 'dlgHandOfSolace)
							)
						)
				</OnScreenInit>
				
				<Panes>
					<Default>
						<OnPaneInit>
							(rpgPagePaneInit gScreen (objTranslate gSource (scrGetData gScreen 'dialogTree)))
						</OnPaneInit>
					</Default>
				</Panes>
			</Main>
		</DockScreens>
		
		<!-- Events and Data -->
		
		<Events>
		</Events>

		<Language>
			<Text id="dlgHandOfSolace">
				(list
					{
						descID: 'textHoS1
						labelID: 'actionHoS1
						}
					{
						descID: 'textHoS2
						}
					{
						descID: 'textHoS3
						labelID: 'actionHoS3
						}
					{
						descID: 'textHoS4
						labelID: 'actionHoS4
						}
					{
						descID: 'textHoS5
						labelID: 'actionHoS5
						}
					{
						descID: 'textHoS6
						labelID: 'actionHoS6
						}
					{
						descID: 'textHoS7
						labelID: 'actionHoS7
						}
					{
						descID: 'textHoS8
							
						code: (lambda ()
							(block (
								(missionObj (@ (msnFind "a +unid:&msFindHandOfSolace;;") 0))
								)
								(msnFireEvent missionObj 'OnDataAcquired)
								)
							)
						}
					)
			</Text>
			<Text id="dlgWaitForSandoval">
				(list
					{
						descID: 'textWaitForSandoval1
						nextPage: 'forceUndock
						}
					)
			</Text>
			<Text id="textWaitForSandoval1">

				You decide to wait for Sandoval.
			
			</Text>
			<Text id="dlgBenedictAlone">
				(list
					{
						descID: 'textBenedictAlone1
							
						code: (lambda ()
							(block (
								(missionObj (@ (msnFind "a +unid:&msFindHandOfSolace;;") 0))
								)
								(msnFireEvent missionObj 'OnDataAcquired)
								)
							)
						}
					)
			</Text>
			<Text id="textBenedictAlone1">

				Benedict pulls some data our of the propulsion system.
				
				"Sandoval is dead, so it's just the two of us. I'll take this
				data to Sanctuary. Meet me there!"
			
			</Text>

			<Text id="textHoS1">
			
				You board the medical ship behind Sandoval and are immediately 
				confronted by an armored figure. He opens his helmet.
							
				It's Benedict.

			</Text>
			<String id="actionHoS1">"[W]hat are you doing here?"</String>
			<Text id="textHoS2">
			
				"Fiona was attacked before she could find this wreck. This is 
				what they were trying to keep her from seeing."
							
				He looks at Sandoval, arm cannon ready.
							
				"But I guess you already know that. Hello, Sandoval."

			</Text>
			<Text id="textHoS3">
			
				Sandoval nods with a smirk and casually shows his empty hands.
							
				"I'm impressed, Benedict. I guess you're not just a mindless gun."

			</Text>
			<String id="actionHoS3">"[D]id you find anything?"</String>
			<Text id="textHoS4">
			
				"No. Everything's been wiped: computers, logs, comms records.
				Everything.
							
				"There was definite fighting. The hull's covered in laser scars
				and blast damage. The reactor's scrammed and useless. No bodies,
				of course. Everything's clean."

			</Text>
			<String id="actionHoS4">"[S]o that's it?"</String>
			<Text id="textHoS5">
			
				Sandoval turns towards him, "What about propulsion?"
							
				Benedict shakes his head, "Dead. Everything's vented..."
							
				"The firmware!" interrupts Sandoval, "The black-box! Is it still
				sealed?"

			</Text>
			<String id="actionHoS5">"[T]he what?"</String>
			<Text id="textHoS6">

				Sandoval's magnetic boots clang as he runs to the aft 
				compartments. You and Benedict follow.
							
				"The drive system logs all acceleration events for servicing and
				maintenance!" says Sandoval. "We can use the data to reconstruct
				the ship's course. That might tell us something."
			
			</Text>
			<String id="actionHoS6">"[I]f they didn't wipe it."</String>
			<Text id="textHoS7">
			
				Sandoval plugs into the drive system and downloads its data.
							
				"It looks OK. I can't reconstruct it here, but I'll take it back 
				to Fiona and we can plot a path.
							
				"Thanks for your help, %name%. I'll tell Fiona you said hi."

			</Text>
			<String id="actionHoS7">"[G]ood luck!"</String>
			<Text id="textHoS8">
			
				Benedict is about to interject, but stops himself. He looks 
				deflated.
							
				Sandoval shakes his head and smiles, "Don't look like a lost 
				little microsaur! Here, take a copy of the data and do your own
				analysis. We'll share what we find. Deal?"
							
				Benedict grunts a thank you to Sandoval. He nods to you, "I'm 
				heading towards Sanctuary. Maybe we'll meet again!"

			</Text>
		</Language>
	</StationType>
<!-- Benedict06.xml -->
<!-- Benedict07.xml -->
<!-- Benedict08.xml -->
<!-- BenedictStoryArc.xml -->
<!-- BlackMarket.xml -->
<StationType UNID="&stBlackMarketStation;"
			name=				"Black Market station"
			sovereign=			"&svBlackMarket;"
			inherit=			"&baBlackMarketStation;"

			attributes=			"blackMarket, blackMarketMissions, friendly, envEarth, envAvoidsAir, generic, human, majorStation, outlaws, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			armorID=			"&itBlastPlate;"
			hitPoints=			"320"
			multiHull=			"true"
			regen=			    "6"
			fireRateAdj=		"20"
				 
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"-uccu v---- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"

				unique=					"inSystem"
				/>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="m +illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="100" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="m +military; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="100" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU +Illegal; -ID; -NotForSale;"	priceAdj="110"/>
			<Sell	criteria="*NU -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="*NU +Illegal; -ID; -NotForSale;"	priceAdj="85"/>
			<Buy	criteria="*NU +military; -ID -NotForSale;"		priceAdj="90"/>
			<Buy	criteria="*NU +Illegal; -ID;"				priceAdj="10"/>
			<Buy	criteria="*NU +military; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-6;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-6;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-6;" priceAdj="100"/>
			<InstallDevice	criteria="d +Illegal; L:1-8" priceAdj="100"	upgradeInstallOnly="true"/>
			<InstallDevice	criteria="d +Military; L:1-8" priceAdj="100"	upgradeInstallOnly="true"/>
			<RemoveDevice	criteria="d L:1-8;" priceAdj="100" upgradeInstallOnly="true"/>
			
			<InstallDevice	criteria="d L:1-8;" priceAdj="unavailable"	messageID="descNoInstall"/>
		</Trade>
		
		<Items>
			<RandomItem count="1d4"
					criteria=		"c L:1-8; +illegal; -notForSale; -notStandard;"
					levelFrequency=	"systemLevel:rrrru|c|cur"
					/>
			<RandomItem count="6d12" 
					criteria=		"t +consumerGood; +illegal;"
					levelFrequency=	"systemLevel:ruc|c|cur"
					/>
			<RandomItem count="4d4" 
					criteria=		"* +illegal; -consumerGood; -id;"
					levelFrequency=	"systemLevel:ruc|c|cur"
					/>
			<RandomItem count="2d4" 
					criteria=		"* +military;"
					levelFrequency=	"systemLevel:ru|c|crv"
					/>
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itSlamCannon;"	posAngle="60"   posRadius="60"	posZ="35"	fireAngle="60"   fireArc="120" />
			<Device deviceID="&itSlamCannon;"	posAngle="150"  posRadius="60"	posZ="35"	fireAngle="150"  fireArc="120" />
			<Device deviceID="&itSlamCannon;"	posAngle="-30"  posRadius="60"	posZ="35"	fireAngle="-30"  fireArc="120" />
			<Device deviceID="&itSlamCannon;"	posAngle="-120" posRadius="60"	posZ="35"	fireAngle="-120" fireArc="120" />

			<Device deviceID="&itArbalestCannon;"	posAngle="15"  posRadius="110" posZ="10"		fireAngle="15"   fireArc="180"	missileDefense="true" />
			<Device deviceID="&itArbalestCannon;"	posAngle="105" posRadius="110" posZ="10"		fireAngle="105"  fireArc="180"	missileDefense="true" />
			<Device deviceID="&itArbalestCannon;"	posAngle="195" posRadius="110" posZ="10"		fireAngle="195"  fireArc="180"	missileDefense="true" />
			<Device deviceID="&itArbalestCannon;"	posAngle="285" posRadius="110" posZ="10"		fireAngle="285"  fireArc="180"	missileDefense="true" />
		</Devices>

		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="1"		table="&tbBlackMarketBountyHunters;"/>
			<Lookup count="1d3+1"	table="&tbBlackMarketShips;"/>
		</Ships>

		<Reinforcements minShips="4">
			<Table>
				<Lookup chance="50" count="1"		table="&tbBlackMarketBountyHunters;"/>
				<Lookup chance="50"	count="1d2"		table="&tbBlackMarketShips;"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->
		
		<Image			imageID="&rsBlackMarketStation;" imageWidth="230" imageHeight="230" viewportRatio="0.035"/>

		<DockingPorts
				portAngle=		"15"
				portCount=		"8"
				portRadius=		"140"
				/>
		
		<!-- Dock Screen -->
		
		<DockScreens>
			<Main>
				<Display type="detailsPane">
					<OnDisplayInit>
						(typTranslate &unidBlackMarketMember; 'rankDetails)
					</OnDisplayInit>
				</Display>

				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionTalk">
								(scrShowScreen gScreen &dsBlackMarketBoss;)
							</Action>

							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->
		
		<Events>
			<GetRumors>
				(append
					(rpgRumorAdd 'commonwealthPub Nil 31 'scan)
					(rpgRumorAdd 'corporateHotel Nil 21 'scan)
					)
			</GetRumors>

			<GetGlobalRumors>
				(append
					(if (and (= (objGetType (@ gData 'stationObj)) &stHotel;)
							(not (objGetData (@ gData 'stationObj) 'blackMarket.locationRumor))
							(gr (typ@ &unidBlackMarketMember; 'xp) 0)
							)
						(block (
							(otherStations (unvFindObject "TU +blackMarketMissions;"))
							(nearestEntry (map otherStations '(reduceMin original) theEntry
								(sysGetTopologyDistance (sysGetNode) (@ theEntry 2))
								))
							)
							(if nearestEntry {
								attributes: 'corporateHotel
								priority: 16
								textID: (cat 'rumor.corporateHotel.far (random 1 3))
								data: {
									systemName: (sysGetName (@ nearestEntry 2))
									objectName: (fmtNoun (@ nearestEntry 3) (@ nearestEntry 4) 1 'article)
									}
								onExitRumor: (lambda (theRumor)
									(block ()
										(sysSetKnown (@ nearestEntry 2) True)
										(unvSetObjectKnown (@ nearestEntry 2) "T +blackMarketMissions;" True)
										(objSetData (@ theRumor 'stationObj) 'blackMarket.locationRumor True)
										)
									)
								})
							)
						)
					)
			</GetGlobalRumors>
		</Events>
		
		<StaticData>
			<Data id="blackMarket.deployBountyHunters">True</Data>
			
			<Data id="blackMarket.destroyPenalty">250000</Data>
			<Data id="blackMarket.destroyBountyHunters">(random 1 3)</Data>
		</StaticData>
		
		<Language>
			<Text id="descNoInstall">

				We only install illegal or military equipment. We won't install 
				%itemName% on your ship.

			</Text>
			<Text id="dockServices:installAbility">

				We install illegal or military equipment up to tech level %maxLevel%.

			</Text>
			<Text id="rpg.stationWillNotBuy">

				%StationName% buys illegal and military items. We are not 
				interested in buying %itemName%.

			</Text>

			<Text id="rumor.commonwealthPub">

				A woman dressed in a fancy neolinen suit talks to you:

				"Do you know how to get a contact at the Black Market station?
				You look like you might know."

				You spend 5 credits on drinks.

			</Text>
			<Text id="rumor.corporateHotel">

				You sit at the bar next to a hotel employee. He tells you about
				his job:

				"Business has been good since the Black Market station opened
				up. We get a lot of customers from there. They come in to do 
				deals with various groups: outlaws, smugglers, even some 
				corporate types."
			
			</Text>
			<Text id="rumor.corporateHotel.far1">

				You sit at the bar next to a pilot. He tells you about 
				%objectName% in the %systemName% system:

				"I tell you, they got all the Martian nori you could ask for."
			
			</Text>
			<Text id="rumor.corporateHotel.far2">

				You sit at the bar next to a older woman. She tells you that her
				daughter joined %objectName% in the %systemName% system:

				"I hear from her every six month or so. She sounds fine but I
				can tell that she's scared. I don't know if I'll ever see her
				again."
			
			</Text>
			<Text id="rumor.corporateHotel.far3">

				You sit at the bar next to a freighter pilot. He tells you about
				%objectName% in the %systemName% system:

				"I used to fly for Korolov, but I'm getting paid almost double 
				by the Black Market. It's only a little bit more dangerous."
			
			</Text>

			<Text id="core.mapDesc">

				Refuels up to level 6 &mdash;
				Repairs/installs armor up to level 6 &mdash;
				Installs purchased devices up to level 8 &mdash;
				Buys and sells illegal and military items

			</Text>
			<Code id="rpg.statusDetails">
				(typTranslate &unidBlackMarketMember; 'rankDetails)
			</Code>
		</Language>
	</StationType>
<StationType UNID="&stBlackMarketShipyard;"
			name=				"Black Market shipyard"
			sovereign=			"&svBlackMarket;"
			inherit=			"&baBlackMarketStation;"
				 
			attributes=			"blackMarket, blackMarketMissions, envEarth, majorStation, envAvoidsAir, friendly, generic, human, outlaws, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			armorID=			"&itBlastPlate;"
			hitPoints=			"1100"
			multiHull=			"true"
			regen=			    "11"
			shipRegen=			"11"
			fireRateAdj=		"20"
				 
			explosionType=		"&vtBlastExplosion4;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Properties>
			<Constant		id="rpg.shipBrokerCriteria">"s +systemLevel:0-2; +blackMarket; -notStandard; +shipBroker;"</Constant>
			<DynamicData	id="rpg.shipBrokerInventory">(rpgGetShipInventory gSource)</DynamicData>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"---uc crr-- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"

				unique=					"inSystem"
				/>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="m +illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="m +military; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU +Illegal; -ID; -NotForSale;"	priceAdj="110"/>
			<Sell	criteria="*NU -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="*NU +Illegal; -ID; -NotForSale;"	priceAdj="85"/>
			<Buy	criteria="*NU +military; -ID -NotForSale;"		priceAdj="90"/>
			<Buy	criteria="*NU +Illegal; -ID;"				priceAdj="10"/>
			<Buy	criteria="*NU +military; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-7;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-9;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-9;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-9;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-9;" priceAdj="100"/>

			<SellShip		criteria="s -notForSale;" priceAdj="100"/>
			<BuyShip		criteria="s L:1-10; -notForSale;" priceAdj="80"/>
		</Trade>
			
		<Items>
			<RandomItem count="1d4"
					criteria=		"c L:1-9; +illegal; -notForSale; -notStandard;"
					levelFrequency=	"systemLevel:rrrru|c|cur"
					/>
			<RandomItem count="1d4"
					criteria=		"r L:5-9; -notForSale; -notStandard;"
					levelFrequency="systemLevel:ru|c|curv"
					/>
			
			<RandomItem count="6d12" 
					criteria=		"t +consumerGood; +illegal;"
					levelFrequency=	"systemLevel:ruc|c|cur"
					/>
			<RandomItem count="4d4" 
					criteria=		"* +illegal; -consumerGood; -id;"
					levelFrequency=	"systemLevel:ruc|c|cur"
					/>
			<RandomItem count="4d4" 
					criteria=		"* +military;"
					levelFrequency=	"systemLevel:ru|c|crv"
					/>
			
			<Item count="20d20"		item="&it800HexageneMAG;" />
			<Item count="20d20"		item="&itZG24ClusterMAG;" />
			<Item count="20d20"		item="&itDragonflyCartridge;" />
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itSlamCannon;"	posAngle="15"   posRadius="60"	posZ="30"	fireAngle="15"   fireArc="180" />
			<Device deviceID="&itSlamCannon;"	posAngle="105"  posRadius="60"	posZ="30"	fireAngle="105"  fireArc="180" />
			<Device deviceID="&itSlamCannon;"	posAngle="195"  posRadius="60"	posZ="30"	fireAngle="195"  fireArc="180" />
			<Device deviceID="&itSlamCannon;"	posAngle="285"  posRadius="60"	posZ="30"	fireAngle="285"  fireArc="180" />

			<Device deviceID="&itArbalestCannon;"	posAngle="15"  posRadius="110" posZ="10"		fireAngle="15"   fireArc="180"	missileDefense="true" />
			<Device deviceID="&itArbalestCannon;"	posAngle="105" posRadius="110" posZ="10"		fireAngle="105"  fireArc="180"	missileDefense="true" />
			<Device deviceID="&itArbalestCannon;"	posAngle="195" posRadius="110" posZ="10"		fireAngle="195"  fireArc="180"	missileDefense="true" />
			<Device deviceID="&itArbalestCannon;"	posAngle="285" posRadius="110" posZ="10"		fireAngle="285"  fireArc="180"	missileDefense="true" />
		</Devices>

		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="2"		table="&tbBlackMarketBountyHunters;"/>
			<Lookup count="1d3+1"	table="&tbBlackMarketShips;"/>
		</Ships>

		<Reinforcements minShips="4">
			<Table>
				<Lookup chance="50"	count="1"	table="&tbBlackMarketBountyHunters;"/>
				<Lookup chance="50"	count="1d2"	table="&tbBlackMarketShips;"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->
		
		<Image			imageID="&rsBlackMarketShipyard;" imageWidth="480" imageHeight="480" viewportRatio="0.04625"/>

		<DockingPorts>
			<Port posAngle="-13" posRadius="140" posZ="0"/>
			<Port posAngle="42" posRadius="140" posZ="0"/>
			<Port posAngle="77" posRadius="140" posZ="0"/>
			<Port posAngle="132" posRadius="140" posZ="0"/>

			<Port posAngle="167" posRadius="140" posZ="0"	bringToFront="true"/>
			<Port posAngle="222" posRadius="140" posZ="0"	sendToBack="true"/>
			<Port posAngle="257" posRadius="140" posZ="0"/>
			<Port posAngle="312" posRadius="140" posZ="0"/>
		</DockingPorts>
		
		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Display type="detailsPane">
					<OnDisplayInit>
						(typTranslate &unidBlackMarketMember; 'rankDetails)
					</OnDisplayInit>
				</Display>

				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionTalk">
								(scrShowScreen gScreen &dsBlackMarketBoss;)
							</Action>

							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionBuyShip">
								(scrShowScreen gScreen &dsRPGShipBroker;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>
		
		<!-- Events and Data -->

		<StaticData>
			<Data id="blackMarket.deployBountyHunters">True</Data>
			
			<Data id="blackMarket.destroyPenalty">500000</Data>
			<Data id="blackMarket.destroyBountyHunters">(random 1 5)</Data>
		</StaticData>
		
		<Language>
			<Text id="core.mapDesc">

				Refuels up to level 7 &mdash; Repairs/installs armor up to 
				level 9 &mdash; Installs devices up to level 9 &mdash; Buys and
				sells illegal and military items

			</Text>
			<Text id="rpg.stationWillNotBuy">

				%StationName% buys illegal and military items. We are not 
				interested in buying %itemName%.

			</Text>
			<Code id="rpg.statusDetails">
				(typTranslate &unidBlackMarketMember; 'rankDetails)
			</Code>
		</Language>
	</StationType>
<StationType UNID="&stTempusLab;"
			name=				"tempus lab"
			sovereign=			"&svBlackMarket;"
			inherit=			"&baBlackMarketStation;"
				 
			attributes=			"blackMarket, friendly, envAir, envAvoidsFire, generic, human, outlaws, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"250"
			multiHull=			"true"
			regen=			    "1.3"
				 
			explosionType=		"&vtKineticExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"rcuuu r---- ----- ----- -----"

				locationCriteria=		"--planetary"
				/>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="*NU +Illegal; -ID"	priceAdj="75"/>
		</Trade>

		<Items>
			<RandomItem count="12d12" 
					criteria=		"t +consumerGood; +illegal;"
					levelFrequency=	"systemLevel:ruc|c|cur"
					/>
		</Items>

		<!-- Configuration -->
		
		<!-- Ships and Defenses -->

		<Ships>
			<Lookup count="1"		table="&tbBlackMarketBountyHunters;"/>
			<Lookup count="1d3"		table="&tbBlackMarketShips;"/>
		</Ships>

		<Reinforcements minShips="3">
			<Table>
				<Lookup chance="40" count="1"	table="&tbBlackMarketBountyHunters;"/>
				<Lookup chance="60"	count="1"	table="&tbBlackMarketShips;"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->
		
		<Image			imageID="&rsStations2;" imageX="128" imageY="128" imageWidth="128" imageHeight="128"/>
		
		<DockingPorts>
			<Port x="50"	y="60" />
			<Port x="-80"	y="20" />
			<Port x="-80"	y="-20" />
			<Port x="60"	y="-52" />
			<Port x="20"	y="-80" />
			<Port x="20"	y="80" />
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Display type="detailsPane">
					<OnDisplayInit>
						(typTranslate &unidBlackMarketMember; 'rankDetails)
					</OnDisplayInit>
				</Display>

				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionBuyItems" default="1">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->

		<Events>
			<GetRumors>
				{
					attributes: "commonwealthPub"
					priority: 23
					textID: 'rumor.commonwealthPub
					onExitRumor: (lambda (theRumor) (objSetKnown (@ theRumor 'sourceObj)))
					}
			</GetRumors>
		</Events>

		<StaticData>
			<Data id="blackMarket.destroyPenalty">150000</Data>
		</StaticData>
		
		<Language>
			<Text id="descWelcome">
			
				You are docked at a Tempus manufacturing lab.
				
				The docking bay is guarded by two men with heavy weapons.
				They check you out and then step aside to let you in.

			</Text>
			<Text id="rumor.commonwealthPub">
				A man dressed in an expensive suit talks to you:

				"You look like you need some Tempus."

				You ignore him and spend 5 credits buying your own drinks.
			</Text>

			<Text id="core.mapDesc">
				"Sells illegal items"
			</Text>
			<Code id="rpg.statusDetails">
				(typTranslate &unidBlackMarketMember; 'rankDetails)
			</Code>
		</Language>
	</StationType>
<!-- BlackMarketMember.xml -->
<!-- BlackMarketMission00.xml -->
<!-- BlackMarketMission01.xml -->
<!-- BlackMarketMission02.xml -->
<!-- BlackMarketMissionSmuggle01.xml -->
<!-- BlackMarketPlayerShips.xml -->
<!-- CentauriWarlords.xml -->
<StationType UNID="&stCentauriCamp;"
			name=				"Centauri warlord camp"
			sovereign=			"&svCentauriWarlords;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			armorID=			"&itLightPlasteelPlate;"
			hitPoints=			"50"
			fireRateAdj=		"80"
			explosionType=		"&vtKineticExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"centauriWarlords, enemy, envWater, envAvoidsEarth, generic, human, populated, warlords"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+centauriWarlordsSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"crv-- ----- ----- ----- -----"

				locationCriteria=		"+outerSystem, +planetary"
				/>

		<Image			imageID="&rsCentauriStationsImage;" imageX="24" imageY="0" imageWidth="80" imageHeight="128"/>

		<Devices>
			<Device deviceID="&itCentauriRecoilless;" posAngle="90" posRadius="50" omnidirectional="true"/>
		</Devices>

		<Ships>
			<Table>
				<Ship chance="30"	count="1d4+1"	class="&scCentauriRaider;"			orders="guard"/>
				<Ship chance="60"	count="1d3+2"	class="&scCentauriRaider;"			orders="guard"/>
				<Group chance="10">
					<Ship			count="1d4"	class="&scCentauriRaider;"			orders="guard"/>
					<Ship			count="1"	class="&scCentauriHeavyRaider;"		orders="guard"/>
				</Group>
			</Table>
		</Ships>

		<Items value="standard:level=1:x=0.8">
			<Item	chance="80" count="1d6" item="&itCentauriRice;"/>
			<Lookup	chance="50"				table="&trStdTreasure;"/>
		</Items>

		<Encounters frequency="uncommon">
			<Lookup table="&tbCentauriEncounters;"/>
		</Encounters>

	</StationType>
<StationType UNID="&stCentauriStronghold;"
			name=				"Centauri warlord stronghold"
			sovereign=			"&svCentauriWarlords;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			armorID=			"&itPlasteelPlate;"
			hitPoints=			"90"
			regen=				"1"
			fireRateAdj=		"40"
			explosionType=		"&vtKineticExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"centauriWarlords, enemy, envWater, envAvoidsEarth, generic, human, populated, warlords"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+centauriWarlordsSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"rurv- ----- ----- ----- -----"

				locationCriteria=		"+outerSystem, +planetary"
				/>

		<Image			imageID="&rsCentauriStationsImage;" imageX="24" imageY="0" imageWidth="80" imageHeight="128"/>

		<Devices>
			<Device deviceID="&itCentauriCLAW;"	posAngle="90" posRadius="50" omnidirectional="true"/>
		</Devices>

		<Ships>
			<Table>
				<Ship chance="30"	count="2d4"	class="&scCentauriRaider;"			orders="guard"/>
				<Group chance="60">
					<Ship			count="1d4"	class="&scCentauriRaider;"			orders="guard"/>
					<Ship			count="1"	class="&scCentauriHeavyRaider;"		orders="guard"/>
				</Group>
				<Ship chance="10"	count="2"	class="&scCentauriHeavyRaider;"		orders="guard"/>
			</Table>
		</Ships>

		<Items value="standard:level=2:x=1.3">
			<Item	chance="80" count="2d6" item="&itCentauriRice;"/>
			<Lookup							table="&trStdTreasure;"/>
		</Items>

		<Encounters frequency="common">
			<Lookup table="&tbCentauriEncounters;"/>
		</Encounters>
	</StationType>
<StationType UNID="&stArcoVaughnHabitat;"
			name=				": Arco Vaughn's container habitat"
			sovereign=			"&svCentauriWarlords;"
			
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noFriendlyTarget=	"true"

			level=				"2"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"35"
			ejectaType=			"&vtWreckEjecta;"

			canAttack=			"false"
			attributes=			"arcoVaughn, centauriWarlords, enemy, human, populated, questTarget, uncharted, warlords"
			maxAppearing=		"1"
			>

		<ImageVariants>
			<Image	imageID="&rsCommonwealthSlumsImage;" imageX="0" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsCommonwealthSlumsImage;" imageX="64" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsCommonwealthSlumsImage;" imageX="128" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsCommonwealthSlumsImage;" imageX="192" imageY="128" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Ships>
			<Ship				count="1" class="&scArcoVaughnHeavyRaider;"		orders="patrol" patrolDist="5"/>
		</Ships>

		<Items>
			<Item		chance="80" count="1d6" item="&itCentauriRice;"/>
		</Items>

		<Events>
			<OnAttacked>
				(block (
					(arcoVaughnObj (sysFindObject Nil "sAN +arcoVaughn"))
					)
					(switch
						;	If Arco is dead, nothing to do
						
						(not arcoVaughnObj)
							Nil
							
						;	If arco is already attacking the player, nothing to do.
						
						(= (objGetData arcoVaughnObj 'behavior) 'killPlayer)
							Nil
							
						;	If the attack is not from the player, or if we can't see
						;	the player, then nothing to do
						
						(or (!= aOrderGiver gPlayerShip)
								(not (objCanDetectTarget arcoVaughnObj gPlayerShip))
								)
							Nil

						;	Arco attacks the player
						
						(objFireEvent arcoVaughnObj 'OrderKillPlayer)
						)
					)
			</OnAttacked>
		</Events>

		<DockingPorts>
			<Port x="0"		y="70" />
			<Port x="61"	y="35" />
			<Port x="61"	y="-35" />
			<Port x="0"		y="-70" />
			<Port x="-61"	y="-35" />
			<Port x="-61"	y="35" />
		</DockingPorts>
		
		<Language>
			<Text id="core.abandonedStationDesc">

				You are docked at the lifeless ruins of a container habitat. 
				This makeshift station has been recently occupied by a band of Centauri warlords.

			</Text>
		</Language>

	</StationType>
<StationType UNID="&stCentauriSettlement;"
			name=				"Centauri warlord settlement"
			sovereign=			"&svCentauriWarlordCivilians;"
			inherit=			"&unidCommonText;"

			attributes=			"centauriWarlords, enemy, envWater, envAvoidsEarth, generic, human, noPlayerResurrect, populated, warlords"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			armorID=			"&itPlasteelPlate;"
			hitPoints=			"250"
			regen=				"2"
			fireRateAdj=		"40"
			explosionType=		"&vtKineticExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Properties>
			<Definition	id="rpg.checkRadioactive">True</Definition>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+centauriWarlordsSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"vrur- ----- ----- ----- -----"

				locationCriteria=		"+outerSystem, +planetary"
				unique=					"inSystem"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="* +unid:&itCentauriRice;;"		priceAdj="90"/>
			<Sell	criteria="*NU -illegal; -id; -notForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -notForSale;"				priceAdj="50"/>
			<Buy	criteria="* +unid:&itCentauriRice;"			priceAdj="80"/>
			<Buy	criteria="*NU +centauriWarlord"				priceAdj="80"/>
			<Buy	criteria="*NU -id; -notForSale;"			priceAdj="90"/>
			<Buy	criteria="*NU -id;"							priceAdj="10"/>
		</Trade>
		
		<Items>
			<RandomItem count="3-5" 
					criteria=		"* L:1-5; +centauriWarlords -notForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="1-3" 
					criteria=		"*~adm -alien; -defective; -military; -specialty; -notStandard; -notForSale;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>

			<Item	count="8d6" item="&itCentauriRice;"/>
		</Items>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itCentauriCLAW;"	posAngle="90" posRadius="34" omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships>
			<LevelTable count="3-5">
				<Ship levelFrequency="uuurr -----" count="1" class="&scBorer;" orders="gateOnThreat"/>
				<Ship levelFrequency="cccrr -----" count="1" class="&scIAVLight;" orders="gateOnThreat"/>
				<Ship levelFrequency="-rrcc -----" count="1" class="&scIAVMedium;" orders="gateOnThreat"/>
			</LevelTable>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsCentauriSettlement;" imageWidth="186" imageHeight="186" viewportRatio="0.025"/>

		<DockingPorts
				portAngle=		"15"
				portCount=		"8"
				portRadius=		"120"
				/>

		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionCommoditiesExchange">
								(if (typ@ &svCentauriWarlordCivilians; 'playerCanTrade)
									(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
									(scrShowScreen gScreen &dsRPGMessage; { textID: 'descNoTrade })
									)
							</Action>

							<Action id="actionUndock" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Behavior -->

		<Encounters frequency="common">
			<Lookup table="&tbCentauriEncounters;"/>
		</Encounters>

		<Events>
			<OnDestroy>
				(block ()
					;	If a settlement is destroyed by the player, then all 
					;	settlements become hostile.

					(if (and gPlayerShip (= aOrderGiver gPlayerShip))
						(typFireEvent &svCentauriWarlordCivilians; 'OrderSetPlayerIsEnemy)
						)

					;	Destroy items on the station because we don't want too 
					;	much loot

					(rpgDestroyItems gSource)
					)
			</OnDestroy>
		</Events>

		<Language>
			<Text id="descWelcome">
				(switch
					(typ@ &svCentauriWarlordCivilians; 'playerCanTrade)
						(scrTranslate gScreen 'descWelcome.trade)

					(scrTranslate gScreen 'descWelcome.default)
					)
			</Text>
			<Text id="descWelcome.trade">

				You enter a narrow docking bay that leads to a warren of 
				corridors. People in work gear and pressure suits wander the
				station on various errands.

				A couple of merchants approach you:

				"Welcome! Welcome! We're happy to trade with you. Come in and 
				buy what you want."

				A group of armed men in dirty uniforms keep watch, but they do
				not interfere.

			</Text>
			<Text id="descWelcome.default">

				You enter a narrow docking bay that leads to a warren of 
				corridors. People in work gear and pressure suits wander the
				station on various errands.
				
				A group of armed men in dirty uniforms keep watch. They eye you
				warily and follow discreetly behind you.
			
			</Text>
			<Text id="descNoTrade">

				Armed men stop you from entering:

				"I think you're lost, %boy%. No one wants to trade with you 
				here."

			</Text>
			<Text id="core.cannotDecon">
				
				Armed men stop you from entering:
				
				"Get off our dock, %boy%, you're too hot!"
				
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stCentauriOccupation;"
			name=				"occupied Commonwealth habitat"
			sovereign=			"&svCommonwealth;"
			controllingSovereign="&svCentauriWarlords;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"centauriWarlords, enemy, envWater, envAvoidsEarth, human, occupation, populated"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			allowEnemyDocking=	"true"

			level=				"4"
			size=				"160"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"150"
			multiHull=			"true"
			regen=              "1"

			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Names noArticle="true">Arenius Habitat; Baja Habitat; Clearspace Station; Durin Habitat;
				Earthnight Habitat; Fairmoon Settlement; Greenfield Habitat;
				Hector Habitat; Ionfalls Habitat; Jovian Clouds Settlement; Keller Station;
				Lama Habitat; Murchenson Settlement; Nightfall Habitat; Oort Settlement;
				Pallas Station; Queequeg Habitat; Radiant Settlement; Star's End Station;
				Terra Ex Habitat; Uriel Station; Venuslight Habitat; Weathermoon Habitat
		</Names>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"+commonwealthCore;"
				levelFrequency=			"uuv-- ----- ----- ----- -----"

				locationCriteria=		"+planetary"
				exclusionRadius=		"50"
				/>

		<!-- Trade and Items -->

		<Items>
			<Table>
				<Item chance="90"	count="1d8" item="&itCentauriRice;"/>
				<Item chance="5"	count="3d6" item="&itNaturalPeriweed;"/>
				<Item chance="5"	count="1d6" item="&itHogeiSalmon;"/>
			</Table>
		</Items>

		<!-- Ships and Defenses -->

		<Ships>
			<Ship count="1d4+1"	class="&scCentauriRaider;"	orders="guard"	sovereign="&svCentauriWarlords;"/>
		</Ships>

		<!-- Image and Effects -->

		<Image		imageID="&rsCommonwealthHabitat;" imageWidth="170" imageHeight="240" viewportRatio="0.02125"/>

		<DockingPorts
				portCount=		"8"
				portRadius=		"100"
				/>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<InitialPane>
					(switch
						(objGetData gSource "Liberated")
							"Default"

						(sysFindObject gSource "sA O:guard;")
							"Hiding"

						(objGetData gSource "LiberatedByPlayer")
							"Welcome1"

						"LiberatedByOther"
						)
				</InitialPane>

				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action name="Undock" default="1" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<Hiding descID="descHiding">
						<Actions>
							<Action name="Undock" default="1" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Hiding>

					<LiberatedByOther descID="descLiberatedByOther">
						<Actions>
							<Action name="Undock" default="1" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</LiberatedByOther>

					<Welcome1 descID="descWelcome1">
						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								<ShowPane pane="Welcome2"/>
							</Action>
						</Actions>
					</Welcome1>

					<Welcome2>
						<OnPaneInit>
							(block (
								(theReward (item (objGetItems gSource "*U") 0))
								)
								(scrSetDescTranslate gScreen (if (= (itmGetCount theReward) 1) 'descReward.one 'descReward.many) {
									itemName: (itmGetName theReward 'demonstrative)
									})
								)
						</OnPaneInit>

						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								(block Nil
									(objSetData gSource "Liberated" True)
									(scrShowScreen gScreen &dsRPGLoot; {
										nextScreen: "Main"
										})
									)
							</Action>

						</Actions>

					</Welcome2>

				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Behavior -->

		<Events>
			<OnCreate>
				(block ()
					;	Register events for when subordinates are destroyed

					(enum (sysFindObject gSource "sA O:guard;") tObj
						(objRegisterForEvents gSource tObj)
						)

					;	Ignore friendly fire until all enemies destroyed.

					(objSet@ gSource 'ignoreFriendlyFire True)
					)
			</OnCreate>

			<OnObjDestroyed>
				(block ()
					;	If the player destroys any of the warlords then she
					;	counts as the liberator

					(if (and gPlayerShip (eq aOrderGiver gPlayerShip))
						(objSetData gSource "LiberatedByPlayer" True)
						)

					;	If no more enemies, then we turn on friendly fire.

					(if (not (sysFindObject gSource "sA O:guard;"))
						(objSet@ gSource 'ignoreFriendlyFire Nil)
						)
					)
			</OnObjDestroyed>

			<GetRumors>
				{
					attributes: "commonwealthPub"
					priority: 10
					textID: 'rumor.commonwealthPub
					data: {station: (objGetName gSource)}
					onExitRumor: (lambda (theRumor) (objSetKnown (@ theRumor 'sourceObj)))
					}
			</GetRumors>
		</Events>

		<Language>
			<Text id="descWelcome">

				You are docked at a small Commonwealth habitat. The people here 
				are friendly and grateful to you, but they mostly go on with 
				their business.

			</Text>
			<Text id="descHiding">

				The docks and corridors of this station are deserted. The men 
				and women of the station hide in their apartments and refuse to 
				talk with you.

			</Text>
			<Text id="descLiberatedByOther">

				You are docked at a small Commonwealth habitat. The people here 
				are friendly, but they mostly go on with their business.

			</Text>
			<Text id="descWelcome1">

				As you exit the airlock dozens of men and women cheer for you. 
				The leader approaches you:
				
				"Thank you for killing the warlords! We've been hiding ourselves
				ever since they took over the station."

			</Text>
			<Text id="descReward.one">

				The leader continues:
				
				"We would like to reward you for liberating our station. Please 
				accept %itemName%; it was left behind by the warlords."
			
			</Text>
			<Text id="descReward.many">

				The leader continues:
				
				"We would like to reward you for liberating our station. Please 
				accept %itemName%; they were left behind by the warlords."
			
			</Text>

			<Text id="rumor.commonwealthPub">

				You listen to a refugee from %station%:

				"Centauri warlords took over our station last month.
				Whatever&mdash;I like this place better."

				You spend 5 credits and buy him a few drinks.

			</Text>
		</Language>

		<Encounters frequency="uncommon">
			<Lookup table="&tbCentauriEncounters;"/>
		</Encounters>
	</StationType>
<!-- CharonFortress.xml -->
<StationType UNID="&stCharonPirateFortress;"
			name=				"Fortress of the Charon Pirates"
			sovereign=			"&svPirates;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itAdvancedReactiveArmor;"
			hitPoints=			"600"
            regen=              "5"
			fireRateAdj=		"20"
			explosionType=		"&vtBlastExplosion4;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"charonFortress, charonPirates, enemy, generic, human, majorStation, pirates, populated, primaryStronghold"
			level=				"3"
			alertWhenAttacked=	"100"

			definiteArticle=	"true"
			>

		<Image			imageID="&rsStations3;" imageX="0" imageY="352" imageWidth="256" imageHeight="256"/>

		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true" posAngle="45"  posRadius="60"/>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true" posAngle="215" posRadius="60"/>
		</Devices>

		<Ships>
			<!-- Docked -->

			<Table>
				<Ship chance="10"	count="2d3"	class="&scViking;"		orders="guard"/>
				<Group chance="30">
					<Ship			count="1d6"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1d2"	class="&scCorsair-II;"	orders="guard"/>
				</Group>
				<Group chance="20">
					<Ship			count="1d4"	class="&scViking;"		orders="guard"/>
					<Ship			count="1"	class="&scCorsair-II;"	orders="guard"/>
				</Group>
				<Group chance="15">
					<Ship			count="1d2"	class="&scViking;"		orders="guard"/>
					<Ship			count="1"	class="&scDrake;"		orders="guard"/>
				</Group>
				<Group chance="15">
					<Ship			count="1d6"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1"	class="&scDrake;"		orders="guard"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scCorsair-II;"	orders="guard"/>
			</Table>

			<!-- Patrol -->

			<Table>
				<Group chance="75">
					<Ship			count="1d6" class="&scViking;"		orders="patrol" patrolDist="15"/>
					<Ship			count="1d2" class="&scCorsair-II;"	orders="patrol" patrolDist="15"/>
				</Group>
				<Ship chance="25"	count="1"	class="&scDrake;"		orders="patrol" patrolDist="20">
					<Escorts>
						<Ship			count="1d6"	class="&scViking;"	orders="escort"/>
					</Escorts>
				</Ship>
			</Table>
		</Ships>

		<Reinforcements minShips="6">
			<Table>
				<Ship chance="35"	count="1d6"	class="&scCorsair;"		orders="guard"/>
				<Ship chance="35"	count="1d3"	class="&scViking;"		orders="guard"/>
				<Ship chance="20"	count="1d2"	class="&scCorsair-II;"	orders="guard"/>
				<Ship chance="10"	count="1"	class="&scDrake;"		orders="guard"/>
			</Table>
		</Reinforcements>

		<Items>
			<Item					count="8d8"	item="&itKM100Missile;" />
			<Item					count="4d8"	item="&itKM500Missile;" />
			<Item					count="1"	item="&itClass3Deflector;" />
			<Item					count="2d4"	item="&itLightBlastPlate;" />
			<Table count="1d2">
				<Lookup chance="40" count="1" table="&trConsumables4;"/>
				<Lookup chance="40" count="1" table="&trMinorItem4;"/>
				<Lookup chance="20" count="1" table="&trMajorItem4;"/>
			</Table>
		</Items>

		<Encounters frequency="common">
			<Table>
				<Ship chance="60" count="1"	class="&scViking;" eventHandler="&evStdPatrolEncounterBehavior;">
					<Escorts>
						<Table>
							<Ship chance="40" count="1d6" class="&scCorsair;" orders="escort"/>
							<Ship chance="30" count="1" class="&scViking;" orders="escort"/>
							<Ship chance="30" count="1" class="&scCorsair-II;" orders="escort"/>
						</Table>
					</Escorts>
				</Ship>
				<Ship chance="30" count="1"	class="&scCorsair-II;" eventHandler="&evStdPatrolEncounterBehavior;">
					<Escorts>
						<Ship chance="60" count="1d6" class="&scCorsair;" orders="escort"/>
						<Ship chance="40" count="1" class="&scViking;" orders="escort"/>
					</Escorts>
				</Ship>
				<Ship chance="10" count="1"	class="&scCharonFrigateRaider;" eventHandler="&evCharonRaiderBehavior;">
					<OnCreate>(objFireEvent gSource "OrderAmbush")</OnCreate>
				</Ship>
			</Table>
		</Encounters>

		<Events>
			<OnDestroy>
				(objSetGlobalData gSource "status" 'destroyed)
			</OnDestroy>
		</Events>

		<DockingPorts>
			<Port x="-6"	y="114" />
			<Port x="75"	y="103" />
			<Port x="117"	y="70" />
			<Port x="148"	y="-5" />
			<Port x="135"	y="-68" />
			<Port x="75"	y="-124" />
			<Port x="7"		y="-143" />
			<Port x="-89"	y="-116" />
			<Port x="-127"	y="-72" />
			<Port x="-142"	y="8" />
			<Port x="-120"	y="58" />
			<Port x="-58"	y="103" />
		</DockingPorts>

	</StationType>
<!-- CharonPirates.xml -->
<StationType UNID="&stCharonPirateOutpost;"
			name=				"Charon Pirates cache"
			sovereign=			"&svPirates;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			armorID=			"&itUltraLightTitaniumArmor;"
			hitPoints=			"70"
			regen=				"1"
			fireRateAdj=		"80"
			explosionType=		"&vtKineticExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"charonPirates, enemy, envAir, envEarth, envFire, envWater, generic, human, pirates, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"*"
				levelFrequency=			"cuv-- ----- ----- ----- -----"

				locationCriteria=		"+asteroids"
				enemyExclusionRadius=	"50"
				/>

		<Image			imageID="&rsStations1;" imageX="0" imageY="512" imageWidth="156" imageHeight="156"/>

		<Devices>
			<Device deviceID="&itLaserCannon;"	omnidirectional="true"/>
		</Devices>

		<Ships>
			<Table>
				<Ship chance="85"	count="1d4"	class="&scCorsair;"		orders="guard"/>
				<Group chance="10">
					<Ship			count="1"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1"	class="&scViking;"		orders="guard"/>
				</Group>
				<Ship chance="5"	count="1d2"	class="&scViking;"		orders="guard"/>
			</Table>
		</Ships>

		<Items>
			<Lookup chance="50" table="&trStdLevelTreasure;"/>
		</Items>

		<Encounters frequency="common">
			<Table>
				<Ship chance="75" count="1"		class="&scCorsair;" eventHandler="&evStdPatrolEncounterBehavior;">
					<Escorts>
						<Ship count="1d3" class="&scCorsair;" orders="escort"/>
					</Escorts>
				</Ship>
				<Ship chance="25" count="1"		class="&scViking;" eventHandler="&evStdPatrolEncounterBehavior;"/>
			</Table>
		</Encounters>
	</StationType>
<StationType UNID="&stCharonPirateOutpost2;"
			name=				"Charon Pirates outpost"
			sovereign=			"&svPirates;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			armorID=			"&itReactiveArmor;"
			hitPoints=			"90"
			regen=				"1"
			fireRateAdj=		"50"
			explosionType=		"&vtKineticExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"charonPirates, enemy, envAir, envEarth, envFire, envWater, generic, human, pirates, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"*"
				levelFrequency=			"-cuv- ----- ----- ----- -----"

				locationCriteria=		"+asteroids"
				enemyExclusionRadius=	"50"
				/>

		<Image			imageID="&rsStations1;" imageX="0" imageY="512" imageWidth="156" imageHeight="156"/>

		<Devices>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true"/>
		</Devices>

		<Ships>
			<Table>
				<Ship chance="35"	count="2d4"	class="&scCorsair;"		orders="guard"/>
				<Group chance="30">
					<Ship			count="1d4+1"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1"	class="&scViking;"		orders="guard"/>
				</Group>
				<Ship chance="15"	count="1d2"	class="&scCorsair-II;"	orders="guard"/>
				<Group chance="10">
					<Ship			count="1d3"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1"	class="&scCorsair-II;"	orders="guard"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scViking;"		orders="guard"/>
			</Table>
		</Ships>

		<Items value="standard:level=2">
			<Item	count="2d8"	item="&itKM100Missile;" />
			<Lookup				table="&trStdTreasure;"/>
		</Items>

		<Encounters frequency="common">
			<Table>
				<Ship chance="50" count="1"	class="&scCorsair;" eventHandler="&evStdPatrolEncounterBehavior;">
					<Escorts>
						<Ship count="1d4" class="&scCorsair;" orders="escort"/>
					</Escorts>
				</Ship>
				<Ship chance="50" count="1"	class="&scViking;" eventHandler="&evStdPatrolEncounterBehavior;">
					<Escorts>
						<Table>
							<Null chance="50"/>
							<Ship chance="50" count="1d3" class="&scCorsair;" orders="escort"/>
						</Table>
					</Escorts>
				</Ship>
			</Table>
		</Encounters>

	</StationType>
<StationType UNID="&stCharonPirateOutpost2a;"
			name=				"Charon Pirates outpost"
			sovereign=			"&svPirates;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			armorID=			"&itReactiveArmor;"
			hitPoints=			"50"
			regen=				"1"
			fireRateAdj=		"60"
			explosionType=		"&vtKineticExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"charonPirates, enemy, envAir, envEarth, envFire, envWater, human, pirates, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"*"
				levelFrequency=			"r---- ----- ----- ----- -----"

				locationCriteria=		"+asteroids"
				enemyExclusionRadius=	"50"
				/>

		<Image			imageID="&rsStations1;" imageX="0" imageY="512" imageWidth="156" imageHeight="156"/>

		<Devices>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true"/>
		</Devices>

		<Ships>
			<Table>
				<Ship chance="45"	count="2d3"	class="&scCorsair;"		orders="guard"/>
				<Group chance="40">
					<Ship			count="1d4"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1"	class="&scViking;"		orders="guard"/>
				</Group>
				<Ship chance="15"	count="1d4"	class="&scViking;"		orders="guard"/>
			</Table>
		</Ships>

		<Items value="standard:level=1">
			<Lookup	table="&trStdTreasure;"/>
		</Items>

		<Encounters frequency="common">
			<Table>
				<Ship chance="50" count="1"	class="&scCorsair;" eventHandler="&evStdPatrolEncounterBehavior;">
					<Escorts>
						<Ship count="1d4" class="&scCorsair;" orders="escort"/>
					</Escorts>
				</Ship>
				<Ship chance="50" count="1"	class="&scViking;" eventHandler="&evStdPatrolEncounterBehavior;">
					<Escorts>
						<Table>
							<Ship chance="50" count="1d3" class="&scCorsair;" orders="escort"/>
							<Null chance="50"/>
						</Table>
					</Escorts>
				</Ship>
			</Table>
		</Encounters>

	</StationType>
<StationType UNID="&stCharonPirateOutpost3;"
			name=				"Charon Pirates stronghold"
			sovereign=			"&svPirates;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itHeavyReactiveArmor;"
			hitPoints=			"200"
			regen=              "5"
			fireRateAdj=		"40"
			explosionType=		"&vtKineticExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			alertWhenDestroyed=	"30"

			attributes=			"charonPirates, enemy, envAir, envEarth, envFire, envWater, generic, human, majorStation, pirates, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"*"
				levelFrequency=			"-rcr- ----- ----- ----- -----"

				locationCriteria=		"+asteroids"
				enemyExclusionRadius=	"50"
				/>

		<Image			imageID="&rsStations2;" imageX="0" imageY="768" imageWidth="180" imageHeight="180"/>

		<Devices>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true" posAngle="45"  posRadius="60"/>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true" posAngle="215" posRadius="60"/>
		</Devices>

		<Ships>
			<!-- Docked -->

			<Table>
				<Ship chance="10"	count="2d3"	class="&scViking;"		orders="guard"/>
				<Group chance="30">
					<Ship			count="1d6"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1d2"	class="&scCorsair-II;"	orders="guard"/>
				</Group>
				<Group chance="20">
					<Ship			count="1d4"	class="&scViking;"		orders="guard"/>
					<Ship			count="1"	class="&scCorsair-II;"	orders="guard"/>
				</Group>
				<Group chance="15">
					<Ship			count="1d2"	class="&scViking;"		orders="guard"/>
					<Ship			count="1"	class="&scDrake;"		orders="guard"/>
				</Group>
				<Group chance="15">
					<Ship			count="1d6"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1"	class="&scDrake;"		orders="guard"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scCorsair-II;"	orders="guard"/>
			</Table>

			<!-- Patrol -->

			<Table>
				<Group chance="75">
					<Ship			count="1d6" class="&scViking;"		orders="patrol" patrolDist="15"/>
					<Ship			count="1d2" class="&scCorsair-II;"	orders="patrol" patrolDist="15"/>
				</Group>
				<Ship chance="25"	count="1"	class="&scCharonFrigateRaider;" eventHandler="&evCharonRaiderBehavior;">
					<OnCreate>(objFireEvent gSource "OrderPatrol")</OnCreate>
				</Ship>
			</Table>
		</Ships>

		<Reinforcements minShips="6">
			<Table>
				<Ship chance="35"	count="1d6"	class="&scCorsair;"		orders="guard"/>
				<Ship chance="35"	count="1d3"	class="&scViking;"		orders="guard"/>
				<Ship chance="20"	count="1d2"	class="&scCorsair-II;"	orders="guard"/>
				<Ship chance="10"	count="1"	class="&scDrake;"		orders="guard"/>
			</Table>
		</Reinforcements>

		<Items value="standard:level=3:x=2.5">
			<Item	count="2d8"	item="&itKM100Missile;" />
			<Lookup				table="&trStdTreasure;"/>
		</Items>

		<Encounters frequency="common">
			<Table>
				<Ship chance="60" count="1"	class="&scViking;" eventHandler="&evStdPatrolEncounterBehavior;">
					<Escorts>
						<Table>
							<Ship chance="40" count="1d6" class="&scCorsair;" orders="escort"/>
							<Ship chance="30" count="1" class="&scViking;" orders="escort"/>
							<Ship chance="30" count="1" class="&scCorsair-II;" orders="escort"/>
						</Table>
					</Escorts>
				</Ship>
				<Ship chance="30" count="1"	class="&scCorsair-II;" eventHandler="&evStdPatrolEncounterBehavior;">
					<Escorts>
						<Ship chance="60" count="1d6" class="&scCorsair;" orders="escort"/>
						<Ship chance="40" count="1" class="&scViking;" orders="escort"/>
					</Escorts>
				</Ship>
				<Ship chance="10" count="1"	class="&scCharonFrigateRaider;" eventHandler="&evCharonRaiderBehavior;">
					<OnCreate>(objFireEvent gSource "OrderAmbush")</OnCreate>
				</Ship>
			</Table>
		</Encounters>

		<DockingPorts>
			<Port x="51"	y="80" />
			<Port x="91"	y="42" />
			<Port x="101"	y="-54" />
			<Port x="61"	y="-90" />
			<Port x="-61"	y="-90" />
			<Port x="-101"	y="-54" />
			<Port x="-91"	y="42" />
			<Port x="-51"	y="80" />
		</DockingPorts>

	</StationType>
<StationType UNID="&stCharonPrimaryStronghold1;"
			name=				"Charon Pirates stronghold"
			sovereign=			"&svPirates;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itReactiveArmor;"
			hitPoints=			"100"
			regen=				"3"
			fireRateAdj=		"40"
			explosionType=		"&vtKineticExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"charonPirates, enemy, human, majorStation, pirates, populated, primaryStronghold, uncharted"
			>

		<Image			imageID="&rsStations2;" imageX="0" imageY="768" imageWidth="180" imageHeight="180"/>

		<Devices>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true"/>
		</Devices>

		<Ships>
			<!-- Docked -->

			<Table>
				<Ship chance="35"	count="2d3"	class="&scCorsair;"		orders="guard"/>
				<Group chance="30">
					<Ship			count="1d4"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1"	class="&scViking;"		orders="guard"/>
				</Group>
				<Ship chance="15"	count="1d2"	class="&scCorsair-II;"	orders="guard"/>
				<Group chance="10">
					<Ship			count="1d2"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1"	class="&scCorsair-II;"	orders="guard"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scViking;"		orders="guard"/>
			</Table>

			<!-- Patrol -->

			<Table>
				<Group chance="75">
					<Ship			count="1d4" class="&scCorsair;"		orders="patrol" patrolDist="15"/>
					<Ship			count="1d2" class="&scViking;"		orders="patrol" patrolDist="15"/>
				</Group>
				<Ship chance="25"	count="1"	class="&scCorsair-II;"	orders="patrol" patrolDist="20">
					<Escorts>
						<Ship			count="1d6"	class="&scCorsair;"	orders="escort"/>
					</Escorts>
				</Ship>
			</Table>
		</Ships>

		<Items value="standard">
			<Item	count="2d8"	item="&itKM100Missile;" />
			<Lookup				table="&trStdLevelTreasure;"/>
		</Items>

		<DockingPorts>
			<Port x="51"	y="80" />
			<Port x="91"	y="42" />
			<Port x="101"	y="-54" />
			<Port x="61"	y="-90" />
			<Port x="-61"	y="-90" />
			<Port x="-101"	y="-54" />
			<Port x="-91"	y="42" />
			<Port x="-51"	y="80" />
		</DockingPorts>

	</StationType>
<StationType UNID="&stCharonPrimaryStronghold2;"
			name=				"Charon Pirates stronghold"
			sovereign=			"&svPirates;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itHeavyReactiveArmor;"
			hitPoints=			"150"
			regen=				"4"
			fireRateAdj=		"40"
			explosionType=		"&vtKineticExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			alertWhenDestroyed=	"30"

			attributes=			"charonPirates, enemy, human, majorStation, pirates, populated, primaryStronghold, uncharted"
			>

		<Image			imageID="&rsStations2;" imageX="0" imageY="768" imageWidth="180" imageHeight="180"/>

		<Devices>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true" posAngle="45"  posRadius="60"/>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true" posAngle="215" posRadius="60"/>
		</Devices>

		<Ships>
			<!-- Docked -->

			<Table>
				<Ship chance="10"	count="2d3"	class="&scViking;"		orders="guard"/>
				<Group chance="30">
					<Ship			count="1d6"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1d2"	class="&scCorsair-II;"	orders="guard"/>
				</Group>
				<Group chance="20">
					<Ship			count="1d4"	class="&scViking;"		orders="guard"/>
					<Ship			count="1"	class="&scCorsair-II;"	orders="guard"/>
				</Group>
				<Group chance="15">
					<Ship			count="1d2"	class="&scViking;"		orders="guard"/>
					<Ship			count="1"	class="&scDrake;"		orders="guard"/>
				</Group>
				<Group chance="15">
					<Ship			count="1d6"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1"	class="&scDrake;"		orders="guard"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scCorsair-II;"	orders="guard"/>
			</Table>

			<!-- Patrol -->

			<Table>
				<Group chance="75">
					<Ship			count="1d6" class="&scViking;"		orders="patrol" patrolDist="15"/>
					<Ship			count="1d2" class="&scCorsair-II;"	orders="patrol" patrolDist="15"/>
				</Group>
				<Ship chance="25"	count="1"	class="&scCharonFrigateRaider;" eventHandler="&evCharonRaiderBehavior;">
					<OnCreate>(objFireEvent gSource "OrderPatrol")</OnCreate>
				</Ship>
			</Table>
		</Ships>

		<Reinforcements minShips="6">
			<Table>
				<Ship chance="35"	count="1d6"	class="&scCorsair;"		orders="guard"/>
				<Ship chance="35"	count="1d3"	class="&scViking;"		orders="guard"/>
				<Ship chance="20"	count="1d2"	class="&scCorsair-II;"	orders="guard"/>
				<Ship chance="10"	count="1"	class="&scDrake;"		orders="guard"/>
			</Table>
		</Reinforcements>

		<Items value="standard">
			<Item	count="2d8"	item="&itKM100Missile;" />
			<Lookup				table="&trStdLevelTreasure;"/>
		</Items>

		<DockingPorts>
			<Port x="51"	y="80" />
			<Port x="91"	y="42" />
			<Port x="101"	y="-54" />
			<Port x="61"	y="-90" />
			<Port x="-61"	y="-90" />
			<Port x="-101"	y="-54" />
			<Port x="-91"	y="42" />
			<Port x="-51"	y="80" />
		</DockingPorts>

	</StationType>
<StationType UNID="&stCharonPrimaryStronghold3;"
			name=				"Charon Pirates stronghold"
			sovereign=			"&svPirates;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itHeavyReactiveArmor;"
			hitPoints=			"200"
			regen=				"5"
			fireRateAdj=		"40"
			explosionType=		"&vtKineticExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			alertWhenDestroyed=	"30"

			attributes=			"charonPirates, enemy, human, majorStation, pirates, populated, primaryStronghold, uncharted"
			>

		<Image			imageID="&rsStations2;" imageX="0" imageY="768" imageWidth="180" imageHeight="180"/>

		<Devices>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true" posAngle="45"  posRadius="60"/>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true" posAngle="215" posRadius="60"/>
		</Devices>

		<Ships>
			<!-- Docked -->

			<Table>
				<Ship chance="10"	count="2d3"	class="&scViking;"		orders="guard"/>
				<Group chance="30">
					<Ship			count="1d6"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1d2"	class="&scCorsair-II;"	orders="guard"/>
				</Group>
				<Group chance="20">
					<Ship			count="1d4"	class="&scViking;"		orders="guard"/>
					<Ship			count="1"	class="&scCorsair-II;"	orders="guard"/>
				</Group>
				<Group chance="15">
					<Ship			count="1d2"	class="&scViking;"		orders="guard"/>
					<Ship			count="1"	class="&scDrake;"		orders="guard"/>
				</Group>
				<Group chance="15">
					<Ship			count="1d6"	class="&scCorsair;"		orders="guard"/>
					<Ship			count="1"	class="&scDrake;"		orders="guard"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scCorsair-II;"	orders="guard"/>
			</Table>

			<!-- Patrol -->

			<Table>
				<Group chance="75">
					<Ship			count="1d6" class="&scViking;"		orders="patrol" patrolDist="15"/>
					<Ship			count="1d2" class="&scCorsair-II;"	orders="patrol" patrolDist="15"/>
				</Group>
				<Ship chance="25"	count="1"	class="&scCharonFrigateRaider;" eventHandler="&evCharonRaiderBehavior;">
					<OnCreate>(objFireEvent gSource "OrderPatrol")</OnCreate>
				</Ship>
			</Table>
		</Ships>

		<Reinforcements minShips="6">
			<Table>
				<Ship chance="35"	count="1d6"	class="&scCorsair;"		orders="guard"/>
				<Ship chance="35"	count="1d3"	class="&scViking;"		orders="guard"/>
				<Ship chance="20"	count="1d2"	class="&scCorsair-II;"	orders="guard"/>
				<Ship chance="10"	count="1"	class="&scDrake;"		orders="guard"/>
			</Table>
		</Reinforcements>

		<Items value="standard">
			<Item	count="2d8"	item="&itKM100Missile;" />
			<Lookup				table="&trStdLevelTreasure;"/>
		</Items>

		<DockingPorts>
			<Port x="51"	y="80" />
			<Port x="91"	y="42" />
			<Port x="101"	y="-54" />
			<Port x="61"	y="-90" />
			<Port x="-61"	y="-90" />
			<Port x="-101"	y="-54" />
			<Port x="-91"	y="42" />
			<Port x="-51"	y="80" />
		</DockingPorts>

	</StationType>
<!-- Code.xml -->
<!-- Commonwealth.xml -->
<StationType UNID="&stCommonwealthColony;"
			name=				"Commonwealth colony"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, friendly, generic, human, majorStation, primary, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			size=				"390"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"320"
			multiHull=			"true"
			regen=              "6"
			shipRegen=			"4"
				 
			fireRateAdj=		"80"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>
		
		<Names noArticle="true">
			Agricola Station; Britannia Station; Canterbury Station;
			Devonshire Colony; Enterprise Station; Farsend Station;
			Grenoble Colony; Hellas Station; Independence Station;
			Janus Colony; Koran Station; Lexington Colony; Massachusetts Colony;
			Nakura Colony; Ontario Station; Paduan Station; Qatar Station;
			Ryad Colony; Santiago Station; Tango Colony; Umber Station;
			Victory Colony; Winchell Station; %s Colony; %s Alpha Station;
			%s Beta Station; %s Gamma Station; %s Epsilon Station;
			Anacreon Colony %1%0%0%0; Anacreon Colony %1%0%0; Anacreon Colony %1%0%0;
			Anacreon Colony %1%0%0; Anacreon Colony %1%0%0
		</Names>
		
		<Properties>
			<Definition id="blackMarket.buysIllegals">"*NU +illegal; +consumerGood; -ID; +property:known; &lt;=#25;"</Definition>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"+commonwealthCore;"
				levelFrequency=			"cuc-- ----- ----- ----- -----"

				locationCriteria=		"-outerSystem, +planetary"
				enemyExclusionRadius=	"50"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; +basicAmmo; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"		priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-5;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-5;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-5;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-5;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-5;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="2"/>
			<ConsumeTrade	criteria="{human.basicFood}"	impact="5"/>
			<ConsumeTrade	criteria="{human.lux}"		impact="3"/>
			<ConsumeTrade	criteria="{human.meds}"		impact="2"/>
			<ConsumeTrade	criteria="{human.res}"		impact="1"/>
			<ConsumeTrade	criteria="{core.ore}"			impact="2"/>
		</Trade>

		<Items>
			<RandomItem count="10" 
					criteria=		"ad L:1-5; +commonwealth; -alien; -defective; -Illegal; -Military; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="10" 
					criteria=		"*~adm -alien; -defective; -Illegal; -Military; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>
			<Item count="4d12"	item="&itHelium3FuelRod;" />
		</Items>
		
		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true"/>
		</Devices>
		
		<!-- Ships and Defenses -->

		<Ships>
			<Lookup count="2" table="&tbCommDefenders;"/>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Lookup chance="75" table="&tbCommDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Reinforcements>
		
		<!-- Image and Effects -->
		
		<Image imageID="&rsCommonwealthColony;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionMainHall" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +commonwealthColony; =" (sysGetLevel) ";")
									maxPerStation: 1
									noMissionTextID: 'descHallEmpty
									})
							</Action>
					
							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>
		
		<!-- Events and Data -->

		<Events>
			<OnCreate>
				(sysAddObjRecurringTimerEvent 150 gSource "OnTrafficControl")
			</OnCreate>

			<OnTrafficControl>
				(comTrafficControl gSource 10)
			</OnTrafficControl>
		</Events>
		
		<Language>
			<Text id="descWelcome">

				You are in the docking bay of a Commonwealth colony filled with
				shuttles and starships.
				
				A loose hose spills dirty water onto the landing pad; elsewhere,
				an automatic load-lifter moves forward and back again as it 
				unloads a ship's cargo hold. The air smells of liquid fuel and 
				exhaust.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stCommonwealthTurret;"
			name=				"Commonwealth defense turret"
			sovereign=			"&svCommonwealth;"
			inherit=			"&dsDockScreenBase;"

			attributes=			"commonwealth, staticDefense"

			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockScreen=			"Main"
			noMapLabel=			"true"
			noFriendlyFire=		"true"

			mass=				"2000"
			armorID=			"&itP120HexphaseArmor;"
			hitPoints=			"100"
			structuralHitPoints="20"
			fireRateAdj=		"40"
			ejectaType=			"&vtWreckEjecta;"
			>

		<ImageVariants>
			<Image			imageID="&rsStations4;" imageX="96" imageY="320" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsStations4;" imageX="96" imageY="352" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsStations4;" imageX="96" imageY="384" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsStations4;" imageX="96" imageY="416" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Devices>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true"/>
		</Devices>

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

		<Language>
			<Text id="descWelcome">
				You are docked at a Commonwealth Defense Turret. These armed and armored
				turrets are used to defend Commonwealth stations and settlements in the
				Ungoverned Territories beyond St. Katharine's Star.
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stCommonwealthColonyArmed;"
			name=				"armed Commonwealth colony"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, fleetDelivery, friendly, generic, human, majorStation, primary, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"390"
			armorID=			"&itP120HexphaseArmor;"
			hitPoints=			"560"
			multiHull=			"true"
			regen=              "10"
			shipRegen=			"6"
				 
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			fireRateAdj=		"40"
			>

		<Names noArticle="true">Anvil Station; Brimstone Station; Cerberus Station;
				Demesne Colony; Exile Station; Farsend Station;
				Greenspace Colony; Hellas Station; Independence Station;
				Jotur Colony; C%1%0 Outpost; Lethe Colony; Mars Colony;
				Nebulon Colony; Oort Station; Purgatory Station; Quequeg Station;
				Rend Colony; Sangre Station; Tantalus Colony; Umber Station;
				Vindication Colony; Wight Station; %s Colony; %s Alpha Station;
				%s Beta Station; %s Gamma Station; %s Epsilon Station</Names>

		<Properties>
			<Definition id="blackMarket.buysIllegals">"*NU +illegal; +consumerGood; -ID; +property:known; &lt;=#25;"</Definition>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"+commonwealthCore;"
				levelFrequency=			"---uu cu--- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"60"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; -premiumAmmo; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"		priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-7;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-7;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-7;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-7;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-7;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<ConsumeTrade	criteria="{core.antimatterFuel}"	impact="2"/>
			<ConsumeTrade	criteria="{human.basicFood}"	impact="5"/>
			<ConsumeTrade	criteria="{human.lux}"		impact="3"/>
			<ConsumeTrade	criteria="{human.meds}"		impact="2"/>
			<ConsumeTrade	criteria="{human.res}"		impact="1"/>
			<ConsumeTrade	criteria="{core.ore}"			impact="2"/>
		</Trade>

		<Items>
			<RandomItem	count="10" 
					criteria=		"ad L:1-7; +commonwealth; -defective; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="10" 
					criteria=		"*~adm -defective; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>
			<Item count="4d12"	item="&itXenotiteFuelRod;" />
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true"/>
		</Devices>

		<!-- Satellites -->
		
		<Satellites overlapCheck="asteroids">
			<Orbitals distance="12" angle="45">
				<Station type="&stCommonwealthTurret;" imageVariant="2"/>
			</Orbitals>

			<Orbitals distance="12" angle="135">
				<Station type="&stCommonwealthTurret;" imageVariant="1"/>
			</Orbitals>

			<Orbitals distance="12" angle="225">
				<Station type="&stCommonwealthTurret;" imageVariant="0"/>
			</Orbitals>

			<Orbitals distance="12" angle="315">
				<Station type="&stCommonwealthTurret;" imageVariant="3"/>
			</Orbitals>
		</Satellites>
		
		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="2" table="&tbCommDefenders;"/>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Lookup chance="75" table="&tbCommDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->
		
		<Image imageID="&rsCommonwealthArmoredColony;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionMainHall" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +commonwealthColonyArmed; =" (sysGetLevel) ";")
									maxPerStation: 1
									noMissionTextID: 'descHallEmpty
									})
							</Action>
					
							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>

		</DockScreens>
		
		<!-- Events and Data -->

		<Events>
			<OnCreate>
				(sysAddObjRecurringTimerEvent 150 gSource "OnTrafficControl")
			</OnCreate>

			<OnTrafficControl>
				(comTrafficControl gSource 10)
			</OnTrafficControl>
		</Events>
		
		<Language>
			<Text id="descWelcome">

				You are in the docking bay of a Commonwealth colony. Dockworkers
				and professionals crisscross the bay, heads burried in datapads.

				The walls are filled with blinking holopanes directing traffic 
				or advertising various luxuries.

				A squad of militia-members stands guard around a console.
				
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stCommonwealthDryDock;"
			name=				"Commonwealth dry dock"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, fleetDelivery, friendly, generic, human, majorStation, populated"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"5"
			size=				"511"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"800"
			multiHull=			"true"
			regen=              "8"
			shipRegen=			"8"

			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Properties>
			<Constant		id="rpg.shipBrokerCriteria">"s +systemLevel:0-2; +commonwealth; -military; -notStandard; +shipBroker;"</Constant>
			<DynamicData	id="rpg.shipBrokerInventory">(rpgGetShipInventory gSource)</DynamicData>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"+commonwealthCore;"
				levelFrequency=			"uucuu r---- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"75"

				unique=					"inSystem"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; +basicAmmo; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"		priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-7;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-8;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-8;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-7;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-7;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<SellShip		criteria="s -notForSale;" priceAdj="100"/>
			<BuyShip		criteria="s L:1-10; -notForSale;" priceAdj="80"/>

			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="3"/>
		</Trade>
		
		<Items>
			<RandomItem count="18-25" 
				criteria=		"a L:1-8; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard; -specialty;"
				levelFrequency=	"systemLevel:r|c|cur"
				/>
			<RandomItem count="8-10" 
				criteria=		"scv L:1-7; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard; -specialty;"
				levelFrequency=	"systemLevel:r|c|cur"
				/>
			<RandomItem count="4-6" 
				criteria=		"r L:3-7; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard;"
				levelFrequency=	"systemLevel:ru|c|curv"
				/>
			<RandomItem count="10-12" 
				criteria=		"d~scvr L:1-7; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard; -specialty;"
				levelFrequency=	"systemLevel:r|c|cur"
				/>
			<RandomItem count="5-10"
				criteria=		"u +armorRepair; -defective; -illegal; -military; -notForSale; -notStandard;"
				levelFrequency=	"systemLevel:ru|c|curv"
				/>
		</Items>

		<!-- Ships and Defenses -->

		<Ships>
			<Lookup count="1d3" table="&tbCommDefenders;"/>
			<Lookup count="1d2" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Lookup chance="75" table="&tbCommDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->

		<Image			imageID="&rsCommonwealthDryDock;" imageWidth="360" imageHeight="360" viewportRatio="0.065"/>

		<DockingPorts
				portCount="8"
				portRadius="205"
				portAngle="15"
				/>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionBuyShip">
								(scrShowScreen gScreen &dsRPGShipBroker;)
							</Action>

							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionDockServices" default="1">
								(rpgDockServices gPlayerShip)
							</Action>
					
							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Behavior & Language -->

		<Language>
			<Text id="descWelcome">

				You are in a large enclosed docking bay. Ship in varying stages
				of repair line the docks around you. Workers in powered frames
				dance around the ships.

				Holopanes advertise the latest deals on new starships.

			</Text>
		</Language>

	</StationType>
<StationType UNID="&stMedicalSuburb;"
			name=				"Commonwealth medical colony"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, friendly, generic, human, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			size=				"390"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"320"
			multiHull=			"true"
			regen=              "4"
			shipRegen=			"1"
				 
			fireRateAdj=		"80"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Names noArticle="true">
			Asclepius Station; Barnard Station; Station Charity; 
			Crick Station; Drew Station; Station Empathy; Freud Complex;
			Station Grace; Haeckel Station; Imhotep Station;
			Jung Center; Koch Station; Leeuwenhoek Station;
			Morton Station; Nicolle Station; Osler Station;
			Penfield Station; Station Respite; Salk Station;
			Taussig Station; Urbani Station; Virchow Station;
			Watson Station; Yegerov Station; Zygote Station;
			Cyteen Station; NeuroSci Station; Biogen Station;
			Pharmaton %s; Medecin d'Etoile Station
		</Names>

		<Properties>
			<Definition id="blackMarket.buysIllegals">"*NU +illegal; +meds; -ID; +property:known; &lt;=#25;"</Definition>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"+commonwealthCore;"
				levelFrequency=			"uuurr ----- ----- ----- -----"

				locationCriteria=		"-outerSystem, +planetary"
				enemyExclusionRadius=	"50"

				unique=					"inSystem"
				/>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="*NU +Meds; -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="*NU +Food; -Illegal;"	priceAdj="100"/>
			<Buy	criteria="*NU +Lux; -Illegal;"	priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="2"/>
			<ConsumeTrade	criteria="{human.basicFood}"	impact="3"/>
			<ConsumeTrade	criteria="{human.lux}"		impact="5"/>
			<ConsumeTrade	criteria="{human.res}"		impact="1"/>

			<ProduceTrade	criteria="{human.meds}"		impact="20"/>
		</Trade>

		<Items>
			<RandomItem count="10-20" 
					criteria=		"* +Meds; -defective; -Illegal; -Military; -Alien; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="2" table="&tbCommDefenders;"/>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Lookup chance="75" table="&tbCommDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->

		<Image imageID="&rsCommonwealthMedicalColony;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>

		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDescTranslate gScreen 'descWelcome {objName: (objGetName gSource)})
						</OnPaneInit>

						<Actions>
							<Action id="actionHospital">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +commonwealthHospital; =" (sysGetLevel) ";")
									maxPerStation: 1
									noMissionTextID: 'descHospitalEmpty
									})
							</Action>
							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>
		
		<!-- Events and Data -->
		
		<Language>
			<Text id="actionHospital">[H]ospital</Text>

			<Text id="descWelcome">

				You are in the docking bay of %objName%. Medical professionals
				live and work on this station, doing everything from research,
				to drug manufacturing, to remote medicine.

			</Text>
			<Text id="descHospitalEmpty">

				Medtechs and patients crisscross the large reception area of the
				hospital. Displays and holograms direct patients to various 
				specialties.
			
			</Text>
			<Text id="rpg.stationWillNotBuy">

				%StationName% buys food and luxury items. We are not 
				interested in buying %itemName%.

			</Text>

			<Text id="blackMarketSmuggle01.briefing">
				(list
					{	descID:'textBMSBriefing.1	acceptLabelID:'actionBMSAccept.1		declineLabelID:'actionBMSDecline.1		translateType:gType	}
					)
			</Text>
			<Text id="blackMarketSmuggle01.declineReply">

				The medtech sighs.

				"I don't know how to convince the Corporations to care about 
				people. Not without using force, anyway."

			</Text>
			<Text id="textBMSBriefing.1">

				You enter the hospital and talk to a medtech at the reception
				desk. He complains about a lack of supplies.

				"Corporate oligarchs are hoarding the good meds for themselves.
				We can't get enough for all our patients. Not legally, anyway."
				
			</Text>
			<String id="actionBMSAccept.1">"I can [s]ell you some meds."</String>
			<String id="actionBMSDecline.1">"Too bad, but I ca[n]'t help."</String>

			<Text id="core.mapDesc">"Sells meds &mdash; Buys food and luxuries"</Text>
		</Language>
	</StationType>
<StationType UNID="&stCommonwealthResidentials;"
			name=				": Commonwealth residentials|Commonwealth residentials"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, friendly, generic, human, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			size=				"390"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"320"
			multiHull=			"true"
			regen=              "6"
				 
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Properties>
			<Definition id="blackMarket.buysIllegals">"*NU +illegal; +consumerGood; -ID; +property:known; &lt;=#25;"</Definition>
		</Properties>
		
		<!-- Trade and Items -->

		<Trade currency="credit">
			<Decontaminate	criteria="*"		priceAdj="100"/>
			
			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="1"/>
			<ConsumeTrade	criteria="{human.basicFood}"	impact="5"/>
			<ConsumeTrade	criteria="{human.lux}"		impact="2"/>
			<ConsumeTrade	criteria="{human.meds}"		impact="5"/>
			<ConsumeTrade	criteria="{human.res}"		impact="1"/>
		</Trade>
		
		<!-- Ships and Defenses -->

		<Ships>
			<Lookup table="&tbCommDefenders;"/>
			<Lookup count="1d4+1" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<!-- Image and Effects -->
		
		<Image imageID="&rsCommonwealthResidentials;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionMainHall" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +commonwealthResidentials; =" (sysGetLevel) ";")
									maxPerStation: 1
									noMissionTextID: 'descHallEmpty
									})
							</Action>
					
							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->
		
		<Language>
			<Text id="descWelcome">

				You are in the docking bay of a residential station. You see a
				mix of dockworkers, professionals, and families boarding 
				shuttles and starships.

				Scuffed and faded infopanes line the walls, and you smell the
				stale exhaust of overworked ventilation systems.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stCommonwealthSlums;"
			name=				"Commonwealth habitat"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"3"
			multiHull=			"true"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"150"
			regen=              "1"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"commonwealth, commonwealthCustoms, friendly, generic, human, populated"
			>

		<Names noArticle="true">Habitat Alpha %1%0; Habitat Beta %1%0; Habitat Gamma %1%0; Habitat Delta %1%0;
				Habitat Epsilon %1%0; Habitat Zeta %1%0</Names>

		<Properties>
			<Variant id="rpgCharacter.stationMaster">
				(rpgCharacterRandom gSource "x +commonwealth; +stationMasterCommon;" 'stationMaster)
			</Variant>
		</Properties>

		<!-- Trade and Items -->

		<Trade>
			<Decontaminate	criteria="*"		priceAdj="100"/>
			
			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="1"/>
			<ConsumeTrade	criteria="{human.basicFood}"	impact="2"/>
			<ConsumeTrade	criteria="{human.meds}"		impact="2"/>
			<ConsumeTrade	criteria="{human.res}"		impact="1"/>
		</Trade>

		<!-- Ships and Defenses -->

		<Ships>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<!-- Image and Effects -->

		<Image		imageID="&rsCommonwealthHabitat;" imageWidth="170" imageHeight="240" viewportRatio="0.02125"/>

		<DockingPorts
				portCount=		"8"
				portRadius=		"100"
				/>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDescTranslate gScreen 'descWelcome {objName: (objGetName gSource)})
						</OnPaneInit>

						<Actions>
							<Action id="actionMainHall" default="1">
								(rpgMissionAssignment {
									missionCriteria: "n +commonwealthHabitat;"
									maxPerStation: 1
									missionGiver: (rpgCharacterGetInfo gSource 'stationMaster)
									noMissionTextID: 'descNoMissions
									})
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Behavior -->

		<Events>
			<GetGlobalAchievements>
				(rpgMissionAchievements &stCommonwealthSlums; "* +commonwealthHabitat;")
			</GetGlobalAchievements>

			<GetRumors>
				(append
					(rpgRumorAdd 'commonwealthHabitat (make 'sequence 4))

					(if (= (objGetProperty gPlayerShip 'characterClass) &unidPilgrimClass;)
						(rpgRumorAdd 'commonwealthHabitat 'pilgrim)
						(rpgRumorAdd 'commonwealthHabitat 'freelancer)
						)

					(rpgRumorAdd 'commonwealthHabitat
						(switch
							(= (objGetType gPlayerShip) &scSapphirePlayer;)	'sapphire
							(= (objGetType gPlayerShip) &scEI100XPlayer;)	'ei100x
							(= (objGetType gPlayerShip) &scWolfenPlayer;)	'wolfen
																			'other
							)
						Nil
						Nil
						{	shipName: (objGetName gPlayerShip)	}
						)
					)
			</GetRumors>
		</Events>

		<Language>
			<Text id="descWelcome">

				The loud voices of a packed multitude bounce off every bulkhead
				and	corridor in the station. Old air scrubbers pump a thin, 
				odorous breeze out of rusty vents. Discarded packets of 
				Salmonite and Red Nebula beer huddle in the corner.

				Welcome to %objName%!

			</Text>
			<Text id="descNoMissions">

				The station master is working at %his@missionGiver% station. The
				comms channels are quiet and %he@missionGiver% stops to chat:

				"It's calm now, but I've been hearing a lot of military chatter
				lately."

			</Text>
			<Text id="rpg.missionTypeDesc">Commonwealth habitat missions</Text>

			<Text id="rumor.intro">

				The station master is working at %his@rumorGiver% console. 
				%He@rumorGiver% stops to chat:\n\n

			</Text>
			<String id="rumor.commonwealthHabitat.1">

				"You got a pretty nice ship there. Did your mom and dad buy it 
				for you?"

			</String>
			<Text id="rumor.commonwealthHabitat.2">

				"Truth is, you gotta approach life philosophically, you know 
				what I mean? You gotta believe that it's all going to work out 
				in the end, or else what's the point?"

			</Text>
			<Text id="rumor.commonwealthHabitat.3">

				"Nobody cares. Station needs a carbon scrubber? Get on the 
				waiting list! After the corporate suits get their grilled 
				Icelandic salmon, then they might pay attention to you. Nobody
				cares."

			</Text>
			<Text id="rumor.commonwealthHabitat.4">

				"A station is not like a starship. If you get into trouble you 
				can always run away. All we can do is sit tight and repair the 
				damage. Takes a special kind of man to live like that."

			</Text>
			<Text id="rumor.commonwealthHabitat.pilgrim">

				"I don't know what you're doing in this backwater system. You 
				wanna get to the Core? Go! What's stopping you? Kids today: they
				dream big, but they'd rather watch the 3DVs."

			</Text>
			<Text id="rumor.commonwealthHabitat.freelancer">

				"I don't know what you're doing in this backwater system. You 
				wanna see the galaxy? Go! What's stopping you? Kids today: they
				dream big, but they'd rather watch the 3DVs."

			</Text>
			<Text id="rumor.commonwealthHabitat.sapphire">

				"How do you like your %shipName%? My daughter's friend had one 
				once. It was beautiful, but not very practical for long 
				voyages."

			</Text>
			<Text id="rumor.commonwealthHabitat.ei100x">

				"How do you like your %shipName%? My son pilots an older 
				200-series in the Cairn system. He's got it up-armored with 
				polyceramic to protect against pirate attacks."

			</Text>
			<Text id="rumor.commonwealthHabitat.wolfen">

				"How do you like your %shipName%? I knew this guy John Tremaine 
				who flew one in the Militia. They're fast as hell on a whip, but
				a little flimsy. Hope you've got some good shields on her."

			</Text>
			<Text id="rumor.commonwealthHabitat.other">

				"How do you like your %shipName%? I haven't seen a lot of ships 
				like that. Is it hard to get parts for it?"

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stCommonwealthSettlement;"
			name=				"Commonwealth settlement"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, fleetDelivery, friendly, generic, human, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			
			size=				"390"
			armorID=			"&itP120HexphaseArmor;"
			hitPoints=			"950"
			multiHull=			"true"
			regen=              "20"
			shipRegen=			"4"
				 
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			fireRateAdj=		"40"
			>

		<Names noArticle="true">Commonwealth Settlement %1%0%0%0</Names>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"*"
				levelFrequency=			"----- -ucr- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; -premiumAmmo; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"		priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-8;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-8;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-8;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-8;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-8;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<ConsumeTrade	criteria="{core.antimatterFuel}"	impact="2"/>
			<ConsumeTrade	criteria="{human.basicFood}"	impact="5"/>
			<ConsumeTrade	criteria="{human.lux}"		impact="3"/>
			<ConsumeTrade	criteria="{human.meds}"		impact="2"/>
			<ConsumeTrade	criteria="{human.res}"		impact="1"/>
			<ConsumeTrade	criteria="{core.ore}"			impact="2"/>
		</Trade>

		<Items>
			<RandomItem count="10" 
					criteria=		"ad L:1-8; +commonwealth; -defective; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="10" 
					criteria=		"*~adm -defective; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>

			<Item count="4d12"	item="&itPteracniumFuelRod;" />
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true"/>
		</Devices>

		<!-- Satellites -->
		
		<Satellites overlapCheck="asteroids">
			<Orbitals distance="12" angle="45">
				<Station type="&stCommonwealthTurret;" imageVariant="2"/>
			</Orbitals>

			<Orbitals distance="12" angle="135">
				<Station type="&stCommonwealthTurret;" imageVariant="1"/>
			</Orbitals>

			<Orbitals distance="12" angle="225">
				<Station type="&stCommonwealthTurret;" imageVariant="0"/>
			</Orbitals>

			<Orbitals distance="12" angle="315">
				<Station type="&stCommonwealthTurret;" imageVariant="3"/>
			</Orbitals>
		</Satellites>

		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="2" table="&tbCommDefenders;"/>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Lookup chance="75" table="&tbCommDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->
		
		<Image imageID="&rsCommonwealthSettlement;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionMainHall" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +commonwealthSettlement; =" (sysGetLevel) ";")
									noMissionTextID: 'descHallEmpty
									maxPerStation: 1
									})
							</Action>

							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>
		
		<!-- Events and Data -->

		<Language>
			<Text id="descWelcome">

				You are in the docking bay of a Commonwealth settlement. Except 
				for a few shuttles, the docking bay of this station is deserted.
				
				A few stationers in flight suits wander around on various tasks.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stCommonwealthNavSign;"
			name=				"(navigational beacon)"
			sovereign=			"&svIndependent;"
			dockScreen=			"&dsNavSign;"
			abandonedScreen=	"&dsAbandonedNavSign;"
			noMapLabel=			"true"

			mass=				"5000"
			armorID=			"&itUltraLightTitaniumArmor;"
			hitPoints=			"20"
			>

		<Names>: NavSign %s-%0%0%0</Names>

		<Image imageID="&rsStations1;" imageX="0" imageY="668" imageWidth="128" imageHeight="64"/>

		<DockingPorts>
			<Port x="-80"		y="0" />
		</DockingPorts>

		<Events>
			<OnCreate>
				(block (
					; These offsets control the position of the text relative to
					; the center of the sign (Cartessian coordinates)

					(xOffset 6)
					(yOffset 19)

					;	Sign text

					(languageTable (objGetData gSource 'languageTable))
					(signText (or
						(typTranslate languageTable (objGetData gSource 'signID))
						(objGetData gSource 'sign)
						(scrTranslate gScreen 'core.navSignText)
						))

					theID 
					)

					; Create an effect for the sign.

					(setq theID 
						(objAddOverlay gSource &ovNavSignText; (sysVectorPixelOffset gSource xOffset yOffset) 0)
						)

					; Set the text of the sign

					(objSetOverlayEffectProperty gSource theID 'text signText)
					)
			</OnCreate>

			<OnDestroy>
				; Remove all overlays
				(enum (objGetOverlays gSource) theID
					(objRemoveOverlay gSource theID)
					)
			</OnDestroy>
		</Events>

		<Language>
			<Text id="core.navSignText">Welcome!</Text>
		</Language>
	</StationType>
<!-- CommonwealthAgricultural.xml -->
<StationType UNID="&stAgriculturalStation;"
			name=				"Commonwealth agricultural colony"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, friendly, generic, human, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			level=				"3"
			size=				"390"
			armorID=			"&itHeavyPlasteelPlate;"
			hitPoints=			"350"
			regen=				"2"
			multiHull=			"Nil"
				 
			explosionType=		"&vtKineticExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"+commonwealthCore;"
				levelFrequency=			"uuurr ----- ----- ----- -----"

				locationCriteria=		"-asteroids, +lifeZone"
				exclusionRadius=		"80"

				unique=					"inSystem"
				/>

		<Names noArticle="true">
			Archer Colony; Buran Station; Chekov Colony; Dante Station;
			Ent Arbor Station; Farmstar Station; Georg Station IV;
			Horticult Colony; Ivanov Station VII; Jol Station;
			Kiev Colony; Luhansk Station; Mykolayiv Prime; New Reni;
			Odesa Agricultural; Petersburg Colony; Rancher Fields Colony;
			Stasohrad Combine; Tree Defenders Station; Ukraine Collective;
			Vostok Station; West Arbor Colony; Yern Station; Zimaril %1;
			%s Collective; %s Colony; %s Alpha; %s Beta; %s Gamma
		</Names>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="*NU +food; -defective; -illegal; -lux; -notForSale;"		priceAdj="100"/>

			<Buy	criteria="*NU +lux; -Illegal; -notForSale; &lt;=$250;"	priceAdj="100"/>
			<Buy	criteria="*NU" item="&itHydrocarbons;"		priceAdj="100"/>
			<Buy	criteria="*NU" item="&itHelium3FuelRod;"	priceAdj="100"/>
			<Buy	criteria="*NU" item="&itOrganicAcid;"		priceAdj="100"/>
			<Buy	criteria="*NU" item="&itMedicalSupplies;"	priceAdj="100"/>
			<Buy	criteria="*NU" item="&itHyperfiberRoll;"	priceAdj="100"/>
			<Buy	criteria="*NU" item="&itBiofactorPaste;"	priceAdj="100"/>
		
			<Refuel			criteria="f +BasicFuel; L:1-5;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-5;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-5;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="2"/>
			<ConsumeTrade	criteria="{human.lux}"		impact="1"/>
			<ConsumeTrade	criteria="{human.meds}"		impact="2"/>
			<ConsumeTrade	criteria="{human.res}"		impact="1"/>

			<ProduceTrade	criteria="{human.basicFood}"	impact="20"/>
		</Trade>

		<Items>
			<RandomItem count="10" 
					criteria=		"* -defective; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					level=			"2"
					levelCurve=		"1"
					/>

			<Lookup count="1d12" table="&trStationSupplies;"/>
			<Item	count="3d12" item="&itGradeBGrains;"/>
			<Item	count="3d12" item="&itGradeAGrains;"/>
			<Item	count="2d12" item="&itWhiteRice;"/>
		</Items>
		
		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="1d4+2" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<!-- Image and Effects -->
		
		<Image imageID="&rsCommonwealthAgriculturalColony;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionMainHall" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +commonwealthAgricultural; =" (sysGetLevel) ";")
									noMissionTextID: 'descHallEmpty
									maxPerStation: 1
									})
							</Action>

							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->

		<Events>
			<GetGlobalAchievements>
				(rpgMissionAchievements &stAgriculturalStation; "* +commonwealthAgricultural;")
			</GetGlobalAchievements>
		</Events>

		<Language>
			<Text id="rpg.missionTypeDesc">Agricultural colony missions</Text>
			<Text id="rpg.stationWillNotBuy">

				%StationName% buys supplies and luxury items. We are not 
				interested in buying %itemName%.

			</Text>

			<Text id="descWelcome">
				You are inside a C9-class prefabricated agricultural station.
			</Text>

			<Text id="core.mapDesc">
				Refuels up to level 5 &mdash; Repairs/installs armor up to level 5 &mdash; Sells food &mdash; Buys luxuries and supplies
			</Text>
		</Language>
	</StationType>
<!-- CommonwealthCenturions.xml -->
<!-- CommonwealthCharacters.xml -->
<!-- CommonwealthFleet.xml -->
<StationType<?xml version="1.0" encoding="utf-8"?>

<TranscendenceModule>
	
<!-- THE COMMONWEALTH FLEET

	GLOBAL DATA
	
	medsDonated:		Cost of total medical supplies donated
	
-->

	<Sovereign UNID="&svCommonwealthFleet;"
			name=":the Commonwealth Fleet"
			shortName=":the Fleet"
			adjective="Fleet"
			demonym=":a Fleet crewmember(s)"

			alignment="constructive chaos"
			>
		<Properties>
			<Global id="cscStatus">
				{
					america: {
						class: &scCSCAmerica;
						nodeID: Nil
						}

					antarctica: {
						class: &scCSCAntarctica;
						nodeID: Nil
						}

					arctica: {
						class: &scCSCArctica;
						nodeID: Nil
						}

					asia: {
						class: &scCSCAsia;
						nodeID: Nil
						}

					atlantica: {
						class: &scCSCAtlantica;
						nodeID: Nil
						}

					india: {
						class: &scCSCIndia;
						nodeID: Nil
						}

					pacifica: {
						class: &scCSCPacifica;
						nodeID: Nil
						}

					sahara: {
						class: &scCSCSahara;
						nodeID: Nil
						}

					terra: {
						class: &scCSCTerra;
						nodeID: Nil
						}
					}
			</Global>
		</Properties>

		<Events>
			<GetGlobalAchievements>
				(block (medsDonated)

					(append
						;	Rank
						(if (gr (objGetData gPlayerShip "fleetXP") 0)
							(list
								(list
									"Commonwealth Fleet rank"
									(typTranslate &svCommonwealthFleet; 'PlayerRank)
									)
								)
							)

						;	Missions
						(rpgMissionAchievements &svCommonwealthFleet; "* +commonwealthFleet;")

						;	Meds donated
						(if (setq medsDonated (typGetGlobalData &svCommonwealthFleet; "medsDonated"))
							(list
								(list
									"Value of supplies donated to Commonwealth Fleet"
									medsDonated
									(typTranslate &unidCommonText; 'missionsAndActivities)
									)
								)
							)
						)
					)
			</GetGlobalAchievements>
			
			<GetGlobalDockScreen>
				(switch
					; This only applies to Fleet ships and stations
					(not (objMatches gSource Nil "sTAV +commonwealthFleet;"))
						Nil
						
					; The remaining screens are only invoked if the ship/station
					; implements Fleet Law (e.g., CSC Antarctica does not).
					(not (objHasAttribute gSource "fleetLaw"))
						Nil
						
					; If the player has committed a crime, then imprisonment
					(geq (int (objGetData gPlayerShip "fleetCrimeSeverity")) 2)
						{	screen:&dsFleetImprison;	priority:8		overrideOnly:true	}
						
					; If the player has committed a Commonwealth crime then she
					; is kicked out of the military.
					(and (geq (int (objGetData gPlayerShip "commonCrimeSeverity")) 2)
							(leq (objGetData gPlayerShip "fleetLevel") 3))
						{	screen:&dsFleetDischarge;	priority:8		overrideOnly:true	}
						
					; If the player does not have a military ID, then
					; refuse dock
					(not (objGetItems gPlayerShip "*+MilitaryID"))
						{	screen:&dsFleetRefuseDock;	priority:6		overrideOnly:true	}
						
					; If the player has committed a Commonwealth crime but is a
					; Fleet lieutenant or higher, then she gets a warning.
					(and (geq (int (objGetData gPlayerShip "commonCrimeSeverity")) 2)
							(not (eq (typGetGlobalData &svCommonwealthFleet; 'commonCrimeWarning) (objGetData gPlayerShip "commonCrime"))))
						{	screen:&dsFleetCrimeWarning;	priority:5		overrideOnly:true	}

					Nil
					)
			</GetGlobalDockScreen>

			<OnGlobalUniverseCreated>
				(block Nil
					; Initialize all variables that we need
					(objSetData gPlayerShip "fleetXP" 0)
					(objSetData gPlayerShip "fleetLevel" 1)
					)
			</OnGlobalUniverseCreated>
		</Events>

		<Language>
			<Text id="PlayerRank">
				(block (
					(rank (objGetData gPlayerShip "fleetLevel"))
					)
					(switch
						(= rank 1) "Civilian"
						(= rank 2) "Privateer"
						(= rank 3) "Ensign"
						(= rank 4) "Fleet lieutenant"
						(= rank 5) "Fleet commander"
						(= rank 6) "Fleet captain"
						(cat "ERROR: Fleet rank: " (or rank "Nil"))
						)
					)
			</Text>

			<Text id="rpg.missionTypeDesc">CSC missions</Text>
		</Language>
	</Sovereign>
	
	<SystemMap unid="&smCSCOperationsSpace;"
			displayOn="&smHumanSpace;"
			>
		<TopologyProcessor priority="secondaryColony">
			<System criteria="+outerRealm;"			attributes="cscOperationsSpace"/>
		</TopologyProcessor>
	</SystemMap>

<!--

PLAYER DATA

	fleetLevel:		Fleet level (1-6)
	fleetXP:		Fleet experience points

-->
	
	<Type unid="&unidCommonwealthFleet;">
		<Properties>
			<Definition id="rankTable">
				(list
					{	rank:0	}
					{	rank:1		id:'civilian			icon:(resCreateImageDesc &rsCommonwealthFleetInsignia;   0   0 256 256)	}
					{	rank:2		id:'privateer			icon:(resCreateImageDesc &rsCommonwealthFleetInsignia;   0 256 256 256)	}
					{	rank:3		id:'ensign				icon:(resCreateImageDesc &rsCommonwealthFleetInsignia; 256   0 256 256)	}
					{	rank:4		id:'fleetLieutenant		icon:(resCreateImageDesc &rsCommonwealthFleetInsignia; 512   0 256 256)	}
					{	rank:5		id:'fleetCommander		icon:(resCreateImageDesc &rsCommonwealthFleetInsignia; 256 256 256 256)	}
					{	rank:5		id:'fleetCaptain		icon:(resCreateImageDesc &rsCommonwealthFleetInsignia; 512 256 256 256)	}
					)
			</Definition>
			<DynamicGlobal id="rank">
				(objGetData gPlayerShip 'fleetLevel)
			</DynamicGlobal>
			<DynamicGlobal id="rankID">
				(block (
					(rank (typ@ gType 'rank))
					)
					(@ (@ (typ@ gType 'rankTable) rank) 'id)
					)
			</DynamicGlobal>
			<DynamicGlobal id="rankIcon">
				(block (
					(rank (or (typ@ gType 'rank) 1))
					(rankTable (typ@ gType 'rankTable))
					)
					(@ (@ rankTable rank) 'icon)
						)
					)
			</DynamicGlobal>
			<DynamicGlobal id="rankNoun">
				(typTranslate gType (cat "rank." (typ@ gType 'rankID)) { gender:(plyGetGenome gPlayer) })
			</DynamicGlobal>
		</Properties>

		<Events>
			<GetGlobalPlayerPriceAdj>
				(block (rank)
					(setq rank (objGetData gPlayerShip 'fleetLevel))

					(switch
						;	Only at Fleet stations/ships

						(not (objHasAttribute aProviderObj 'commonwealthFleet))
							Nil

						;	Refuel is free at level 3 or higher

						(or (= aService 'priceToRefuel)
								(= aService 'decontaminate)
								)
							(switch
								(geq rank 3)	0
								Nil
								)

						;	Armor repair and device installation is free at 
						;	level 4 or higher

						(or (eq aService 'priceToRepairArmor)
								(eq aService 'priceToInstallDevice)
								(eq aService 'priceToRemoveDevice)
								)
							(switch
								(geq rank 4)	0
								Nil
								)

						;	No adjustment
						
						Nil
						)
					)
			</GetGlobalPlayerPriceAdj>
		</Events>

		<Language>
			<Code id="rankDetails">
				(block (
					(rankID (typ@ gType 'rankID))
					(successList (plyGetKeyEventStat gPlayer 'missionSuccess Nil "* +commonwealthFleet;"))
					(failureList (plyGetKeyEventStat gPlayer 'missionFailure Nil "* +commonwealthFleet;"))
					)
					(if rankID
						{
							title: (fmtNoun (typ@ gType 'rankNoun) 1 'titleCapitalize)
							largeIcon: (typ@ gType 'rankIcon)

							details: (list
								{
									title: (typTranslate gType 'labelSuccesses)
									desc: (typTranslate gType 'rtfValue { 
										value: (count successList)
										})
									}
								{
									title: (typTranslate gType 'labelFailures)
									desc: (typTranslate gType 'rtfValue {
										value: (count failureList)
										})
									}
								)

							detailsStyle: 'stats
							align: 'bottom
							}
						)
					)
			</Code>
			<Text id="rank.civilian">:a civilian(s)</Text>
			<Text id="rank.privateer">:a privateer(s)</Text>
			<Text id="rank.ensign">:an ensign(s)</Text>
			<Text id="rank.fleetLieutenant">:a Fleet lieutenant(s)</Text>
			<Text id="rank.fleetCommander">:a Fleet commander(s)</Text>
			<Text id="rank.fleetCaptain">:a Fleet captain(s)</Text>

			<Text id="labelSuccesses">Mission Successes:</Text>
			<Text id="labelFailures">Mission Failures:</Text>
			<RTF id="rtfValue">{/rtf {/f:LargeBold;/c:#ffe667; %value%}}</RTF>

			<Text id="rpg.missionTypeDesc">Commonwealth Fleet missions</Text>
		</Language>
	</Type>

<!-- ENCOUNTERS -->

	<!-- CSC Task Force Encounter -->

	<EncounterType UNID="&stCSCTaskForceEncounter;"
			name=				"(CSC Task Force)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>
		<Properties>
			<Definition id="cscList">
				'(america atlantica asia india pacifica)
			</Definition>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+cscOperationsSpace;"
				systemAffinity=			"*"
				levelFrequency=			"----- -ucu- ----- ----- -----"

				locationCriteria=		"+outerSystem, -planetary"
				enemyExclusionRadius=	"120"

				maxAppearing=			"2-4"
				unique=					"inSystem"
				/>

		<Ships>
			<Ship	count="1"	class="&scCSCAmerica;" orders="hold">
				<GetParameters>
					(block (
						(allCSCs (typ@ &stCSCTaskForceEncounter; 'cscList))
						(cscStatus (typ@ &svCommonwealthFleet; 'cscStatus))

						;	Make a list of all ships that have not yet been encountered

						(cscLeft
							(filter allCSCs cscID
								(not (@ (@ cscStatus cscID) 'nodeID))
								)
							)

						;	Pick a random ship

						(cscToCreate (or (random cscLeft) 'america))
						)
						;	Return the CSC class

						{
							class: (@ (@ cscStatus cscToCreate) 'class)
							}
						)
				</GetParameters>

				<Escorts>
					<Ship					count="1"	class="&scCenturionM;"	orders="guard" controller="fleetcommand">
						<Escorts>
							<Ship     count="6"	class="&scCenturionM;"	orders="escort" controller="fleet"/>
						</Escorts>
					</Ship>
					<Ship					count="1"	class="&scCenturionM;"	orders="guard" controller="fleetcommand">
						<Escorts>
							<Ship     count="6"	class="&scCenturionM;"	orders="escort" controller="fleet"/>
						</Escorts>
					</Ship>
				</Escorts>
			</Ship>
		</Ships>
	</EncounterType>

	<!-- CSC Support Encounter -->

	<EncounterType UNID="&etCSCSupportEncounter;"
			name=				"(CSC Support Ship)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>
		<Properties>
			<Definition id="cscList">
				'(arctica sahara)
			</Definition>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+cscOperationsSpace;"
				systemAffinity=			"*"
				levelFrequency=			"----- rcu-- ----- ----- -----"

				locationCriteria=		"*"
				enemyExclusionRadius=	"120"

				maxAppearing=			"2"
				unique=					"inSystem"
				/>

		<Ships>
			<Ship	count="1"	class="&scCSCArctica;" orders="hold">
				<GetParameters>
					(block (
						(allCSCs (typ@ &etCSCSupportEncounter; 'cscList))
						(cscStatus (typ@ &svCommonwealthFleet; 'cscStatus))

						;	Make a list of all ships that have not yet been encountered

						(cscLeft
							(filter allCSCs cscID
								(not (@ (@ cscStatus cscID) 'nodeID))
								)
							)

						;	Pick a random ship

						(cscToCreate (or (random cscLeft) 'arctica))
						)
						;	Return the CSC class

						{
							class: (@ (@ cscStatus cscToCreate) 'class)
							}
						)
				</GetParameters>

				<Escorts>
					<Ship     count="2d6"	class="&scCenturionM;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>
	</EncounterType>

<!-- SHIP CLASSES -->

	<!-- Level 7: Aurochs Transport -->

	<ShipClass UNID="&scAurochs;"
			manufacturer=		"Pacific Defense"
			class=				"Aurochs"
			type=				"transport"
			defaultSovereign=	"&svCommonwealthFleet;"

			attributes=			"commonwealth, commonwealthFleet, freighter, genericClass, military, pacificDefense"
			inherit=			"&baHumanTechShip;"

			explosionType=		"&vtBlastExplosion3;"
			>

		<Names noArticle="true">
			Aurochs Alpha-%0%0; Aurochs Beta-%0%0; Aurochs Gamma-%0%0;
			Aurochs Delta-%0%0; Aurochs Epsilon-%0%0; Aurochs Zeta-%0%0;
			Aurochs Eta-%0%0; Aurochs Theta-%0%0; Aurochs Iota-%0%0;
			Aurochs Kappa-%0%0; Aurochs Lambda-%0%0; Aurochs Mu-%0%0;
			Aurochs Nu-%0%0; Aurochs Xi-%0%0; Aurochs Omicron-%0%0;
			Aurochs Pi-%0%0; Aurochs Rho-%0%0; Aurochs Sigma-%0%0;
			Aurochs Tau-%0%0; Aurochs Upsilon-%0%0; Aurochs Phi-%0%0;
			Aurochs Chi-%0%0; Aurochs Psi-%0%0; Aurochs Omega-%0%0
		</Names>

		<!-- Hull -->

		<Hull
			size=				"65"
			mass=				"2000"
			cargoSpace=			"2000"

			maxReactorPower=	"10000"
			maxCargoSpace=		"2000"
			maxDevices=			"8"
			maxWeapons=			"3"
			/>

		<Drive
			maxSpeed=			"15"
			thrust=				"1800"
			powerUse=			"120"
			/>

		<Maneuver
			maxRotationRate=	"4.0"
			rotationAccel=		"0.5"
			/>

		<!-- Configuration -->

		<Armor
			armorID=			"&itP120HexphaseArmor;"
			count=				"12"
			/>
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;" omnidirectional="true" posAngle="180" posRadius="12" posZ="10"/>
			<Device deviceID="&itR5Deflector;"/>
		</Devices>

		<Interior>
			<Compartment name="interior"
					hitPoints=	"30"
					/>
			
			<Compartment name="main drive"
					type=		"mainDrive"
					hitPoints=	"70"

					posX=		"-31"
					posY=		"0"
					sizeX=		"28"
					sizeY=		"42"
					/>
			
			<Compartment name="cargo containers"
					type=		"cargo"
					hitPoints=	"50"

					posX=		"10"
					posY=		"0"
					sizeX=		"40"
					sizeY=		"40"
					/>
		</Interior>
		 
		<!-- Treasure -->

		<Items>
			<Item count="1d12" item="&itXenotiteFuelRod;"/>
		</Items>

		<!-- Image and Effects -->

		<Image imageID="&rsAurochsHD;" imageWidth="98" imageHeight="98"		rotationCount="120" rotationColumns="12" viewportRatio="0.009375"/>
		<HeroImage imageID="&rsAurochsHero;" imageWidth="320" imageHeight="320"/>

		<Effects>
			<Effect type="thrustMain"		posAngle="157"	posRadius="43"	posZ="0"	rotation="180"	effect="&efMainThrusterLarge;"/>
			<Effect type="thrustMain"		posAngle="180"	posRadius="42"	posZ="5"	rotation="180"	effect="&efMainThrusterLarge;"/>
			<Effect type="thrustMain"		posAngle="-157"	posRadius="43"	posZ="0"	rotation="180"	effect="&efMainThrusterLarge;"/>
		</Effects>

		<!-- AI and Behavior -->

		<AISettings
			fireRateAdj=		"20"
			fireAccuracy=		"90"
			perception=			"4"
			
			combatStyle=		"standOff"
			/>

	</ShipClass>

	<!-- Level 7: Britannia-class Heavy Gunship -->

	<ShipClass UNID="&scBritannia;"
			manufacturer=		"Pacific Defense"
			class=				"Britannia"
			type=				"heavy gunship"
			defaultSovereign=	"&svCommonwealthFleet;"

			attributes=			"commonwealth, commonwealthMilitary, commonMilitary, commonwealthFleet, genericClass, military, pacificDefense"
			inherit=			"&scBritanniaStock;"
			>

		<!-- Configuration -->

		<Armor
			armorID=			"&itP120HexphaseArmor;"
			/>

		<Devices>
			<Device deviceID="&itStarCannon;"/>
			<Device deviceID="&itR5Deflector;"/>
			<Device deviceID="&itNM900MissilePod;"/>
		</Devices>

		<!-- Treasure -->

		<Items>
			<Item count="2d6" item="&itHeliumAssembly;"/>
		</Items>

		<!-- AI and Behavior -->

		<Events>
			<Reload>
				(block (theMissilePod)
					(setq theMissilePod (item (objGetItems gSource "lI") 0))
					(if theMissilePod
						; Tell the missile pod to reload itself
						(objFireItemEvent gSource theMissilePod "Reload")
						)
					)
			</Reload>
		</Events>
	</ShipClass>

	<ShipClass UNID="&scBritanniaStock;"
			manufacturer=		"Pacific Defense"
			class=				"Britannia"
			type=				"heavy gunship"
			defaultSovereign=	"&svCommonwealthFleet;"

			attributes=			""
			inherit=			"&baHumanTechShip;"
			>

		<!-- Hull -->

		<Hull
			size=				"30"
			mass=				"120"
			cargoSpace=			"100"

			maxReactorPower=	"10000"
			maxCargoSpace=		"200"
			maxDevices=			"9"
			maxNonWeapons=		"6"

			maxArmor=			"massive"
			stdArmor=			"heavy"
			/>

		<Drive
			maxSpeed=			"22"
			thrust=				"1500"
			powerUse=			"90"
			/>

		<Maneuver
			maxRotationRate=	"12.0"
			rotationAccel=		"1.0"
			rotationStopAccel=	"9.0"
			/>

		<Armor
			armorID=			"&itP120HexphaseArmor;"
			count=				"4"
			/>
		
		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itStarCannon;"/>
			<Device deviceID="&itR5Deflector;"/>
			<Device deviceID="&itNM900MissilePod;"/>
		</Devices>

		<!-- Image and Effects -->

		<Image imageID="&rsBritanniaHD;" imageWidth="80" imageHeight="80" rotationCount="120" rotationColumns="12" viewportRatio="0.006"/>
		<HeroImage imageID="&rsBritanniaHero;" imageWidth="320" imageHeight="320"/>

		<Effects>
			<Effect type="thrustMain"		posAngle="154"	posRadius="26"	posZ="0"	rotation="180"/>
			<Effect type="thrustMain"		posAngle="-154"	posRadius="26"	posZ="0"	rotation="180"/>
			<Effect type="rotateRight"		posAngle="82"	posRadius="23"	posZ="0"	rotation="0"/>
			<Effect type="rotateRight"		posAngle="-98"	posRadius="23"	posZ="0"	rotation="180"/>
			<Effect type="rotateLeft"		posAngle="-82"	posRadius="23"	posZ="0"	rotation="0"/>
			<Effect type="rotateLeft"		posAngle="98"	posRadius="23"	posZ="0"	rotation="180"/>
		</Effects>

		<!-- AI and Behavior -->

		<AISettings
			fireRateAdj=		"25"
			fireAccuracy=		"90"
			perception=			"4"
			
			combatStyle=		"advanced"
			/>
	</ShipClass>

	<!-- Level 7: Minotaur-class Corvette -->

	<ShipClass UNID="&scMinotaur;"
			manufacturer=		"NAMI"
			class=				"Minotaur"
			type=				"corvette"
			defaultSovereign=	"&svCommonwealthFleet;"

			attributes=			"commonwealth, commonwealthFleet, genericClass, military, nami"
			inherit=			"&baHumanTechShip;"
			>

		<!-- Hull -->

		<Hull
			size=				"83"
			mass=				"800"
			cargoSpace=			"100"

			maxReactorPower=	"10000"
			maxCargoSpace=		"200"
			maxDevices=			"9"
			maxNonWeapons=		"6"

			maxArmor=			"massive"
			stdArmor=			"heavy"

			valueAdj=			"+2.0"
			/>

		<Drive
			maxSpeed=			"20"
			thrust=				"1200"
			powerUse=			"100"
			/>

		<Maneuver
			maxRotationRate=	"4.0"
			rotationAccel=		"1.0"
			/>

		<DeviceSlots>
			<DeviceSlot id="topturret" criteria="w +property:omnidirectional;" 	posAngle="180" posRadius="18" posZ="10">
				<EnhancementAbilities>
					<Enhance type=			"&vtMinotaurTurretSlot;"
							 enhancement=	"+linkedFire:whenInFireArc;"
							 />
				</EnhancementAbilities>
			</DeviceSlot>
			<DeviceSlot criteria="w +property:multiShot;" posAngle="0" posRadius="20" posZ="0"/>
			<DeviceSlot criteria="w~l" posAngle="32"  posRadius="20" posZ="0"/>
			<DeviceSlot criteria="l"   posAngle="-32" posRadius="20" posZ="0"/>
		</DeviceSlots>

		<!-- Configuration -->

		<Armor
			armorID=			"&itSuperHeavyBlastPlate;"
			startAt=			"0"
			>
			<Armor span="40"/>
			<Armor span="100"/>
			<Armor span="40"/>
			<Armor span="40"/>
			<Armor span="100"/>
			<Armor span="40"/>
		</Armor>
		
		<Devices>
			<Device deviceID="&itMarkVHowitzer;"/>
			<Device deviceID="&itOmniTeV9Blaster;"/>
			<Device deviceID="&itNAMIMissileLauncher;">
				<Items>
					<Item count="2d6" item="&itXM900Missile;"/>
				</Items>
			</Device>
			<Device deviceID="&itR5Deflector;"/>
		</Devices>

		<!-- Treasure -->

		<Items>
			<Item count="1d12" item="&itPteracniumFuelRod;"/>
		</Items>

		<!-- Image and Effects -->

		<Image imageID="&rsMinotaur;" imageWidth="110" imageHeight="110" rotationCount="120" rotationColumns="12" viewportRatio="0.01125"/>
		<HeroImage imageID="&rsMinotaurHero;" imageWidth="320" imageHeight="320"/>

		<Effects>
			<Effect type="thrustMain"		posAngle="180"	posRadius="49"	posZ="-8"	rotation="180"	effect="&efMainThrusterLarge;"/>
			<Effect type="thrustMain"		posAngle="170"	posRadius="50"	posZ="0"	rotation="180"	effect="&efMainThrusterLarge;"/>
			<Effect type="thrustMain"		posAngle="-170"	posRadius="50"	posZ="0"	rotation="180"	effect="&efMainThrusterLarge;"/>
			<Effect type="thrustMain"		posAngle="180"	posRadius="49"	posZ="8"	rotation="180"	effect="&efMainThrusterLarge;"/>
		</Effects>

		<!-- AI and Behavior -->

		<AISettings
			fireRateAdj=		"25"
			fireAccuracy=		"90"
			perception=			"4"
			
			combatStyle=		"standOff"
			/>

	</ShipClass>

	<ItemType UNID="&vtMinotaurTurretSlot;"
			name=				"Minotaur auto-turret"
			virtual=			"true"
			level=				"1"
			>
		<Image imageID="&rsMinotaur;" imageX="0" imageY="0" imageWidth="110" imageHeight="110"/>
	</ItemType>

	<!-- Level 8: Minotaur/M-class Corvette -->

	<ShipClass UNID="&scMinotaurM;"
			manufacturer=		"NAMI"
			class=				"Minotaur/M"
			type=				"corvette"
			defaultSovereign=	"&svCommonwealthFleet;"

			attributes=			"commonwealth, commonwealthFleet, genericClass, military, nami"
			inherit=			"&scMinotaur;"
			>

		<!-- Configuration -->

		<Armor
			armorID=			"&itMassiveIthaliumArmor;"
			/>
		
		<Devices>
			<Device deviceID="&itFusionfireHowitzer;"/>
			<Device deviceID="&itOmniTeV9Blaster;"/>
			<Device deviceID="&itNAMIMissileLauncher;">
				<Items>
					<Item count="2d6" item="&itXM900Missile;"/>
				</Items>
			</Device>
			<Device deviceID="&itR9Deflector;"/>
		</Devices>

		<!-- Image and Effects -->

		<Image imageID="&rsMinotaurM;" imageWidth="110" imageHeight="110" rotationCount="120" rotationColumns="12" viewportRatio="0.01125"/>
		<HeroImage imageID="&rsMinotaurMHero;" imageWidth="320" imageHeight="320"/>

		<!-- AI and Behavior -->

		<AISettings
			fireRateAdj=		"20"
			fireAccuracy=		"90"
			perception=			"4"
			
			combatStyle=		"standOff"
			/>

	</ShipClass>

	<!-- Level 9: Aquila-class Cruiser -->

	<ShipClass UNID="&scAquilaCruiser;"
			manufacturer=		"Pacific Defense"
			class=				"Aquila"
			type=				"cruiser"
			defaultSovereign=	"&svCommonwealthFleet;"

			size=				"220"
			mass=				"26000"
			cargoSpace=			"1000"
			thrustRatio=		"1"
			maxSpeed=			"16"

			cyberDefenseLevel=	"8"
			explosionType=		"&vtThermoExplosion3;"

			level=				"10"
			attributes=			"capitalShip, commonwealth, commonwealthFleet, commonwealthMilitary, genericClass, military, pacificDefense"
			>

		<!-- Configuration -->
		
		<Armor
			armorID=			"&itP210HexphaseArmor;"
			count=				"16"
			/>
		
		<Devices>
			<Device deviceID="&itStarCannon;" secondaryWeapon="true" minFireArc="355" maxFireArc="175" posAngle="90" posRadius="24" posZ="8"/>
			<Device deviceID="&itStarCannon;" secondaryWeapon="true" minFireArc="185" maxFireArc="5" posAngle="-90" posRadius="24" posZ="8"/>
			<Device deviceID="&itNAMIHeavyLauncher;" omnidirectional="true">
				<Items>
					<Item count="4d20" item="&itM2Missile;"/>
				</Items>
			</Device>
			<Device deviceID="&itR9Deflector;"/>
			<Device deviceID="&vtStdDamageControl;"		level="9"/>
		</Devices>

		<Maneuver
			maxRotationRate=	"3"
			rotationAccel=		"0.5"
			/>

		<Interior>
			<Compartment name="interior"
					hitPoints=	"200"
					/>
			
			<Compartment name="main drive"
					type=		"mainDrive"
					hitPoints=	"100"

					posX=		"-75"
					posY=		"0"
					sizeX=		"42"
					sizeY=		"56"
					/>
		</Interior>

		<Image imageID="&rsAquilaHD;" imageWidth="210" imageHeight="210" 	rotationCount="120" rotationColumns="12" viewportRatio="0.01375"/>
		<HeroImage imageID="&rsAquilaHero;" imageWidth="320" imageHeight="320"/>

		<Effects>
			<Effect type="thrustMain"		posAngle="168"	posRadius="94"	posZ="-20"	rotation="180"	effect="&efMainThrusterLarge;"/>
			<Effect type="thrustMain"		posAngle="-168"	posRadius="94"	posZ="-20"	rotation="180"	effect="&efMainThrusterLarge;"/>
			<Effect type="thrustMain"		posAngle="180"	posRadius="94"	posZ="-5"	rotation="180"	effect="&efMainThrusterLarge;"/>
		</Effects>

		<Items>
		</Items>

		<AISettings
			fireRateAdj=		"30"
			fireAccuracy=		"95"
			perception=			"4"

			combatStyle=		"standOff"
			/>

	</ShipClass>
	
<!-- ITEM TYPES -->

	<!-- Ares Campaign Ribbon -->

	<ItemType UNID="&itAresCampaignRibbon;"
			name=				"Ares Campaign Ribbon"
			level=				"7"
			value=				"50"
			mass=				"1"
			frequency=			"rare"
			numberAppearing=	"1"
			attributes=			"Consumable; NotForSale"

			description=		"The Commonwealth Fleet awards this ribbon to all who have been in combat against the Ares Orthodoxy."

			sortName=			"medal, Ares Campaign Ribbon"
			>

		<Image imageID="&rsItems1;" imageX="0" imageY="288" imageWidth="96" imageHeight="96"/>
	</ItemType>

	<!-- R5B deflector -->

	<ItemType UNID="&itR5BDeflector;"
			name=				":an R5-B deflector"
			level=				"7"
			value=				"45000"
			mass=				"3500"
			frequency=			"rare"
			attributes=			"MajorItem; Military; Specialty"

			description=		"Commonwealth Fleet labs created this variant of the R5, but it proved too expensive for widespread deployment."
			>

		<Image imageID="&rsItems1;" imageX="192" imageY="0" imageWidth="96" imageHeight="96"/>

		<Shields
				hitPoints=		"220"
				hpBonus=		"  +0,  +0,  +0,  +0, +75, +25"
				regen=			"40"
				powerUse=		"550"
				/>

	</ItemType>

	<!-- NM900 external missile pod -->

	<ItemType UNID="&itNM900MissilePod;"
			name=				"NM900 external missile pod"
			level=				"7"
			value=				"4200"
			mass=				"1000"
			frequency=			"rare"
			attributes=			"Disposable; MajorItem; Military; NAMI; Specialty"

			charges=			"36"
			massBonusPerCharge=	"40" 
			valueBonusPerCharge="150"

			description=		"This external pod is loaded with thirty-six XM900 nuclear missiles and can be installed without the aid of a station."

			showChargesInUseMenu="true"
			>

		<Image imageID="&rsItemsNAMI4;" imageX="288" imageY="0" imageWidth="96" imageHeight="96"/>

		<Weapon
				type=				"missile"
				launcher=			"true"
				fireRate=			"30"
				powerUse=			"50"
				charges=			"true"

				deviceSlots=		"0"
				external=			"true"
				
				missileSpeed=		"40"
				hitPoints=			"30"
				lifetime=			"120"
				maneuverRate=		"9"

				effect=				"&efMissileNAMI;"
				hitEffect=			"&efThermoFragmentExplosion;"
				sound=				"&snMissileLauncher;"
				>

			<Fragment 
					count=			"1"
					type=			"radius"

					damage=			"thermo:6d24; momentum:6; WMD:7"
					minRadius=		"1"
					maxRadius=		"4"
					missileSpeed=	"0"
					
					hitEffect=		"&efThermoFragmentHit;"
					>
			</Fragment>
		</Weapon>
		
		<Invoke>
			(intAutoInstall gSource gItem)
		</Invoke>

		<Events>
			<Reload>
				; Reloads the pod with missiles
				(objSetItemCharges gSource gItem 36)
			</Reload>
		</Events>

		<Language>
			<Text id="core.charges">missile(s)</Text>
		</Language>
	</ItemType>

	<!-- Lamplighter Archcannon -->

	<ItemType UNID="&itLamplighter;"
			name=				"Lamplighter archcannon"
			level=				"10"
			value=				"950000"
			mass=				"5500"
			frequency=			"notrandom"
			attributes=			"MajorItem; Military"

			description=		"Commissioned by Admiral Decker, this Commonwealth secret weapon is arguably the most powerful weapon created by humans."
			>

		<Image imageID="&rsItems10;" imageX="96" imageY="192" imageWidth="96" imageHeight="96"/>

		<Weapon
				type=				"missile"

				damage=				"antimatter:10d12; WMD:5"
				fireRate=			"16"
				missileSpeed=		"50"
				lifetime=			"60"
				powerUse=			"2000"

				effect=				"&efLamplighterProjectile;"
				sound=				"&snRecoillessCannon;"
				>
		</Weapon>

	</ItemType>

	<!-- Project Lamplighter Prototype -->

	<ItemType UNID="&itLamplighterPrototype;"
			name=				"Project Lamplighter prototype"
			level=				"10"
			value=				"400000"
			mass=				"5500"
			frequency=			"notrandom"
			unknownType=		"&itUnknownLamplighterPrototype;"
			attributes=			"lamplighterPrototype, majorItem, military, questItem"

			description=		"This prototype is designed to test the antimatter blast chamber of the Project Lamplighter weapon."
			>

		<Image imageID="&rsItems10;" imageX="0" imageY="192" imageWidth="96" imageHeight="96"/>

		<Weapon
				type=				"missile"
				failureChance=		"10"

				damage=				"antimatter:6d12; WMD:5"
				fireRate=			"15"
				missileSpeed=		"60"
				lifetime=			"40"
				powerUse=			"3000"

				effect=				"&efLamplighterProjectile;"
				sound=				"&snRecoillessCannon;"
				>
		</Weapon>

	</ItemType>

	<!-- Lamplighter data ROM -->

	<ItemType UNID="&itLamplighterDataROM;"
			name=				"unmarked data ROM"
			level=				"7"
			value=				"0"
			frequency=			"notrandom"
			mass=				"1"
			attributes=			"cannotOrder, consumable, info, lamplighterDataROM, notForSale, questItem"

			description=		"This unmarked ROM contains what looks like experimental data. It contains millions of data points collected over several years; their meaning and purpose is unknown."
			>

		<Image imageID="&rsItems1;" imageX="192" imageY="96" imageWidth="96" imageHeight="96"/>
	</ItemType>

	<!-- Unknown Prototype -->

	<ItemType UNID="&itUnknownLamplighterPrototype;"
			name=				"unknown prototype weapon"
			virtual=			"true"
			level=				"10"
			value=				"100000"

			description=		"This is weapon prototype of some kind. Its markings suggest that it was created by the Commonwealth Fleet."

			attributes=			"unknown"
			>

		<Names>weapon prototype(s) marked "Alpha"; weapon prototype(s) marked "Beta"; weapon prototype(s) marked "Gamma";
			weapon prototype(s) marked "Delta"; weapon prototype(s) marked "Epsilon"; weapon prototype(s) marked "Omega";
			weapon prototype(s) marked "0.1"; weapon prototype(s) marked "X17"; weapon prototype(s) marked "Trinity";
			weapon prototype(s) marked "Halifax"; weapon prototype(s) marked "Test No. 6"; weapon prototype(s) marked "596";
			weapon prototype(s) marked "Hurricane"; weapon prototype(s) marked "Ivy Mike"; weapon prototype(s) marked "Castle Bravo";
			weapon prototype(s) marked "Tsar Bomba"; weapon prototype(s) marked "Smiling Buddha"; weapon prototype(s) marked "RDS-37"
		</Names>

	</ItemType>
	
	<!-- Damage Control Party -->

	<ItemType UNID="&vtDamageControlParty;"
			name=				"(damage control party)"
			level=				"10"
			virtual=			"true"
			>

		<RepairerDevice
				regen=				"10,10,10, 7, 7,  7, 5, 5, 5, 4"
				compartmentRegen=	"10"
				powerUse=			"50"
				/>

	</ItemType>

<!-- DOCK SCREENS -->

	<!-- Fleet Delivery	-->

	<DockScreen UNID="&dsFleetDelivery;"	nestedScreen="true">

		<Panes>
			<Default>
				<OnPaneInit>
					(block (items)
						(setq items (objGetData gSource "fleetMissionCargo"))

						; See if the player has all the items that we expect
						(setq gResult True)
						(enum items thisItem
							(if (not (objHasItem gPlayerShip thisItem))
								(setq gResult Nil)
								)
							)

						(if gResult
							(scrSetDesc gScreen "The dockmaster meets you as you dock: \"Thank you for bringing these supplies&#x97;our situation is desperate.\"")
							(scrSetDesc gScreen "The dockmaster meets you as you dock: \"Where are the supplies that you were supposed to be bringing? Those supplies are desperately needed!\"")
							)
						)
				</OnPaneInit>

				<Actions>
					<Action name="Continue" default="1" cancel="1" key="C">
						(block Nil
							(if gResult
								(block (items missionObj)
									; Remove the supplies
									(setq missionObj (objGetObjRefData gPlayerShip "fleetMission"))
									(setq items (objGetData gSource "fleetMissionCargo"))

									(enum items thisItem
										(objRemoveItem gPlayerShip thisItem)
										)

									; Mission is a success
									(objSetData missionObj "MissionStatus" "success")
									(typIncGlobalData &scCSCTaskForce; "missionsCompleted")
									(objSetData gSource "fleetMissionCargo" Nil)
									(objSetObjRefData gPlayerShip "fleetMission" Nil)
									(shpCancelOrders gPlayerShip)
									)
								)

							(scrExitScreen gScreen)
							)
					</Action>
				</Actions>
			</Default>
		</Panes>

		<Events>
			<GetGlobalDockScreen>
				; If we have a delivery mission to this station, then show
				; the proper screen.
				;
				; The screen is shown with mission priority (4) meaning that
				; it will show up after decon and confiscation screens.
				
				(if	(and (objMatches gSource Nil "sTAV")
						(objGetData gSource "fleetMissionCargo")
						)
					{	screen:&dsFleetDelivery;		priority:4		overrideOnly:true	}
					Nil
					)
			</GetGlobalDockScreen>
		</Events>
	</DockScreen>

	<!-- Fleet only allows docking with military ID	-->

	<DockScreen UNID="&dsFleetRefuseDock;"	
			inherit=		"&dsDockScreenBase;"
			nestedScreen=	"true"
			>
		<Panes>
			<Default>
				<OnPaneInit>
					(scrSetDescTranslate gScreen 'textBlocked {
						location: (if (objIsShip gSource)
							(scrTranslate gScreen 'nounShip)
							(scrTranslate gScreen 'nounInstallation)
							)
						})
				</OnPaneInit>

				<Actions>
					<Action id="actionUndock" default="1" cancel="1">
						(scrExitScreen gScreen 'forceUndock)
					</Action>
				</Actions>
			</Default>
		</Panes>
		<Language>
			<Text id="textBlocked">
				
				As you exit the docking ramp, Commonwealth troopers train their 
				weapons on you:
				
				"This is a military %location%, civie!"
				
			</Text>
			<Text id="nounShip">ship</Text>
			<Text id="nounInstallation">installation</Text>
		</Language>
	</DockScreen>

	<!-- Fleet Promotion -->

	<DockScreen UNID="&dsFleetPromotion;"
			nestedScreen=	"true"
			inherit=		"&dsDockScreenBase;"
			>
		<Panes>
			<Default>
				<OnPaneInit>
					(block (
						(newLevel (intFleetPromotion))
						)
						(scrSetDescTranslate gScreen (cat "Promotion:" newLevel) {
							captainName: (cat "the captain of " (objGetName gSource 'article))
							})

						(switch
							(= newLevel 2)
								(objAddItem gPlayerShip (itmCreate &itAresCampaignRibbon; 1))
							)

						(objSetData gPlayerShip "fleetLevel" newLevel)
						)
				</OnPaneInit>

				<Actions>
					<Action id="actionContinue" default="1" cancel="1">
						(scrExitScreen gScreen)
					</Action>
				</Actions>
			</Default>
		</Panes>

		<Language>
			<Text id="Promotion:2">
				(cat
					"In recognition of your service to the Fleet, " (@ gData 'captainName)
					" awards you the title of Privateer and bestows upon you the Ares Campaign Ribbon."
					)
			</Text>
			<Text id="Promotion:3">
				(cat
					"In recognition of your service to the Fleet, " (@ gData 'captainName)
					" awards you the rank of ensign in the Commonwealth Fleet."
					)
			</Text>
			<Text id="Promotion:4">
				(cat
					"In recognition of your service to the Fleet, " (@ gData 'captainName)
					" promotes you to the rank of Fleet lieutenant."
					)
			</Text>
			<Text id="Promotion:5">
				(cat
					"In recognition of your service to the Fleet, " (@ gData 'captainName)
					" promotes you to the rank of Fleet commander."
					)
			</Text>
			<Text id="Promotion:6">
				(cat
					"In recognition of your service to the Fleet, " (@ gData 'captainName)
					" promotes you to the rank of Fleet captain."
					)
			</Text>
		</Language>
	</DockScreen>

	<!-- Fleet Crime Warning -->

	<DockScreen UNID="&dsFleetCrimeWarning;"	nestedScreen="true">
		<Panes>
			<Default>
				<OnPaneInit>
					(scrSetDesc gScreen (plyComposeString gPlayer (cat
						"As you leave your ship a Fleet officer approaches you:\n\n"
						"\"One moment, %sir%! Looks like you've been tagged by the Commonwealth for some kind of incident. "
						"The record lists '" (objGetData gPlayerShip "commonCrime") ",' which is...uh...a serious crime, %sir%. "
						"Probably a mistake, %sir%, I think. I just thought you'd want to know.\""
						)))
				</OnPaneInit>

				<Actions>
					<Action name="Continue" default="1" cancel="1" key="C">
						(block Nil
							(typSetGlobalData &svCommonwealthFleet; "commonCrimeWarning" (objGetData gPlayerShip "commonCrime"))
							(scrExitScreen gScreen)
							)
					</Action>
				</Actions>
			</Default>
		</Panes>
	</DockScreen>

	<!-- Fleet Discharge -->

	<DockScreen UNID="&dsFleetDischarge;"	nestedScreen="true">
		<Panes>
			<Default>
				<OnPaneInit>
					(block Nil
						(scrSetDesc gScreen (cat 
							"As you enter you are surrounded by heavily armed soldiers. A Fleet officer approaches you:\n\n"
							
							(switch
								(gr (objGetData gPlayerShip "fleetXP") 0)
									"\"Because of your crimes against the Commonwealth you are hereby discharged from the Fleet.\""
									
								(objGetItems gPlayerShip "* +commonwealth; +militaryID")
									"\"Because of your crimes against the Commonwealth your military ID is hereby revoked.\""
									
								"\"You're nothing but a common criminal, not even worth putting in the locker.\""
								)
								
							"\n\nThe soldiers escort you back to your ship."
							))
						)
				</OnPaneInit>

				<Actions>
					<Action name="Undock" default="1" cancel="1" key="U">
						(block (milIDs)
							(objSetData gPlayerShip "fleetLevel" 1)
							(objSetData gPlayerShip "fleetXP" 0)
							(enum (objGetItems gPlayerShip "* +commonwealth; +militaryID") theItem
								(objRemoveItem gPlayerShip theItem)
								)
							(scrExitScreen gScreen 'forceUndock)
							)
					</Action>
				</Actions>
			</Default>
		</Panes>
	</DockScreen>
	
	<!-- Fleet Imprison -->

	<DockScreen UNID="&dsFleetImprison;"	nestedScreen="true">
		<Panes>
			<Default>
				<OnPaneInit>
					(block Nil
						(scrSetDesc gScreen (cat "As you enter you are surrounded by heavily armed soldiers. A Fleet officer approaches you: \"You are charged with treason for " (objGetData gPlayerShip "fleetCrime") "\"" ))
						)
				</OnPaneInit>

				<Actions>
					<Action name="Continue" default="1" cancel="1" key="C">
						(block Nil
							(plyDestroyed gPlayer (cat "was executed for " (objGetData gPlayerShip "fleetCrime")))
							(scrExitScreen gScreen 'forceUndock)
							)
					</Action>
				</Actions>

			</Default>
		</Panes>
	</DockScreen>
	
<!-- GLOBALS -->

	<Globals>
		(block Nil
			(setq intFleetCreateWingmen (lambda (missionObj aCount theClass)
				(block (
					(baseObj (objGetObjByID (msnGetProperty missionObj 'ownerID)))
					(missionID (msnGetProperty missionObj 'id))
					)
					(if (not theClass)
						(setq theClass &scCenturionM;)
						)
					(for i 0 (- aCount 1)
						(block (wingmanObj)
							(setq wingmanObj (sysCreateShip
								theClass
								baseObj
								&svCommonwealthFleet;
								'fleet
								))
							(shpOrder wingmanObj 'escort gPlayerShip i)

							;	Keep track of wingmen
							(objSetData wingmanObj (cat missionID "_wingman") True)
							(msnRegisterForEvents missionObj wingmanObj)
							)
						)
					)
				))

			(setq intFleetCrime (lambda (severity description)
				(if (gr severity (int (objGetData gPlayerShip "fleetCrimeSeverity")))
					(block Nil
						(objSetData gPlayerShip "fleetCrimeSeverity" severity)
						(objSetData gPlayerShip "fleetCrime" description)
						)
					)
				))

			(setq intFleetDisperseWingmen (lambda (missionObj)
				(block (
					(baseObj (objGetObjByID (msnGetProperty missionObj 'ownerID)))
					(missionID (msnGetProperty missionObj 'id))
					(wingmen (sysFindObject Nil (cat "sA D:" missionID "_wingman;")))
					)
					(enum wingmen wingmanObj
						(block Nil
							(shpCancelOrders wingmanObj)
							(shpOrder wingmanObj 'dock baseObj)
							(shpOrder wingmanObj 'gate)
							)
						)
					(count wingmen)
					)
				))
				
			(setq fltOrderCheckPosition (lambda (theCSC)
				(block (enemyObj)
					; Are we in a good spot? If not, then we need to move
					(if (and (setq enemyObj (sysFindObject theCSC "TAEPN"))
							(leq (objGetDistance theCSC enemyObj) 80)
							)
						(block (dest bearing)
							; bearing away from enemy
							(setq bearing 
								(sysVectorAngle (sysVectorSubtract (objGetPos theCSC) (objGetPos enemyObj)))
								)
								
							; Pick a better spot that is away from the enemy
							(setq dest (sysVectorRandom theCSC 
								(lambda Nil
									(sysVectorPolarOffset Nil
										(modulo (add bearing 360 (random -80 80)) 360)
										(random 120 180)
										)
									)
								100 
								"TA"
								))
							
							; Order the ship to move
							(shpCancelOrders theCSC)
							(shpOrder theCSC 'holdCourse
								(sysVectorAngle (sysVectorSubtract dest (objGetPos theCSC)))
								(sysVectorDistance dest (objGetPos theCSC))
								)

							(objSetData theCSC "behavior" 'moving)
							(objSetProperty theCSC 'dockingEnabled Nil)
							True
							)
						Nil
						)
					)
				))

			(setq cscSquadronCreateShip (lambda (theCSC theClass)
				(block (theShip theEntry squadronList)
				
					; Create the ship
					(setq theShip (sysCreateShip theClass theCSC (objGetSovereign theCSC)))
					(objSuspend theShip)
					
					; Create the squadron entry
					(setq theEntry (list (objGetID theShip) theClass 'home))
					
					; Append to the squadron list
					
					(setq squadronList (append (objGetData theCSC "squadron") (list theEntry)))
					(objSetData theCSC "squadron" squadronList)
					
					;(dbgOutput (objGetID theShip) ": Created " (typGetDataField theClass "name"))
					)
				))
				
			(setq cscSquadronDeployShip (lambda (theCSC theClass)
				(block (theID theShip squadronList)
					
					; Look for a ship that matches the class and is currently
					; at "home"
					
					(setq squadronList (objGetData theCSC "squadron"))
					(setq theID (item (match squadronList theEntry (and (eq (item theEntry 1) theClass) (eq (item theEntry 2) 'home))) 0))
					
					; If we found one, deploy the ship
					(if (and theID (setq theShip (objGetObjByID theID)))
						(block Nil
							
							; Ship appears out of the CSC
							(objResume theShip theCSC)
							(objRegisterForEvents theCSC theShip)
							
							; Update squadron list
							(setq squadronList 
								(map squadronList theEntry
									(if (eq (item theEntry 0) theID)
										; Update this entry
										(list theID (item theEntry 1) 'deployed)
										
										; Leave the entry alone
										theEntry
										)
									)
								)
								
							(objSetData theCSC "squadron" squadronList)
							
							;(dbgOutput theID ": Deployed")
							
							; Done
							theShip
							)
							
						; Otherwise, couldn't deploy
						Nil
						)
					)
				))

			(setq intFleetPromotion (lambda Nil
				; Returns level that the player is promoted to (or Nil)

				(block (xp newLevel)
					(setq xp (objGetData gPlayerShip "fleetXP"))
					(switch
						(geq xp 10000)
							(setq newLevel 6)

						(geq xp 3000)
							(setq newLevel 5)

						(geq xp 1500)
							(setq newLevel 4)

						(geq xp 600)
							(setq newLevel 3)

						(geq xp 200)
							(setq newLevel 2)

						(setq newLevel 1)
						)

					; Return if different from current level
					(if (eq (objGetData gPlayerShip "fleetLevel") newLevel)
						Nil
						newLevel
						)
					)
				))

			(setq commFleet_GiveReward (lambda (missionObj)
				(block Nil
					;	Pay the player and record the award
					(rpgMissionRewardPayment (msnGetData missionObj 'reward))

					;	Increase XP
					(objIncData gPlayerShip 'fleetXP (msnGetData missionObj 'missionXP))

					;	Achievement
					(unvSetAchievement 'humanSpace.fleetManeuvers)

					;	dsRPGMission checks for a well-known data member in the mission
					;	object to see if it should navigate to an additional screen.
					(if (and missionObj (intFleetPromotion))
						(msnSetData missionObj 'rewardNextScreen &dsFleetPromotion;)
						)
					)
				))
			)
	</Globals>

<!-- EFFECTS -->

	<EffectType unid="&efLamplighterProjectile;"
			instance=			"owner"
			>
		<Effect>
			<ParticlePattern
					style=			"comet"
					primaryColor=	"#ffe566"
					jitterLength=	"80-150"
					>
				<Events>
					<GetParameters>
						(block (
							(damageHP (@ gData 'damageHP))
							)
							{
								particleCount: (mathScale damageHP 50 680 100 300 50)
								length: (mathScale damageHP 50 680 80 220 50)
								width: (mathScale damageHP 50 680 8 24 50)
								}
							)
					</GetParameters>
				</Events>
			</ParticlePattern>
			
			<Orb
					style=				"smooth"
					animate=			"flicker"
					spikeCount=			"6"
						
					blendMode=			"screen"
					primaryColor=		"#fbffcc"
					secondaryColor=		"#ffe566"
					>
				<Events>
					<GetParameters>
						(block (
							(damageHP (@ gData 'damageHP))
							)
							{
								radius: (mathScale damageHP 50 680 30 80 50)
								intensity: (mathScale damageHP 50 680 20 50 50)
								}
							)
					</GetParameters>
				</Events>
			</Orb>
		</Effect>
	</EffectType>

<!-- TABLES -->

	<EncounterTable UNID="&etKobolAmbush1;">
		<Table count="1d3+2">
			<Ship chance="50"	count="1"	class="&scKobolGunshipDualTeV9;"	orders="attack" sovereign="&svKobolWarlords;"/>
			<Ship chance="30"	count="1"	class="&scKobolGunshipOmniTeV9;"	orders="attack" sovereign="&svKobolWarlords;"/>
			<Ship chance="20"	count="1"	class="&scKobolGunshipMissiles;"	orders="attack" sovereign="&svKobolWarlords;"/>
		</Table>
	</EncounterTable>

	<ItemTable unid="&tbCommonwealthFleetItems;">
		<Table>
			<LevelTable chance="40">
				<Item levelFrequency="vvruc curv-"	count="2d4" item="&itBlastPlate;"/>
				<Item levelFrequency="--vru ccurv"	count="2d4" item="&itAdvancedCeralloyArmor;"/>
				<Item levelFrequency="--vru ccurv"	count="2d4" item="&itP120HexphaseArmor;"/>
				<Item levelFrequency="---vr uccur"	count="2d4" item="&itOrthoSteel;"/>
				<Item levelFrequency="---vr uccur"	count="1d4" item="&itP210HexphaseArmor;"/>
				<Item levelFrequency="----v ruccu"	count="1d4" item="&itHexacarbideArmor;"/>
			</LevelTable>

			<LevelTable chance="40">
				<Item levelFrequency="vvruc curv-"	count="1"	item="&itTeV9Blaster;"/>
				<Item levelFrequency="vvruc curv-"	count="1"	item="&itSAR10Cannon;"/>
				<Item levelFrequency="--vru ccurv"	count="1"	item="&itDualSAR10Cannon;"/>
				<Item levelFrequency="--vru ccurv"	count="1"	item="&itSAR40Cannon;"/>
				<Item levelFrequency="--vru ccurv"	count="1"	item="&itOmniTeV9Blaster;"/>
				<Item levelFrequency="--vru ccurv"	count="1"	item="&itStarCannon;"/>
				<Item levelFrequency="--vru ccurv"	count="1"	item="&itNM900MissilePod;"/>
				<Item levelFrequency="---vr uccur"	count="1"	item="&itFusionfireHowitzer;"/>
				<Item levelFrequency="---vr uccur"	count="1"	item="&itIonBlaster;"/>
				<Item levelFrequency="----v ruccu"	count="1"	item="&itNAMIHeavyLauncher;"/>
				<Item levelFrequency="----v ruccu"	count="1"	item="&itSAR200AdvancedCannon;"/>
			</LevelTable>

			<LevelTable chance="20">
				<Item levelFrequency="vvruc curv-"	count="1"	item="&itR5Deflector;"/>
				<Item levelFrequency="--vru ccurv"	count="1"	item="&itR5BDeflector;"/>
				<Item levelFrequency="---vr uccur"	count="1"	item="&itR9Deflector;"/>
			</LevelTable>
		</Table>
	</ItemTable>

<!-- RESOURCES -->

	<Image UNID="&rsCommonwealthFleetInsignia;"			bitmap="Resources\CommonwealthFleetInsignia.jpg" bitmask="Resources\CommonwealthFleetInsigniaMask.bmp" loadOnUse="true"/>

	<Image UNID="&rsAquilaHD;"				bitmap="Resources\AquilaHD.jpg" bitmask="Resources\AquilaHDMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsAquilaHero;"			bitmap="Resources\AquilaLarge.jpg" bitmask="Resources\AquilaLargeMask.bmp" loadOnUse="true"/>

	<Image UNID="&rsAurochsHD;"				bitmap="Resources\AurochsHD.jpg"	bitmask="Resources\AurochsHDMask.bmp" 	loadOnUse="true" />
	<Image UNID="&rsAurochsHero;"			bitmap="Resources\AurochsLarge.jpg"	bitmask="Resources\AurochsLargeMask.bmp" 	loadOnUse="true" />
	
	<Image UNID="&rsMinotaur;"				bitmap="Resources\Minotaur.jpg" bitmask="Resources\MinotaurMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsMinotaurHero;"			bitmap="Resources\MinotaurLarge.jpg" bitmask="Resources\MinotaurLargeMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsMinotaurM;"				bitmap="Resources\MinotaurM.jpg" bitmask="Resources\MinotaurMMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsMinotaurMHero;"			bitmap="Resources\MinotaurMLarge.jpg" bitmask="Resources\MinotaurMLargeMask.bmp" loadOnUse="true"/>

	<Image UNID="&rsBritanniaHD;"			bitmap="Resources\BritanniaHD.jpg" bitmask="Resources\BritanniaHDMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsBritanniaHero;"			bitmap="Resources\BritanniaLarge.jpg" bitmask="Resources\BritanniaLargeMask.bmp" loadOnUse="true"/>

	<Image UNID="&rsCenturionHD;"			bitmap="Resources\CenturionHD.jpg"	bitmask="Resources\CenturionHDMask.bmp" 	loadOnUse="true" />

</TranscendenceModule>
</StationType>
<!-- CommonwealthFleetMission01.xml -->
<!-- CommonwealthFleetMission02.xml -->
<!-- CommonwealthFleetMission03.xml -->
<!-- CommonwealthFleetMission04.xml -->
<!-- CommonwealthFleetMission05.xml -->
<!-- CommonwealthFleetMission06.xml -->
<!-- CommonwealthFleetMission07.xml -->
<!-- CommonwealthFleetMission08.xml -->
<!-- CommonwealthFleetMission09.xml -->
<!-- CommonwealthFleetMission10.xml -->
<!-- CommonwealthFleetMission11.xml -->
<!-- CommonwealthFleetMissionLL01.xml -->
<!-- CommonwealthFleetMissionLL02.xml -->
<StationType UNID="&stRogueBaseRescue;"
			name=				"Rogue Fleet settlement"
			sovereign=			"&svRogueFleet;"
			abandonedScreen=	"Main"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itP120HexphaseArmor;"
			maxHitPoints=		"250"
			hitPoints=			"0"
			regen=				"6"
			shipRegen=			"6"
			fireRateAdj=		"20"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, envAir, envAvoidsFire, human, populated, rogue"
			>

		<Image			imageID="&rsStations8;" imageX="128" imageY="896" imageWidth="128" imageHeight="128"/>

		<Devices>
			<Device deviceID="&itStarCannon;"	omnidirectional="true"/>
		</Devices>

		<Ships>
			<Ship		count="1"		class="&scCenturionXRogue;" orders="patrol" patrolDist="20"/>
			<Ship		count="1d2+1"	class="&scCenturionRogue;" orders="patrol" patrolDist="20"/>
			<Ship		count="1d2"		class="&scCenturionRogue;" orders="guard"/>
		</Ships>

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descDefault">
						<Actions>
							<Action name="Undock" cancel="1" default="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="descDefault">

				Smoke, debris, and blast marks remain after a ferocious battle.
				No one is left alive.

			</Text>
		</Language>
	</StationType>
<!-- CommonwealthFleetMissionLL03.xml -->
<!-- CommonwealthFleetMissionLL04.xml -->
<!-- CommonwealthFleetMissionPJ01.xml -->
<!-- CommonwealthMetropolis.xml -->
<StationType UNID="&stCommonwealthStation;"
			name=				"(Commonwealth metropolis)"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, friendly, generic, human, majorStation, primary, populated"

			dockScreen=			"&dsCommonwealthStation;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=              "5"
			size=				"670"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"1000"
			multiHull=			"true"
			regen=				"8"
			shipRegen=			"4"
			
			explosionType=		"&vtBlastExplosion4;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"+commonwealthCore;"
				levelFrequency=			"rurrv ----- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"100"

				unique=					"inSystem"
				/>
		
		<Names noArticle="true">
			Starton %s
		</Names>
		
		<Properties>
			<Constant id="maxMilitiaMissions">(random 3 4)</Constant>
		</Properties>

		<!-- Trade and Items -->
		
		<Trade currency="credit"	max="500000">
			<Sell	criteria="m +commonwealth; -defective; -military; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"		priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-6;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-7;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-7;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-6;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-6;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="5"/>
			<ConsumeTrade	criteria="{human.basicFood}"	impact="10"/>
			<ConsumeTrade	criteria="{human.lux}"		impact="10"/>
			<ConsumeTrade	criteria="{human.meds}"		impact="4"/>
			<ConsumeTrade	criteria="{human.res}"		impact="2"/>
			<ConsumeTrade	criteria="{core.ore}"			impact="4"/>
		</Trade>

		<Items>
			<RandomItem count="2d10" 
					criteria=		"a L:1-7; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard; -specialty;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="1d4" 
					criteria=		"r L:1-6; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard;"	
					levelFrequency="systemLevel:ru|c|curv"
					/>
			<RandomItem count="2d10" 
					criteria=		"d~r L:1-6; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard; -specialty;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			
			<RandomItem count="20" 
					criteria=		"*~adm -alien; -defective; -illegal; -military; -notForSale; -notStandard; -specialty;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>
		</Items>

		<!-- Configuration -->
		

		<!-- Satellites -->
		
		<Satellites>
			<Orbitals distance="15" angle="90">
				<Station type="&stNavBeacon;" imageVariant="1"/>
			</Orbitals>

			<Orbitals distance="15" angle="270">
				<Station type="&stNavBeacon;" imageVariant="1"/>
			</Orbitals>
		</Satellites>
		
		<!-- Ships and Defenses -->

		<Squadrons>
			<Squadron table="&tbCommEliteDefenders;"	count="2-4"/>
			<Squadron table="&tbCommPrivateCrafts;"		count="1-4"/>
		</Squadrons>
		
		<!-- Image and Effects -->
		
		<Image			imageID="&rsCommonwealthMetropolis;" imageWidth="480" imageHeight="480"/>
		
		<DockingPorts
				portCount=		"14"
				portRadius=		"245"
				>
		</DockingPorts>
		
		<!-- Events and Behavior -->

		<Events>
			<OnCreate>
				(sysAddObjRecurringTimerEvent 150 gSource "OnTrafficControl")
			</OnCreate>
			
			<OnTrafficControl>
				(comTrafficControl gSource 20)
			</OnTrafficControl>
		</Events>
	</StationType>
<StationType UNID="&stCommonwealthStationArmored;"
			name=				"(Commonwealth metropolis, armored)"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, fleetDelivery, friendly, generic, human, majorStation, primary, populated"
				 
			dockScreen=			"&dsCommonwealthStation;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"7"
			size=				"670"
			armorID=			"&itP120HexphaseArmor;"
			hitPoints=			"1900"
			multiHull=			"true"
			regen=				"15"
			shipRegen=			"8"

			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"+commonwealthCore;"
				levelFrequency=			"---ru urv-- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"100"

				unique=					"inSystem"
				/>
		
		<Names noArticle="true">
			Starton %s
		</Names>

		<Properties>
			<Constant		id="rpg.shipBrokerCriteria">"s +systemLevel:0-2; +commonwealth; -notStandard; +shipBroker;"</Constant>
			<DynamicData	id="rpg.shipBrokerInventory">(rpgGetShipInventory gSource)</DynamicData>

			<Constant		id="maxMilitiaMissions">(random 3 4)</Constant>
		</Properties>

		<!-- Trade and Items -->
		
		<Trade currency="credit"	max="1000000">
			<Sell	criteria="m +commonwealth; -defective; -premiumAmmo; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"		priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-8;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-9;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-9;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-8;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-8;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<SellShip		criteria="s -notForSale;" priceAdj="100"/>
			<BuyShip		criteria="s L:1-10; -notForSale;" priceAdj="80"/>

			<ConsumeTrade	criteria="{core.antimatterFuel}"	impact="5"/>
			<ConsumeTrade	criteria="{human.basicFood}"	impact="10"/>
			<ConsumeTrade	criteria="{human.lux}"		impact="10"/>
			<ConsumeTrade	criteria="{human.meds}"		impact="4"/>
			<ConsumeTrade	criteria="{human.res}"		impact="2"/>
			<ConsumeTrade	criteria="{core.ore}"			impact="4"/>
		</Trade>
		
		<Items>
			<RandomItem count="2d10" 
					criteria=		"a L:1-9; +commonwealth; -defective; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="1d4" 
					criteria=		"r L:4-8; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard;"
					levelFrequency="systemLevel:ru|c|curv"
					/>
			<RandomItem count="2d10" 
					criteria=		"d~r L:1-8; +commonwealth; -defective; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			
			<RandomItem count="20" 
					criteria=		"*~adm -defective; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>
		</Items>
		
		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true" posAngle="39"  posRadius="215"	posZ="0"/>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true" posAngle="90"  posRadius="215"	posZ="0"/>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true" posAngle="141" posRadius="215"	posZ="0"/>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true" posAngle="193" posRadius="215"	posZ="0"/>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true" posAngle="244" posRadius="215"	posZ="0"/>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true" posAngle="296" posRadius="215"	posZ="0"/>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true" posAngle="347" posRadius="215"	posZ="0"/>
		</Devices>

		<!-- Satellites -->
		
		<Satellites>
			<Orbitals distance="15" angle="90">
				<Station type="&stNavBeacon;" imageVariant="1"/>
			</Orbitals>

			<Orbitals distance="15" angle="270">
				<Station type="&stNavBeacon;" imageVariant="1"/>
			</Orbitals>
		</Satellites>

		<!-- Ships and Defenses -->

		<Squadrons>
			<Squadron table="&tbCommEliteDefenders;"	count="3-4"/>
			<Squadron table="&tbCommPrivateCrafts;"		count="1-4"/>
		</Squadrons>
		
		<!-- Image and Effects -->
		
		<Image			imageID="&rsCommonwealthMetropolisArmored;" imageWidth="480" imageHeight="480"/>
		
		<DockingPorts
				portCount=		"14"
				portRadius=		"245"
				>
		</DockingPorts>
		
		<!-- Events and Behavior -->

		<Events>
			<OnCreate>
				(sysAddObjRecurringTimerEvent 150 gSource "OnTrafficControl")
			</OnCreate>

			<OnTrafficControl>
				(comTrafficControl gSource 20)
			</OnTrafficControl>
		</Events>
	</StationType>
<!-- CommonwealthMilitia.xml -->
<StationType UNID="&stCommonwealthFortress;"
			name=				"Commonwealth fortress(es)"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"

			attributes=			"commonwealth, commonwealthArmory, commonwealthCustoms, commonwealthMilitary, commonMilitary, fleetDelivery, friendly, generic, human, majorStation, primary, populated"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"6"
			size=				"450"
			armorID=			"&itP120HexphaseArmor;"
			hitPoints=			"1400"
			multiHull=			"true"
			regen=              "11"
			shipRegen=			"10"

			explosionType=		"&vtBlastExplosion4;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"+commonwealthCore;"
				levelFrequency=			"---cc ur--- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"75"

				unique=					"inSystem"
				/>

		<Properties>
			<Constant		id="rpg.shipBrokerCriteria">"s +systemLevel:0-2; +commonwealth; +military; -notStandard; +shipBroker;"</Constant>
			<DynamicData	id="rpg.shipBrokerInventory">(rpgGetShipInventory gSource)</DynamicData>
		</Properties>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur" noDescription="true"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100" noDescription="true"/>

			<Refuel			criteria="f +BasicFuel; L:3-8;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-8;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-8;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-8;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-8;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<SellShip		criteria="s -notForSale;" priceAdj="100"/>
			<BuyShip		criteria="s L:1-10; -notForSale;" priceAdj="80"/>

			<ConsumeTrade	criteria="{core.antimatterFuel}"		impact="3"/>
		</Trade>

		<Items>
			<RandomItem count="2d10"
					criteria=		"ad~r L:1-8; +commonwealth; -alien; -defective; -illegal; -notForSale; -notStandard; -specialty;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="1d4"
					criteria=		"r L:4-8; +commonwealth; -alien; -defective; -illegal; -specialty; -notForSale; -notStandard;"
					levelFrequency="systemLevel:ru|c|curv"
					/>

			<Item				count="16d20"	item="&itKM500Missile;" />
			<Item				count="8d20"	item="&itKM550Missile;" />
			<Item				count="8d20"	item="&itXM900Missile;" />
		</Items>

		<!-- Configuration -->

		<!-- Ships and Defenses -->

		<Ships>
			<Lookup count="2d3+1" table="&tbCommEliteDefenders;"/>
		</Ships>

		<Reinforcements minShips="5">
			<Lookup table="&tbCommEliteDefenders;"/>
		</Reinforcements>

		<!-- Image and Effects -->

		<Image			imageID="&rsCommonwealthMilitiaFortress;" imageWidth="322" imageHeight="300" viewportRatio="0.05875"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"185"
				>
		</DockingPorts>

		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<Display type="detailsPane">
					<OnDisplayInit>
						(typTranslate &unidCommonwealthMilitia; 'rankDetails)
					</OnDisplayInit>
				</Display>

				<Panes>
					<Default>
						<OnPaneInit>
							(block (rank)
								(setq rank (typGetData &unidCommonwealthMilitia; 'rank))

								(switch
									(not rank)
										(scrSetDescTranslate gScreen "descWelcome:New")

									(= rank -1)
										(scrSetDescTranslate gScreen "descWelcome:Blacklisted")

									(scrSetDescTranslate gScreen (cat "descWelcome:" rank))
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionInformation">
								(scrShowScreen gScreen &dsRPGDialog; (objTranslate gSource 'militia.info))
							</Action>

							<Action id="actionCommandCenter" default="1">
								(block (
									(rank (typGetData &unidCommonwealthMilitia; 'rank))
									(commonCriteria (cat "n +commonwealthMilitia; -commonwealthVolunteer; +rank" (int rank) "; =" (sysGetLevel) ";"))
									)
									(if (objGetItems gPlayerShip "* +militaryID;")

										;	If we have a military ID, we gain access to Militia missions.
										(rpgMissionAssignment {
											missionCriteria: commonCriteria
											displayCriteria: "n +commonwealthMilitia;"
											noMissionTextID: 'descNoMissions
											maxPerStation: (+ 6 (modulo (objGetDestiny gSource) 3))
											})

										;	Otherwise we only get some missions

										(rpgMissionAssignment {
											missionCriteria: (cat commonCriteria " -requiresID;")
											displayCriteria: "n +commonwealthMilitia;"
											noMissionTextID: 'descNoCommandCenterAccess
											maxPerStation: (+ 3 (modulo (objGetDestiny gSource) 3))
											})
										)
									)
							</Action>

							<Action id="actionDockServices">
								(if (gr (typGetData &unidCommonwealthMilitia; 'rank) 0)
									(rpgDockServices gPlayerShip)
									(scrShowScreen gScreen &dsRPGMessage; { textID:'descNoDockServicesAccess })
									)
							</Action>

							<Action id="actionBuyShip">
								(if (gr (typGetData &unidCommonwealthMilitia; 'rank) 0)
									(scrShowScreen gScreen &dsRPGShipBroker;)
									(scrShowScreen gScreen &dsRPGMessage; { textID:'descNoShipBrokerAccess })
									)
							</Action>

							<Action id="actionOfficersClub">
								(if (gr (typGetData &unidCommonwealthMilitia; 'rank) 0)
									(scrShowPane gScreen "OfficersClub")
									(scrShowScreen gScreen &dsRPGMessage; { textID:'descNoOfficersClubAccess })
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>

					</Default>

					<OfficersClub descID="descOfficersClub">
						<Actions>
							<Action id="actionBar" default="1">
								(if (ls (plyGetCredits gPlayer) 5)
									(scrShowScreen gScreen &dsRPGMessage; { textID:'descBarNoMoney })

									(block (
										(rank (typGetData &unidCommonwealthMilitia; 'rank))
										)
										(plyCharge gPlayer 5)
										(switch
											;	If the player is black-listed, then she is not welcome
											;	NOTE - won't happen as we need positive rank to get here
											(= rank -1)
												(scrShowScreen gScreen &dsRPGMessage; { textID:'descBarBlacklisted })

											; Make sure enough time passes between encounters
											(gr (objGetData gSource 'NextBarEncounter) (unvGetTick))
												(scrShowScreen gScreen &dsRPGMessage; { textID:'descBarEmpty })

											;	If the player is a captain, they can meet Jenna
											(and (= rank 2)
												(not (typGetGlobalData &chJenna; 'status))
												(leq (random 1 100) 60)
												)
												(scrShowScreen gScreen &dsRPGWingmanEncounter; {wingman: &chJenna;})

											;	If the player is a major, then another chance for a henchman
											(and (= rank 3)
												(not (typGetGlobalData &chRama; 'status))
												(leq (random 1 100) 80)
												)
												(scrShowScreen gScreen &dsRPGWingmanEncounter; {wingman: &chRama;})

											;	Otherwise, we get rumors
											(block Nil
												(objSetData gSource 'NextBarEncounter (+ (unvGetTick) (random 1500 2000)))
												(rpgMissionAssignment {
													missionCriteria: (cat "n +commonwealthMilitiaOC; =" (sysGetLevel) ";")
													displayCriteria: "n +commonwealthMilitiaOC;"

													rumorInterval: 0
													noMissionTextID: 'descBarEmpty
													})
												)
											)
										)
									)
							</Action>

							<Action id="actionLeave" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</OfficersClub>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->

		<Events>
			<OnCreate>
				(block (gate gateList count)
					; Get the list of gates in the system
					(setq gateList (sysFindObject gSource "G -uncharted;"))

					; Place nav beacons between us and the stargates in this system
					(setq count 0)
					(enum gateList gate
						(block (beacon)
							(setq beacon
								(sysCreateStation &stNavBeacon;
									(sysVectorAdd
										(objGetPos gSource)
										(sysVectorDivide
											(sysVectorSubtract
												(objGetPos gate)
												(objGetPos gSource)
												)
											2
											)
										)
									)
								)

							; Name the nav beacons
							(if (ls count 5)
								(objSetName beacon
									(cat "NavBeacon " (item '(Alpha Beta Gamma Delta Epsilon) count))
									)
								)

							; Remember which NavBeacon goes with each gate
							(objSetObjRefData gate "NavBeacon" beacon)

							(setq count (add count 1))
							)
						)
					)
			</OnCreate>

			<GetRumors>
				(append
					(rpgRumorAdd 'commonwealthMilitiaOC (make 'sequence 8))

					(if (= (objGetProperty gPlayerShip 'characterClass) &unidPilgrimClass;)
						(rpgRumorAdd 'commonwealthMilitiaOC (make 'sequence 21 23))
						(rpgRumorAdd 'commonwealthMilitiaOC (make 'sequence 41 43))
						)
					)
			</GetRumors>
		</Events>

		<Language>
			<Text id="actionCommandCenter">[C]ommand Center</Text>
			<Text id="actionOfficersClub">[O]fficers' Club</Text>
			<Text id="actionBar">[S]it at the Bar</Text>
			<Text id="actionInformation">[I]nformation</Text>

			<Text id="rumor.commonwealthMilitiaOC.1">

				A man with a prosthetic arm sits next to you:
				"I've been flying for the militia for years, but I'd much
				rather be helping the Fleet. No one's seen them in a long time.
				They must be at the Ares Homeworld by now."

			</Text>
			<Text id="rumor.commonwealthMilitiaOC.2">

				A man and a woman sit next to you. The woman starts a conversation with you:
				"We're students from St. Katharine's Star! It's so exciting to be
				here where all the action is! We're writing a doctoral thesis on
				the role of minority neohumans on reductive militia policy. Wish us luck!"

			</Text>
			<Text id="rumor.commonwealthMilitiaOC.3">

				An older pilot sits next to you: "Don't underestimate the slavers!
				We've been fighting them for years and they just keep advancing their
				technology. There are rumors that they've developed a new archcannon
				powered by their longzhu spheres."

			</Text>
			<Text id="rumor.commonwealthMilitiaOC.4">

				A woman sits next to you: "My husband is in the Commonwealth Fleet
				and I haven't seen him for years. Sometimes I get messages from him,
				but it's never good news."

			</Text>
			<Text id="rumor.commonwealthMilitiaOC.5">

				A young man wearing trendy clothes talks with you: "I think that
				girl in the flight suit likes me. What do you think?"

			</Text>
			<Text id="rumor.commonwealthMilitiaOC.6">

				A short-haired woman talks to you: "My cousin's best friend says that
				the CSC Europa got blown up by the Ares. They should pull back the
				Fleet and have them fight the slavers! You know what I mean? What's the point?"

			</Text>
			<Text id="rumor.commonwealthMilitiaOC.7">

				A dark-skinned woman talks with you: "My best friend went to the
				Core; it was two years ago, I think. A year later they found her
				wreckage in the Sanctuary system; she left me a message, but
				I've never been able to read it."

			</Text>
			<Text id="rumor.commonwealthMilitiaOC.8">

				A tall woman talks to you: "I'm doing research on the Iocrym.
				It is curious, don't you think, that they haven't returned? A lot of
				ignorant people think they are preparing to invade, which is ridiculous.
				They wouldn't travel thousands of light-years just to kill us. Why bother?"

			</Text>

			<Text id="rumor.commonwealthMilitiaOC.21">

				A well-dressed woman sits next to you: "You're heading to the galactic
				what? I don't know&#x97;sounds like brainwashing to me."

			</Text>
			<Text id="rumor.commonwealthMilitiaOC.22">

				A short, round man sits next to you: "You're going to the Core?
				Elegant! Maybe you'll get to meet the aliens."

			</Text>
			<Text id="rumor.commonwealthMilitiaOC.23">

				A young woman sits next to you: "Why does Domina compel you to go to
				the Core? I suppose you won't find out until you get there. Still,
				it's nice to have a purpose in life."

			</Text>

			<Text id="rumor.commonwealthMilitiaOC.41">

				A well-dressed woman sits next to you: "You're doing what?
				I don't know&#x97;sounds like a wasted life to me."

			</Text>
			<Text id="rumor.commonwealthMilitiaOC.42">

				A short, round man sits next to you: "You're a merc? Elegant!
				Have you been in many battles?"

			</Text>
			<Text id="rumor.commonwealthMilitiaOC.43">

				A young woman sits next to you: "Must be nice to travel so much.
				I visited Rigel Aurelius with my parents when I was little, but
				I don't remember anything."

			</Text>

			<Text id="descWelcome:New">

				You are in the main hall of a Commonwealth Militia Fortress. 
				Squadron leaders rush through the hall reading mission 
				briefings and weapons manifests. You feel out of place here.

			</Text>
			<Text id="descWelcome:Blacklisted">

				You are in the main hall of a Commonwealth Militia Fortress.
				Squadron leaders rush through the hall reading mission 
				briefings and weapons manifests. You feel out of place here.

			</Text>
			<Text id="descWelcome:1">

				You are in the main hall of a Commonwealth Militia Fortress.
				Squadron leaders rush through the hall reading mission 
				briefings and weapons manifests.

			</Text>
			<Text id="descWelcome:2">

				You are in the main hall of a Commonwealth Militia Fortress.
				Squadron leaders rush through the hall on various missions; 
				several stop to say hello to you. You feel like you belong.

			</Text>
			<Text id="descWelcome:3">

				You are in the main hall of a Commonwealth Militia Fortress.
				Squadron leaders rush through the hall on various missions, 
				each one stops to salute you as you pass.

			</Text>
			<Text id="descNoCommandCenterAccess">

				Two guards flank the door to the Command Center. One of them 
				checks your ID against a computer list:

				"Sorry, %sir%, only experienced pilots are allowed inside."

			</Text>
			<Text id="descNoMissions">
				(if (= (typGetData &unidCommonwealthMilitia; 'rank) -1)
					(typTranslate &stCommonwealthFortress; 'descNoMissions.blacklisted)
					(typTranslate &stCommonwealthFortress; 'descNoMissions.normal)
					)
			</Text>
			<Text id="descNoMissions.blacklisted">

				"How about getting us a cup of tea or something? That's probably
				a mission you could handle."

			</Text>
			<String id="descNoMissions.normal">

				"Sorry, there are no missions currently available."

			</String>
			<Text id="descNoOfficersClubAccess">

				Two guards flank the door to the Officers' Club. One of them 
				checks your ID against a computer list:

				"Sorry, %sir%, only officers are allowed in the club."

			</Text>
			<Text id="descNoDockServicesAccess">

				Two guards flank the door to Dock Services. One of them checks 
				your ID against a computer list:

				"Sorry, %sir%, only militia members are allowed in."

			</Text>
			<Text id="descNoShipBrokerAccess">

				Two guards flank the door checking IDs:

				"Sorry, %sir%, only militia members are allowed in."

			</Text>
			<Text id="descOfficersClub">

				The Officers' Club is packed with pilots and other officers having a
				few drinks to pass away the off-duty hours.

			</Text>
			<Text id="descBarNoMoney">

				You sit at the bar, but you don't even have enough money to buy 
				a drink.
				
				You feel out of place.
				
			</Text>
			<Text id="descBarBlacklisted">
			
				You spend 5 credits on drinks, but everyone avoids you. You feel
				out of place here.
				
			</Text>
			<Text id="descBarEmpty">
			
				You spend 5 credits on drinks, but there aren't too many people 
				here that you want to talk to.
				
			</Text>

			<Text id="descLibraryComputer">

				A set of booths along the wall give you access to a holographic
				computer system. You sit down at one of them and access the
				data banks.

			</Text>

			<Text id="militia.info">
				(list
					{	id: 'welcome
						descID: 'textInfo1
						actions: (list
							{	labelID: 'actionOurMission			nextPage:'ourMission	}
							{	labelID: 'actionUngoverned			nextPage:'ungoverned	}
							{	labelID: 'actionEnemyIntel			nextPage:'code
								code: (lambda ()
									(scrShowScreen gScreen &dsRPGShipClassViewer; {
										list: (list

											;	NOTE: If you add items to the list, make sure
											;	you add a description in the Language section.

											{	shipClass:&scMarauderRaidPlatform;	}
											{	shipClass:&scCorsair-II;	}
											{	shipClass:&scViking-II;	}
											{	shipClass:&scBarbary;	}
											{	shipClass:&scDrake;	}
											{	shipClass:&scTripoli;	}

											{	shipClass:&scWindSlaver;	}
											{	shipClass:&scSteelSlaver;	}
											{	shipClass:&scEarthSlaver;	}
											{	shipClass:&scSungTransport;	}
											{	shipClass:&scDragonSlaver;	}

											{	shipClass:&scDwargRaider;	}
											{	shipClass:&scDwargMaster;	}
											{	shipClass:&scDwargBehemoth;	}
											)
										})
									)
								}

							{	labelID: 'actionDone				nextPage:'exitScreen	}
							)
						}
					{	id: 'ourMission
						descID: 'textOurMission1		labelID: 'actionDone	nextPage: 'welcome 
						}
					{	id: 'ungoverned
						descID: 'textUngoverned1		labelID: 'actionDone	nextPage: 'welcome 
						}
					)
			</Text>

			<Text id="textInfo1">

				The Commonwealth Militia has served the people for over three 
				hundred years.

			</Text>
			<Text id="actionOurMission">Our [M]ission</Text>
			<Text id="actionUngoverned">The [U]ngoverned Territories</Text>
			<Text id="actionEnemyIntel">[E]nemy Intelligence</Text>

			<Text id="textOurMission1">
			
				Our mission	is to defend Commonwealth stations from predation 
				by marauders, outlaws, and slavers.

				The Sung Empire is our primary enemy. Their technological
				achievements, built on a hideous slave industry, threaten to
				overwhelm our defenses. But the Commonwealth Militia has always
				risen to the occasion, and our citizens in the Territories 
				remain safe.

				Lesser threats are no less important, and the Militia is 
				committed to safeguarding navigation and trade from piracy
				and marauders.

			</Text>
			<Text id="textUngoverned1">

				Beyond St. Katharine's Star, the systems of the Ungoverned
				Territories are crisscrossed with competing claims. The
				Commonwealth was the first sovereign to colonize the region,
				but we were never able to control such a vast area.

				Warlords and empires rise and fall, but the Militia
				has always kept the chaos at bay. Someday the Commonwealth will
				grow to displace the lawless sovereigns of the Territories.

				Until then the Militia will keep watch.
				
			</Text>

			<!-- Marauder Ships -->
			
			<Text id="rpg.shipClassDesc.&scMarauderRaidPlatform;">

				Marauders roam the Ungoverned Territories raiding isolated mines
				and colonies.

				These raid platforms serve as mobile bases from which to launch
				attacks. Don't be fooled by their seemingly ad hoc construction;
				they are heavily armored, and boast a pair of turbolasers.

			</Text>
			<Text id="rpg.shipClassDesc.&scCorsair-II;">
				
				Upgraded Corsairs have killed more Militia members than almost 
				any	other class. They are cheap enough to be produced in large
				numbers, but carry the same KM100 missiles used by our Ronins.

			</Text>
			<Text id="rpg.shipClassDesc.&scViking-II;">
				
				These heavy gunships are the backbone of the marauder fleet. 
				They are robust enough to handle a few hits, but still fast
				enough to serve as effective raiders.

			</Text>
			<Text id="rpg.shipClassDesc.&scBarbary;">
				
				Outlaw engineers at Neptune's Forge designed this deadly gunship
				specially for raiding. Its EMP cannon can disable ships in an
				instant, leaving them paralyzed and defenseless.

				Shields can absorb the disabling pulse, but are greatly weakened
				by it. Some higher level armors are immune to EMP. But if your
				ship is vulnerable, your best option is to run.

			</Text>
			<Text id="rpg.shipClassDesc.&scDrake;">

				The common Drake is an underestimated capital ship. Though less
				capable than a Charon frigate, the Drake is nevertheless a
				powerful adversary. Its large supply of missiles and heavy armor
				allow it to hold its ground against all but the strongest
				gunships.

			</Text>
			<Text id="rpg.shipClassDesc.&scTripoli;">
				
				The Tripoli class is the deadliest ship in the marauder fleet.
				More powerful even than a Charon frigate, each of these ships 
				serves as the command center for the leader of a marauder cell.

			</Text>

			<!-- Sung Slaver Ships -->

			<Text id="rpg.shipClassDesc.&scWindSlaver;">

				Sung Slavers displaced the Huari Empire in the twenty-third
				century, and their fortresses and citadels have bloomed across
				the Ungoverned Territories.

				The ubiquitous Wind Slaver is a fast gunship, designed to be
				produced in large numbers. Each is piloted by a slave encased
				in a cybernetic coffin, which accounts for its unnatural
				speed and maneuverability.

			</Text>
			<Text id="rpg.shipClassDesc.&scSteelSlaver;">

				Steel Slavers are the heavy gunships of the Sung fleet. They 
				are crewed by four Sung officers, and often serve as command and
				control for a Wind Slaver squadron.

				Steel Slavers carry cybernetic equipment (augmented by multiple
				slave coffins) that can remotely disable weapons on targets by
				exploiting various software vulnerabilities.

			</Text>
			<Text id="rpg.shipClassDesc.&scEarthSlaver;">

				These massive ships are the biggest threat to the Commonwealth
				in the Territories. Their axis-aligned supercannon is designed
				for one purpose alone: to demolish stations.

				The Sung have so far refrained from destroying a station, knowing
				that it would result in all-out war.

			</Text>
			<Text id="rpg.shipClassDesc.&scSungTransport;">

				These sleek transports ply the nav routes of the Ungoverned
				Territories, no different than the other freighters	that supply
				the stations of Human Space.

				But whereas other freighters might carry fuel or consumer goods,
				these transports are likely to be carrying slave coffins.

			</Text>
			<Text id="rpg.shipClassDesc.&scDragonSlaver;">

				Sung technology easily matches that of the Commonwealth. Nowhere
				is this clearer than in their development of the Dragon Slaver.
				This capital ship is equipped with an antimatter cannon&mdash;the
				ultimate destructive force known to us.

				Fortunately, very few of these ships have been built, and the 
				cost of deploying them keeps them a rare sight.

			</Text>

			<!-- Dwarg Ships -->

			<Text id="rpg.shipClassDesc.&scDwargRaider;">

				The mysterious Dwarg are an emerging threat in the Ungoverned
				Territories. Their entire industry is based on genetically-engineered
				zoanthropes: human beings reduced to animal intellect.

				These raiders are light gunships with zoanthrope pilots.

			</Text>
			<Text id="rpg.shipClassDesc.&scDwargMaster;">

				Dwarg masters command legions of zoanthropes, who will fight to
				the death to protect their master.
				
				These ships also possess a tracking missile-weapon that can 
				deliver an EMP pulse to its targets.

			</Text>
			<Text id="rpg.shipClassDesc.&scDwargBehemoth;">

				These massive ships are heavily armed and armored, but are 
				nonetheless controlled by a zoanthrope.

			</Text>

			<Text id="core.mapDescMain">
				Commonwealth Militia HQ
			</Text>
			<Code id="rpg.statusDetails">
				(typTranslate &unidCommonwealthMilitia; 'rankDetails)
			</Code>
		</Language>
	</StationType>
<!-- CommonwealthMilitiaMission01.xml -->
<!-- CommonwealthMilitiaMission02.xml -->
<!-- CommonwealthMilitiaMission03.xml -->
<!-- CommonwealthMilitiaMission04.xml -->
<!-- CommonwealthMilitiaMissionSK01.xml -->
<!-- CommonwealthMining.xml -->
<StationType UNID="&stMiningColony;"
			name=				"Commonwealth mining colony"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"asteroidBase, commonwealth, commonwealthCustoms, envEarth, envAvoidsAir, eridaniScript, friendly, generic, human, mining, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"300"
			fireRateAdj=		"60"
			explosionType=		"&vtKineticExplosion2;"
			ejectaType=			"&vtStoneAsteroidEjecta;"
			>
		
		<!-- Encounter Info -->
		
		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"*"
				levelFrequency=			"ccur- ----- ----- ----- -----"

				locationCriteria=		"+asteroids, -outerSystem"
				enemyExclusionRadius=	"60"
				/>

		<Names noArticle="true">Amundsen Mining Colony; Benin %1%0%0; Clementine Mining Association; Duralloy Dreams;
				EI Mining Colony %1%0; Freetown Mining; St. George's Colony; %1%0%0%0 Hades;
				Ibadan Mining; Jasper Mining; Kiloton Mining; Lusaka Mining Colony;
				Metals &amp; Ores Mining; New Johannesburg; Omdurman Mining; Port Harcourt;
				Qadarif Minerals; Ryad Mining Colony; %1%0%0%0 Sangre; Tangiers Metals;
				UN%0%0%0 Mining Colony; St. Victoria's Colony; %1%0%0%0 Welkom; X%0%0%0 Mining Colony;
				Yafran Colony; Zagazig Minerals</Names>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="*NU +essentialMiningEquipment; -advanced; -defective; -Illegal; -NotForSale; -notStandard;" priceAdj="100" inventoryAdj="100" levelFrequency="systemLevel:ru|c|cur"/>
			<Sell	criteria="*NU +ore; -defective; -notForSale;"	priceAdj="100"/>
			<Sell	criteria="*NU +minable; -defective; -notForSale;"	priceAdj="100"/>
			<Buy	criteria="*NU +food; -illegal; -notForSale;"	priceAdj="100"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-5;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-5;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-5;" priceAdj="100"/>
			<InstallDevice	criteria="d +miningEquipment; -Illegal; L:1-6;" priceAdj="50"/>
			<RemoveDevice	criteria="d L:1-6;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>
			
			<InstallDevice	criteria="d L:1-6;" priceAdj="unavailable"	messageID="descNoInstall"/>

			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="2"/>
			<ConsumeTrade	criteria="{human.basicFood}"	impact="3"/>
			<ConsumeTrade	criteria="{human.lux}"		impact="1"/>
			<ConsumeTrade	criteria="{human.meds}"		impact="2"/>
			<ConsumeTrade	criteria="{human.res}"		impact="1"/>

			<ProduceTrade	criteria="{core.ore}"			impact="20"/>
		</Trade>

		<Items>
			<!-- 
				NOTE: Explicit spawning is better than inventory refresh (above)
				because this guarantees that the items will be created, while 
				inventory refresh is probabilistic.
			-->

			<Item count="1"	item="&itMinersCargoHold;"/>
			<Item count="1"	item="&itMiningLaser;"/>

			<RandomItem count="10"
					criteria=		"* +miningEquipment; -advanced; -defective; -illegal; -notForSale; -notStandard;"
					levelFrequency= "systemLevel:ru|c|cur"
					/>

			<RandomItem count="10"
					criteria=		"* +ore; -notStandard; -notForSale; | * +minable; -notStandard; -notForSale;"
					levelFrequency= "systemLevel:ru|c|ur"
					/>
		</Items>

		<!-- Configuration -->
		
		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itPlasteelPlate;"
				hitPoints=		"100"
				regen=			"1"
				/>
		
		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true"/>
		</Devices>

		<!-- Satellites -->

		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="1" table="&tbCommDefenders;"/>
			<Lookup count="1d2" table="&tbCommPrivateCrafts;"/>
			<Ship count="1d2+1" class="&scBorer;" orders="gateOnThreat"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Lookup chance="50" table="&tbCommDefenders;"/>
				<Lookup chance="10" table="&tbCommPrivateCrafts;"/>
				<Ship chance="40" class="&scBorer;" orders="gateOnThreat"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->
		
		<ImageVariants>
			<LocationCriteriaTable>
				<Image criteria="*ice"			imageID="&rsMiningColonyIce;"			imageWidth="260" imageHeight="260"/>
				<Image criteria="*metallic"		imageID="&rsMiningColonyMetallic;"		imageWidth="260" imageHeight="260"/>
				<Image criteria="*primordial"	imageID="&rsMiningColonyPrimordial;"	imageWidth="260" imageHeight="260"/>
				<Image criteria="*volcanic"		imageID="&rsMiningColonyVolcanic;"		imageWidth="260" imageHeight="260"/>
				
				<Image criteria="*~"			imageID="&rsMiningColonyRocky;"			imageWidth="260" imageHeight="260"/>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"9"
				portRadius=		"140"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main backgroundID="object">
				<Display type="detailsPane">
					<OnDisplayInit>
						(typTranslate &unidIndependentMiner; 'rankDetails)
					</OnDisplayInit>
				</Display>

				<Panes>
					<Default>
						<OnPaneInit>
							(block (
								(allDeposits (sysFindObject Nil "k D:oreDepositCount;"))
								(undiscoveredDeposits (filter allDeposits depositObj
									(not (objGetData depositObj 'lastNotifyTime))
									))
								)
								
								;	Text depends on state of deposits
								
								(switch
									(not allDeposits)
										(scrSetDescTranslate gScreen 'descNoDepositsInSystem)
										
									(not undiscoveredDeposits)
										(scrSetDescTranslate gScreen 'descAllDepositsFound)
									
									(= (count undiscoveredDeposits) 1)
										(scrSetDescTranslate gScreen 'descOneUndiscoveredDeposit)
										
									(scrSetDescTranslate gScreen 'descMultipleUndiscoveredDeposits)
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionInformation">
								(scrShowScreen gScreen &dsCommonwealthMiningInfo;)
							</Action>

							<Action id="actionMainHall" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +commonwealthMining; =" (sysGetLevel) ";")
									maxPerStation: (+ 2 (modulo (objGetDestiny gSource) 2))
									noMissionTextID: 'descNoMissions
									})
							</Action>

							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->
		
		<Events>
			<OnCreate>
				;	Add ore to sell based on system ore frequency
				
				(sysAddRandomOreByValue gSource
					(@ 
						(list 0 
							2000 5000 10000 20000 50000 
							100000 200000 500000 1000000 2000000)
						(sysGetLevel)
						)
					)
			</OnCreate>

			<GetDockScreen>
				(block (
					newRankDesc
					)
					(switch
						;	If station is abandoned, then nothing to do
					
						(objIsAbandoned gSource)
							Nil
						
						;	See if the player has been promoted.

						(setq newRankDesc (typFireEvent &unidMiningSkill; 'CheckPromotion))
							{
								screen: &dsCommonwealthMiningPromotion;
								priority: 5
								}

						;	Let the base class handle any other screen

						(typFireObjEvent &baCommonwealthStation; gSource 'GetDockScreen)
						)
					)
			</GetDockScreen>
			
			<GetGlobalAchievements>
				(rpgMissionAchievements &stMiningColony; "* +commonwealthMining;")
			</GetGlobalAchievements>

			<GetRumors>
				(append
					(rpgRumorAdd 'commonwealthPub 1 20 'scan {station: (objGetName gSource)})

					(rpgRumorAdd 'commonwealthMining (make 'sequence 15))

					(if (= (objGetProperty gPlayerShip 'characterClass) &unidPilgrimClass;)
						(rpgRumorAdd 'commonwealthMining 'pilgrim)
						(rpgRumorAdd 'commonwealthMining 'freelancer)
						)
					)
			</GetRumors>

			<OnOreDepositFound>
				(switch
					;	If there are no outlaw miners in the system, we send out
					;	ships on their behalf.
					
					(not (sysFindObject Nil "T +outlawMiners; +populated;"))
						(block (minerObj)
							(setq minerObj (sysCreateShip &tbOutlawMinerProspector; (sysFindObject gSource "GN") &svOutlawMiners;))
							(objSetData minerObj 'depositID (objGetID (@ gData 'depositObj)))
							)
					)
			</OnOreDepositFound>
		</Events>

		<Language>
			<Text id="descNoDepositsInSystem">

				You are docked at a mining colony. A handful of miners tend to 
				their ships, but most are sitting around waiting for work that 
				never comes.
					
				Empty loading bays are a silent reminder of past days.

			</Text>
			<Text id="descAllDepositsFound">

				You are docked at a mining colony. Dozens of miners prepare their
				ships while others unload ore in cavernous bays.
					
				But the prospectors looking for undiscovered fields have all left
				for more promising systems.

			</Text>
			<Text id="descOneUndiscoveredDeposit">

				You are docked at a mining colony. Dozens of prospectors are 
				working to outfit their ships.
					
				Everyone is talking about a vast ore deposit that has yet to be 
				found.

			</Text>
			<Text id="descMultipleUndiscoveredDeposits">

				You are docked at a mining colony. There is a frenzy of activity 
				as miners and prospectors outfit their ships for deep space 
				exploration.
					
				Rumors fly about vast ore deposits out among the asteroid fields, 
				but no one has yet found any of them.

			</Text>
			<Text id="descNoMissions">

				The colony supervisor is working at his station. The comms channels
				are quiet and he stops to chat:

				"It's calm now, but I've been hearing a lot of military chatter lately."

			</Text>
			<Text id="descNoInstall">

				We only install mining equipment. We cannot install %itemName% 
				on your ship.

			</Text>
			<Text id="dockServices:installAbility">
				We install mining equipment up to tech level %maxLevel%.
			</Text>
			<Text id="dockServices:weaponsAbility">
				We sell mining equipment up to tech level %maxLevel%.
			</Text>
			<Text id="rpg.stationWillNotBuy">

				%StationName% buys food. We are not interested in buying %itemName%.

			</Text>

			<Text id="rumor.intro">

				The colony supervisor is working at his station. The comms channels
				are quiet and he stops to chat:\n\n

			</Text>

			<String id="rumor.commonwealthMining.1">

				"It's calm now, but I've been hearing a lot of military chatter lately."

			</String>
			<Text id="rumor.commonwealthMining.2">

				"Most people don't care where their metals come from, but let me
				tell you: plasteel doesn't grow in greenhouses! We have to struggle
				to mine enough for everyone."

			</Text>
			<Text id="rumor.commonwealthMining.3">

				"Charon pirates have always been a problem here. They're getting
				stronger every year. One of these days we're going to have to do
				something about them."

			</Text>
			<Text id="rumor.commonwealthMining.4">

				"The Korolov folks are good people; they're a little uptight about
				schedules and they're big on pomp and medals, but we get along pretty well."

			</Text>
			<Text id="rumor.commonwealthMining.5">

				"We've had a lot of trouble with the warlords. They come through
				in gangs and shoot up the place; they take what they need and then leave."

			</Text>
			<Text id="rumor.commonwealthMining.6">

				"I don't know much about weapons; not as much as you do, anyway.
				But I know a lot of people who favor the AK15 Partisan. Of course,
				if you can get your hands on a slam cannon, you're styling."

			</Text>
			<Text id="rumor.commonwealthMining.7">

				"Heavy metal armor is the best, in my opinion. Ceramic is nice for
				my dishes, but it will do kack-all against a slam cannon. Ithalium
				is the best; orthosteel is pretty awesome too. Duralloy lasts almost
				forever, though."

			</Text>
			<Text id="rumor.commonwealthMining.8">

				"Have you ever been to the Outer Realm? Out beyond the Sung Slavers,
				where the Ringers live? It's miner heaven, I bet. I'd like to go out
				there some day. Just me and a souped-up Borer. The Ferians are there
				too; I hear they've got mining techniques like you've never seen."

			</Text>
			<Text id="rumor.commonwealthMining.9">

				"It's not too dangerous from Eridani to St. Kat's. Mostly just pirates
				to worry about. But deeper in the Ungoverned Territories there are
				dangers that you cannot imagine. Slavers will jump you out in deep
				space and boost your body for their slave farms."

			</Text>
			<Text id="rumor.commonwealthMining.10">

				"The Charon pirates are nasty, but you can handle their gunships.
				Stay away from their frigates, though."

			</Text>
			<Text id="rumor.commonwealthMining.11">

				"When a Charon frigate is out hunting you'd best get away. They'll
				take you down fast without so much as a warning."

			</Text>
			<Text id="rumor.commonwealthMining.12">

				"Titanium ore is as common as suit-rash. Palladium and plasteel
				are kack too. If you want a good payday, find an asteroid with cerallox
				or helium regolith."

			</Text>
			<Text id="rumor.commonwealthMining.13">

				"Every chump with a mining laser thinks he can mine. But if you want
				to be a serious miner you need a miner's cargo hold."

			</Text>
			<Text id="rumor.commonwealthMining.14">

				"Volcanic asteroids are the best for mining. I once found 30 tons
				of ithalium ore on one! Kept me in vodka and cunnu for a couple of years!"

			</Text>
			<Text id="rumor.commonwealthMining.15">

				"Ice asteroids are filthy with cerallox. Lots of palladium and
				plasteel too, though, so they're not always worth the effort."

			</Text>
			<Text id="rumor.commonwealthMining.pilgrim">

				"So you're going to the Core, huh? Good luck with that! I've known
				a lot of people heading towards the Core. My best friend's wife left
				about a year ago. Can't say that anyone's ever returned, though."

			</Text>
			<Text id="rumor.commonwealthMining.freelancer">

				"So you're a freelancer, huh? Good luck with that! I've known
				a lot of freelancers and mercs. My best friend's husband was
				a freelancer for a while. Caught a missile out in Heilong Xing."

			</Text>

			<Text id="rumor.commonwealthPub.1">

				You talk to a group of miners from %station% who try to impress
				you with their knowledge of helium regolith market prices.
				You spend 5 credits on drinks.

			</Text>

			<Text id="rpg.missionTypeDesc">Mining colony missions</Text>
			<Text id="core.mapDesc">

				Refuels up to level 5 &mdash; Repairs/installs armor up to 
				level 5 &mdash; Installs mining equipment up to level 6 &mdash;
				Sells ore &mdash; Buys food

			</Text>
		</Language>
	</StationType>
<!-- CommonwealthMiningMission01.xml -->
<!-- CommonwealthMiningMission02.xml -->
<!-- CommonwealthMiningMission03.xml -->
<!-- CommonwealthMiningMission04.xml -->
<!-- CommonwealthMiningMission05.xml -->
<!-- CommonwealthMission01.xml -->
<!-- CommonwealthMissionRevenge01.xml -->
<!-- CommonwealthRonins.xml -->
<!-- CommonwealthShips.xml -->
<!-- CommonwealthStarCarrier.xml -->
<!-- CommonwealthVolunteerMission01.xml -->
<!-- CommonwealthVolunteerMission02.xml -->
<!-- CommonwealthVolunteerMission03.xml -->
<!-- Compatibility10.xml -->
<!-- CompatibilityLibrary.xml -->
<!-- ContainerHabitat.xml -->
<StationType UNID="&stContainerHabitat;"
			name=				"container habitat"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			multiHull=			"true"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"160"
			regen=              "1"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"commonwealth, friendly, generic, human, populated"
			>
		<Properties>
			<DynamicGlobal id="infoAvailable">
				(map (typ@ gType 'infoTable) 'excludeNil theEntry
					(block (
						(data ((@ theEntry 'getInfo)))
						)
						(if data
							{
								id: (@ theEntry 'id)
								type: (@ theEntry 'type)
								giveInfo: (@ theEntry 'giveInfo)
								data: data
								}
							)
						)
					)
			</DynamicGlobal>

			<Definition id="donationTable">
				(list
					{	criteria: "* +ID;"						pointsPerHundred: 0.0	}
					{	criteria: "* +questItem;"				pointsPerHundred: 0.0	}
					{	criteria: "* +meds;"					pointsPerHundred: 1.0	}
					{	criteria: "* +illegal; +consumerGood"	pointsPerHundred: 2.0	}
					{	criteria: "* +lux;"						pointsPerHundred: 1.2	}
					{	criteria: "* +food;"					pointsPerHundred: 1.0	}
					{	criteria: "f L:1-5;"					pointsPerHundred: 1.2	}
					)
			</Definition>
			<Definition id="infoTable">
				(list
					{	id: 'arcoVaughn
						type: &stContainerHabitat;
						getInfo: 
							(lambda ()
								(if (and (= (sysGetNode) 'SE)
										(!= (typ@ &scArcoVaughnHeavyRaider; 'status) 'destroyed)
										(!= (typ@ &scArcoVaughnHeavyRaider; 'status) 'destroyedByPlayer)
										)
									{
										obj: (@ (sysFindObject Nil "s +arcoVaughn;") 0)
										}
									)
								)

						giveInfo:
							(lambda (data)
								(objSetShowAsDestination (@ data 'obj) 'autoClearOnDestroy)
								)
						}

					{	id: 'betterEquipment
						type: &stContainerHabitat;
						getInfo: 
							(lambda ()
								(block (
									(allDests
										(map (sysFindObject gPlayerShip "TE -property:questTarget; -uncharted; | T +shipwreck; -questTarget; -uncharted;") 'excludeNil theObj
											(block (
												(all (objGetItems theObj "dUN"))
												(bestItem (map all '(reduceMax original) theItem
													(itmGetLevel theItem)
													))
												)
												(if bestItem
													{
														obj: theObj
														item: bestItem
														level: (itmGetLevel bestItem)
														}
													)
												)
											)
										)
									(bestDest (map allDests '(reduceMax original) theEntry
										(@ theEntry 'level)
										))
									)
									(if bestDest
										{
											obj: (@ bestDest 'obj)
											objName: (objGetName (@ bestDest 'obj) 'article)
											item: (@ bestDest 'item)
											itemName: (itmGetName (@ bestDest 'item) 'article)
											}
										)
									)
								)

						giveInfo:
							(lambda (data)
								(block (
									(targetObj (@ data 'obj))
									)
									(if (obj@ targetObj 'canBeAttacked)
										(objSetShowAsDestination targetObj 'autoClearOnDestroy)
										(objSetShowAsDestination targetObj 'autoClearOnDock)
										)
									)
								)
						}

					{	id: 'centauriBase
						type: &stContainerHabitat;
						getInfo: 
							(lambda ()
								(block (
									targetObj
									)
									(if (and (= (sysGetNode) 'SE)
											(setq targetObj 
												(random (sysFindObject gPlayerShip "TAN +centauriWarlords; +populated; -occupation; -property:questTarget; -uncharted;"))
												)
											)
										{
											obj: targetObj
											objName: (objGetName targetObj 'article)
											}
										)
									)
								)

						giveInfo:
							(lambda (data)
								(objSetShowAsDestination (@ data 'obj) 'autoClearOnDestroy)
								)
						}

					{	id: 'korolovStation
						type: &stContainerHabitat;
						getInfo: 
							(lambda ()
								(block (
									(destObj (random (sysFindObject Nil "TA +korolovShipping; +populated; -uncharted; -property:known;")))
									)
									(if destObj
										{
											obj: destObj
											objName: (objGetName destObj 'article)
											}
										)
									)
								)

						giveInfo:
							(lambda (data)
								(block ()
									(objSetShowAsDestination (@ data 'obj) 'autoClearOnDock)
									(objSetKnown (@ data 'obj))
									)
								)
						}

					{	id: 'stargate
						type: &stContainerHabitat;
						getInfo: 
							(lambda ()
								(block (
									(destObj (random (sysFindObject gPlayerShip "GN -uncharted; -property:known;")))
									)
									(if destObj
										{
											obj: destObj
											objName: (objGetName destObj 'article)
											}
										)
									)
								)

						giveInfo:
							(lambda (data)
								(block ()
									(objSetShowAsDestination (@ data 'obj) 'autoClear)
									(objSetKnown (@ data 'obj))
									)
								)
						}
					)
			</Definition>

			<Global id="donationPoints">0</Global>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"+commonwealthCore;"
				levelFrequency=			"uur-- ----- ----- ----- -----"

				locationCriteria=		"-planetary"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<AcceptDonation	criteria="* -ID; -questItem;" priceAdj="100"/>

			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="1"/>
			<ConsumeTrade	criteria="{human.basicFood}"	impact="1"/>
			<ConsumeTrade	criteria="{core.ore}"			impact="1"/>
		</Trade>

		<!-- Ships and Defenses -->

		<Ships>
			<Lookup count="1d2-1" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<!-- Image and Effects -->

		<Image		imageID="&rsContainerHabitat;" imageWidth="180" imageHeight="180" viewportRatio="0.02125"/>

		<DockingPorts>
			<Port posAngle="-30"  posRadius="75" posZ="0"/>
			<Port posAngle="60"   posRadius="75" posZ="0"/>
			<Port posAngle="150"  posRadius="75" posZ="0"/>
			<Port posAngle="240"  posRadius="75" posZ="0"/>

			<Port posAngle="-10"  posRadius="60" posZ="0"	rotation="240"	sendToBack="true"/>
			<Port posAngle="-50"  posRadius="60" posZ="0"	rotation="60"/>
		</DockingPorts>
		
		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(switch
								(eq (objGetProperty gPlayerShip 'characterClass) &unidPilgrimClass;)
									(scrSetDescTranslate gScreen 'descWelcomePilgrim)
									
								(scrSetDescTranslate gScreen 'descWelcome)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionInformation">
								(block (
									(infoAvailable (obj@ gSource 'infoAvailable))
									)
									(switch
										(not infoAvailable)
											(rpgRumorShow {
													rumorCriteria: "+commonwealthContainer"
													noRumorTextID: 'descNoRumors
													})

										(scrShowScreen gScreen &dsContainerHabitatReward; {
											infoAvailable: infoAvailable
											})
										)
									)
							</Action>

							<Action id="actionDonate">
								(scrShowScreen gScreen &dsContainerHabitatDonateItem;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->

		<Events>
			<GetRumors>
				(rpgRumorAdd 'commonwealthContainer (make 'sequence 6))
			</GetRumors>
		</Events>

		<Language>
			<Text id="actionDonate">[D]onate Item</Text>

			<Text id="descWelcome">

				You are docked at a habitat made out of shipping containers. Children
				bounce off the bulkheads in zero-G while maintenance workers repair
				leaky seals and balky machinery. The station master approaches you:

				"Traveling the universe, yeah? Why don't you spare some items for us!"

			</Text>
			<Text id="descWelcomePilgrim">

				You are docked at a habitat made out of shipping containers. 
				Children bounce off the bulkheads in zero-G while maintenance 
				workers repair leaky seals and balky machinery. The station 
				master approaches you:

				"We don't get many pilgrims visiting around here. I'll make you
				a deal: donate supplies to us and I'll give you some information
				in exchange."

			</Text>
			<String id="descNoRumors">

				"Everything's quiet around here at the moment."

			</String>

			<String id="infoAction.arcoVaughn">"Where is [A]rco Vaughn?"</String>
			<Text id="infoDlg.arcoVaughn">

				"If you're hunting Arco Vaughn, I know where you can find him. 
				He has a habitat deep in the outer system. I'll give you his
				coordinates, but don't say where you got them."

			</Text>
			<String id="infoAction.betterEquipment">"I need better [e]quipment."</String>
			<Text id="infoDlg.betterEquipment">
			
				"%ObjName% in this system has %itemName%. I'll give you the 
				coordinates and you can take it from there."

			</Text>
			<String id="infoAction.centauriBase">"Where are the [C]entauri warlords?"</String>
			<Text id="infoDlg.centauriBase">

				"%ObjName% in this system has been raiding stations all year. 
				No one will miss it. I'll give you the coordinates and you can
				do what you want."
			
			</Text>
			<String id="infoAction.korolovStation">"Is there a [K]orolov station here?"</String>
			<Text id="infoDlg.korolovStation">
			
				"Yeah, there is a Korolov station in this system. I'll program
				the coordinates into your computer."

			</Text>
			<String id="infoAction.stargate">"Where is the [S]targate?"</String>
			<Text id="infoDlg.stargate">
			
				"I can point you to %objName%. I'll enter the coordinates into 
				your computer."

			</Text>

			<Text id="rumor.intro">

				The station master grabs you and speaks softly in your ear:\n\n

			</Text>
			<Text id="rumor.commonwealthContainer.1">

				"The Charon pirates are a menace. They have bases in almost every
				system and they prey on defenseless freighters."

			</Text>
			<Text id="rumor.commonwealthContainer.2">

				"If you need a contact in the Black Market find the Aleksany
				brothers; they're always doing business in some fancy hotel."

			</Text>
			<Text id="rumor.commonwealthContainer.3">

				"The anarchists don't bother us, but they really annoy the
				Corporations: they're always stealing their fancy ROMs."

			</Text>
			<Text id="rumor.commonwealthContainer.4">

				"Stay away from the Abbasid fortresses. Those fanatics will
				shoot you rather than let you get close."

			</Text>
			<Text id="rumor.commonwealthContainer.5">

				"The Urak warlords are another nutty group, but their armor
				and weapons are pretty good."

			</Text>
			<Text id="rumor.commonwealthContainer.6">

				"Hiro is the best hacker in the 'verse. He's created some
				fancy ROMs that even the cyber corporations can't figure out."

			</Text>
		</Language>
	</StationType>
<!-- CoreCode.xml -->
<!-- CoreDiagnostics.xml -->
<!-- CoreEffects.xml -->
<!-- CoreEngineText.xml -->
<!-- CoreExplosions.xml -->
<!-- CoreFireEffects.xml -->
<!-- CoreHitEffects.xml -->
<!-- CoreItems.xml -->
<!-- CorePlaceholders.xml -->
<StationType UNID="&stFlotsam;"
			name=				"(flotsam)"
			sovereign=			"&svNeutral;"

			scale=				"ship"
			mobile=				"true"
			mass=				"1"
			immutable=			"true"
			destroyWhenEmpty=	"true"
			noMapIcon=			"true"
			>
	</StationType>
<StationType UNID="&stShipwreck;"
			name=				"(shipwreck)"
			sovereign=			"&svNeutral;"
			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"

			attributes=			"shipwreck"
			>
	</StationType>
<!-- CoreProjectileEffects.xml -->
<!-- CoreTypesLibrary.xml -->
<!-- CorporateAutonDealer.xml -->
<StationType UNID="&stAutonDealer;"
			name=				"corporate auton dealer"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			attributes=			"corporate, corporateArms, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, populated"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"250"
			armorID=			"&itAdvancedPlasteelPlate;"
			hitPoints=			"350"
			multiHull=			"true"
			regen=				"4"

			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"--rcu ur--- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<Names noArticle="true">Auton Universe; Brehzen's Used Autons; Chiba Auton Dealers;
				Dresden Autonomous Defenders; Ehrlenmeyer Autons; Frenzy Autons;
				General Autons, rce; Hastur Used Autons; Ixin Autons Dealer;
				Ji Autons; Kyrrin Used Autons; Laser Autons, rce; Merlin Autons;
				Nrummer Weapons Corp.; Oort Autons, rce; Planetary Autons;
				Qing Long Autons; Raptor Systems, rce; Security Autons;
				Tenhove Defense Dealer; Ultimate Autons; Victory Systems;
				Weapons World; %s Auton Dealers</Names>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="*NU +Auton; -Illegal; -NotForSale;"	priceAdj="90"/>
		</Trade>

		<Items>
			<RandomItem count="20" 
					criteria=		"* +auton; -defective; -illegal; -military; -notStandard; -notForSale;"
					levelFrequency=	"systemLevel:ucc|c|cur"
					/>
			<RandomItem count="1d6" 
					criteria=		"* +auton; -defective; -illegal; -military; -notStandard; -notForSale; L:4"
					/>
		</Items>

		<!-- Configuration -->

		<!-- Ships and Defenses -->

		<Ships standingCount="4-6">
			<Lookup chance="75" table="&tbCorpAutonDefenders;"/>
			<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsCorporateAutonDealer;" imageWidth="260" imageHeight="260" viewportRatio="0.03375"/>

		<DockingPorts>
			<Port posAngle="-45"    posRadius="90"  posZ="0"/>
			<Port posAngle="-15"    posRadius="90"  posZ="0"/>
			<Port posAngle="15"     posRadius="90"  posZ="0"/>

			<Port posAngle="45"     posRadius="90"  posZ="0"/>
			<Port posAngle="75"     posRadius="90"  posZ="0"/>
			<Port posAngle="105"    posRadius="90"  posZ="0"/>

			<Port posAngle="135"    posRadius="90"  posZ="0"/>
			<Port posAngle="165"    posRadius="90"  posZ="0"/>
			<Port posAngle="195"    posRadius="90"  posZ="0"/>

			<Port posAngle="225"   posRadius="90"  posZ="0"/>
			<Port posAngle="255"   posRadius="90"  posZ="0"/>
			<Port posAngle="285"   posRadius="90"  posZ="0"/>
		</DockingPorts>

		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionBuyAutons" default="1">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionSellAutons">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeSell;)
							</Action>

							<Action id="actionRepairAutons">
								(scrShowScreen gScreen &dsCorporateAutonManage;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<NoAutons descID="descNoAutons">
						<Actions>
							<Action id="actionLeave" cancel="1" default="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</NoAutons>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->

		<Language>
			<Text id="actionBuyAutons">[B]uy Autons</Text>
			<Text id="actionSellAutons">[S]ell Autons</Text>
			<Text id="actionRepairAutons">[R]epair Autons</Text>

			<Text id="descWelcome">
				You are docked at an auton dealer.
			</Text>
			<Text id="descNoAutons">

				A sales drone approaches you:
				
				"You do not currently have any autons to repair, but I would be 
				delighted to show you some of our newest models."

			</Text>
			<Text id="rpg.stationWillNotBuy">

				%StationName% buys autons. We are not 
				interested in buying %itemName%.

			</Text>
			<Text id="core.mapDesc">Buys and sells autons</Text>
		</Language>
	</StationType>
<!-- CorporateHierarchy.xml -->
<StationType UNID="&stAdventurerOutfitters;"
			name=				": Adventurer Outfitters|Adventurer Outfitters"
			sovereign=			"&svCorporate;"

			attributes=			"corporate, corporateArms, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, populated"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"185"
			armorID=			"&itLightGusokuArmor;"
			hitPoints=			"280"
			multiHull=			"true"
			regen=              "3"
			fireRateAdj=		"15"

			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"---ru cu--- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; -premiumAmmo; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -ID; -NotForSale;"	priceAdj="50"/>
			<Buy	criteria="ufNU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="amdufNU -Illegal; -ID;"				priceAdj="10"/>

			<Refuel			criteria="f +BasicFuel; L:1-9;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-9;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-10;" priceAdj="110"/>
			<InstallDevice	criteria="d L:1-10;" priceAdj="110"	upgradeInstallOnly="true"/>
			<RemoveDevice	criteria="d L:1-10;" priceAdj="110"	upgradeInstallOnly="true"/>
		</Trade>

		<Items>
			<RandomItem count="1d12" 
					criteria=		"a L:1-10; +commonwealth; -defective; -illegal; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"5"
					enhancement=	"=(intHPEnhancement1 gItem)"
					/>
			<RandomItem count="1d12" 
					criteria=		"w L:1-10; +commonwealth; -defective; -illegal; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"5"
					enhancement=	"=(intHPEnhancement1 gItem)"
					/>
			<RandomItem count="1d12" 
					criteria=		"d~w L:1-10; +commonwealth; -defective; -illegal; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"5"
					enhancement=	"=(intCorporateGenerateEnhancement gItem)"
					/>

			<RandomItem count="1d12" 
					criteria=		"u -defective; -Specialty; -illegal; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>

			<RandomItem count="2d12" 
					criteria=		"m +commonwealth; -defective; -Specialty; -illegal; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>

			<RandomItem count="1d6" 
					criteria=		"adu L:1-10; -defective; -illegal; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:-|r|cur"
					/>
		</Items>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itHeavyIonBlaster;"	omnidirectional="true" posAngle="0" posRadius="0" posZ="180"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships standingCount="4-5">
			<Table>
				<Lookup chance="75" table="&tbCorpDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsAdventurerOutfitters;" imageWidth="220" imageHeight="260" viewportRatio="0.02875"/>

		<DockingPorts>
			<Port posAngle="-5"    posRadius="100"  posZ="0"/>
			<Port posAngle="35"    posRadius="100"  posZ="0"/>

			<Port posAngle="85"    posRadius="100"  posZ="0"/>
			<Port posAngle="125"   posRadius="100"  posZ="0"/>

			<Port posAngle="175"   posRadius="100"  posZ="0"/>
			<Port posAngle="215"   posRadius="100"  posZ="0"/>

			<Port posAngle="265"   posRadius="100"  posZ="0"/>
			<Port posAngle="305"   posRadius="100"  posZ="0"/>
		</DockingPorts>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionDockServices" default="1">
								(rpgDockServices gPlayerShip {
									upgradeInstallOnly: True
									})
							</Action>

							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Behavior -->

		<Language>
			<Text id="descWelcome">

				Welcome to Adventurer Outfitters! We've been serving mercenaries,
				explorers, and pilgrims since 2311.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stArmorDealer;"
			name=				"corporate armor dealer"
			sovereign=			"&svCorporate;"

			attributes=			"corporate, corporateArms, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, populated"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			size=				"155"
			armorID=			"&itCeralloyArmor;"
			hitPoints=			"160"
			multiHull=			"true"
			regen=				"2"

			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"ccuv- ----- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<Names noArticle="true">Armor United; Brentano Armor; Carbellium Armor Systems;
				Dreadnought Armor; Enterprise Armor Dealer; Full Protection Systems;
				Gargantua Defense Systems; Hellforge Armor; Indomitable Armor Systems;
				Jacob's Armor; Krenel Armors, rce; Loki Defense Systems; Murasaki Armor Corporation;
				Nerling Armor Dealers; Ooro Armors; Pangea Protection Equipment;
				Quen Ho Armor; Ransom Armor Corporation; Sentinel Protection Equipment;
				Tenhove Defense Dealer; Umagahli Armor Systems; Viceroy Armor;
				Wei Chang Armor Dealer; %s Armor Systems</Names>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="asU -Illegal; -NotForSale;"	priceAdj="50"/>
			<Buy	criteria="asU -Illegal; -ID;"				priceAdj="10"/>
			
			<RepairArmor	criteria="a L:1-7;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-7;" priceAdj="100"/>
			<InstallDevice	criteria="s L:1-7;" priceAdj="100"	upgradeInstallOnly="true"/>
			<RemoveDevice	criteria="s L:1-7;" priceAdj="100"	upgradeInstallOnly="true"/>
		</Trade>

		<Items>
			<RandomItem count="8-12" 
					criteria=		"as L:1-7; +commonwealth; -defective; -Illegal; -Military; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:u|c|ur"
					enhanced=		"10"
					enhancement=	"=(intHPEnhancement1 gItem)"
					/>
			<RandomItem count="8-12" 
					criteria=		"as L:1-7; +commonwealth; -defective; -Illegal; -Military; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:-|u|cur"
					enhanced=		"5"
					enhancement=	"=(intHPEnhancement1 gItem)"
					/>
			<RandomItem count="6-10" 
					criteria=		"as L:1-7; +commonwealth; -defective; -Illegal; -Military; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="4" 
					criteria=		"u +ArmorRepair; -defective; -Illegal; -Military; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:uc|c|cur"
					/>

			<Item count="3d4"	item="&itAblativeArmorCoating;" />
			<Item count="1d2"	item="&itMonopoleDeflector;" />

			<Item chance="70" count="1d4"	item="&itCarbonWeaverNanos;" />
			<Item chance="10" count="1d4"	item="&itDegeneratingNanos;" />
			<Item chance="70" count="1d4"	item="&itReactiveArmorCoating;" />
			<Item chance="30" count="1d2"	item="&itReflectiveArmorCoating;" />
			<Item chance="10" count="1d2"	item="&itRegeneratingNanos;" />
			<Item chance="30" count="1d4"	item="&itEMPImmuneCoating;" />
		</Items>

		<!-- Configuration -->

		<!-- Satellites -->

		<!-- Ships and Defenses -->

		<Ships standingCount="3-4">
			<Table>
				<Lookup chance="75" table="&tbCorpDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsCorporateArmorDealer;" imageWidth="160" imageHeight="240" viewportRatio="0.03"/>

		<DockingPorts
				portCount=		"8"
				portAngle=		"15"
				portRadius=		"110"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action name="Armor and Shields" key="A" default="1">
								(scrShowScreen gScreen &dsRPGManageArmor; {
									upgradeInstallOnly: True
									})
							</Action>
							
							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>

						</Actions>

					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Behavior -->

		<Language>
			<Text id="descWelcome">
				You are docked at an armor dealer station.
			</Text>
			<Text id="rpg.stationWillNotBuy">

				%StationName% buys armor and shields (even if damaged). We are not 
				interested in buying %itemName%.

			</Text>

			<Text id="core.mapDesc">"Buys and sells armor and shields &mdash; Installs purchased items &mdash; Buys damaged armor and shields"</Text>
		</Language>
	</StationType>
<StationType UNID="&stArmsDealer;"
			name=				"corporate arms dealer"
			sovereign=			"&svCorporate;"

			attributes=			"corporate, corporateArms, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, populated"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			size=				"149"
			armorID=			"&itCeralloyArmor;"
			hitPoints=			"160"
			multiHull=			"true"
			regen=				"2"

			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"uccr- ----- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<Names noArticle="true">Azure Protection Systems; Bixbie Arms; Chiba Arms Dealers; 
				Dreadnought Arms; Excimer Systems; Farside Defense Systems;
				General Arms, rce; Hastur Weapons; Iberian Defense Systems;
				Jacob's Arms; Kraken Weapons, rce; Laser Armada; Ming Systems;
				Nrummer Weapons Corp.; Obelisk Weapons; Penitent Defender;
				Quixote Arms Corporation; Raptor Systems, rce; Security Weapons;
				Tenhove Defense Dealer; Ultimate Weapons; Victory Systems;
				Weapons World; %s Weapon Systems</Names>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; +basicAmmo; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="mwU -Illegal; -NotForSale;"	priceAdj="50"/>
			<Buy	criteria="mwU -Illegal; -ID;"				priceAdj="10"/>
			
			<InstallDevice	criteria="w L:1-6;" priceAdj="100"	upgradeInstallOnly="true"/>
			<RemoveDevice	criteria="w L:1-6;" priceAdj="100"	upgradeInstallOnly="true"/>
		</Trade>

		<Items>
			<RandomItem count="10" 
					criteria=		"w L:1-6; +commonwealth; -defective; -Illegal; -Military; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:-|c|ur"
					enhanced=		"10"
					enhancement=	"=(intHPEnhancement2 gItem)"
					/>
			<RandomItem count="15" 
					criteria=		"w L:1-6; +commonwealth; -defective; -Illegal; -Military; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|ur"
					enhanced=		"10"
					enhancement=	"=(intHPEnhancement1 gItem)"
					/>
			<RandomItem count="8" 
					criteria=		"w L:1-6; +commonwealth; -defective; -Illegal; -Military; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"5"
					enhancement=	"=(intHPEnhancement1 gItem)"
					/>

			<RandomItem count="25-35" 
					criteria=		"m +commonwealth; -defective; -Illegal; -Military; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|ur"
					/>
		</Items>

		<!-- Configuration -->

		<!-- Satellites -->

		<!-- Ships and Defenses -->

		<Ships standingCount="3-4">
			<Table>
				<Lookup chance="75" table="&tbCorpDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsCorporateArmsDealer;" imageWidth="148" imageHeight="226" viewportRatio="0.03125"/>

		<DockingPorts
				portCount=		"8"
				portAngle=		"-15"
				portRadius=		"100"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionWeapons" default="1">
								(scrShowScreen gScreen &dsRPGManageWeapons; {
									upgradeInstallOnly: True
									})
							</Action>

							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Behavior -->

		<Language>
			<Text id="actionWeapons">[W]eapons</Text>

			<Text id="descWelcome">
				You are docked at an arms dealer station.
			</Text>
			<Text id="rpg.stationWillNotBuy">

				%StationName% buys weapons (even if damaged). We are not 
				interested in buying %itemName%.

			</Text>

			<Text id="core.mapDesc">
				Buys and sells weapons and ammo &mdash; Installs purchased items &mdash; Buys damaged weapons
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stArmsDealerBushido;"
			name=				"Bushido merchant"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			dockScreen=			"&dsArmsDealerSpecial;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			multiHull=			"true"
			armorID=			"&itLightGusokuArmor;"
			hitPoints=			"300"
			regen=				"4"
			fireRateAdj=		"20"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"corporate, corporateArms, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"---ru rv--- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<Image			imageID="&rsCorporateArmsDealer;" imageWidth="148" imageHeight="226" viewportRatio="0.03125"/>

		<DockingPorts
				portCount=		"8"
				portAngle=		"-15"
				portRadius=		"100"
				>
		</DockingPorts>
		
		<Ships standingCount="4-5">
			<Table>
				<Lookup chance="75" table="&tbCorpDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<Devices>
			<Device deviceID="&itNeutronBlaster;"	omnidirectional="true"/>
		</Devices>

		<Items>
			<RandomItem count="1d12" 
					criteria=		"w L:1-10; +Bushido; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"10"
					enhancement=	"=(intBushidoWeaponEnhancement gItem)"
					/>

			<RandomItem count="1d12" 
					criteria=		"s L:1-10; +Bushido; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"10"
					enhancement=	"=(intBushidoShieldEnhancement)"
					/>

			<RandomItem count="1d12" 
					criteria=		"a L:1-10; +Bushido; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"10"
					enhancement=	"=(intBushidoArmorEnhancement)"
					/>

			<RandomItem count="1d12" 
					criteria=		"a L:1-10; +Bushido; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|u|cur"
					enhanced=		"5"
					enhancement=	"=(intBushidoArmorEnhancement)"
					/>
		</Items>

		<Trade currency="credit">
			<Sell	criteria="m +bushido; -defective; -illegal; -notForSale;" priceAdj="100" inventoryAdj="300" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>

			<RepairArmor	criteria="a L:1-9;" priceAdj="100"/>
			<ReplaceArmor	criteria="a +bushido; L:1-10;" priceAdj="100"/>
			<InstallDevice	criteria="d +bushido; L:1-10;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-10;" priceAdj="100"/>
			
			<ReplaceArmor	criteria="a L:1-10;" priceAdj="unavailable"	messageID="descNoInstall"/>
			<InstallDevice	criteria="d L:1-10;" priceAdj="unavailable"	messageID="descNoInstall"/>
		</Trade>

		<StaticData>
			<LongName>"a Bushido arms dealer"</LongName>
		</StaticData>

		<Language>
			<Text id="descNoInstall">

				We only install Bushido items. We cannot install %itemName% on 
				your ship.

			</Text>
			<Text id="dockServices:installAbility">

				We install Bushido items up to tech level %maxLevel%.

			</Text>

			<Text id="core.mapDesc">

				Repairs armor up to level 9 &mdash;
				Installs Bushido armor up to level 10 &mdash;
				Installs Bushido devices up to level 10 &mdash;
				Sells Bushido products

			</Text>
		</Language>

	</StationType>
<StationType UNID="&stCorporateEnclave;"
			name=				"corporate enclave"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			attributes=			"corporate, corporateCustoms, friendly, independent, generic, human, majorStation, populated"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			size=				"430"
			armorID=			"&itCeralloyArmor;"
			hitPoints=			"320"
			multiHull=			"true"
			regen=              "6"

			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"+corporateCore;"
				levelFrequency=			"ruuur ----- ----- ----- -----"

				locationCriteria=		"-asteroids"
				enemyExclusionRadius=	"50"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Buy	criteria="*NU +Lux; -Illegal;"	priceAdj="105"/>
			<Buy	criteria="*NU +Meds; -Illegal;"	priceAdj="105"/>
			<Buy	criteria="*NU +Food; -Illegal;"	priceAdj="105"/>
			<Buy	criteria="*NU +Res; -Illegal;"	priceAdj="105"/>

			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="5"/>
			<ConsumeTrade	criteria="{human.res}"		impact="3"/>
			<ConsumeTrade	criteria="{core.ore}"			impact="3"/>

			<ProduceTrade	criteria="{human.lux}"		impact="5"/>
		</Trade>

		<!-- Ships and Defenses -->

		<Ships standingCount="4-6">
			<Table>
				<Lookup chance="50" table="&tbCorpDefenders;"/>
				<Lookup chance="50" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsCorporateEnclave;" imageWidth="320" imageHeight="540" viewportRatio="0.0277"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionCorporateLevel" default="1">
								<Navigate screen="CorporateLevel" />
							</Action>

							<Action id="actionResidentialLevel">
								<ShowPane pane="ResidentialLevel"/>
							</Action>

							<Action id="actionMaintenanceLevel">
								(if (objGetItems gPlayerShip "*NU +Illegal; -ID; +property:known;")
									(scrShowPane gScreen "Illegals")
									(scrShowPane gScreen "MaintenanceLevel")
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>

						</Actions>

					</Default>

					<Illegals descID="descIllegals">
						<Actions>
							<Action id="actionEnterMaintenanceShop" default="1">
								<ShowPane pane="MaintenanceShop"/>
							</Action>

							<Action id="actionLeave" cancel="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</Illegals>

					<MaintenanceLevel descID="descMaintenanceLevel">
						<Actions>
							<Action id="actionLeave" default="1" cancel="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</MaintenanceLevel>

					<MaintenanceShop descID="descMaintenanceShop">
						<Actions>
							<Action id="actionIllegalsAccept" default="1">
								(block (
									;	Price depends on whether a Black Market station 
									;	is in the system.

									(priceAdj
										(switch
											(sysFindObject Nil "TA +blackMarket; +populated;")
												90

											110
											)
										)
									)
									(scrShowPane gScreen "Default")
									
									(scrShowSellScreen
										(lambda (theItem)
											(switch
												(itmMatches theItem "*NU +Illegal; -ID; +property:known;")
													(divide (multiply priceAdj (itmGetPrice theItem 'credit)) 100)
													
												Nil
												)
											)
								
										Nil						; obsolete
										
										'(
											Nil
											50000
											)
										)
									)
							</Action>

							<Action id="actionIllegalsDecline" cancel="1">
								<ShowPane pane="Illegals"/>
							</Action>
						</Actions>
					</MaintenanceShop>

					<ResidentialLevel descID="descResidentialLevel">
						<Actions>
							<Action id="actionLeave" default="1" cancel="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</ResidentialLevel>

				</Panes>
			</Main>

			<CorporateLevel>
				<Panes>
					<Default descID="descCorporateLevel">
						<Actions>
							<Action id="actionSellItems" default="1">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeSell;)
							</Action>

							<Action id="actionLeave" cancel="1">
								<Navigate screen="Main" />
							</Action>
						</Actions>
					</Default>

				</Panes>

			</CorporateLevel>

		</DockScreens>

		<!-- Events and Data -->

		<Language>
			<Text id="actionCorporateLevel">[C]orporate Level</Text>
			<Text id="actionResidentialLevel">[R]esidential Level</Text>
			<Text id="actionMaintenanceLevel">[M]aintenance Level</Text>
			<Text id="actionEnterMaintenanceShop">[E]nter Maintenance Shop</Text>

			<Text id="descWelcome">

				You are in the docking level of a corporate enclave. The 
				citizens of the station work for various members of the 
				Corporate Hierarchy.

			</Text>
			<Text id="descMaintenanceLevel">

				You are in the maintenance level of a corporate enclave. The 
				drone of the atmosphere processors and the waste converters 
				drowns out all other noises.
				
				There is an empty maintenance shop here filled with various 
				machines and drones; an empty laudanum ampule peeks out from 
				under the workbench.

			</Text>
			<Text id="descIllegals">

				You are in the maintenance level of a corporate enclave. The 
				door to the maintenance shop is open and you hear voices inside.

			</Text>
			<Text id="descMaintenanceShop">
				
				You are in the maintenance shop surrounded by various machines 
				and drones. There are four men in the room repairing various 
				items.
				
				One of the men walks towards you and says, "You must be the new 
				delivery person. Show me what you've got to sell."

			</Text>
			<Text id="descResidentialLevel">

				You are in the residential level of a corporate enclave. This 
				level holds the apartments and dwelling units of mid-level 
				corporate citizens. The units are small and somewhat homogenous,
				though everyone you meet seems happy.

			</Text>
			<Text id="descCorporateLevel">

				You are in the corporate level of a corporate enclave. The 
				day-to-day services and manufacturing of the various 
				corporations are carried out on this level.

			</Text>
			<Text id="rpg.stationWillNotBuy">

				%StationName% buys food, luxuries, meds, and industrial 
				resources. We are not interested in buying %itemName%.

			</Text>

			<String id="actionIllegalsAccept">"[S]ure, the merchandise is in my cargo hold."</String>
			<String id="actionIllegalsDecline">"You've co[n]fused me with someone else, sorry."</String>

			<Text id="core.mapDesc">"Buys food, luxuries, meds, and industrial resources"</Text>
		</Language>
	</StationType>
<StationType UNID="&stFuelDepot;"
			name=				"corporate fuel depot"
			sovereign=			"&svCorporate;"

			attributes=			"corporate, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, populated"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			size=				"184"
			armorID=			"&itCeralloyArmor;"
			hitPoints=			"160"
			multiHull=			"true"
			regen=              "2"

			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"cccuu rv--- ----- ----- -----"

				locationCriteria=		"-outerSystem, +planetary"
				enemyExclusionRadius=	"50"
				/>

		<Names noArticle="true">Antares Fuel; Bapco Fuel; Cerulean Energy;
				Dilithium Fuels, rce; Energy Supplies, rce; Fentano Fuels;
				Gargantua Fuel Systems; Herenix Fuel &amp; Energy; Impala Refueling;
				Jerry's Ship Fuel; Konstantine Fuels; Lexi Starship Fuels; Miranda Fueling Depot;
				Ngari Fuels; Otomo Fuels; Pergium Fuel &amp; Supplies;
				Qi jin Fuels; Revenant Fuels; Sanchez Fuel;
				Tander Fuel &amp; Energy; Urion Fuels; Vanderberg Fuels;
				Wehesaken Fuel Depot; %s Fuel</Names>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="fNU +basicFuel; L:1-4; -defective; -illegal; -ID; -notForSale;"	priceAdj="90"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>

			<Refuel			criteria="f +BasicFuel; L:1-4;" priceAdj="90"/>
			<Refuel			criteria="f +BasicFuel; L:5-10;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="120"/>

			<ProduceTrade	criteria="{core.fusionFuel}"		impact="20"/>
		</Trade>

		<Items>
			<LevelTable count="1d3">
				<Item levelFrequency="cccur v----"	count="4d20"	item="&itHelium3FuelRod;" />
				<Item levelFrequency="-rucc urv--"	count="4d20"	item="&itHeliumAssembly;" />
				<Item levelFrequency="--ruc curv-"	count="4d20"	item="&itXenotiteFuelRod;" />
				<Item levelFrequency="----r uccur"	count="4d20"	item="&itPteracniumFuelRod;" />
				<Item levelFrequency="----- -rucc"	count="4d20"	item="&itHadronVacuumFuelCell;" />
			</LevelTable>
			
			<Item				count="4d20"	item="&itWaterIce;" />
			<Item chance="50"	count="2d20"	item="&itHydrogenGas;" />
			<Item chance="50"	count="2d20"	item="&itLiquidOxygen;" />
			<Item chance="50"	count="1"		item="&itSystemMapROM;" />
		</Items>

		<!-- Configuration -->

		<!-- Satellites -->

		<!-- Ships and Defenses -->

		<Ships standingCount="3-4">
			<Table>
				<Lookup chance="50" table="&tbCorpDefenders;"/>
				<Lookup chance="50" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image imageID="&rsCorporateFuelDepot;" imageWidth="186" imageHeight="240" viewportRatio="0.03"/>

		<DockingPorts
				portCount=		"12"
				portAngle=		"15"
				portRadius=		"120"
				>
		</DockingPorts>

		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(block (actionStatus)
								(scrSetDescTranslate gScreen 'desc { name:(objGetName gSource) })
								
								(setq actionStatus (rpgCalcDockServiceRefuelAction gSource gPlayerShip { }))
								(scrShowAction gScreen 'actionRefuel (@ actionStatus 'visible))
								(scrEnableAction gScreen 'actionRefuel (@ actionStatus 'enabled))
								(scrSetActionDesc gScreen 'actionRefuel (@ actionStatus 'desc))
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionRefuel" default="1">
								(scrShowScreen gScreen "&dsRPGRefuel;")
							</Action>

							<Action id="actionBuyItems">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Behavior -->

		<Language>
			<Text id="desc">

				Welcome to %name%, your most reliable source of starship fuel 
				and a member of the Earth Industries Conglomerate.

				All our fuel has been produced to the exacting standards 
				required by today's reactors. Please use the terminal to proceed 
				with your transaction.

			</Text>
			<Text id="core.mapDesc">
				Refuels up to level 10 &mdash; Sells fuel and supplies
			</Text>
		</Language>

	</StationType>
<StationType UNID="&stManufacturingPlant;"
			name=				"corporate manufacturing plant"
			sovereign=			"&svCorporate;"

			attributes=			"corporate, corporateCustoms, friendly, independent, generic, human, majorStation, populated"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"325"
			armorID=			"&itCeralloyArmor;"
			hitPoints=			"630"
			multiHull=			"true"
			regen=              "6"

			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>
			
		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"+corporateCore;"
				levelFrequency=			"-uuuu r---- ----- ----- -----"

				locationCriteria=		"-planetary"
				enemyExclusionRadius=	"75"

				unique=					"inSystem"
				/>

		<Names noArticle="true">Arcoter Industrials; Bosen-Haggen Manufacturing; Cloud9 Industrials;
			Dai-chi Plant %1%0; Electrox Manufacturing; Fahrenheit Technologies; Geotron Industries;
			Honoku-Tomashi Plant %1%0%0; Irene Sanchez Factory; Jorrell Scientific Plant %1%0%0;
			Kestrel Industrials; Lamar Industries; Marina-Maxwell Factory %1%0%0; Nordic Industrials;
			Oceana Manufacturing; Blue Planet Facility %1%0%0; Reich &amp; Balham Plant %1%0%0;
			Senpaku Hogei Manufacturing; Thalmann Industries; Ursa Majoris Manufacturing;
			Ventabot Manufacturing; WIZ Manufacturing; Yollensgard Industrials; Z%1 Manufacturing
		</Names>

		<!-- Trade and Items -->

		<Trade currency="credit">
		</Trade>

		<!-- Ships and Defenses -->

		<Ships standingCount="4-6">
			<Table>
				<Lookup chance="50" table="&tbCorpDefenders;"/>
				<Lookup chance="50" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsCorporateManufacturing;" imageWidth="270" imageHeight="560" viewportRatio="0.02125"/>

		<DockingPorts
				portCount=		"12"
				portAngle=		"-15"
				portRadius=		"145"
				>
		</DockingPorts>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDescTranslate gScreen 'descWelcome {
								buyItemsList: (objTranslate gSource 'buyItemsList)
								})
						</OnPaneInit>

						<Actions>
							<Action id="actionBuyItems" default="1">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>
							
							<Action id="actionSellItems">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeSell;)
							</Action>
							
							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Behavior -->
		
		<Events>
			<OnCreate>
				(block (
					;	We have different kinds of manufacturing plants

					(allTypes (list

						;	Food Manufacturing

						{
							produces: "t +food; -lux; -res; -fuel; -ID; -illegal; -art; -antique; -alien; -notForSale; F:curv; &gt;$0 &lt;=$500 &lt;=6"
							consumes: "t +res; -ore; -illegal; -notForSale; F:curv; &lt;=$250"

							tradeProd: "{human.basicFood}"
							tradeCons: "{human.res}"
							}

						;	Luxury Manufacturing

						{
							produces: "t +lux; -res; -fuel; -ID; -illegal; -art; -antique; -alien; -notForSale; F:curv; &gt;$0 &lt;=$500 &lt;=6"
							consumes: "t +res; -ore; -illegal; -notForSale; F:curv; &lt;=$500"

							tradeProd: "{human.lux}"
							tradeCons: "{human.res}"
							}

						;	Industrial Resource Manufacturing

						{
							produces: "t +res; -ore; -fuel; -ID; -illegal; -art; -antique; -alien; -notForSale; F:curv; &gt;$0 &lt;=$500 &lt;=6"
							consumes: "t +ore; -illegal; -notForSale; F:cu; &lt;=$250"

							tradeProd: "{human.res}"
							tradeCons: "{core.ore}"
							}
						))

					;	Pick a random type

					(facDesc (random allTypes))

					(maxInventory (multiply (random 1000 2000) (sysGetLevel)))

					allItems itemsCreated itemsConsumed totalItems
					)

					;	Pick the items that we manufacture

					(setq allItems (shuffle (itmGetTypes (@ facDesc 'produces))))
					(setq totalItems (min (random 3 5) (count allItems)))
					(for i 1 totalItems
						(block (theType thePrice theCount)
							(setq theType (item allItems (subtract i 1)))
							(setq itemsCreated (append itemsCreated theType))
							
							; Create items
							(setq theCount (divide maxInventory (itmGetPrice (itmCreate theType 1) 'credit)))
							(objAddItem gSource	(itmCreate theType theCount))
								
							; Set trade line
							(objAddSellOrder gSource theType (random '(50 70 80 80 85 85 85 85 90)))
							)
						)
						
					;	Pick the items that we consume
					
					(setq allItems (shuffle (itmGetTypes (@ facDesc 'consumes))))
					(setq itemsConsumed (subset allItems 0 (random 2 4)))
					(enum itemsConsumed theType
						(objAddBuyOrder gSource theType (random '(150 130 120 120 115 115 115 110)))
						)

					;	Add trade orders for system-wide price impacts

					(objAddTradeOrder gSource 'produceTrade (@ facDesc 'tradeProd) 10)
					(objAddTradeOrder gSource 'consumeTrade (@ facDesc 'tradeCons) 10)

					;	Remember some values

					(objSetData gSource 'itemsCreated itemsCreated)
					(objSetData gSource 'itemsConsumed itemsConsumed)
					(objSetData gSource 'maxInventory maxInventory)
					
					;	Register a timer so that we can resupply

					(sysAddObjRecurringTimerEvent 9000 gSource "OnManufacture")
					)
			</OnCreate>

			<OnManufacture>
				(block (totalConsumed manufactureRun)
					; Consume raw materials (and keep track of how much we are consuming)
					(setq totalConsumed 0)
					(enum (objGetItems gSource "*U +Res;") theItem
						(block Nil
							(setq totalConsumed (add totalConsumed (multiply (itmGetPrice theItem 'credit) (itmGetCount theItem))))
							(objRemoveItem gSource theItem)
							)
						)
						
					; Manufacture
					(setq manufactureRun (divide totalConsumed 5))
					(if (gr totalConsumed 0)
						(for i 1 5
							(block (theType theCount)
								(setq theType (random (objGetData gSource "itemsCreated")))
								(setq theCount (divide manufactureRun (itmGetPrice (itmCreate theType 1) 'credit)))
								(objAddItem gSource (itmCreate theType (max 1 theCount)))
								)
							)
						)
					)
			</OnManufacture>
		</Events>

		<Language>
			<Text id="descWelcome">

				You are in the docking level of a corporate manufacturing plant.
				The station master greets you:

				"Welcome to our manufacturing facilities! We are looking to buy %buyItemsList%."

			</Text>
			
			<Text id="buyItemsList">
				(or (objGetData gSource 'buyItemsList)
					(block (itemsConsumed buyItemsList)
						(setq itemsConsumed (objGetData gSource 'itemsConsumed))
						
						;	Fix stations that were created while the OnCreate event was partially broken.
						
						(if (not itemsConsumed) (objSetData gSource 'itemsConsumed (setq itemsConsumed
							(map (itmGetTypes '*) '(excludeNil original) theType
								(objGetBuyPrice gSource (itmCreate theType 1))
								)
							)))
							
						(setq buyItemsList (join (map itemsConsumed theType 
													(itmGetName theType '(plural short))
													)
												'oxfordComma
												))
						(objSetData gSource 'buyItemsList buyItemsList)
						buyItemsList
						)
					)
			</Text>

			<Text id="core.mapDescCustom">
				(typTranslate gType 'mapDescCustomText {
					buyItemsList: (objTranslate gSource 'buyItemsList)
					sellItemsList: (join (map (objGetData gSource 'itemsCreated) theType
											(itmGetName theType '(plural short))
											)
										'oxfordComma
										)
					})
			</Text>
			
			<Text id="mapDescCustomText">
				Buys %buyItemsList% &mdash;
				Sells %sellItemsList%
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stHotel;"
			name=				"corporate hotel"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			multiHull=			"true"
			armorID=			"&itCeralloyArmor;"
			hitPoints=			"160"
			regen=				"4"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"corporate, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, majorStation, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"uuurr v---- ----- ----- -----"

				locationCriteria=		"*"
				enemyExclusionRadius=	"50"
				unique=					"inSystem"
				/>

		<Names definiteArticle="true">Beta Gemini Hotel; Honoku-Tomashi Hotel; Manchurian Oriental Hotel;
				Merchant Prince Hotel; Savanna Hotel; Seven Sisters Hotel;
				Virgin %s Hotel; %s Interstellar Hotel</Names>

		<Image			imageID="&rsStations2;" imageX="0" imageY="256" imageWidth="192" imageHeight="256"/>

		<Ships standingCount="4-5">
			<Table>
				<Lookup chance="25" table="&tbCorpDefenders;"/>
				<Lookup chance="75" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<Trade currency="credit">
			<Buy	criteria="*NU +Lux; -Illegal;"	priceAdj="105"/>
			<Buy	criteria="*NU +Food; -Illegal;"	priceAdj="105"/>
			<Buy	criteria="*NU" item="&itWaterIce;"		priceAdj="105"/>
			<Buy	criteria="*NU" item="&itStimuzine;"		priceAdj="105"/>
			<Buy	criteria="*NU" item="&itMedicalSupplies;"		priceAdj="105"/>
			<Buy	criteria="*NU" item="&itBiofactorPaste;"		priceAdj="105"/>
			<Buy	criteria="*NU" item="&itHypermycin;"		priceAdj="105"/>

			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="2"/>
			<ConsumeTrade	criteria="{human.lux}"		impact="5"/>
		</Trade>

		<Events>
			<GetRumors>
				{
					attributes: "commonwealthPub"
					priority: 24
					textID: 'rumor.commonwealthPub
					data: {station: (objGetName gSource)}
					onExitRumor: (lambda (theRumor) (objSetKnown (@ theRumor 'sourceObj)))
					}
			</GetRumors>
		</Events>

		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDesc gScreen (cat "Welcome to " (objGetName gSource 4) "."))
						</OnPaneInit>

						<Actions>
							<Action id="actionRestaurant">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +corporateHotel; =" (sysGetLevel) ";")
									noMissionTextID:
										(if (objGetItems gPlayerShip "* +BlackMarketID;")
											'descRestaurantRespect
											'descRestaurantNoRespect
											)
									maxPerStation: 1
									})
							</Action>

							<Action id="actionLoadingDock">
								<Navigate screen="LoadingDock"/>
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>

			<LoadingDock>

				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDesc gScreen (cat "You are in the loading dock of " (objGetName gSource 4) "."))
						</OnPaneInit>

						<Actions>
							<Action id="actionSellItems" default="1">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeSell;)
							</Action>

							<Action id="actionLeave" cancel="1">
								<Navigate screen="Main"/>
							</Action>
						</Actions>
					</Default>
				</Panes>

			</LoadingDock>

		</DockScreens>

		<DockingPorts>
			<Port x="0"		y="-90" />
			<Port x="96"	y="-70" />
			<Port x="-96"	y="-70" />
			<Port x="105"	y="-25" />
			<Port x="-105"	y="-25" />
			<Port x="68"	y="-100" />
			<Port x="-68"	y="-100" />
			<Port x="70"	y="25" />
			<Port x="-70"	y="25" />
		</DockingPorts>

		<Language>
			<Text id="actionRestaurant">"[R]estaurant"</Text>
			<Text id="actionLoadingDock">"[L]oading Dock"</Text>

			<Text id="descRestaurantRespect">
				As you enter the restaurant the maitre d' welcomes you warmly and shows
				you to a table. Envious patrons look on while you eat a wonderful dish
				of Hogei Salmon with organic yams and sweet plum sauce.
			</Text>
			<Text id="descRestaurantNoRespect">
				The maitre d' leaves you waiting for several minutes. When he finally
				turns to you he coldly tells you that there are no tables available.
				You feel out of place here.
			</Text>

			<Text id="rumor.commonwealthPub">
				You talk to a corporate woman staying at the %station%. She drones on
				about the excellent service. You spend 5 credits on drinks.
			</Text>

			<Text id="rpg.stationWillNotBuy">

				%StationName% buys food, luxuries, and meds. We are not 
				interested in buying %itemName%.

			</Text>
			<Text id="core.mapDesc">"Buys food, luxuries, and meds"</Text>
		</Language>
	</StationType>
<StationType UNID="&stIceFarm;"
			name=				"corporate ice farm"
			sovereign=			"&svCorporate;"

			attributes=			"asteroidBase, corporate, corporateCustoms, envAir, envAvoidsFire, friendly, independent, generic, human, populated"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"150"
			explosionType=		"&vtBlastExplosion1;"
			ejectaType=			"&vtIceAsteroidEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"rccuu rv--- ----- ----- -----"

				locationCriteria=		"++outerSystem"
				enemyExclusionRadius=	"50"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="*NU +Lux; -defective; -NotForSale;"	priceAdj="100"/>

			<Buy	criteria="*NU +Food; -Lux; -Illegal; &lt;=$100; -NotForSale;"	priceAdj="105"/>
			<Buy	criteria="*NU" item="&itHydrocarbons;"		priceAdj="105"/>
			<Buy	criteria="*NU" item="&itHelium3FuelRod;"	priceAdj="105"/>
			<Buy	criteria="*NU" item="&itOrganicAcid;"		priceAdj="105"/>
			<Buy	criteria="*NU" item="&itMedicalSupplies;"	priceAdj="105"/>
			<Buy	criteria="*NU" item="&itHyperfiberRoll;"	priceAdj="105"/>
			<Buy	criteria="*NU" item="&itBiofactorPaste;"	priceAdj="105"/>

			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="1"/>
			<ConsumeTrade	criteria="{human.res}"		impact="1"/>

			<ProduceTrade	criteria="{human.basicFood}"	impact="10"/>
		</Trade>

		<Items>
			<Item				count="4d12"	item="&itEuropanIceMoss;" />
			<Item				count="1d12"	item="&itEuropanIceVodka;" />
			<Item chance="50"	count="2d12"	item="&itHogeiSalmon;" />
		</Items>

		<!-- Configuration -->

		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itPlasteelPlate;"
				hitPoints=		"120"
				regen=			"1"
				/>
		
		<!-- Ships and Defenses -->

		<Ships standingCount="3-4">
			<Lookup chance="50" table="&tbCorpAutonDefenders;"/>
			<Lookup chance="50" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<!-- Image and Effects -->

		<ImageVariants>
			<LocationCriteriaTable>
				<Variants criteria="*ice">
					<Image imageID="&rsIceFarmIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsIceFarmIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsIceFarmIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsIceFarmIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*primordial">
					<Image imageID="&rsIceFarmPrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsIceFarmPrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsIceFarmPrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsIceFarmPrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				
				<Variants criteria="*~">
					<Image imageID="&rsIceFarmRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsIceFarmRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsIceFarmRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsIceFarmRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"120"
				>
		</DockingPorts>

		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionBuyItems" default="1">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionSellItems">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeSell;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->

		<Language>
			<Text id="core.name">Ice Farm</Text>

			<Text id="descWelcome">

				You are docked at a corporate ice farm on a small asteroid. 
				Cold and stale air blows out of a wheezing recycler and you 
				hear the drone of struggling generators and pumps.

			</Text>
			<Text id="rpg.stationWillNotBuy">

				%StationName% buys food and supplies. We are not 
				interested in buying %itemName%.

			</Text>
			<Text id="core.mapDesc">Sells luxuries &mdash; Buys food and supplies</Text>
		</Language>

	</StationType>
<StationType UNID="&stTaikonVentures;"
			name=				": Taikon Ventures|Taikon Ventures"
			sovereign=			"&svCorporate;"

			attributes=			"corporate, corporateArms, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, populated"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			armorID=			"&itQuadroCarbideArmor;"
			hitPoints=			"470"
			multiHull=			"true"
			regen=              "5"
			fireRateAdj=		"10"

			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"----- -uur- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"75"
				/>

		<!-- Trade and Items -->

		<Trade currency="rin">
			<Sell	criteria="*NU +Taikon; -defective;"				priceAdj="100"/>
			<Sell	criteria="*NU +RingerValuable; -defective;"		priceAdj="250"/>
			<Sell	criteria="*NU +Alien; -defective;"				priceAdj="120"/>
			<Sell	criteria="*NU -defective; -ID;"					priceAdj="100"/>

			<Refuel			criteria="f +unid:&itPteracniumFuelRod;;" priceAdj="100"/>
			<Refuel			criteria="f +BasicFuel; L:1-10;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-11;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-11;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-11;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-11;" priceAdj="100"/>
		</Trade>

		<Items>
			<RandomItem count="1d6" 
					criteria=		"d L:1-11; +Taikon; -defective; -NotStandard; -NotForSale"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>
			<RandomItem count="1d6" 
					criteria=		"a L:1-11; +Taikon; -defective; -NotStandard; -NotForSale"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>
			<RandomItem count="3d6" 
					criteria=		"m +Taikon; -defective; -illegal; -NotStandard; -NotForSale"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>
			<RandomItem count="1d6" 
					criteria=		"* L:1-11; -defective; -illegal; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="2d6" 
					criteria=		"*~ad -Alien; -defective; -illegal; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|u"
					/>
			<RandomItem count="1d3" 
					criteria=		"* L:1-11; +Alien; -defective; -illegal; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<Item	count="6d12" item="&itPteracniumFuelRod;"/>
		</Items>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itHeavyIonBlaster;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships standingCount="4-5">
			<Table>
				<Lookup chance="75" table="&tbCorpDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsStations8;" imageX="0" imageY="448" imageWidth="128" imageHeight="192"/>

		<DockingPorts>
			<Port x="68"	y="35" />
			<Port x="42"	y="-71" />
			<Port x="-74"	y="-39" />
			<Port x="-38"	y="63" />
			<Port x="90"	y="-31" />
			<Port x="-28"	y="-90" />
			<Port x="-101"	y="21" />
			<Port x="36"	y="88" />
		</DockingPorts>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionBuyItems">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionDockServices" default="1">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>

						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Behavior -->

		<Language>
			<Text id="descWelcome">
				You are docked at a Taikon Ventures station.
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stWondrousDevices;"
			name=				": Thor's Wondrous Devices|Thor's Wondrous Devices"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itAdvancedPlasteelPlate;"
			hitPoints=			"350"
			regen=				"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"corporate, corporateArms, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"---ru ur--- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<Image			imageID="&rsStations5;" imageX="128" imageY="384" imageWidth="128" imageHeight="256"/>

		<Ships standingCount="4-5">
			<Table>
				<Lookup chance="75" table="&tbCorpDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<Items>
			<RandomItem count="20-30" 
					criteria=		"admu L:1-9; -defective; -Illegal; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:u|c|crv"
					enhanced=		"5"
					enhancement=	"=(intCorporateGenerateEnhancement gItem)"
					/>
			<RandomItem count="8" 
					criteria=		"admu L:1-9; -defective; -Illegal; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|u|cur"
					enhanced=		"1"
					enhancement=	"=(intCorporateGenerateEnhancement gItem)"
					/>
		</Items>

		<Trade currency="credit">
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -ID; -NotForSale;"	priceAdj="50"/>
			<Buy	criteria="uNU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="amduNU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-8;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-8;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-9;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-9;" priceAdj="100"	upgradeInstallOnly="true"/>
			<RemoveDevice	criteria="d L:1-9;" priceAdj="100"	upgradeInstallOnly="true"/>
		</Trade>

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionDockServices" default="1">
								(rpgDockServices gPlayerShip {
									upgradeInstallOnly: True
									})
							</Action>

							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>

						</Actions>

					</Default>
				</Panes>
			</Main>

		</DockScreens>

		<DockingPorts>
			<Port x="90"	y="15" />
			<Port x="-90"	y="15" />
			<Port x="90"	y="90" />
			<Port x="-90"	y="90" />
			<Port x="60"	y="-30" />
			<Port x="-60"	y="-30" />

			<Port x="0"		y="-50" />
			<Port x="0"		y="130" />
		</DockingPorts>

		<Language>
			<Text id="descWelcome">
				You are docked at a franchise of Thor's Wondrous Devices.
			</Text>
		</Language>
	</StationType>
<!-- CorporateInsurance.xml -->
<StationType UNID="&stInsuranceCompany;"
			name=				":the Clavius Insurance Conglomerate|Clavius Insurance Conglomerate"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itCeralloyArmor;"
			hitPoints=			"250"
			regen=				"2"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"corporate, corporateCustoms, corporateInsurance, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"+corporateCore;"
				levelFrequency=			"-rrru r---- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"

				unique=					"inSystem"
				/>

		<Image			imageID="&rsStations2;" imageX="0" imageY="0" imageWidth="128" imageHeight="256"/>

		<Ships standingCount="3-4">
			<Table>
				<Lookup chance="50" table="&tbCorpDefenders;"/>
				<Lookup chance="50" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<Events>
			<GetGlobalAchievements>
				(append
					(if (typGetData &stInsuranceCompany; 'insured)
						{
							descID: 'insuredBy
							value: (typGetProperty gType 'name)
							}
						)
					(switch
						(gr (typGetData &stInsuranceCompany; 'claims) 0)
							{
								descID: 'insuranceClaims
								value: (typGetData &stInsuranceCompany; 'claims)
								sectionID: 'conducts
								}
								
						(typGetData &stInsuranceCompany; 'insured)
							{
								descID: 'neverClaimedInsurance
								sectionID: 'conducts
								}
								
						{
							descID: 'neverBoughtInsurance
							sectionID: 'conducts
							}
						)
					)
			</GetGlobalAchievements>

			<GetGlobalResurrectPotential>
				(switch
					; If not insured, we never resurrect
					(not (typGetGlobalData &stInsuranceCompany; "insured"))
						0

					; We never resurrect in Huaramarca or Elysium
					(or (eq (sysGetNode) 'Huaramarca)
						(eq (sysGetNode) 'Elysium))
						0

					; If there are corporate stations in the system, then we are highly likely
					; to resurrect the player
					(sysFindObject Nil "TA +corporate;")
						100

					; Otherwise, we are not very likely (we'll only resurrect if no one else can help)
					1
					)
			</GetGlobalResurrectPotential>

			<OnGlobalResurrect>
				(block (rescueObj)
					; Increase claims
					(typIncGlobalData &stInsuranceCompany; "claims")
					(typSetGlobalData &stInsuranceCompany; "insured" Nil)

					; Achievement
					(if (= (typ@ &stInsuranceCompany; 'claims) 1)
						(unvSetAchievement 'humanSpace.insuranceResurrect)
						)

					; Restore the ship					
					(switch
						; If the player ship has custom insurance code, then we 
						; don't do anything more.
						(objFireEvent gPlayerShip 'OnInsuranceClaim)
							Nil
						
						; Put the player in a safe place and repair the ship
						(rpgRestorePlayer {
							portObj: (or
								(sysFindObject gPlayerShip "TAFN +corporateInsurance;")
								(sysFindObject gPlayerShip "TAFN +populated; +corporate; +majorStation;")
								)
							})
						)

					; Create a rescue ship nearby
					(setq rescueObj (sysCreateShip 
						&scCorporateCruiser; 
						(sysVectorRandom gPlayerShip 5 5 "TA")
						&svCorporate;
						))

					(shpOrder rescueObj 'wait Nil 5)
					(shpOrder rescueObj 'gate)
					(objSendMessage gPlayerShip rescueObj "Insurance claim processed. Have a better one!")
					)
			</OnGlobalResurrect>
		</Events>

		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDescTranslate gScreen 'descWelcome {
								systemName: (sysGetName)
								})
						</OnPaneInit>

						<Actions>
							<Action id="actionPurchase" default="1">
								(switch
									(objGetGlobalData gSource "insured")
										(scrShowPane gScreen "AlreadyInsured")

									(geq (objGetGlobalData gSource "claims") 3)
										(scrShowPane gScreen "TooRisky")

									(scrShowPane gScreen "BuyInsurance")
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<AlreadyInsured descID="descAlreadyInsured">
						<Actions>
							<Action id="actionContinue" cancel="1" default="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</AlreadyInsured>

					<TooRisky descID="descTooRisky">
						<Actions>
							<Action id="actionContinue" cancel="1" default="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</TooRisky>

					<BuyInsurance>
						<OnPaneInit>
							(block (desc claims priceAdj)
								(setq claims (objGetGlobalData gSource "claims"))

								; Compute the price based on prior claims

								(switch
									(or (not claims) (eq claims 0))
										(setq gCost 10000)

									(eq claims 1)
										(setq gCost 50000)

									(eq claims 2)
										(setq gCost 100000)

									(setq gCost 1000000)
									)

								; Include any global adjustments

								(if (setq priceAdj (objGetPlayerPriceAdj gSource { type:'corporateInsurance priorClaims:(if claims claims 0) }))
									(setq gCost (divide (multiply gCost priceAdj) 100))
									)

								; Compose text

								(scrSetDesc gScreen
									(scrTranslate gScreen 'descPurchaseIntro)

									"\n\n"

									(switch
										(not priceAdj)
											(scrTranslate gScreen 'descPurchasePrice {
												cost: (fmtCurrency 'credit gCost)
												})

										(eq gCost 0)
											(scrTranslate gScreen 'descPurchaseFree)
										
										(scrTranslate gScreen 'descPurchaseDiscount {
											cost: (fmtCurrency 'credit gCost)
											})
										)

									(switch
										(ls (plyGetCredits gPlayer) gCost)
											(cat "\n\n" (scrTranslate gScreen 'descCannotAfford))
										)
									)

								(scrEnableAction gScreen 'actionPurchase (geq (plyGetCredits gPlayer) gCost))
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionPurchase" default="1">
								(block Nil
									(objSetGlobalData gSource "insured" True)
									(plyCharge gPlayer gCost)
									(scrShowPane gScreen "Done")
									)
							</Action>

							<Action id="actionCancel" cancel="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</BuyInsurance>

					<Done descID="descThankYou">
						<Actions>
							<Action id="actionContinue" cancel="1" default="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</Done>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts>
			<Port x="0"		y="135" />
			<Port x="0"		y="-15" />
			<Port x="50"	y="110" />
			<Port x="50"	y="10" />
			<Port x="75"	y="60" />
			<Port x="-75"	y="60" />
			<Port x="-50"	y="110" />
			<Port x="-50"	y="10" />
		</DockingPorts>

        <Language>
			<Text id="actionPurchase">[P]urchase Insurance</Text>

			<Text id="descWelcome">

				Welcome to the %systemName% branch of the Clavius Insurance Conglomerate. 
				Since 2071 we have been providing hazard insurance services to freelancers 
				and entrepreneurs throughout Human Space.

			</Text>
			<Text id="descPurchaseIntro">

				We provide full personal and property coverage against death and 
				destruction. Claims are settled by full replacement of life and property,
				including resuscitation and cloning.

			</Text>
			<String id="descPurchasePrice">
			
				"Based on your risk profile we can offer you full coverage for %cost%."

			</String>
			<Text id="descPurchaseFree">

				"With your corporate discount we can offer you full coverage 
				for...let me see...wow, you must have some powerful friends!
				
				"We can offer you full coverage free of charge!"
				
			</Text>
			<String id="descPurchaseDiscount">

				"With your corporate discount we can offer you full coverage for %cost%."

			</String>
			<Text id="descCannotAfford">

				Unfortunately, you cannot afford the price.

			</Text>

			<Text id="descAlreadyInsured">

				You are already insured by our conglomerate. Rest assured that 
				you are protected against all losses by the most comprehensive 
				insurance in the Commonwealth.

			</Text>
			<Text id="descTooRisky">

				Unfortunately, we do not have an insurance product suitable for 
				the risky lifestyle that you lead.

			</Text>
			<Text id="descThankYou">

				"Thank you for your purchase. We wish you a long and happy life, 
				secure in the knowledge that the oldest and most powerful 
				insurance conglomerate stands behind you."

			</Text>
			
			<Text id="insuranceClaims">Insurance claims</Text>
			<Text id="insuredBy">Insured by</Text>
			<Text id="neverBoughtInsurance">Never bought life insurance</Text>
			<Text id="neverClaimedInsurance">Never claimed life insurance</Text>
			
            <Text id="core.mapDesc">
				Life insurance policies
            </Text>
        </Language>
	</StationType>
<!-- CorporateTradingPost.xml -->
<StationType UNID="&stCorporateTradingPost;"
			name=				"corporate trading post"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itAdvancedPlasteelPlate;"
			hitPoints=			"350"
			regen=				"12"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"corporate, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"---rc uur-- ----- ----- -----"
				maxInSystem=			"1"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<Image			imageID="&rsStations4;" imageX="0" imageY="448" imageWidth="192" imageHeight="192"/>

		<Animations>
			<Animation x="-39" y="-45">
				<Image	imageID="&rsTradingPostAnimation;" imageX="0" imageY="0" imageWidth="64" imageHeight="80" imageFrameCount="40" imageTicksPerFrame="4" />
			</Animation>
		</Animations>

		<Ships standingCount="4-5">
			<Table>
				<Lookup chance="50" table="&tbCorpDefenders;"/>
				<Lookup chance="50" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<Items>
			<RandomItem count="20-30" 
					criteria=		"* -defective; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:vru|c|urv"
					/>
		</Items>

		<Trade currency="credit">
			<Sell	criteria="*NU -defective; -Illegal; -NotForSale; -ID;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"	priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>

			<BalanceTrade	criteria="{human.basicFood}"	impact="10"/>
			<BalanceTrade	criteria="{human.lux}"		impact="10"/>
			<BalanceTrade	criteria="{human.res}"		impact="5"/>
		</Trade>

		<Events>
			<OnObjDestroyed>
				(if (and (eq (objGetData gSource "MissionStatus") "intransit")
						(eq aObjDestroyed (objGetObjRefData gSource "Transport")))
					(block Nil
						(objSetData gSource "MissionStatus" "failed")
						)
					)
			</OnObjDestroyed>

			<OnObjDocked>
				(if (and (eq (objGetData gSource "MissionStatus") "intransit")
						(eq aObjDocked (objGetObjRefData gSource "Transport"))
						(eq aDockTarget gSource))
					(block Nil
						(objRemoveItem aObjDocked (objGetData gSource "Order"))
						(objSetData gSource "MissionStatus" "arrived")
						)
					)
			</OnObjDocked>
		</Events>

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descMain">
						<Actions>
							<Action id="actionOrderItems" default="1">
								(switch
									(eq (objGetData gSource "MissionStatus") "intransit")
										(scrShowScreen gScreen "OrderInTransit")

									(eq (objGetData gSource "MissionStatus") "arrived")
										(scrShowScreen gScreen "OrderReady")

									(eq (objGetData gSource "MissionStatus") "failed")
										(scrShowScreen gScreen "OrderFailed")

									; If the player has exceeded quota, then she cannot order
									(geq (objGetData gSource "OrderCount") 1)
										(scrShowScreen gScreen "QuotaExceeded")

									; Show order screen	
									(scrShowScreen gScreen "OrderItem")
									)
							</Action>

							<Action id="actionBuyItems">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionSellItems">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeSell;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>

			<OrderItem>
				<Panes>
					<Default
							descID="descOrderDefault"
							showTextInput="true">

						<Actions>
							<Action id="actionSearch" default="1">
								(block (theItem)
									(setq theItem (itmCreateByName "* -Illegal; -Military; -Alien; -ID; -CannotOrder; -NotForSale; &lt;10" (scrGetInputText gScreen) 1))

									(switch
										; If we couldn't understand, say so
										(not theItem)
											(scrShowPane gScreen "UnknownItem")

										; Otherwise, ask for a count
										(block (theCost maxCount)
											(setq theCost (itmGetActualPrice theItem))

											; Add 40% markup
											(setq theCost (divide (multiply theCost 140) 100))

											; Compute max count
											(switch
												(leq (itmGetFrequency theItem) 1)
													(setq maxCount 1)

												(leq (itmGetFrequency theItem) 4)
													(setq maxCount (itmGetMaxAppearing theItem))

												(leq (itmGetFrequency theItem) 10)
													(setq maxCount (multiply 3 (itmGetMaxAppearing theItem)))

												(setq maxCount (multiply 10 (itmGetMaxAppearing theItem)))
												)
												
											(scrSetData gScreen 'orderItem theItem)
											(scrSetData gScreen 'unitCost theCost)
											(scrSetData gScreen 'maxCount maxCount)
											(scrSetData gScreen 'pluralName (itmGetName theItem 0x102))
											(if (gr maxCount 1)
												(scrShowPane gScreen "GetCount")
												(scrShowPane gScreen "OneAvailable")
												)
											)
										)
									)
							</Action>

							<Action id="actionCancelSpecial" cancel="1">
								(scrShowScreen gScreen "Main")
							</Action>
						</Actions>
					</Default>

					<GetCount
							showCounter="true">

						<OnPaneInit>
							(scrSetDescTranslate gScreen 'descGetCount {
								pluralName:(scrGetData gScreen 'pluralName)
								maxCount:(scrGetData gScreen 'maxCount)
								})
						</OnPaneInit>

						<Actions>
							<Action id="actionGetPrice" default="1">
								(switch
									(gr (scrGetCounter gScreen) (scrGetData gScreen 'maxCount))
										(scrSetCounter gScreen (scrGetData gScreen 'maxCount))

									(gr (scrGetCounter gScreen) 0)
										(block Nil
											(scrSetData gScreen 'orderItem (itmSetCount (scrGetData gScreen 'orderItem) (scrGetCounter gScreen)))
											(scrShowPane gScreen "ConfirmOrder")
											)
									)
							</Action>

							<Action id="actionCancel" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</GetCount>
					
					<OneAvailable>
						<OnPaneInit>
							(scrSetDescTranslate gScreen 'descOneAvailable { pluralName:(scrGetData gScreen 'pluralName) })
						</OnPaneInit>

						<Actions>
							<Action id="actionGetPrice" default="1">
								(scrShowPane gScreen "ConfirmOrder")
							</Action>

							<Action id="actionCancel" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</OneAvailable>

					<ConfirmOrder>
						<OnPaneInit>
							(block (
								(theItem (scrGetData gScreen 'orderItem))
								(itemCount (itmGetCount theItem))
								(unitCost (scrGetData gScreen 'unitCost))
								(itemsCost (multiply itemCount unitCost))
								; Shipping cost 500 credits per ton
								(shippingCost (multiply 500 (divide (add (multiply (itmGetMass theItem) itemCount) 999) 1000)))
								(totalCost (add itemsCost shippingCost))
								multipleItems finalString
								)
									
								(if (gr itemCount 1)
									(setq multipleItems (scrTranslate gScreen 'priceForMultiple { itemCount:itemCount itemsCost:(fmtCurrency 'credit itemsCost) } ))
									(setq multipleItems " ")
									)
								(if (gr totalCost (plyGetCredits gPlayer))
									(block Nil
										(setq finalString (scrTranslate gScreen 'notEnoughCredits))
										(scrEnableAction gScreen 'actionPlaceOrder Nil)
										)
									(setq finalString (scrTranslate gScreen 'confirmOrderQuery))
									)
									
								(scrSetData gScreen 'totalCost totalCost)
								(scrSetDescTranslate gScreen 'descConfirmOrder {
									itemName: (itmGetName theItem 0x108)
									unitCost: (fmtCurrency 'credit unitCost)
									multipleItems: multipleItems
									shippingCost: (fmtCurrency 'credit shippingCost)
									totalCost: (fmtCurrency 'credit totalCost)
									finalString: finalString
									})
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionPlaceOrder" default="1">
								(block (
									(theItem (scrGetData gScreen 'orderItem))
									(theCost (scrGetData gScreen 'totalCost))
									transport
									)
										
									; Create a transport at the nearest gate and put the item on it
									(setq transport (sysCreateShip &tbCorporateDeliveryTransport; (objGetNearestStargate gSource) &svCorporate;))
									(objAddItem transport theItem)
									(objSetProperty transport 'exitGateTimer (random 120 180))
									(objSetProperty transport 'identified True)

									; Order the transport to dock with the station and then gate out
									(shpCancelOrders transport)
									(shpOrder transport 'sendMessage gPlayerShip (objTranslate gSource 'msgTransportArrived))
									(shpOrder transport 'dock gSource)
									(shpOrder transport 'wait (random 5 10))
									(shpOrder transport 'gate)

									(objSetShowAsDestination transport '(autoClearOnDock autoClearOnDestroyed))

									; Register the transport so we know if it got destroyed
									(objRegisterForEvents gSource transport)

									; Remember the item and the transport
									(objSetData gSource "Order" theItem)
									(objSetObjRefData gSource "Transport" transport)

									; Set the mission status
									(objSetData gSource "MissionStatus" "intransit")

									; Charge the player
									(plyCharge gPlayer theCost)
									(plyRecordBuyItem gPlayer theItem theCost)
									(objIncData gSource "OrderCount" 1)

									(scrShowPane gScreen "ThankYou")
									)
							</Action>

							<Action id="actionCancel" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</ConfirmOrder>

					<ThankYou descID="descThankYou">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowScreen gScreen "Main")
							</Action>
						</Actions>
					</ThankYou>

					<UnknownItem descID="descUnknownItem">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</UnknownItem>
				</Panes>
			</OrderItem>

			<OrderInTransit>
				<Panes>
					<Default>
						<OnPaneInit>
							(block (
								(transportObj (objGetObjRefData gSource 'Transport))
								)
								(switch
									;	If transport is still in gate, then not yet arrived

									(objGetProperty transportObj 'exitGateTimer)
										(scrSetDescTranslate gScreen 'descInGate {
											itemName:(itmGetName (objGetData gSource "Order") 0x108)
											})

									;	Otherwise, transport is en route.

									(scrSetDescTranslate gScreen 'descInTransit {
										itemName:(itmGetName (objGetData gSource "Order") 0x108)
										distance:(fmtNumber (objGetDistance gSource transportObj))
										})
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowScreen gScreen "Main")
							</Action>
						</Actions>
					</Default>
				</Panes>
			</OrderInTransit>

			<OrderReady>
				<Panes>
					<Default>
						<OnPaneInit>
							(block (
								(theItem (objGetData gSource "Order"))
								(spaceNeeded (multiply (itmGetMass theItem) (itmGetCount theItem)))
								)

								(if (geq (objGetCargoSpaceLeft gPlayerShip) spaceNeeded)
									(block Nil
										(scrSetDescTranslate gScreen 'descOrderReady { itemName:(itmGetName theItem 0x108) })
										(itmSetKnown theItem)
										(objAddItem gPlayerShip theItem)
										(objSetData gSource "MissionStatus" Nil)
										)
									(scrSetDescTranslate gScreen 'descNoSpace { itemName:(itmGetName theItem 0x108) })
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowScreen gScreen "Main")
							</Action>
						</Actions>
					</Default>
				</Panes>
			</OrderReady>

			<OrderFailed>
				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDescTranslate gScreen 'descOrderFailed { itemName:(itmGetName (objGetData gSource "Order") 0x108) })
						</OnPaneInit>

						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(block Nil
									(objSetData gSource "MissionStatus" Nil)
									(scrShowScreen gScreen "Main")
									)
							</Action>
						</Actions>
					</Default>
				</Panes>
			</OrderFailed>

			<QuotaExceeded>
				<Panes>
					<Default descID="descQuotaExceeded">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowScreen gScreen "Main")
							</Action>
						</Actions>
					</Default>
				</Panes>
			</QuotaExceeded>

		</DockScreens>

		<DockingPorts>
			<Port x="0"		y="92" />
			<Port x="38"	y="85" />
			<Port x="105"	y="60" />
			<Port x="124"	y="-20" />
			<Port x="64"	y="-92" />
			<Port x="0"		y="-120" />
			<Port x="-102"	y="-66" />
			<Port x="-100"	y="16" />
			<Port x="-84"	y="78" />
		</DockingPorts>

        <Language>
			<Text id="actionOrderItems">[O]rder Items</Text>
			<Text id="actionSearch">[Enter] Search</Text>
			<Text id="actionCancelSpecial">[Esc] Cancel</Text>
			<Text id="actionGetPrice">[G]et Price Quote</Text>
			<Text id="actionPlaceOrder">[P]lace Order</Text>
			
			<Text id="descMain">

				You are docked at a corporate trading post.

			</Text>
			<Text id="descOrderDefault">

				Please enter an item to search for in our catalog database:

			</Text>
			<Text id="descOneAvailable">

				The catalog contains a listing for %pluralName%.
				There is one left in the warehouse.
				
				Do you wish to order it?

			</Text>
			<Text id="descGetCount">

				The catalog contains a listing for %pluralName%.
				There are %maxCount% left in the warehouse.
				
				How many do you wish to order?

			</Text>
			<Text id="descConfirmOrder">

				Order: %itemName%\n
				Unit price: %unitCost% %multipleItems%\n
				Shipping &amp; Handling: %shippingCost%\n
				Total: %totalCost%
				
				%finalString%

			</Text>
			<String id="priceForMultiple">(%itemCount% for %itemsCost%)</String>
			<Text id="notEnoughCredits">

				Unfortunately, you do not have enough credits to complete the order.

			</Text>
			<Text id="confirmOrderQuery">

				Do you wish to place the order?

			</Text>
			<Text id="descThankYou">

				Your order has shipped! A transport carrying your order has been 
				dispatched and will arrive soon.
				
				Please check back at this screen to see the status of your order.

			</Text>
			<Text id="descUnknownItem">

				Sorry, there are no items in the catalog matching that description.

			</Text>
			<Text id="descInGate">

				Your order for %itemName% has shipped and is en route.
				The transport holding your order is currently in another system.
			
			</Text>
			<Text id="descInTransit">

				Your order for %itemName% has shipped and is en route.
				The transport holding your order is currently %distance% light-seconds away.

			</Text>
			<Text id="descOrderReady">

				Your order for %itemName% has arrived and has been placed in your cargo hold.
				
				Thank you for your business!

			</Text>
			<Text id="descNoSpace">

				Your order for %itemName% is ready. Unfortunately, you do not have enough 
				room in your cargo hold. Please return when you have freed up enough room.

			</Text>
			<Text id="descOrderFailed">

				We regret to inform you that your order for %itemName% has been destroyed in transit.
				As we are not liable for losses due to external events, we respectfully recommend 
				that you pursue the matter with your insurance company, if any.

			</Text>
			<Text id="descQuotaExceeded">

				Sorry, only one order per customer!
				
				Please buy our in-stock items or visit another Trading Post at a system near you.

			</Text>

			<Text id="msgTransportArrived">Freighter arrived</Text>

            <Text id="core.mapDescCustom">
				(block (
					(status (objGetData gSource 'MissionStatus))
					)
					(switch
						(= status 'intransit)
							(objTranslate gSource 'mapDesc.intransit)

						(= status 'arrived)
							(objTranslate gSource 'mapDesc.arrived)

						(= status 'failed)
							(objTranslate gSource 'mapDesc.failed)

						(geq (objGetData gSource 'OrderCount) 1)
							(objTranslate gSource 'mapDesc.notAvailable)

						(objTranslate gSource 'mapDesc.available)
						)
					)
            </Text>
			<Text id="mapDesc.available">Catalog ordering available &mdash; %tradeDesc%</Text>
			<Text id="mapDesc.notAvailable">%tradeDesc%</Text>
			<Text id="mapDesc.intransit">Order in transit &mdash; %tradeDesc%</Text>
			<Text id="mapDesc.arrived">Order ready for pick up &mdash; %tradeDesc%</Text>
			<Text id="mapDesc.failed">Order destroyed in transit &mdash; %tradeDesc%</Text>
        </Language>
	</StationType>
<!-- Cryovolcanic.xml -->
<StationType UNID="&stCryovolcanicSizeC;"
		name=				"cryovolcanic asteroid"
		attributes=			"asteroid, cryovolcanic, ice, inner, lifeZone, outer"
		inherit=			"&baCryovolcanic;"

		scale=				"world"
		size=				"269"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<Properties>
			<Variant id="volcanoCount">(random 3 5)</Variant>
		</Properties>

		<ImageLookup imageID="&rsIcePlanetoidSizeG;"/>

		<Items>
			<Table>
				<Null chance="95"/>
				<Lookup chance="5" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<!-- CSCTerra.xml -->
<StationType<?xml version="1.0" encoding="utf-8"?>

<TranscendenceModule>

	<!-- CSC Terra -->

	<ShipClass UNID="&scCSCTerra;"
			manufacturer=		"Earth Industries"
			class=				"Commonwealth Star Carrier"
			type=				""

			attributes=			"capitalShip, commonwealth, commonwealthFleet, commonwealthMilitary, commonwealthStarCarrier, EI, fleetLaw, majorShip, cscTerra"
			inherit=			"&scCSCStock;"

			dockScreen=			"Main"
			>

		<Names>:the CSC Terra</Names>

		<Properties>	
			<Definition id="csc.emblem">
				(resCreateImageDesc &rsFleetEmblems; 960 480 320 240)
			</Definition>
		</Properties>

		<!-- Configuration -->
		
		<Armor
			armorID=			"&itP1000HexphaseArmor;"
			count=				"20"
			/>
		
		<Devices>
			<Device slotID="w1"		deviceID="&itSAR200AdvancedCannon;"/>
			<Device slotID="w2"		deviceID="&itSAR200AdvancedCannon;"/>
			<Device slotID="w3"		deviceID="&itSAR200AdvancedCannon;"/>
			<Device slotID="w4"		deviceID="&itSAR200AdvancedCannon;"/>

			<Device slotID="omni1"	deviceID="&itNAMIHeavyLauncher;">
				<Items>
					<Item count="300"	item="&itM2Missile;"/>
				</Items>
			</Device>
			<Device slotID="omni2"	deviceID="&itMissileDefense;"/>
			<Device					deviceID="&vtDamageControlParty;"/>
		</Devices>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; +military; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="500" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-9;" priceAdj="90"/>
			<RepairArmor	criteria="a L:1-10;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-10;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-9;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-9;" priceAdj="100"/>
			<InstallDevice	criteria="d +unid:&itLamplighter;;" priceAdj="100"/>
			<RemoveDevice	criteria="d +unid:&itLamplighter;;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>

		<Items>
			<Item				count="6d12"	item="&itPteracniumFuelRod;"/>
			
			<!-- Some upgrades for sale -->
			
			<RandomItem count="1d6" criteria="r +commonwealth; -defective; -illegal; -notForSale; -notStandard; L:6-9;"		levelFrequency="systemLevel:ru|c|curv"/>
			<Lookup count="12-16" table="&tbCommonwealthFleetItems;"/>
		</Items>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<OnScreenInit>
					(block ()
						(scrSetBackgroundImage gScreen (obj@ gSource 'csc.emblemDesc))

						(rpgMissionAssignmentOnScreenInit {
							missionCriteria: (cat "n +cscTerra; =" (sysGetLevel) ";")
							})
						)
				</OnScreenInit>
				
				<Display type="detailsPane">
					<OnDisplayInit>
						(typTranslate &unidCommonwealthFleet; 'rankDetails)
					</OnDisplayInit>
				</Display>

				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDescTranslate gScreen 'descWelcome {objName: (objGetName gSource)})
						</OnPaneInit>

						<Actions>
							<Action id="actionInformation">
								(scrShowScreen gScreen &dsRPGDialog; (objTranslate gSource 'csc.info))
							</Action>

							<Action id="actionBridge" default="1">
								(block (
									(rank (objGetData gPlayerShip 'fleetLevel))
									(behavior (objGetData gSource 'behavior))
									)
									(switch
										;	Can't get in unless the player is Fleet Commander or above
										(ls rank 5)
											(scrShowScreen gScreen &dsRPGMessage; { textID:'descAccessDenied })

										;	If on maneuvers, then too busy
										(= behavior 'moving)
											(scrShowScreen gScreen &dsRPGMessage; { textID:'descShipMoving })

										;	Otherwise show missions
										(rpgMissionAssignment {
											missionCriteria: (cat "n +cscTerra; +rank" (int rank) "; =" (sysGetLevel) ";")
											noMissionTextID: 'descNoMissions

											rankDetails: (typTranslate &unidCommonwealthFleet; 'rankDetails)
											})
										)
									)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="actionBridge">[B]ridge</Text>
			<Text id="actionDockServices">[D]ock Services</Text>
			<Text id="actionUndock">[U]ndock</Text>

			<Text id="descWelcome">You are in the docking bay of the %objName%.</Text>
			<Text id="descAccessDenied">

				Two armed guards block your path:
				
				"I'm sorry, %sir%, the admiral does not like to be disturbed by 
				junior officers."

			</Text>
			<Text id="descShipMoving">

				The bridge of the CSC Terra is busy with activity. Admiral Decker
				is leaning over a holochart as the massive ship maneuvers through
				the system.

			</Text>
			<String id="descNoMissions">

				The bridge of the CSC Terra is busy with activity. Admiral Decker
				and his XO are discussing the results of the last operation.

			</String>
		</Language>
	</ShipClass>

	<!-- CSC Terra Encounter -->

	<EncounterType UNID="&stCSCTerraEncounter;"
			name=				"(CSC Terra)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,primary,envAir,envEarth,envFire,envWater"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+cscOperationsSpace;"
				systemAffinity=			"*"
				levelFrequency=			"----- ---c- ----- ----- -----"

				locationCriteria=		"+outerSystem, -planetary"
				enemyExclusionRadius=	"120"

				maxAppearing=			"1"
				/>

		<Ships>
			<Ship	count="1"	class="&scCSCTerra;" orders="hold">
				<Names definiteArticle="true">CSC Terra</Names>
				
				<InitialData>
					<CSC>"terra"</CSC>
				</InitialData>
			</Ship>
		</Ships>
	</EncounterType>

</TranscendenceModule>
</StationType>
<!-- Dall01.xml -->
<StationType UNID="&stDallSphere;"
			name=				"inert metal sphere"
			sovereign=			"&svNeutral;"
			inherit=			"&unidCommonText;"
			abandonedScreen=	"Main"

			scale=				"ship"
			mobile=				"true"
			mass=				"1"
			destroyWhenEmpty=	"true"
			noMapIcon=			"true"
			>

		<Image imageID="&rsDallSphere;" imageX="96" imageY="0" imageWidth="32" imageHeight="32"/>

		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(switch
								(objGetItems gSource "*")
									(scrSetDescTranslate gScreen 'descFloating)

								(block Nil
									(scrSetDescTranslate gScreen 'descSecure)
									(scrShowAction gScreen 'actionLoot Nil)
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionLoot" default="1" >
								(scrShowScreen gScreen &dsRPGLoot;)
							</Action>

							<Action id="actionUndock" cancel="1" default="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="descFloating">You find an inert metal sphere floating in space.</Text>
			<Text id="descSecure">The sphere is secure aboard your ship.</Text>
		</Language>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>
	</StationType>
<StationType UNID="&stDallMissionWreck;"
			name=				"Sung transport wreck"
			sovereign=			"&svNeutral;"
			inherit=			"&unidCommonText;"
			
			dockScreen=			"Main"
			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"

			ejectaType=			"&vtWreckEjecta;"
			
			attributes=			"shipwreck"
			>
			
		<Properties>
			<Constant id="core.noSalvage">True</Constant>
		</Properties>

		<ImageShipwreck class="&scSungTransport;"/>
		
		<Items>
			<Item item="&itDallSphere;" count="1"/>
		</Items>

		<Ships>
			<Ship	count="4d4+4"	class="&scDwargRaider;"	sovereign="&svDwargRaiders;" orders="patrol"	patrolDist="5" controller="zoanthrope"/>
		</Ships>
		
		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(if (and (objGetItems gSource "* +unid:&itDallSphere;")
									(= (typGetData &itDallSphere; 'status) 'onFreighter))
								(scrSetDescTranslate gScreen 'descContainment)

								;	If the sphere has been moved, then use the default abandoned screen
								(scrShowScreen gScreen &dsRPGAbandonedStation;)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionOpen" default="1">
								(block (
									(theSphere (@ (objGetItems gSource "* +unid:&itDallSphere;") 0))
									(theMission (@ (msnFind "a +unid:&msDallSphere;;") 0))
									)
									
									(objRemoveItem gSource theSphere)
									(objAddItem gPlayerShip theSphere)
									(typSetData &itDallSphere; 'status 'found)
									
									(msnSetData theMission 'targetID (msnGetProperty theMission 'ownerID))
									(msnSetPlayerTarget theMission)
									
									(scrShowPane gScreen "OpenContainment")
									)
							</Action>
							
							<Action id="actionUndock" cancel="1">
								(scrExitScreen gScreen)
							</Action>
						</Actions>
					</Default>

					<OpenContainment descID="descOpen">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								(scrExitScreen gScreen)
							</Action>
						</Actions>
					</OpenContainment>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="actionOpen">[O]pen Containment</Text>
			<Text id="descContainment">
				You enter the cargo hold of the wrecked ship and see a massive containment vessel
				with giant power couplings. Through a thick window in the containment vessel you
				see a metal sphere with a complex series of etchings.

				There is an emergency latch on one side that opens the containment vessel.
			</Text>
			<Text id="descOpen">
				The titanic doors of the containment vessel split open and air rushes into it.
				The sphere is held in place by thin columns.

				You take the sphere and put it in your cargo hold.
			</Text>
		</Language>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<!-- Dantalion.xml -->
<!-- DeathDrugsCartel.xml -->
<StationType UNID="&stDrugCartelOutpost;"
			name=				"Death Drug Cartel outpost"
			sovereign=			"&svDeathDrugsCartel;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			armorID=			"&itPlasteelPlate;"
			hitPoints=			"160"
            regen=              "2"
			fireRateAdj=		"20"
			explosionType=		"&vtBlastExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"drugcartel, enemy, envWater, envAvoidsEarth, generic, human, outlaws, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"--ucu r---- ----- ----- -----"

				locationCriteria=		"-innerSystem, +planetary"
				/>

		<Image			imageID="&rsStations4;" imageX="0" imageY="320" imageWidth="96" imageHeight="96"/>

		<Devices>
			<Device deviceID="&itSlamCannon;"	omnidirectional="true"/>
		</Devices>

		<Ships>
			<Table>
				<Ship chance="50"	count="1d4"	class="&scMethEnforcer;" orders="guard"/>
				<Group chance="50">
					<Ship			count="1d2"	class="&scMethEnforcer;" orders="guard"/>
					<Ship			count="1"	class="&scMethEnforcer;" orders="guard"/>
				</Group>
			</Table>
		</Ships>

		<Items value="standard:level=4:x=0.75">
			<Lookup chance="30" count="1d2" table="&trStationSupplies;"/>
			<Lookup chance="30" count="1d4" table="&trMedicalItem;"/>
			<Item chance="50"	count="1d4"	item="&itDeathDrugs;" />
		</Items>

		<Encounters frequency="uncommon">
			<Table>
				<Ship chance="60" count="1" class="&scMethEnforcer;"  eventHandler="&evStdPatrolEncounterBehavior;">
					<Escorts>
						<LevelTable>
							<Null levelFrequency="uuu-- -----" />
							<Ship levelFrequency="ccc-- -----"   count="1"		class="&scMethEnforcer;" orders="escort"/>
							<Ship levelFrequency="---c- -----"   count="1d2"	class="&scMethEnforcer;" orders="escort"/>
							<Ship levelFrequency="----c -----"   count="1d2+1"	class="&scMethEnforcer;" orders="escort"/>
							<Ship levelFrequency="----- c----"   count="1d4"	class="&scMethEnforcer;" orders="escort"/>
							<Ship levelFrequency="----- -cccc"   count="1d4+1"	class="&scMethEnforcer;" orders="escort"/>
						</LevelTable>
					</Escorts>
				</Ship>
				<Ship chance="40" count="1" class="&scT55ArmedTransport;"  eventHandler="&evStdConvoyEncounterBehavior;">
					<Items>
						<Lookup chance="50" count="1d2" table="&trStationSupplies;"/>
						<Item	chance="90"	count="1d8"	item="&itDeathDrugs;"/>
					</Items>
					<Escorts>
						<LevelTable>
							<Ship levelFrequency="ccc-- -----"   count="1d4"	class="&scMethEnforcer;" orders="escort"/>
							<Ship levelFrequency="---c- -----"   count="1d6"	class="&scMethEnforcer;" orders="escort"/>
							<Ship levelFrequency="----c -----"   count="1d6+1"	class="&scMethEnforcer;" orders="escort"/>
							<Ship levelFrequency="----- c----"   count="1d8"	class="&scMethEnforcer;" orders="escort"/>
							<Ship levelFrequency="----- -cccc"   count="1d10"	class="&scMethEnforcer;" orders="escort"/>
						</LevelTable>
					</Escorts>
				</Ship>
			</Table>
		</Encounters>
		<Events>
			<GetRumors>
				{
					attributes: "commonwealthPub"
					priority: 40
					textID: 'rumor.commonwealthPub
					}
			</GetRumors>
		</Events>

		<Language>
			<Text id="rumor.commonwealthPub">

				An old man talks to you:

				"I don't trust the corporate medlabs&mdash;they talk about drug
				shortages while they munch on oncokillers and antigens! I'm going
				to the Death Labs&mdash;what's the worst they can do? Kill me?"

				You spend 5 credits to buy him a drink.

			</Text>
		</Language>
	</StationType>
<!-- Debris.xml -->
<StationType UNID="&stSealedCargoContainer;"
			name=				"abandoned cargo container"
			sovereign=			"&svNeutral;"
			inherit=			"&unidCommonText;"
		
			attributes=			"debris, friendly"

			abandonedScreen=	"Main"

			scale=				"ship"
			size=				"20"
			mass=				"50"
			structuralHitPoints="20"

			mobile=				"true"
			noMapIcon=			"true"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				systemAffinity=			"*"
				levelFrequency=			"ucccu rrvv- ----- ----- -----"

				locationCriteria=		"+asteroids"
				/>

		<!-- Image and Effects
		
			Sealed containers are mostly orange, with a small chance of other
			colors.

		-->

		<ImageVariants>
			<Image	imageID="&rsCargoContainer;"	imageX="0"   imageY="0"   imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="56"  imageY="0"   imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="112" imageY="0"   imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="168" imageY="0"   imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="224" imageY="0"   imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="280" imageY="0"   imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="336" imageY="0"   imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="392" imageY="0"   imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>

			<Image	imageID="&rsCargoContainer;"	imageX="112" imageY="56"  imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="336" imageY="112" imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
		</ImageVariants>

		<DockingPorts
				portCount=		"2"
				portRadius=		"50"
				maxDist=		"3"
				/>
				
		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<InitialPane>
					(if (objGetData gSource "Opened")
						"Opened"
						"Default"
						)
				</InitialPane>

				<Panes>
					<Default descID="descDefault">
						<Actions>
							<Action id="actionOpenSeal" default="1">
								(block (contents roll)
									(objSetData gSource "Opened" True)

									; Pick contents randomly
									(setq roll (random 1 100))
									(switch
										(ls roll 15)
											(setq contents 1)	; 15% empty

										(ls roll 45)
											(block Nil			; 30% random items
												(objAddRandomItems gSource &trCargoContainer; 1)
												(setq contents 2)
												)

										(ls roll 55)
											(setq contents 3)	; 10% acid
										(ls roll 75)
											(setq contents 4)	; 20% refugees
										(setq contents 5)		; 25% pirate attack
										)

									; Set the pane and contents
									(scrShowPane gScreen (cat "Contents" contents))
									(objSetData gSource "Contents" contents)
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>

						</Actions>
					</Default>

					<Opened>
						<OnPaneInit>
							(block nil
								(scrSetDesc gScreen (cat
									(scrTranslate gScreen 'descOpenedStart)
									" "
									(switch
										(eq (objGetData gSource "Contents") 4)
											(scrTranslate gScreen 'descOpenedRefugees)
										(block (allItems itemCount)
											(setq allItems (objGetItems gSource "*"))
											(setq itemCount (count allItems))
											(scrSetData gScreen 'itemName (itmGetName (@ allItems 0) '(count escapeQuotes)))
											(switch
												(eq itemCount 0)
													(scrTranslate gScreen 'core.noItemsHereDesc)
												(eq itemCount 1)
													(scrTranslate gScreen 'descOpenedOneItem {
														itemName: (itmGetName (@ allItems 0) '(count escapeQuotes))
														})
												(scrTranslate gScreen 'descOpenedSeveralItems)
												)
											)
										)
									))
								(rpgSetLootAction gSource)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionLoot" default="1">
								(scrShowScreen gScreen &dsRPGLoot; {
									nextScreen: "Main"
									})
							</Action>

							<Action id="actionUndock" cancel="1" default="1">
								<Exit/>
							</Action>

						</Actions>
					</Opened>

					; Cargo container is empty

					<Contents1 descID="descContentsEmpty">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Contents1>

					; Cargo container has some random junk

					<Contents2>
						<OnPaneInit>
							(block (allItems itemCount)
								(setq allItems (objGetItems gSource "*"))
								(setq itemCount (count allItems))
								(scrSetData gScreen 'itemName (itmGetName (@ allItems 0) '(count escapeQuotes)))
								(switch
									(eq itemCount 0)
										(scrSetDescTranslate gScreen 'descContentsEmpty)
									(eq itemCount 1)
										(scrSetDescTranslate gScreen 'descContents2OneItem {
											itemName: (itmGetName (@ allItems 0) '(count escapeQuotes))
											})
									(scrSetDescTranslate gScreen 'descContents2VariousItems)
									)
								(rpgSetLootAction gSource)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionLoot" default="1">
								(scrShowScreen gScreen &dsRPGLoot; {
									nextScreen: "Main"
									})
							</Action>

							<Action id="actionUndock" cancel="1" default="1">
								<Exit/>
							</Action>
						</Actions>
					</Contents2>

					; Cargo container is filled with a powerful acid

					<Contents3>
						<OnPaneInit>
							(block (
								;	pick a random armor segment
								(armorSeg (random 0 (- (shpGetArmorCount gPlayerShip) 1)))
							
								;	Pick random damage based on system level
								;	(d20 per level)
								(damage (rollDice (sysGetLevel) 20))
								
								damageDone
								)
								
								; Do damage
								
								(setq damageDone (shpDamageArmor gPlayerShip armorSeg 'blast damage))
								
								;	Report what happened
								
								(switch
									(= damageDone 0)
										(scrSetDescTranslate gScreen 'descAcidNoDamage)
										
									(scrSetDescTranslate gScreen 'descAcidDamage {
										hitPoints: (fmtNoun (scrTranslate gScreen 'nounHitPoints) damage 'countAlways)
										})
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Contents3>

					; Cargo container is occupied by some refugees

					<Contents4 descID="descContents4">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Contents4>

					; Cargo container is a trap for some pirates

					<Contents5>
						<OnPaneInit>
							(switch
								;	If we're near a Korolov station, then these are 
								;	for the pirates
								
								(sysFindObject gSource "TA +korolovShipping; N:24;")
									(scrSetDescTranslate gScreen 'descPiratesSpies)
									
								(scrSetDescTranslate gScreen 'descPiratesAmbush)
								)
						</OnPaneInit>
						
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(block Nil
									(sysAddEncounterEventAtDist 0 gPlayerShip &etPirateAmbush; 90)
									(scrExitDock gScreen)
									)
							</Action>
						</Actions>
					</Contents5>

				</Panes>
			</Main>

		</DockScreens>

		<!-- Events and Data -->

		<InitialData>
			<Opened		data="Nil"/>
		</InitialData>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<Language>
			<Text id="actionOpenSeal">[O]pen Seal</Text>
			
			<Text id="descOpenedStart">You are docked at an abandoned cargo container.</Text>
			<Text id="descOpenedRefugees">There is a family of refugees living here.</Text>
			<Text id="descContentsEmpty">"The cargo container is empty."</Text>
			<Text id="descOpenedOneItem">You see %itemName% here.</Text>
			<Text id="descOpenedSeveralItems">You see several items here.</Text>
			
			<Text id="descAcidNoDamage">
				
				The cargo container is filled with a powerful industrial solvent,
				which splashes on your ship's armor.
				
				Fortunately, it causes no damage.
				
			</Text>
			<Text id="descAcidDamage">
				
				The cargo container was filled with a powerful industrial solvent,
				which splashes on your ship's armor, causing %hitPoints% of damage.
				
			</Text>
			
			<Text id="descPiratesAmbush">
				
				This appears to be a makeshift base for a group of pirates. You 
				see enemy ships appear on your screen...
				
			</Text>
			<Text id="descPiratesSpies">
				
				The cargo container is a makeshift pirate base filled with scanning
				and communications gear.
				
				You see enemy ships appear on your screen...
				
			</Text>
			
			<Text id="descDefault">The hatch to the container is sealed. Do you wish to open it?</Text>
			
			<Text id="descContents2OneItem">The cargo container has %itemName%.</Text>
			<Text id="descContents2VariousItems">The cargo container is filled with various items.</Text>
			
			<Text id="descContents4">
				
				You open the cargo doors and see that a family of refugees is 
				living inside. They are somewhat annoyed at being disturbed.
				
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stShipwreck1;"
			name=				"(shipwreck I)"
			sovereign=			"&svUnknownEnemy;"
			dockScreen=			"&dsAbandonedShip;"
			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"

			ejectaType=			"&vtWreckEjecta;"

			attributes=			"debris,friendly,shipwreck"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				systemAffinity=			"*"
				levelFrequency=			"ucccu rrvv- ----- ----- -----"

				locationCriteria=		"-planetary"
				/>

		<ImageVariants>
			<Shipwreck class="&scCorsair;"/>
			<Shipwreck class="&scBorer;"/>
			<Shipwreck class="&scEarthzone;"/>
			<Shipwreck class="&scRoninA;"/>
		</ImageVariants>
		
		<Items>
			<Lookup count="1" table="&trStdTreasure;"/>
		</Items>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<StationType UNID="&stShipwreck2;"
			name=				"(shipwreck II)"
			sovereign=			"&svUnknownEnemy;"
			dockScreen=			"&dsAbandonedShip;"
			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"

			attributes=			"debris,friendly,shipwreck"

			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				systemAffinity=			"*"
				levelFrequency=			"-uccc urrvv ----- ----- -----"

				locationCriteria=		"-planetary"
				/>

		<ImageVariants>
			<Shipwreck class="&scRoninB;"/>
			<Shipwreck class="&scSotho;"/>
			<Shipwreck class="&scEI100;"/>
			<Shipwreck class="&scT31ArmedTransport;"/>
		</ImageVariants>
		
		<Items>
			<Lookup count="1" table="&trStdTreasure;"/>
		</Items>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<StationType UNID="&stShipwreck3;"
			name=				"(shipwreck III)"
			sovereign=			"&svUnknownEnemy;"
			dockScreen=			"&dsAbandonedShip;"
			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"

			attributes=			"debris,friendly,shipwreck"

			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				systemAffinity=			"*"
				levelFrequency=			"--ucc currv v---- ----- -----"

				locationCriteria=		"-planetary"
				/>

		<ImageVariants>
			<Shipwreck class="&scRepentant;"/>
			<Shipwreck class="&scEI100;"/>
			<Shipwreck class="&scBarbary;"/>
		</ImageVariants>
		
		<Items>
			<Lookup count="1" table="&trStdTreasure;"/>
		</Items>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<StationType UNID="&stRadioactiveShipwreck;"
			name=				"(radioactive shipwreck)"
			sovereign=			"&svUnknownEnemy;"
			dockScreen=			"&dsAbandonedShip;"
			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"
			radioactive=		"true"

			attributes=			"debris,friendly,shipwreck"

			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				systemAffinity=			"*"
				levelFrequency=			"-rccc urv-- ----- ----- -----"

				locationCriteria=		"-planetary"
				/>

		<ImageVariants>
			<Shipwreck class="&scPlague;"/>
			<Shipwreck class="&scEI100;"/>
			<Shipwreck class="&scRevelations;"/>
		</ImageVariants>
		
		<Items>
			<Table count="1d4">
				<Null	chance="5"/>
				<Item   chance="13"	count="1d4" item="&itHeavyWater;"/>
				<Item	chance="10"	count="1d4" item="&itFusionTrigger;"/>
				<Item	chance="10"	count="1d4"	item="&itRadioactiveWaste;"/>
				<Item	chance="15"	count="1d4"	item="&itHardenedReactiveArmor;"/>
				<Item	chance="6"	count="1d4" item="&itHardenedPlasteelPlate;"/>
				<Lookup chance="5"  count="1d3" table="&trConsumables3;"/>
				<Lookup chance="10" count="1"	table="&trConsumables4;"/>
				<Lookup chance="10" count="1"	table="&trConsumables5;"/>
				<Lookup chance="5"  count="1"	table="&trMinorItem3;"/>
				<Lookup chance="5"  count="1"	table="&trMinorItem4;"/>
				<Lookup chance="3"  count="1"	table="&trMajorItem3;"/>
				<Lookup chance="3"  count="1"	table="&trMajorItem4;"/>
			</Table>
		</Items>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<StationType UNID="&stCenturionWreck;"
			name=				"(Centurion wreck)"
			sovereign=			"&svCommonwealthFleet;"
			dockScreen=			"&dsAbandonedShip;"
			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"

			ejectaType=			"&vtWreckEjecta;"

			attributes=			"debris, friendly, shipwreck"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				systemAffinity=			"*"
				levelFrequency=			"----- rucur ----- ----- -----"

				locationCriteria=		"-planetary"
				/>

		<ImageShipwreck class="&scCenturionBlock2;"/>

		<Items>
			<Table>
				<Null	chance="20"/>
				<Item	chance="30" count="2d6" item="&itHeliumAssembly;"/>
				<Item	chance="20" count="1d4" item="&itBlastPlate;"/>
				<Item	chance="5"  count="1"	item="&itTeV9Blaster;"/>
				<Item	chance="5"  count="1"	item="&itR1Deflector;"/>
				<Lookup chance="10" count="1"	table="&trConsumables7;"/>
				<Lookup chance="5"  count="1"	table="&trMinorItem7;"/>
				<Lookup chance="5"  count="1"	table="&trMajorItem7;"/>
			</Table>
		</Items>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<StationType UNID="&stSandstormWreck;"
			name=				"(Sandstorm wreck)"
			sovereign=			"&svAres;"
			dockScreen=			"&dsAbandonedShip;"
			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"

			ejectaType=			"&vtWreckEjecta;"

			attributes=			"debris, friendly, shipwreck"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				systemAffinity=			"*"
				levelFrequency=			"----- rucur ----- ----- -----"

				locationCriteria=		"-planetary"
				/>

		<ImageShipwreck class="&scSandstorm;"/>

		<Items>
			<Table>
				<Null	chance="40"/>
				<Item	chance="15" count="2d6" item="&itHeliumAssembly;"/>
				<Item	chance="10" count="1d4" item="&itLightTharsisPlate;"/>
				<Item	chance="5"  count="1"	item="&itLightningCannon;"/>
				<Lookup chance="15" count="1"	table="&trConsumables7;"/>
				<Lookup chance="10" count="1"	table="&trMinorItem7;"/>
				<Lookup chance="5"  count="1"	table="&trMajorItem7;"/>
			</Table>
		</Items>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<StationType UNID="&stWeaponsCache;"
			name=				"(weapons cache)"
			sovereign=			"&svOutlaw;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			structuralHitPoints="15"
			ejectaType=			"&vtWreckEjecta;"

			scale=				"ship"
			mobile=				"true"
			mass=				"50"
			noMapIcon=			"true"
			destroyWhenEmpty=	"true"

			attributes=			"crate, enemy, envEarth, envAvoidsAir, noSalvage"
			>

		<Properties>
			<Constant id="core.noSalvage">True</Constant>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				systemAffinity=			"*"
				levelFrequency=			"-ruuv ----- ----- ----- -----"

				locationCriteria=		"--planetary"
				enemyExclusionRadius=	"80"
				/>

		<ImageVariants>
			<Image			imageID="&rsStations1;" imageX="480" imageY="256" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsStations1;" imageX="480" imageY="288" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsStations1;" imageX="480" imageY="320" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsStations1;" imageX="480" imageY="352" imageWidth="32" imageHeight="32" />
		</ImageVariants>

		<Names>abandoned cargo crate</Names>

		<Ships>
			<Table>
				<Ship chance="50"	count="1d2"	class="&scRoninB;" orders="patrol" patrolDist="5" />
				<Ship chance="50"	count="1"	class="&scRoninC;" orders="patrol" patrolDist="5"/>
			</Table>
		</Ships>

		<Items>
			<RandomItem				count="1d4+1" 
					criteria=		"m -Illegal; -Military; -NotStandard; "
					level=			"3"
					levelCurve=		"2"
					/>
			<RandomItem chance="50"	count="1" 
					criteria=		"w -Illegal; -Military; -NotStandard; "
					level=			"2"
					levelCurve=		"2"
					/>
		</Items>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

		<Satellites>
			<Orbitals count="1d4" distance="1d8+6" angle="random">
				<Station type="&stWeaponsCrate;"/>
			</Orbitals>
		</Satellites>

	</StationType>
<StationType UNID="&stWeaponsCrate;"
			name=				"(weapons cache)"
			sovereign=			"&svOutlaw;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			attributes=			"crate, noSalvage"

			structuralHitPoints="15"
			ejectaType=			"&vtWreckEjecta;"

			scale=				"ship"
			mobile=				"true"
			mass=				"100"
			noMapIcon=			"true"
			destroyWhenEmpty=	"true"
			>

		<Properties>
			<Constant id="core.noSalvage">True</Constant>
		</Properties>

		<ImageVariants>
			<Image			imageID="&rsStations1;" imageX="480" imageY="256" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsStations1;" imageX="480" imageY="288" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsStations1;" imageX="480" imageY="320" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsStations1;" imageX="480" imageY="352" imageWidth="32" imageHeight="32" />
		</ImageVariants>

		<Names>abandoned cargo crate</Names>

		<Ships>
			<Table>
				<Null chance="20"/>
				<Ship chance="50"	count="1"	class="&scRoninB;" orders="guard"/>
				<Ship chance="30"	count="1"	class="&scRoninC;" orders="guard"/>
			</Table>
		</Ships>

		<Items>
			<RandomItem				count="1d3-1" 
					criteria=		"m -Illegal; -Military; -NotStandard; "
					level=			"3"
					levelCurve=		"2"
					/>
			<RandomItem chance="20"	count="1" 
					criteria=		"w -Illegal; -Military; -NotStandard; "
					level=			"2"
					levelCurve=		"2"
					/>
		</Items>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

	</StationType>
<!-- Domina.xml -->
<StationType UNID="&stDomina;"
			name=				"(domina)"
			sovereign=			"&svDomina;"
			virtual=			"true"
			>
	</StationType>
<!-- DwargRaiders.xml -->
<StationType UNID="&stDwargColony;"
			name=				"Dwarg colony|Dwarg colonies"
			sovereign=			"&svDwargRaiders;"

			attributes=			"dwarg, dwargColony, dwargRaiders, enemy, envWater, envAvoidsEarth, generic, neoHuman, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"189"
			armorID=			"&itDwargChitonArmor;"
			hitPoints=			"160"
			multiHull=			"true"
			regen=              "2"

			fireRateAdj=		"50"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+dwargSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"---cu v---- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itDwargXiphonCannon;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships challenge="hard">
			<Ship				count="1d4+4"	class="&scDwargRaider;"		orders="orbitPatrol:radius=8000-12000mls:angle=0-359"/>
		</Ships>

		<!-- Treasure -->

		<Items value="standard:level=4:x=1.6">
			<Lookup table="&trStdTreasure;"/>
		</Items>

		<!-- Image and Effects -->

		<ImageLookup imageID="&rsDwargColonyComposite;"/>

		<DockingPorts	rotation="0">
			<Port x="-82"	y="35" />
			<Port x="-33"	y="71" />
			<Port x="76"	y="44" />
			<Port x="85"	y="0" />
			<Port x="0"		y="-86" />
			<Port x="-49"	y="-70" />
		</DockingPorts>
	</StationType>
<StationType UNID="&stDwargGathering;"
			name=				"Dwarg colony|Dwarg colonies"
			sovereign=			"&svDwargRaiders;"

			attributes=			"dwarg, dwargColony, dwargRaiders, enemy, envWater, envAvoidsEarth, generic, neoHuman, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"189"
			armorID=			"&itDwargCatoptricArmor;"
			hitPoints=			"210"
			multiHull=			"true"
			regen=              "2"

			fireRateAdj=		"50"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+dwargSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"----c uv--- ----- ----- -----"

				locationCriteria=		"+planetary"
				exclusionRadius=		"50"
				enemyExclusionRadius=	"100"
				/>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itDwargXiphonCannon;"	omnidirectional="true"/>
			<Device deviceID="&vtDwargMissileDefense;"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships challenge="standard">
			<Ship				count="1"		class="&scDwargMaster;" orders="patrol" patrolDist="10">
				<Escorts>
					<Ship				count="1d4+4"	class="&scDwargRaider;"		orders="escort"	/>
				</Escorts>
			</Ship>
		</Ships>

		<!-- Satellites -->

		<Satellites overlapCheck="planetoids">
			<Table>
				<Group chance="50">
					<Siblings arcInc="16" radiusInc="1d4+3">
						<Station type="&stDwargGatheringSat;"/>
					</Siblings>
					<Siblings arcInc="-16" radiusInc="1d4+3">
						<Station type="&stDwargGatheringSat;"/>
					</Siblings>
				</Group>
				<Group chance="50">
					<Siblings arcInc="16" radiusInc="1d4+3">
						<Station type="&stDwargGatheringSat;"/>
					</Siblings>
					<Siblings arcInc="-16" radiusInc="1d4+3">
						<Station type="&stDwargGatheringSat;"/>
					</Siblings>
					<Siblings arcInc="32">
						<Station type="&stDwargGatheringSat;"/>
					</Siblings>
				</Group>
			</Table>
		</Satellites>

		<!-- Treasure -->

		<Items value="standard:level=5">
			<Lookup table="&trStdTreasure;"/>
		</Items>

		<!-- Image and Effects -->

		<ImageLookup imageID="&rsDwargColonyComposite;"/>

		<DockingPorts	rotation="0">
			<Port x="-82"	y="35" />
			<Port x="-33"	y="71" />
			<Port x="76"	y="44" />
			<Port x="85"	y="0" />
			<Port x="0"		y="-86" />
			<Port x="-49"	y="-70" />
		</DockingPorts>

		<!-- Random Encounters -->

		<Encounters frequency="uncommon">
			<Ship				count="1"		class="&scDwargMaster;"		eventHandler="&evStdWanderBehavior;"	maxShips="3">
				<Escorts>
					<Ship				count="1d4+4"	class="&scDwargRaider;"		orders="escort"	/>
				</Escorts>
			</Ship>
		</Encounters>
	</StationType>
<StationType UNID="&stDwargGatheringSat;"
			name=				"Dwarg colony|Dwarg colonies"
			sovereign=			"&svDwargRaiders;"

			attributes=			"dwarg, dwargRaiders, enemy, envWater, envAvoidsEarth, neoHuman, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"189"
			armorID=			"&itDwargCatoptricArmor;"
			hitPoints=			"210"
			multiHull=			"true"
			regen=              "2"

			fireRateAdj=		"50"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			noMapLabel=			"true"
			enemyExclusionRadius="50"
			>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itDwargXiphonCannon;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships challenge="standard">
			<Ship				count="1d4+4"	class="&scDwargRaider;"		orders="orbitPatrol:radius=8000-12000mls:angle=0-359"/>
		</Ships>

		<!-- Treasure -->

		<Items value="standard:level=5">
			<Lookup table="&trStdTreasure;"/>
		</Items>

		<!-- Image and Effects -->

		<ImageLookup imageID="&rsDwargColonyComposite;"/>

		<DockingPorts	rotation="0">
			<Port x="-82"	y="35" />
			<Port x="-33"	y="71" />
			<Port x="76"	y="44" />
			<Port x="85"	y="0" />
			<Port x="0"		y="-86" />
			<Port x="-49"	y="-70" />
		</DockingPorts>
	</StationType>
<StationType UNID="&stDwargFortress;"
			name=				"Dwarg fortress(es)"
			sovereign=			"&svDwargRaiders;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			multiHull=			"true"
			armorID=			"&itDwargHolochroalArmor;"
			hitPoints=			"1400"
			regen=              "11"
			fireRateAdj=		"40"
			explosionType=		"&vtBlastExplosion4;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"dwarg, dwargRaiders, enemy, envWater, envAvoidsEarth, generic, majorStation, neoHuman, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+dwargSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"----- cr--- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"100"
				/>

		<Image			imageID="&rsStations6;" imageX="0" imageY="896" imageWidth="256" imageHeight="256"/>

		<Devices>
			<Device deviceID="&itDwargBehemothCannon;"	posAngle="45"  posRadius="30" posZ="40" maxFireRange="2"/>
			<Device deviceID="&itDwargBehemothCannon;"	posAngle="-70" posRadius="30" posZ="40" maxFireRange="2"/>
			<Device deviceID="&itDwargBehemothCannon;"	posAngle="160" posRadius="30" posZ="40" maxFireRange="2"/>
			
			<Device deviceID="&itDwargXiphonCannon;"	posAngle="45"  posRadius="90"  posZ="0" fireArc="180" />
			<Device deviceID="&itDwargBehemothCannon;"	posAngle="-15" posRadius="90" posZ="0" fireArc="180" />
			<Device deviceID="&itDwargXiphonCannon;"	posAngle="-70" posRadius="90" posZ="0" fireAngle="295" fireArc="180" />
			<Device deviceID="&itDwargBehemothCannon;"	posAngle="225" posRadius="90" posZ="0" fireAngle="220" fireArc="180" />
			<Device deviceID="&itDwargXiphonCannon;"	posAngle="150" posRadius="90" posZ="0" fireAngle="155" fireArc="180" />
			<Device deviceID="&itDwargBehemothCannon;"	posAngle="105" posRadius="90" posZ="0" fireAngle="112" fireArc="180" />

			<Device deviceID="&vtDwargMissileDefense;"/>
		</Devices>

		<Ships challenge="deadly">
			<Table>
				<Ship chance="30"			count="1d2"		class="&scDwargMaster;" orders="patrol" patrolDist="10">
					<Escorts>
						<Ship	chance="25"	count="1"		class="&scDwargBehemoth;"		orders="escort"	/>
						<Ship				count="1d4+4"	class="&scDwargRaider;"		orders="escort"	/>
					</Escorts>
				</Ship>
				<Ship chance="60"			count="8-12"	class="&scDwargRaider;"		orders="orbitPatrol:radius=8000-12000mls:angle=0-359"/>
				<Ship chance="10"			count="1"		class="&scDwargBehemoth;"	orders="patrol:6"/>
			</Table>
		</Ships>

		<Items value="standard:level=6:x=4">
			<Lookup table="&trStdTreasure;"/>
		</Items>

		<DockingPorts>
			<Port x="62"	y="95" />
			<Port x="106"	y="60" />
			<Port x="125"	y="0" />
			<Port x="111"	y="-60" />
			<Port x="69"	y="-108" />

			<Port x="-62"	y="95" />
			<Port x="-106"	y="60" />
			<Port x="-125"	y="0" />
			<Port x="-111"	y="-60" />
			<Port x="-69"	y="-108" />

			<Port x="0"		y="-127" />
			<Port x="0"		y="106" />
		</DockingPorts>

		<Encounters frequency="common">
			<Ship				count="1"		class="&scDwargMaster;" eventHandler="&evStdWanderBehavior;" maxShips="4">
				<Escorts>
					<Ship				count="2d4+8"	class="&scDwargRaider;"		orders="escort"	/>
				</Escorts>
			</Ship>
		</Encounters>

	</StationType>
<!-- Elysium.xml -->
<!-- EnricoGaul.xml -->
<!-- Environments.xml -->
<!-- Eridani.xml -->
<StationType<?xml version="1.0" encoding="utf-8"?>

<TranscendenceModule>

<!-- ERIDANI SYSTEM -->

	<SystemType UNID="&ssStartonEridani;"
				name=			"Eridani"
				attributes=		"envWater, eridaniScript"
				noExtraEncounters=	"true"
				>
		<Properties>
			<!-- Set to TRUE when all enemy stations have been destroyed -->
			<Global id="allEnemiesDestroyed"></Global>
		</Properties>

		<EncounterOverrides>
			<Encounter UNID="&stMiningColony;"		unique="inSystem"/>
		</EncounterOverrides>

		<SystemGroup>

			<!-- Epsilon Eridani -->

			<Station type="&stStarClassK0;" name="Epsilon Eridani"/>

			<AddAttribute attributes="KTypeSystem"/>
			<AddTerritory minRadius="0"		maxRadius="350"		attributes="innerSystem, rockyComp, cinderZone"/>
			<AddTerritory minRadius="350"	maxRadius="590"		attributes="lifeZone, rockyComp, desertZone"/>
			<AddTerritory minRadius="590"	maxRadius="0"		attributes="outerSystem, rockyComp, frostZone"/>

			<Orbitals angle="incrementing:30-330">

				<!-- Dante II
					The inner world is a barren, rocky world -->

				<Group distance="80">
					<Station type="&stRockyPlanetoidSizeF;" 
							objName="OldStart"
							name="Dante II" 
							showOrbit="true"
							/>

					<Orbitals distance="24" angle="random">
						<Group>
							<Lookup table="StargateOutbound"/>

							<Orbitals distance="18" angle="0">
								<Station type="&stCommonwealthNavSign;">
									<InitialData>
										<Data id="languageTable">&ssStartonEridani;</Data>
										<Data id="signID">navSign.outbound.sign</Data>
										<Data id="infoID">navSign.outbound.info</Data>
									</InitialData>
								</Station>
							</Orbitals>
						</Group>
					</Orbitals>

					<!-- Trojans of Dante II are metal-rich asteroids -->

					<LocationAttributes attributes="danteTrojans">
						<Lookup table="AsteroidCompactTrojans25"/>
						<Lookup table="AsteroidCompactAntiTrojans25"/>
					</LocationAttributes>
				</Group>

				<!-- Hagaron
					Another inner world -->

				<Group distance="160">
					<Station type="&stDesertTerrestrialSizeH;" name="Hageron" showOrbit="true"/>

					<Orbitals distance="1d8+8" angle="random">
						<Location attributes="hagaronOrbit"/>
					</Orbitals>
				</Group>

				<!-- Raphael -->

				<Group distance="270">
					<Station type="&stRockyPlanetoidSizeG;" name="Raphael" showOrbit="true"/>

					<Orbitals distance="1d8+8" angle="random">
						<Location attributes="raphaelOrbit"/>
					</Orbitals>

					<!-- Trojans -->

					<LocationAttributes attributes="raphaelTrojans">
						<Lookup chance="90" table="AsteroidTrojans25"/>
						<Lookup chance="90" table="AsteroidAntiTrojans25"/>
					</LocationAttributes>
				</Group>

				<!-- St. John's World
					The worlds around this gas giant form the core of the
					Starton community. -->

				<Group distance="520">

					<!-- St. John's World -->

					<Station type="&stHydrogenGasGiantStJohns;" 
							showOrbit="true"
							/>

					<!-- Moons of St. John's WOrld -->

					<Orbitals angle="incrementing:45-315">

						<!-- Morgana -->

						<Group distance="22">
							<Station type="&stPrimordialPlanetoidSizeF;" name="Morgana"/>
						</Group>

						<!-- Mordred -->

						<Group distance="45">
							<Station type="&stRockyPlanetoidSizeG;" name="Mordred"/>
						</Group>

						<!-- Uther
							The main Commonwealth station is here. -->

						<Group distance="80">

							<!-- The planet Uther -->

							<Station type="&stIcePlanetoidSizeG;" name="Uther"/>

							<!-- The main stations are all in a group -->

							<Siblings angleInc="180">
								<Location attributes="startonMetropolis" required="true"/>
							</Siblings>

							<!-- The Sisters of Domina is opposite -->

							<Siblings radiusInc="12">
								<Location attributes="sistersOfDomina" required="true"/>
							</Siblings>
						</Group>

						<!-- Lancelot -->

						<Group distance="140">
							<Station type="&stMetallicPlanetoidSizeF;" name="Lancelot"/>

							<Orbitals distance="6" angle="random">
								<Location attributes="lancelotOrbit"/>
							</Orbitals>
						</Group>

					</Orbitals>

					<!-- Trojans -->

					<LocationAttributes attributes="stJohnTrojans">
						<Lookup table="AsteroidTrojans50"/>
						<Lookup table="AsteroidAntiTrojans50"/>

						<!-- Add a guaranteed location, just in case -->

						<Siblings count="1" angleInc="60">
							<Location/>
						</Siblings>
					</LocationAttributes>

					<!-- Antipode -->

					<LocationAttributes attributes="stJohnAntipode">
						<Lookup table="AsteroidAntipode50"/>
					</LocationAttributes>
				</Group>

				<!-- Voerms -->

				<Group distance="900">
					<Station type="&stMethaneGasGiantSizeK;" name="Voerms" showOrbit="true"/>

					<ZAdjust inclination="90" rotation="alignedRandom" excludeLocations="true">
						<Lookup table="AsteroidRing100"/>
					</ZAdjust>

					<Orbitals count="6" distance="32-36" angle="equidistant">
						<Location attributes="voermsOrbit"/>
					</Orbitals>

					<!-- Voerms is in a sparse asteroid belt -->

					<LocationAttributes attributes="voermsRegion">
						<Lookup table="AsteroidBelt100"/>
					</LocationAttributes>

					<!-- Arco Vaugh's base is somewhere around here -->

					<Siblings count="1" angleInc="20-340" radiusInc="-20-180">
						<Location attributes="arcoVaughnBase" required="true"/>
					</Siblings>

					<!-- There are a few other encounters here -->

					<Siblings count="6" angleInc="40-320" radiusInc="-90-90">
						<Location attributes="voermsRegion"/>
					</Siblings>
				</Group>

				<!-- Eldir -->

				<Group distance="1350">
					<Station type="&stAsteroidEldir;" showOrbit="true"/>

					<Orbitals distance="1d8+8" angle="random">
						<Location attributes="eldirOrbit"/>
					</Orbitals>
				</Group>
			</Orbitals>

			<!-- Create more stargates in case an extension added more links -->

			<Lookup table="HumanSpaceStargates"/>
			
			<!-- Create ore deposits -->
			
			<Code>
				(trnCreateOreDeposits (random 0 2))
			</Code>

			<!-- Create guaranteed friendly stations -->

			<RandomLocation locationCriteria="*startonMetropolis">
				<Lookup table="StartonMetropolis"/>
			</RandomLocation>

			<RandomLocation locationCriteria="*sistersOfDomina">
				<Group>
					<Station type="&stSistersOfDomina;"/>

					<Siblings radiusInc="8">
						<Marker objName="Start"/>
					</Siblings>
				</Group>
			</RandomLocation>

			<!-- Create guaranteed enemy stations -->

			<RandomLocation locationCriteria="*lancelotOrbit" exclusionRadius="0">
				<Station type="&stCentauriCamp;"/>
			</RandomLocation>

			<RandomLocation locationCriteria="*arcoVaughnBase" exclusionRadius="0">
				<Station type="&stArcoVaughnHabitat;"/>
			</RandomLocation>

			<RandomLocation locationCriteria="*voermsOrbit">
				<Station type="&stCentauriSettlement;"/>
			</RandomLocation>

			<RandomLocation count="2-3" locationCriteria="*voermsOrbit">
				<Station type="&stCentauriCamp;"/>
			</RandomLocation>

			<RandomLocation count="3" locationCriteria="*voermsRegion" exclusionRadius="100">
				<RandomStation stationCriteria="*enemy; *property:challengeRating[6-7];"	maxCount="1"/>
			</RandomLocation>

			<RandomLocation count="1" locationCriteria="*eldirOrbit" exclusionRadius="100">
				<RandomStation stationCriteria="*enemy; *property:challengeRating[7];"/>
			</RandomLocation>

			<!-- Populate Dante II Trojans -->

			<RandomLocation count="2" locationCriteria="*danteTrojans" exclusionRadius="50" noWarnings="true">
				<Lookup table="DanteStations"/>
			</RandomLocation>

			<!-- Populate Hagaron -->

			<RandomLocation locationCriteria="*hagaronOrbit">
				<Table>
					<Lookup			chance="80" table="Stations1" />
					<RandomStation  chance="20" stationCriteria="*enemy;"/>
				</Table>
			</RandomLocation>

			<!-- Populate Raphael -->

			<RandomLocation locationCriteria="*raphaelOrbit">
				<Table>
					<Lookup			chance="80" table="Stations1" />
					<RandomStation  chance="20" stationCriteria="*enemy;"/>
				</Table>
			</RandomLocation>

			<RandomLocation count="2" locationCriteria="*raphaelTrojans" exclusionRadius="50" noWarnings="true">
				<Lookup chance="75" table="Stations1"/>
			</RandomLocation>

			<!-- Populate St. John's World -->

			<RandomLocation locationCriteria="*stJohnTrojans" exclusionRadius="50">
				<Station type="&stRaisuStation;"/>
				<Station type="&stMiningColony;"	optional="true"/>
				<Lookup table="StJohnTrojanStations"/>
			</RandomLocation>

		</SystemGroup>

		<!-- Lookup Tables -->

		<Tables>
			<!-- Random Stations -->

			<Stations1>
				<RandomStationTable>
					<Station chance="8"  type="&stArmorDealer;"/>
					<Station chance="4"  type="&stArmsDealer;"/>
					<Station chance="12" type="&stCommonwealthSlums;"/>
					<Station chance="50" type="&stCentauriCamp;"/>
					<Station chance="25" type="&stCharonPirateOutpost;"/>
				</RandomStationTable>
			</Stations1>

			<DanteStations>
				<RandomStationTable>
					<Station chance="50"	type="&stMiningColony;"/>
					<Station chance="30"	type="&stCentauriCamp;"/>
					<Station chance="15"	type="&stCharonPirateOutpost;"/>
					<Station chance="5"		type="&stCommonwealthSlums;"/>
				</RandomStationTable>
			</DanteStations>

			<MetropolisStation>
				<Table>
					<Station chance="25"	type="&stCommonwealthResidentials;"	noMapLabel="true"/>
					<Station chance="20"	type="&stArmorDealer;"	noMapLabel="true"/>
					<Station chance="20"	type="&stFuelDepot;"	noMapLabel="true"/>
					<Station chance="15"	type="&stArmsDealer;"	noMapLabel="true"/>
					<Station chance="10"	type="&stAgriculturalStation;"	noMapLabel="true"/>
					<Station chance="10"	type="&stMedicalSuburb;"	noMapLabel="true"/>
				</Table>
			</MetropolisStation>

			<StJohnTrojanStations>
				<RandomStationTable chance="90">
					<Station chance="45"	type="&stCentauriCamp;"/>
					<Station chance="10"	type="&stCharonPirateOutpost;"/>
					<Station chance="5"		type="&stCommonwealthSlums;"/>
					<Station chance="5"		type="&stFuelDepot;"/>
				</RandomStationTable>
			</StJohnTrojanStations>

			<!-- Metropolis -->

			<StartonMetropolis>
				<Group>

					<!-- Commonwealth Station -->

					<Station type="&stStartonEridani;"/>

					<!-- Industrial Center -->

					<Siblings arcInc="+22">
						<Station type="&stCorporateEnclave;" name=": Greenwich Industries" noMapLabel="true"/>
					</Siblings>

					<!-- Dry Dock -->

					<Siblings arcInc="-22">
						<Station type="&stCommonwealthDryDock;" name=": Starton Dry Dock" noMapLabel="true">
							<Items>
								<!-- Make sure there is at least one missile launcher -->

								<RandomItem count="1" 
									criteria=		"l L:1-3; +commonwealth; -alien; -illegal; -military; -notForSale; -notStandard; -specialty;"
									levelFrequency=	"systemLevel:r|c|cur"
									/>
							</Items>
						</Station>
					</Siblings>

					<!-- Metropolis Station -->

					<Siblings radiusInc="+22">
						<Lookup table="MetropolisStation"/>
					</Siblings>

					<!-- Metropolis Station -->

					<Siblings radiusInc="-22">
						<Lookup table="MetropolisStation"/>
					</Siblings>

					<!-- Central Nav beacons -->

					<Siblings arcInc="+12" radiusInc="+12">
						<Station type="&stNavBeacon;" imageVariant="0"/>
					</Siblings>

					<Siblings arcInc="-12" radiusInc="-12">
						<Station type="&stNavBeacon;" imageVariant="1"/>
					</Siblings>

					<!-- Metropolis Stations -->

					<Table>
						<Group chance="50">
							<Siblings arcInc="+39">
								<Lookup table="BeringStation"/>
							</Siblings>

							<!-- Metropolis Station -->
							<Siblings arcInc="-39">
								<Lookup table="MetropolisStation"/>
							</Siblings>
						</Group>

						<Group chance="50">
							<Siblings arcInc="+39">
								<Lookup table="MetropolisStation"/>
							</Siblings>

							<!-- Metropolis Station -->
							<Siblings arcInc="-39">
								<Lookup table="BeringStation"/>
							</Siblings>
						</Group>
					</Table>

					<!-- Slums -->

					<Siblings arcInc="+55">
						<Station type="&stCommonwealthSlums;" noMapLabel="true"/>
					</Siblings>

					<!-- Slums -->

					<Siblings arcInc="-55">
						<Station type="&stCommonwealthSlums;" noMapLabel="true"/>
					</Siblings>

					<!-- Peripheral nav beacons -->

					<Siblings arcInc="+68">
						<Station type="&stNavBeacon;" imageVariant="0"/>
					</Siblings>

					<Siblings arcInc="-68">
						<Station type="&stNavBeacon;" imageVariant="0"/>
					</Siblings>

					<!-- Slums -->

					<Siblings arcInc="+82">
						<Station type="&stCommonwealthSlums;" noMapLabel="true"/>
					</Siblings>

					<!-- Slums -->

					<Siblings arcInc="-82">
						<Station type="&stCommonwealthSlums;" noMapLabel="true"/>
					</Siblings>

					<!-- Container Habitat -->

					<Siblings arcInc="110-121">
						<Station type="&stContainerHabitat;" name=": Starton Residentials|Starton Residentials" noMapLabel="true"/>
					</Siblings>

					<!-- Container Habitat -->

					<Siblings arcInc="-110--121">
						<Station type="&stContainerHabitat;" name=": Starton Residentials|Starton Residentials" noMapLabel="true"/>
					</Siblings>

					<!-- Container Habitat -->

					<Siblings radiusInc="-11--14" arcInc="11-14">
						<Station type="&stContainerHabitat;" name=": Starton Residentials|Starton Residentials" noMapLabel="true"/>
					</Siblings>

					<!-- Container Habitat -->

					<Siblings radiusInc="11-14" arcInc="-11--14">
						<Station type="&stContainerHabitat;" name=": Starton Residentials|Starton Residentials" noMapLabel="true"/>
					</Siblings>

				</Group>
			</StartonMetropolis>

			<!-- Special Stations -->

			<BeringStation>
				<Station type="&stCommonwealthResidentials;" noMapLabel="true">
					<InitialData>
						<PilgrimHome>True</PilgrimHome>
					</InitialData>
				</Station>
			</BeringStation>
		</Tables>

		<!-- Events and Data -->

		<Events>
			<OnCreate>
				(block (centauriStations)
					; Armor above level 4 and devices above level 3 are not for sale in Eridani
					(enum (sysFindObject Nil "TF +populated;") theObj
						(enum (objGetItems theObj "dU L:4-; | aU L:5-;") theItem
							(if (objGetSellPrice theObj theItem)
								(objRemoveItem theObj theItem)
								)
							)
						)

					; Count the number of centauri camps in the inner system (inside 800 light-seconds)
					(setq centauriStations (sysFindObject Nil "T +centauriWarlords; +populated; -occupation; -uncharted;"))
					(setq centauriStations (filter centauriStations theObj
						(ls (sysVectorDistance (objGetPos theObj)) 800)
						))

					; If we don't have at least 3, then create some near Voerms
					(if (ls (count centauriStations) 3)
						(block (voerms)
							(setq voerms (item (filter (sysFindObject Nil "t +isPlanet:true;") theObj (eq (objGetName theObj) "Voerms")) 0))
							(if voerms
								(for i 1 (random 2 3)
									(block Nil
										(sysCreateStation &stCentauriCamp;
											(sysVectorRandom voerms (random 30 50) 10 "t +populated;")
											)
										)
									)
								(dbgLog "ERROR: Unable to find planet Voerms in Eridani system.")
								)
							)
						)
					)
			</OnCreate>

			<OnSystemObjDestroyed>
				(switch
					;	If all enemy stations are already dead, then nothing to do.

					(typ@ gType 'allEnemiesDestroyed)
						Nil

					;	If this is not an enemy station, then skip

					(not (objMatches aObjDestroyed gPlayerShip "TE +populated;"))
						Nil

					;	Count remaining enemy stations. If some are still left, then 
					;	we're done (we exclude objects that cannot attack, like Arco
					;	Vaughn's habitat).

					(sysFindObject gPlayerShip "TAE +populated; +property:canAttack;")
						Nil

					;	If we get this far, then all enemy stations have been destroyed.

					(block ()
						(typSet@ gType 'allEnemiesDestroyed True)
						(unvSetAchievement 'humanSpace.vigilanteOfEridani)
						)
					)
			</OnSystemObjDestroyed>
		</Events>

		<Language>
			<Text id="navSign.outbound.sign">Travel\nAdvisory</Text>
			<Text id="navSign.outbound.info">
			
				Pirate activity reported in systems between Eridani and St. Katharine's Star. 
				Please use caution. Make sure you have current star maps and avoid travel 
				to non-Commonwealth stations.

			</Text>
		</Language>
	</SystemType>

<!-- WORLDS -->

	<!-- Eldir -->
	
	<StationType </StationType>
<StationType UNID="&stAsteroidEldir;"
		name=				"Eldir"
		scale=				"world"
		size=				"2"
		sovereign=			"&svIndependent;"

		attributes=			"asteroid, generic, ice"
		showMapLabel=		"true"
		>
		<ImageVariants>
			<Image			imageID="&rsEridaniWorlds;" imageX="0" imageY="0" imageWidth="220" imageHeight="220"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stHydrogenGasGiantStJohns;"
		name=				"St. Johns Worlds"
		scale=				"world"
		size=				"146500"

		attributes=			"gasGiant, generic"
		>
		<ImageVariants>
			<Image	imageID="&rsHydrogenGasGiantStJohns;" imageX="0"   imageY="0"   imageWidth="450" imageHeight="450"/>
		</ImageVariants>
	</StationType>
<!-- EridaniStations.xml -->
<StationType UNID="&stStartonEridani;"
			name=				"Starton Eridani"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			level=				"4"
			attributes=			"commonwealth, commonwealthCustoms, eridaniScript, friendly, human, majorStation, populated, startonEridani"
				 
			dockScreen=			"&dsCommonwealthStation;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"670"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"800"
			multiHull=			"true"
			regen=				"8"
			shipRegen=			"4"
				 
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Names noArticle="true">
			Starton Eridani
		</Names>
		
		<Properties>
			<Constant id="maxMilitiaMissions">(random 3 4)</Constant>
		</Properties>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; -defective; -illegal; -military; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"		priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-6;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-7;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-7;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-6;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-6;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<BalanceTrade	criteria="{core.fusionFuel}"		impact="20"/>
			<BalanceTrade	criteria="{human.basicFood}"	impact="20"/>
			<BalanceTrade	criteria="{human.lux}"		impact="20"/>
			<BalanceTrade	criteria="{human.meds}"		impact="20"/>
			<BalanceTrade	criteria="{human.res}"		impact="20"/>
		</Trade>

		<Items>
			<RandomItem count="2d10" 
					criteria=		"a L:1-7; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard; -specialty;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="1d4" 
					criteria=		"r L:1-6; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard;"	
					levelFrequency="systemLevel:ru|c|curv"
					/>
			<RandomItem count="2d10" 
					criteria=		"d~r L:1-6; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard; -specialty;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			
			<RandomItem count="20" 
					criteria=		"*~adm -alien; -defective; -illegal; -military; -notForSale; -notStandard; -specialty;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>

			<Item count="2d8" item="&itEridaniWater;"/>
		</Items>

		<!-- Ships and Defenses -->

		<Squadrons>
			<Squadron table="&tbCommEliteDefenders;"	count="2-4"/>
			<Squadron table="&tbCommPrivateCrafts;"		count="1-4"/>
		</Squadrons>
		
		<!-- Image and Effects -->

		<Image			imageID="&rsCommonwealthMetropolis;" imageWidth="480" imageHeight="480"/>

		<DockingPorts
				portCount=		"14"
				portRadius=		"245"
				>
		</DockingPorts>
		
		<!-- Events and Behavior -->
		
		<Events>
			<OnCreate>
				(sysAddObjRecurringTimerEvent 150 gSource "OnTrafficControl")
			</OnCreate>

			<OnTrafficControl>
				(comTrafficControl gSource 20)
			</OnTrafficControl>
		</Events>

		<Language>
			<Text id="starton.info">
				(list
					{	id: 'welcome
						descID: 'textInfo1
						actions: (list
							{	labelID: 'actionTouristInfo			nextPage:'touristInfo	}
							{	labelID: 'actionCorporateInfo		nextPage:'corporateInfo	}
							{	labelID: 'actionTravelInfo			nextPage:'travelInfo	}
							{	labelID: 'actionSafetyInfo			nextPage:'safetyInfo	}
							{	labelID: 'actionFunInfo				nextPage:'funInfo	}
							{	labelID: 'actionDone				nextPage:'exitScreen	}
							)
						}
					{	id: 'touristInfo
						descID: 'textTouristInfo1		labelID: 'actionDone	nextPage: 'welcome 
						}
					{	id: 'corporateInfo
						descID: 'textCorporateInfo1		labelID: 'actionDone	nextPage: 'welcome 
						}
					{	id: 'travelInfo
						descID: 'textTravelInfo1		labelID: 'actionDone	nextPage: 'welcome 
						}
					{	id: 'safetyInfo
						descID: 'textSafetyInfo1		labelID: 'actionDone	nextPage: 'welcome 
						}
					{	id: 'funInfo
						descID: 'textRandomFunFact
						actions: (list
							{	labelID: 'actionMoreFun				nextPage: 'funInfo	}
							{	labelID: 'actionDone				nextPage: 'welcome }
							)
						}
					)
			</Text>
			
			<Text id="textInfo1">
				
				Welcome to the Eridani system and to Starton Eridani! Settled 
				more than two-hundred years ago, our small star system blends
				the relaxed pace of the New Beyond with the amenities of a major
				metropolis.

				Whether seeking business or	pleasure, we're sure you'll enjoy 
				your stay!
				
				Please select a topic of interest:
				
			</Text>
			<Text id="textTouristInfo1">
				
				Though far from St. Katharine's Star, the Eridani system is not 
				the backwater station shown on the 3DVs. The bars and nightclubs 
				of Central Plaza are always ready for visitors. 
				
				But if you prefer a quieter time, you can travel out to St. 
				John's ice moon and visit the monastery of the Sisters of Domina.
				
			</Text>
			<Text id="textCorporateInfo1">
				
				If you are here on corporate business you will find the 
				Commodities Exchange to have many popular items, including 
				starship equipment. The corporate enclave near Starton Eridani 
				also trades in supplies.
				
				Note: In accordance with Commonwealth laws, all customs officers 
				are required to search for contraband&mdash;buy and sell legal 
				goods only.
				
			</Text>
			<Text id="textTravelInfo1">
				
				Starships are very common here, so you will have no problem 
				obtaining fuel or making repairs to your ship. Starton Eridani's 
				shipyard can install new devices on your ship.
				
				And when you've enjoyed everything that the Eridani system has 
				to offer, you can find an outbound stargate around the innermost
				planet.
				
			</Text>
			<Text id="textSafetyInfo1">
				
				Like any populated star system, Eridani has its share of 
				dangers. Charon pirates and Centauri warlords control some parts
				of the system&mdash;avoid all non-Commonwealth stations unless 
				escorted or armed.
				
				Note: In accordance with Commonwealth laws, legally armed ships 
				may attack and loot designated enemy targets only. Ships 
				attacking Commonwealth stations or ships will be prosecuted 
				and/or fired upon.
				
			</Text>
			
			<Text id="textRandomFunFact">
				(typTranslate gType (cat "funFact." (random 1 7)))
			</Text>
			<Text id="funFact.1">
				
				Starton is more than seven stargates away from St. Katharine's
				Star.
				
			</Text>
			<Text id="funFact.2">
				
				Starton Eridani was founded by the Commonwealth in 2176.
				
			</Text>
			<Text id="funFact.3">
				
				According to the 2410 census, 29 million people live in this 
				star system; half of them live on Starton Eridani itself.
				
			</Text>
			<Text id="funFact.4">
				
				For some reason, more pilgrims have started their journey to the 
				Galactic Core from Eridani than from any other system of the 
				Commonwealth.
				
			</Text>
			<Text id="funFact.5">
				
				Conrad Decker, admiral of the Commonwealth Fleet, spent his 
				summers in Starton Eridani as a young boy.
				
			</Text>
			<Text id="funFact.6">
				
				In 2240, Starton Eridani was almost evacuated because of rumors 
				that a large Ares fleet was approaching. It later turned out to
				be a group of Salvagers traveling together.
				
			</Text>
			<Text id="funFact.7">
				
				During the Eridani Bicentennial in 2376, then governor Jerad 
				Norton convinced the Charon pirates to join in the celebrations 
				in exchange for an unspecified sum.
				
			</Text>
		
			<Text id="actionTouristInfo">[T]ourist Information</Text>
			<Text id="actionCorporateInfo">[C]orporate Information</Text>
			<Text id="actionTravelInfo">Tra[v]el Information</Text>
			<Text id="actionSafetyInfo">[S]afety Information</Text>
			<Text id="actionFunInfo">[F]un Facts</Text>
			<Text id="actionMoreFun">More [F]un Facts</Text>
		</Language>
	</StationType>
<!-- EtaCeti.xml -->
<!-- FerianMission01.xml -->
<!-- Ferians.xml -->
<StationType UNID="&stFerianColony;"
			name=				"Ferian colony|Ferian colonies"
			sovereign=			"&svFerianMiners;"
			inherit=			"&baFerianStation;"
				 
			attributes=			"asteroidBase, enemy, envEarth, envAvoidsAir, ferian, generic, neoHuman, miners, populated, zoanthrope"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			ignoreFriendlyFire=	"true"
			explosionType=		"&vtThermoExplosion1;"
			ejectaType=			"&vtStoneAsteroidEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+ferianSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"---ru ccr-- ----- ----- -----"

				locationCriteria=		"++asteroids"
				/>

		<Properties>
			<Constant		id="maxFerianMissions">(random 1 3)</Constant>
		</Properties>

		<!-- Trade and Items -->

		<Trade currency="rin">
			<BalanceTrade	criteria="{core.ore}"			impact="10"/>
		</Trade>

		<Items>
			<Lookup count="4d8"	table="&tbAsteroidOre;"/>
			<Item count="4d12"	item="&itChronimiumGas;" />
		</Items>

		<!-- Configuration -->
		
		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itAdvancedPlasteelPlate;"
				hitPoints=		"500"
			    regen=			"10"
				/>
		
		<!-- Ships and Defenses -->
		
		<Ships>
			<Ship count="3d6" class="&scFerianMiner;" orders="mine" controller="ferian"/>
		</Ships>

		<!-- Image and Effects -->
		
		<ImageVariants>
			<LocationCriteriaTable>
				<Image criteria="*ice"			imageID="&rsFerianColonyIce;"			imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				<Image criteria="*metallic"		imageID="&rsFerianColonyMetallic;"		imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				<Image criteria="*primordial"	imageID="&rsFerianColonyPrimordial;"	imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				<Image criteria="*volcanic"		imageID="&rsFerianColonyVolcanic;"		imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				
				<Image criteria="*~"			imageID="&rsFerianColonyRocky;"			imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"120"
				>
		</DockingPorts>

		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionMainHall">
								(block (storageObj)
									(switch
										;	If we've never met the Ferians

										(not (typGetData &svFerianMiners; 'status))
											(scrShowPane gScreen 'FerianIntro)

										;	If the player left some ore here from a 
										;	previous mission, then allow them to get
										;	it.

										(and (setq storageObj (objGetObjByID (objGetData gSource 'storageID)))
												(objGetItems storageObj "*")
												)
											(scrShowScreen gScreen &dsRPGLoot; {
												sourceObj: storageObj
												})

										;	Otherwise, see if there are any missions.

										(rpgMissionAssignment {
											missionCriteria: "n +ferianColony;"
											noMissionTextID: 'descNoMissions
											maxPerStation: (or (obj@ gSource 'maxFerianMissions) 1)
											})
										)
									)
							</Action>

							<Action id="actionUndock" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<FerianIntro descID="descFerianIntro">
						<Actions>
							<Action id="actionContinue">
								(block ()
									(scrShowPane gScreen 'Default)
									(typSetData &svFerianMiners; 'status 'known)

									(rpgMissionAssignment {
										missionCriteria: "n +ferianColony;"
										noMissionTextID: 'descNoMissions
										maxPerStation: (or (obj@ gSource 'maxFerianMissions) 1)
										})
									)
							</Action>
						</Actions>
					</FerianIntro>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Behavior -->

		<Events>
			<OnAttacked>
				(if (and aOrderGiver
						(objCanAttack aOrderGiver)
						(not (eq (objGetDisposition gSource aOrderGiver) 'friend))
						)
					(block Nil
						(objIncData gSource "attackLevel" 1)
						(objSetObjRefData gSource "lastAttacker" aOrderGiver)
						)
					)
			</OnAttacked>
			
			<OnCreate>
				(block (asteroidCount maxMiners)
				
					;	Count the number of asteroids in the area (within 60 light-seconds)
					
					(setq asteroidCount (count (sysFindObject gSource "t:asteroid; N:60;")))
					
					;	If there we have less than four asteroids, create more.
					
					(if (ls asteroidCount 4)
						(block (
							(newAsteroids (random 2 5))
							)
							
							(for i 1 newAsteroids
								(sysCreateLookup "AsteroidSingleton" 
									(sysOrbit aOrbit (random 8 22) (random 0 359))
									)
								)
								
							(setq asteroidCount (add asteroidCount newAsteroids))
							)
						)

					;	Compute the number of miners
					
					(setq maxMiners (multiply asteroidCount 2))
					(if (gr asteroidCount 0)
						(setq maxMiners (add maxMiners (random 1 asteroidCount)))
						)

					;	Sometimes we get more miners
					
					(if (leq (random 1 100) 5)
						(setq maxMiners (multiply maxMiners 2))
						)

					(objSetData gSource "maxMiners" maxMiners)
					(objSetData gSource "attackLevel" 0)
					(objSetData gSource "minersKilled" 0)

					;	Register timer event for construction
					
					(sysAddObjRecurringTimerEvent (random 400 800) gSource "OnConstruction")
					)
			</OnCreate>

			<OnConstruction>
				(if (not (objIsAbandoned gSource))
					(block (minerCount theTarget)
						; Count the number of ferian miners for this base
						(setq minerCount (count (sysFindObject gSource "sH")))
						
						(switch
							; If we've already got our maximum, then nothing to do
							(geq minerCount (objGetData gSource "maxMiners"))
								Nil
								
							; If our attack level is high, send out a warrior
							(and (leq (random 6 40) (objGetData gSource "attackLevel"))
									(setq theTarget (objGetObjRefData gSource "lastAttacker"))
									(objMatches theTarget gSource "sTA")
									(ls (objGetData gSource "totalWarriors") (divide (objGetData gSource "maxMiners") 3))
									(ls (count (sysFindObject gSource "sH +ferianWarrior")) 3)
									(leq (objGetDistance gSource theTarget) 150)
									)
								(block (newWarrior)
									(setq newWarrior
										(sysCreateShip &scFerianWarrior; gSource 
											(if (eq theTarget gPlayerShip) &svFerianMinersAngry; &svFerianMiners;)
											)
										)
									(objAddSubordinate gSource newWarrior)
									(objRegisterForEvents gSource newWarrior)
									
									(shpOrder newWarrior 'attack theTarget)
									(shpOrder newWarrior 'gate gSource)

									(objIncData gSource "totalWarriors")
									)
									
							; If a lot of miners have been killed, then don't create more
							(gr (objGetData gSource "minersKilled") (objGetData gSource "maxMiners"))
								Nil
									
							; Otherwise, create a miner
							(block (newMiner)
								(setq newMiner
									(sysCreateShip &scFerianMiner; gSource &svFerianMiners; "ferian")
									)
								(objAddSubordinate gSource newMiner)
								(shpOrderMine newMiner gSource)
								)
							)
							
						; Decrement attack level
						(if (gr (objGetData gSource "attackLevel") 0)
							(objIncData gSource "attackLevel" -1)
							)
						)
					)
			</OnConstruction>
			
			<OnDestroy>
				(block (warriorsLeft)
					(setq warriorsLeft (subtract (divide (objGetData gSource "maxMiners") 3) (objGetData gSource "totalWarriors")))
					(for i 1 (min warriorsLeft 3)
						(block (newWarrior)
							(setq newWarrior
								(sysCreateShip &scFerianWarrior; gSource &svFerianMinersAngry;))

							(if (and aOrderGiver 
									(objCanAttack aOrderGiver)
									)
								(shpOrder newWarrior 'attack aOrderGiver)
								(shpOrder newWarrior 'attackNearestEnemy)
								)

							(shpOrder newWarrior 'gate gSource)
							)
						)
						
					; All miners become angry
					(enum (sysFindObject gSource "sH +ferianMiner") theMiner
						(objSetSovereign theMiner &svFerianMinersAngry;)
						)
					)
			</OnDestroy>
			
			<OnObjEnteredGate>
				(if (and (eq aGateObj gSource)
						(objMatches aObj Nil "s +ferianWarrior;")
						)
					(objIncData gSource "totalWarriors" -1)
					)
			</OnObjEnteredGate>
			
			<OnOreDepositFound>
				(switch
					;	If we're dead, then nothing
					
					(objGetProperty gSource 'abandoned)
						Nil
							
					;	Otherwise, we send a random number of miners to the new deposit
					
					(block (
						(maxMiners (objGetData gSource "maxMiners"))
						(minersToSend 
							(random 1 (max 1 (divide maxMiners 8)))
							)
						(minersAvail (filter (sysFindObject gSource "sH") minerObj
							(not (objGetData minerObj 'depositID))
							))
						)
						
						(for i 1 (min minersToSend (count minersAvail))
							(block (
								(minerObj (@ minersAvail (subtract i 1)))
								)
								
								(shpCancelOrders minerObj)
								(shpOrder minerObj 'approach (@ gData 'depositObj) 20)
								(shpOrder minerObj 'mine gSource)
								(objSetData minerObj 'depositID (objGetID (@ gData 'depositObj)))
								;(dbgOutput "Sent miner " (objGetID minerObj) " to " (objGetID (@ gData 'depositObj)))
								)
							)
							
						;	Increment the max number of ferians
						
						(objIncData gSource 'maxMiners minersToSend)
						)
					)
			</OnOreDepositFound>
			
			<OnMinerDestroyed>
				(block Nil
					(objIncData gSource "minersKilled")

					(if (and aOrderGiver 
							(objCanAttack aOrderGiver)
							(not (eq (sovGetDisposition &svFerianMiners; (objGetSovereign aOrderGiver)) 'friend))
							)
						(block Nil
							(objIncData gSource "attackLevel" 2)
							(if (or (not (objGetObjRefData gSource "lastAttacker"))
									(leq (random 1 100) 50)
									)
								(objSetObjRefData gSource "lastAttacker" aOrderGiver)
								)
							)
						)
					)
			</OnMinerDestroyed>
		</Events>

		<Language>
			<Text id="actionMainHall">[M]ain Hall</Text>

			<Text id="descWelcome">
			
				You enter into a vast chamber, only partially pressurized. Large
				metal maws consume a small fortune in rocks and ores delivered 
				by Ferian miners.

				Beneath them you see various vessels shrouded by the cranes and 
				girders of a shipyard. Most of the vessels are new Ferian miners
				being created out of raw materials.
				
				A few are much larger and have a more sinister shape.

			</Text>
			<Text id="descFerianIntro">

				You enter a room carved out of rock filled with holopanes.
				Monkey-like creatures in dark spacesuits bounce around in the
				low gravity on various errands.

				Tall figures in jeweled armor stand silently around the 
				displays.

			</Text>
			<Text id="descNoMissions">

				A tall figure in jeweled armor walks towards you; their face is
				covered by an opaque helmet inlaid with silver and gold. You 
				hear their voice through a raspy speaker:

				"There's nothing here for you, Earthican."

			</Text>
		</Language>
	</StationType>
<!-- Fiona.xml -->
<!-- FirstContactMonument.xml -->
<StationType UNID="&stIocrymMonument;"
			name=				"First Contact Monument"
			definiteArticle=	"true"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"223"
			multiHull=			"true"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"160"
            regen=              "2"
			explosionType=		"&vtBlastExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"commonwealth, commonwealthCustoms, friendly, generic, human, majorStation, monument, populated"
			>

		<Image imageID="&rsIocrymMonument;" imageWidth="208" imageHeight="260"/>
		<HeroImage imageID="&rsIocrymMonumentScreen;" imageWidth="950" imageHeight="650"/>
		
		<Trade currency="credit">
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>
		
		<Ships>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
		</Ships>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionInformation" default="1">
								<ShowPane pane="Information"/>
							</Action>
							
							<Action id="actionPub">
								<ShowPane pane="Pub"/>
							</Action>
							
							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
					
					<Information descID="descInformation">
						<Actions>
							<Action id="actionInfoLike">
								<ShowPane pane="Info1"/>
							</Action>
							
							<Action id="actionInfoLearn">
								<ShowPane pane="Info2"/>
							</Action>
							
							<Action id="actionInfoWhere">
								<ShowPane pane="Info3"/>
							</Action>
							
							<Action id="actionLeave" cancel="1" key="v">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</Information>
					
					<Info1 descID="descInfo1">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								<ShowPane pane="Info1B"/>
							</Action>
						</Actions>
					</Info1>
					
					<Info1B descID="descInfo1b">
						<Actions>
							<Action id="actionDone" default="1" cancel="1">
								<ShowPane pane="Information"/>
							</Action>
						</Actions>
					</Info1B>
					
					<Info2 descID="descInfo2">
						<Actions>
							<Action id="actionDone" default="1" cancel="1">
								<ShowPane pane="Information"/>
							</Action>
						</Actions>
					</Info2>
					
					<Info3 descID="descInfo3">
						<Actions>
							<Action id="actionDone" default="1" cancel="1">
								<ShowPane pane="Information"/>
							</Action>
						</Actions>
					</Info3>
					
					<Pub descID="descPub">
						<Actions>
							<Action id="actionBar" default="1">
								(if (geq (plyGetCredits gPlayer) 10)
									(block Nil
										(plyCharge gPlayer 10)
										(rpgMissionAssignment {
											missionCriteria: "n +iocrymMonumentPub; =4;"
											actionDoneID: 'actionLeave
											maxPerStation: 1

											rumorInterval: 0
											noMissionTextID: 'descNoRumors
											})
										)
									(scrShowPane gScreen "NoMoney")
									)
							</Action>

							<Action id="actionLeave" cancel="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</Pub>

					<NoMoney descID="descNoMoney">
						<Actions>
							<Action id="actionLeave" default="1" cancel="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</NoMoney>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts
				portCount=		"8"
				portRadius=		"130"
				/>

		<Events>
			<GetRumors>
				(append
					(rpgRumorAdd 'iocrymMonumentPub (make 'sequence 1 6) 20)
					(if (eq (objGetProperty gPlayerShip 'characterClass) &unidPilgrimClass;)
						(rpgRumorAdd 'iocrymMonumentPub 'pilgrim.1 20)
						(rpgRumorAdd 'iocrymMonumentPub 'quarantine.1 20)
						)
					)
			</GetRumors>
		</Events>
        
        <Language>
			<Text id="actionInformation">[I]nformation</Text>
			<Text id="actionPub">First Contact [P]ub</Text>
			<Text id="actionUndock">[U]ndock</Text>
			<Text id="actionInfoLike">[W]hat was it like?</Text>
			<Text id="actionInfoLearn">What [d]id we learn?</Text>
			<Text id="actionInfoWhere">Where are they [n]ow?</Text>
			<Text id="actionLeave">[L]eave</Text>
			<Text id="actionContinue">[C]ontinue</Text>
			<Text id="actionDone">[Esc] Done</Text>
			<Text id="actionBar">[S]it at the Bar</Text>

            <Text id="descWelcome">

				You are docked with a massive crystalline monument commemorating the point of
				first contact between humans and alien intelligent life in the universe.

				Scores of tourists wander around the vast hall, chatting softly and pausing
				randomly at various points of interest.

			</Text>
			<Text id="descInformation">

				A holopane flickers to life as you approach:

				"Here at this point, in the year 2363, members of the Human Race
				first met with representatives of the Ancient Races of the Galaxy."

				Do you want to know more?

			</Text>
			<Text id="descInfo1">

				With almost no warning six alien ships, blue and translucent like
				flying glaciers, appeared out of the inner gate. Fear gripped the Commonwealth
				at first, but as the attitude of the alien fleet remained peaceful, wonderment
				took over.

				Scientists from New Victoria immediately attempted to communicate, but it
				took two frustrating weeks before the Iocrym (as they called themselves) were able
				to learn our language.

			</Text>
			<Text id="descInfo1b">

				Communication proceeded via computer processed code. The Iocrym told us that they
				were one of the many Ancient Races in the Galaxy and that they were curious about
				us and our development. They shared much scientific knowledge with us and then they
				continued on their journey to Sol.

			</Text>
			<Text id="descInfo2">

				The Iocrym gave us several hyperglyph rods encoded with scientific information.
				While most of the knowledge has been classified by the Council of Lords because of
				its military potential, much remains public.

				Scientists are overjoyed at the insights
				gained from this treasure trove. In particular, our knowledge of antimatter, zero-point
				energy, and transpace have been revolutionized by the Iocrym's gift.

			</Text>
			<Text id="descInfo3">

				The Iocrym promised to return, and why they have not remains a mystery.
				Some scientists believe that the Ancient Races deal in
				centuries and millennia, and thus will not return for many more years. Others believe
				that their own alien morality prevents interference in the affairs of lesser species.

				But regardless, the most important gift that the Iocrym left behind is
				the knowledge that we are not alone in the Galaxy and that someday we will
				join our alien brethren as equals.

			</Text>
			<Text id="rumor.iocrymMonumentPub.1">

				You talk to a pilgrim from Eridani:

				"Other pilgrims say that the way to the Core is blocked! The 
				Iocrym have trapped us in Human Space! Why does Domina call us? 
				Why? Is it all some sick joke?"

				You spend 10 credits on drinks.

			</Text>
			<Text id="rumor.iocrymMonumentPub.2">

				You sit next to a couple of tourists:

				"We don't need aliens interfering in our affairs, you know? How
				would they feel if we started flying around their worlds? I'm 
				glad they're gone!"

				You spend 10 credits on drinks.

			</Text>
			<Text id="rumor.iocrymMonumentPub.3">

				At the bar you talk with a young researcher who studies the 
				Iocrym:

				"You wanna hear something that's not on the guided tour? We 
				never actually saw the Iocrym. I mean, we never saw the aliens 
				themselves&mdash;we communicated with their ships. But were we 
				talking to them? Or were we talking to an AI?

				"We still don't know."

				You spend 10 credits on drinks.

			</Text>
			<Text id="rumor.iocrymMonumentPub.4">

				You talk to a pilgrim from Cairn:
				
				"Domina has a plan and I'm sure that the Iocrym are a part of 
				it."

				You spend 10 credits on drinks.

			</Text>
			<Text id="rumor.iocrymMonumentPub.5">

				You sit next to two young men from New Victoria:

				"We're idiots if we trust the Iocrym. I bet they're preparing 
				for an invasion right now! Why else would they be gone so long? 
				We have to be ready!"

				You spend 10 credits on drinks.

			</Text>
			<Text id="rumor.iocrymMonumentPub.6">

				You sit next to a young man in a fancy corporate suit:

				"When the Iocrym return they will teach us how to live in peace.
				Why are humans always trying to kill each other? The Ancient 
				Races of the Galaxy have lived in peace for millions of years!
				We should listen to them."

				You spend 10 credits on drinks.

			</Text>
			<Text id="rumor.iocrymMonumentPub.pilgrim.1">

				You talk to a scientist from New Victoria:

				"So you're a pilgrim, huh? Well don't get too excited about 
				getting to the Core. I have a couple of friends in the Heretic 
				system who say that the way is blocked.

				"Nobody knows why, but the Iocrym don't want us to leave."

				You spend 10 credits on drinks.

			</Text>
			<Text id="rumor.iocrymMonumentPub.quarantine.1">

				You talk to a scientist from New Victoria:

				"I have a couple of friends in the Heretic system who say Human 
				Space has been quarantined. Nobody knows why, but the Iocrym 
				don't want us to leave."

				You spend 10 credits on drinks.

			</Text>

			<Text id="descPub">

				You are in a large restaurant and bar filled with monument visitors.

			</Text>
			<Text id="descNoMoney">

				You hang around for a while, but you have no money to buy drinks.

			</Text>
			<Text id="descNoRumors">

				You spend 10 credits on food and drinks.
			
			</Text>

			<Text id="core.mapDesc">

                "Museum &mdash; Restaurant and bar"

            </Text>
        </Language>
	</StationType>
<!-- Gaians.xml -->
<StationType UNID="&stGaianProcessorEncounter;"
			name=				"(Gaian processor)"
			sovereign=			"&svUnknownEnemy;"
			controllingSovereign="&svGaianTerraformers;"
			dockScreen=			"&dsAbandonedShip;"

			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"

			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, envEarth, envAvoidsAir, shipwreck"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+gaianSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"----- --vuu r----- ----- -----"

				locationCriteria=		"+asteroids"
				/>

		<ImageVariants>
			<Shipwreck class="&scTundra;"/>
			<Shipwreck class="&scCenturionM;"/>
			<Shipwreck class="&scSandstorm;"/>
		</ImageVariants>

		<Ships>
			<Ship	count="1"	class="&scGaianProcessor;" controller="gaianprocessor" sovereign="&svGaianTerraformers;" />
		</Ships>

		<Items>
			<Table>
				<Null	chance="20"/>
				<Lookup chance="30" count="1d3" table="&trConsumables6;"/>
				<Lookup chance="15" count="1"	table="&trConsumables7;"/>
				<Lookup chance="25" count="1"	table="&trMinorItem6;"/>
				<Lookup chance="10" count="1"	table="&trMajorItem6;"/>
			</Table>
		</Items>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<!-- GalaxyCompatibility.xml -->
<StationType UNID="&stSmallAsteroid;"
			obsoleteVersion=			"37"
		name=				"(rocky asteroid)"
		scale=				"world"
		size=				"4"

		attributes=			"asteroid, rocky"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="768" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="800" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="832" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="864" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="896" imageWidth="32" imageHeight="32"/>

			<Image			imageID="&rsWorlds1;" imageX="192" imageY="928" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="960" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="992" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Events>
			; Note: We add this even to asteroids without ore because some scenarios
			; call for adding ore to existing asteroids
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stMediumAsteroid;"
			obsoleteVersion=			"37"
		name=				"(rocky asteroid)"
		scale=				"world"
		size=				"65"

		attributes=			"asteroid, rocky"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<Names noArticle="true">Asteroid %1%0%0%0%0%0</Names>

		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="0"   imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="64"  imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="192" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="256" imageWidth="64" imageHeight="64"/>

			<Image			imageID="&rsWorlds1;" imageX="128" imageY="320" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="384" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="448" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stLargeAsteroid;"
			obsoleteVersion=			"37"
		name=				"(rocky asteroid)"
		scale=				"world"
		size=				"250"

		attributes=			"asteroid, rocky"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="0" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="128" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="256" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="384" imageWidth="128" imageHeight="128"/>
		</ImageVariants>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stPlanetoid;"
			obsoleteVersion=			"37"
		name=				"(rocky planetoid)"
		scale=				"world"
		size=				"1150"

		attributes=			"planetoid, rocky"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="0"   imageWidth="128" imageHeight="128" />
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="128" imageWidth="128" imageHeight="128" />
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="256" imageWidth="128" imageHeight="128" />
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="384" imageWidth="128" imageHeight="128" />
		</ImageVariants>
	</StationType>
<StationType UNID="&stCrateredPlanet;"
			obsoleteVersion=			"37"
		name=				"(rocky terrestrial)"
		scale=				"world"
		size=				"1150"

		attributes=			"rocky, terrestrial"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="0"   imageWidth="128" imageHeight="128" />
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="128" imageWidth="128" imageHeight="128" />
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="256" imageWidth="128" imageHeight="128" />
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="384" imageWidth="128" imageHeight="128" />
		</ImageVariants>
	</StationType>
<StationType UNID="&stSmallFrostAsteroid;"
			obsoleteVersion=			"37"
		name=				"(frost asteroid)"
		scale=				"world"
		size=				"4"

		attributes=			"asteroid, frost"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>

		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="768" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="800" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="832" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="864" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="896" imageWidth="32" imageHeight="32"/>

			<Image			imageID="&rsWorlds1;" imageX="224" imageY="928" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="960" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="992" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>
	</StationType>
<StationType UNID="&stMediumFrostAsteroid;"
			obsoleteVersion=			"37"
		name=				"(frost asteroid)"
		scale=				"world"
		size=				"65"

		attributes=			"asteroid, frost"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="0"   imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="64"  imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="192" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="256" imageWidth="64" imageHeight="64"/>

			<Image			imageID="&rsWorlds1;" imageX="192" imageY="320" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="384" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="448" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>
	</StationType>
<StationType UNID="&stSmallIceAsteroid;"
			obsoleteVersion=			"37"
		name=				"(ice asteroid)"
		scale=				"world"
		size=				"4"

		attributes=			"asteroid, ice"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="768" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="800" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="832" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="864" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="896" imageWidth="32" imageHeight="32"/>

			<Image			imageID="&rsWorlds1;" imageX="224" imageY="928" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="960" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="992" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stLargeIceAsteroid;"
			obsoleteVersion=			"37"
		name=				"(ice planetoid)"
		scale=				"world"
		size=				"1150"

		attributes=			"ice, planetoid"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="0"   imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="128" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="256" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="384" imageWidth="128" imageHeight="128"/>
		</ImageVariants>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stIcePlanet;"
			obsoleteVersion=			"37"
		name=				"(ice terrestrial)"
		scale=				"world"
		size=				"4700"

		attributes=			"ice, terrestrial"
		>
		<ImageVariants>
			<Image			imageID="&rsWorldsIcePlanet1;" imageX="0" imageY="0"   imageWidth="182" imageHeight="182" />
			<Image			imageID="&rsWorldsIcePlanet2;" imageX="0" imageY="0"   imageWidth="182" imageHeight="182" />
			<Image			imageID="&rsWorldsIcePlanet3;" imageX="0" imageY="0"   imageWidth="182" imageHeight="182" />
			<Image			imageID="&rsWorldsIcePlanet4;" imageX="0" imageY="0"   imageWidth="182" imageHeight="182" />
		</ImageVariants>
	</StationType>
<StationType UNID="&stSmallMetallicAsteroid;"
			obsoleteVersion=			"37"
		name=				"(metallic asteroid)"
		scale=				"world"
		size=				"4"

		attributes=			"asteroid, metallic"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsMetallicAsteroids;" imageX="0"   imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="32"  imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="64"  imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="96"  imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="128" imageY="128"	imageWidth="32" imageHeight="32"/>

			<Image	imageID="&rsMetallicAsteroids;" imageX="160"   imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="192"   imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="224"   imageY="128"	imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>
	</StationType>
<StationType UNID="&stMediumMetallicAsteroid;"
			obsoleteVersion=			"37"
		name=				"(metallic asteroid)"
		scale=				"world"
		size=				"55"

		attributes=			"asteroid, metallic"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>

		<ImageVariants>
			<Image	imageID="&rsMetallicAsteroids;" imageX="0"   imageY="0"		imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="64"  imageY="0"		imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="128" imageY="0"		imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="192" imageY="0"		imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="0"   imageY="64"	imageWidth="64" imageHeight="64"/>

			<Image	imageID="&rsMetallicAsteroids;" imageX="64"  imageY="64"	imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="128" imageY="64"	imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="192" imageY="64"	imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>
	</StationType>
<StationType UNID="&stSmallVolcanicAsteroid;"
			obsoleteVersion=			"37"
		name=				"(volcanic asteroid)"
		scale=				"world"
		size=				"4"

		attributes=			"asteroid, volcanic"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="768" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="800" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="832" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="864" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="896" imageWidth="32" imageHeight="32"/>

			<Image			imageID="&rsWorlds2;" imageX="192" imageY="928" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="960" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="992" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stMediumVolcanicAsteroid;"
			obsoleteVersion=			"37"
		name=				"(volcanic asteroid)"
		scale=				"world"
		size=				"70"

		attributes=			"asteroid, volcanic"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="512" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="576" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="640" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="704" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="768" imageWidth="64" imageHeight="64"/>

			<Image			imageID="&rsWorlds2;" imageX="128" imageY="832" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="896" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="960" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stVolcanicPlanet;"
			obsoleteVersion=			"37"
		name=				"(volcanic terrestrial)"
		scale=				"world"
		size=				"5000"

		attributes=			"terrestrial, volcanic"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds2;" imageX="0" imageY="512" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds2;" imageX="0" imageY="640" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds2;" imageX="0" imageY="768" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds2;" imageX="0" imageY="896" imageWidth="128" imageHeight="128"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stBiospherePlanet;"
			obsoleteVersion=			"37"
		name=				"(biosphere terrestrial)"
		scale=				"world"
		size=				"10000"

		attributes=			"biosphere, terrestrial"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="0"   imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="128" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="256" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="384" imageWidth="128" imageHeight="128"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stDesertPlanet;"
			obsoleteVersion=			"37"
		name=				"(desert terrestrial)"
		scale=				"world"
		size=				"7000"

		attributes=			"desert, terrestrial"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds2;" imageX="0" imageY="0" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds2;" imageX="0" imageY="128" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds2;" imageX="0" imageY="256" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsWorlds2;" imageX="0" imageY="384" imageWidth="128" imageHeight="128"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stGreenhousePlanet;"
			obsoleteVersion=			"37"
		name=				"(greenhouse terrestrial)"
		scale=				"world"
		size=				"5000"

		attributes=			"co2planet, terrestrial"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="0"   imageWidth="128" imageHeight="128" />
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="128" imageWidth="128" imageHeight="128" />
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="256" imageWidth="128" imageHeight="128" />
			<Image			imageID="&rsWorlds1;" imageX="0" imageY="384" imageWidth="128" imageHeight="128" />
		</ImageVariants>
	</StationType>
<StationType UNID="&stHydrogenGasGiant;"
			obsoleteVersion=			"37"
		name=				"(hydrogen gas giant)"
		scale=				"world"
		size=				"140000"

		attributes=			"gasGiant"
		>
		<Image imageID="&rsWorlds1;" imageX="0" imageY="512" imageWidth="256" imageHeight="256"/>
	</StationType>
<StationType UNID="&stMethaneGasGiant;"
			obsoleteVersion=			"37"
		name=				"(methane gas giant)"
		scale=				"world"
		size=				"50000"

		attributes=			"gasGiant"
		>
		<Image imageID="&rsWorlds1;" imageX="0" imageY="768" imageWidth="192" imageHeight="192"/>
	</StationType>
<StationType UNID="&stPrimordialStar;"
			obsoleteVersion=			"37"
		name=				"(primordial star)"
		scale=				"star"
		spaceColor=			"0x4d, 0x41, 0x0f"
		maxLightRadius=		"400"

		attributes=			"generic, primordial, star"
		>

		<Image>
			<FilterColorize hue="49" saturation="60">
				<Image imageID="&rsStar1;" imageX="0" imageY="0" imageWidth="512" imageHeight="512"/>
			</FilterColorize>
		</Image>
	</StationType>
<StationType UNID="&stO-TypeStar;"
			obsoleteVersion=			"37"
		name=				"(star)"
		scale=				"star"

		attributes=			"star"
		>
	<Image imageID="&rsStar1;" imageX="0" imageY="0" imageWidth="512" imageHeight="512"/>
	</StationType>
<StationType UNID="&stA-TypeStar;"
			obsoleteVersion=			"37"
		name=				"(A class star)"
		scale=				"star"
		spaceColor=			"0x12, 0x50, 0x79"
		maxLightRadius=		"800"

		attributes=			"generic, star"
		>

		<Image>
			<FilterColorize hue="203" saturation="75">
				<Image imageID="&rsAStar;" imageX="0" imageY="0" imageWidth="512" imageHeight="512"/>
			</FilterColorize>
		</Image>
	</StationType>
<StationType UNID="&stG-TypeStar;"
			obsoleteVersion=			"37"
		name=				"(G class star)"
		scale=				"star"
		spaceColor=			"#656551"
		maxLightRadius=		"620"

		attributes=			"generic, star"
		>

		<Image>
			<FilterColorize hue="57" saturation="50">
				<Image imageID="&rsStar1;" imageX="0" imageY="0" imageWidth="512" imageHeight="512"/>
			</FilterColorize>
		</Image>
	</StationType>
<StationType UNID="&stK-TypeStar;"
			obsoleteVersion=			"37"
		name=				"(K class star)"
		scale=				"star"
		spaceColor=			"0x70, 0x44, 0x1a"
		maxLightRadius=		"620"

		attributes=			"generic, star"
		>

		<Image>
			<FilterColorize hue="30" saturation="63">
				<Image imageID="&rsStar1;" imageX="0" imageY="0" imageWidth="512" imageHeight="512"/>
			</FilterColorize>
		</Image>
	</StationType>
<StationType UNID="&stM-TypeStar;"
			obsoleteVersion=			"37"
		name=				"(star)"
		scale=				"star"

		attributes=			"star"
		>
	<Image imageID="&rsStar1;" imageX="0" imageY="0" imageWidth="512" imageHeight="512"/>
	</StationType>
<StationType UNID="&stRedDwarfStar;"
			obsoleteVersion=			"37"
		name=				"(red dwarf star)"
		scale=				"star"
		spaceColor=			"0x59, 0x0e, 0x00"
		maxLightRadius=		"320"

		attributes=			"generic, star"
		>
	<Image imageID="&rsRedDwarfStar;" imageX="0" imageY="0" imageWidth="256" imageHeight="256"/>
	</StationType>
<StationType UNID="&stBlueGiantStar;"
			obsoleteVersion=			"37"
		name=				"(star)"
		scale=				"star"

		attributes=			"star"
		>
	<Image imageID="&rsStar1;" imageX="0" imageY="0" imageWidth="512" imageHeight="512"/>
	</StationType>
<StationType UNID="&stOreSmallAsteroid;"
			obsoleteVersion=			"37"
			name=				"(small ore asteroid)"
			scale=				"world"

			attributes=			"asteroid, stoneAsteroid, tinyAsteroid"

			ejectaType=			"&vtStoneAsteroidEjecta;"
			>

		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="768" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="800" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="832" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="864" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="896" imageWidth="32" imageHeight="32"/>

			<Image			imageID="&rsWorlds1;" imageX="192" imageY="928" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="960" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="992" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Items>
			<Lookup table="&tbStoneAsteroidOre;"/>
		</Items>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stOreMediumAsteroid;"
			obsoleteVersion=			"37"
		name=				"(medium ore asteroid)"
		scale=				"world"

		attributes=			"asteroid, mediumAsteroid, stoneAsteroid"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>

		<Names noArticle="true">Asteroid %1%0%0%0%0%0</Names>

		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="0"   imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="64"  imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="192" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="256" imageWidth="64" imageHeight="64"/>

			<Image			imageID="&rsWorlds1;" imageX="128" imageY="320" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="384" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="128" imageY="448" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Items>
			<Lookup count="1d6" table="&tbStoneAsteroidOre;"/>
		</Items>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stOreSmallFrostAsteroid;"
			obsoleteVersion=			"37"
		name=				"(small frost ore asteroid)"
		scale=				"world"

		attributes=			"asteroid, frostAsteroid, tinyAsteroid"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>

		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="768" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="800" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="832" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="864" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="896" imageWidth="32" imageHeight="32"/>

			<Image			imageID="&rsWorlds1;" imageX="224" imageY="928" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="960" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="992" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Items>
			<Lookup table="&tbFrostAsteroidOre;"/>
		</Items>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stOreMediumFrostAsteroid;"
			obsoleteVersion=			"37"
		name=				"(medium frost ore asteroid)"
		scale=				"world"

		attributes=			"asteroid, frostAsteroid, mediumAsteroid"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>

		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="0"   imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="64"  imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="192" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="256" imageWidth="64" imageHeight="64"/>

			<Image			imageID="&rsWorlds1;" imageX="192" imageY="320" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="384" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="448" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Items>
			<Lookup count="1d6" table="&tbFrostAsteroidOre;"/>
		</Items>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stOreSmallMetallicAsteroid;"
			obsoleteVersion=			"37"
		name=				"(asteroid)"
		scale=				"world"

		attributes=			"asteroid, metallicAsteroid, tinyAsteroid"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsMetallicAsteroids;" imageX="0"   imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="32"  imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="64"  imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="96"  imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="128" imageY="128"	imageWidth="32" imageHeight="32"/>

			<Image	imageID="&rsMetallicAsteroids;" imageX="160"   imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="192"   imageY="128"	imageWidth="32" imageHeight="32"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="224"   imageY="128"	imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Items>
			<Lookup table="&tbMetallicAsteroidOre;"/>
		</Items>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stOreMediumMetallicAsteroid;"
			obsoleteVersion=			"37"
		name=				"(asteroid)"
		scale=				"world"

		attributes=			"asteroid, mediumAsteroid, metallicAsteroid"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>

		<ImageVariants>
			<Image	imageID="&rsMetallicAsteroids;" imageX="0"   imageY="0"		imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="64"  imageY="0"		imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="128" imageY="0"		imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="192" imageY="0"		imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="0"   imageY="64"	imageWidth="64" imageHeight="64"/>

			<Image	imageID="&rsMetallicAsteroids;" imageX="64"  imageY="64"	imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="128" imageY="64"	imageWidth="64" imageHeight="64"/>
			<Image	imageID="&rsMetallicAsteroids;" imageX="192" imageY="64"	imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Items>
			<Lookup count="1d6" table="&tbMetallicAsteroidOre;"/>
		</Items>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stOreSmallVolcanicAsteroid;"
			obsoleteVersion=			"37"
		name=				"(small volcanic ore asteroid)"
		scale=				"world"

		attributes=			"asteroid, tinyAsteroid, volcanicAsteroid"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>

		<ImageVariants>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="768" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="800" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="832" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="864" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="896" imageWidth="32" imageHeight="32"/>

			<Image			imageID="&rsWorlds2;" imageX="192" imageY="928" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="960" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds2;" imageX="192" imageY="992" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Items>
			<Lookup table="&tbVolcanicAsteroidOre;"/>
		</Items>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<StationType UNID="&stOreMediumVolcanicAsteroid;"
			obsoleteVersion=			"37"
		name=				"(medium volcanic ore asteroid)"
		scale=				"world"

		attributes=			"asteroid, mediumAsteroid, volcanicAsteroid"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>

		<ImageVariants>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="512" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="576" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="640" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="704" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="768" imageWidth="64" imageHeight="64"/>

			<Image			imageID="&rsWorlds2;" imageX="128" imageY="832" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="896" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds2;" imageX="128" imageY="960" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Items>
			<Lookup count="1d6" table="&tbVolcanicAsteroidOre;"/>
		</Items>

		<Events>
			<OnMining>
				(intAsteroidOnMining)
			</OnMining>
		</Events>

	</StationType>
<!-- GalaxyEffects.xml -->
<!-- GalaxyLibrary.xml -->
<!-- GroupIAsteroids.xml -->
<!-- Groups.xml -->
<!-- HaloGems.xml -->
<!-- HarperThompson.xml -->
<!-- Heliotropes.xml -->
<StationType UNID="&stHeliotropeColony;"
			name=				"Heliotrope colony|Heliotrope colonies"
			sovereign=			"&svHeliotropes;"
				 
			attributes=			"enemy, envFire, envAvoidsWater, generic, heliotropes, human, populated"
				 
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			armorID=			"&itSolarArmor;"
			hitPoints=			"420"
			multiHull=			"true"
			regen=              "8"
				 
			fireRateAdj=		"20"
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+heliotropeSpace;"
				systemAffinity=			"+envFire; -envWater;"
				levelFrequency=			"---cu r---- ----- ----- -----"

				locationCriteria=		"+innerSystem, -void"
				enemyExclusionRadius=	"50"
				/>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itSunflareCannon;"	posAngle="0" posRadius="0" posZ="70" omnidirectional="true"/>
			<Device deviceID="&itHeliotropeDefenseGridII;"/>
		</Devices>

		<!-- Ships and Defenses -->
		
		<Squadron table="&tbHeliotropeDefenders;"	count="challenge:hard"	reinforce="auto"/>

		<!-- Treasure and Items -->
		
		<Items value="standard:level=4:x=2.5">
			<Item count="3d12" item="&itHelium3FuelRod;"/>
			<Item count="3d12" item="&itHeliotropeFuel;"/>
			<Lookup chance="50" table="&trStdTreasure;"/>
		</Items>

		<!-- Image and Effects -->
		
		<Image	imageID="&rsHeliotropeColony;" imageWidth="300" imageHeight="300" viewportRatio="0.055"/>

		<DockingPorts
				portAngle=		"-37"
				portCount=		"8"
				portRadius=		"170"
				>
		</DockingPorts>
		
		<!-- Random Encounters -->
		
		<Encounters frequency="common">
			<Lookup table="&tbHeliotropeEncounters;"/>
		</Encounters>
	</StationType>
<StationType UNID="&stHeliotropeOutpost;"
			name=				"Heliotrope outpost"
			sovereign=			"&svHeliotropes;"
				 
			attributes=			"enemy, envFire, envAvoidsWater, generic, heliotropes, human, populated"
				 
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			armorID=			"&itHeavyCeramicPlate;"
			hitPoints=			"120"
			regen=              "1"
				 
			fireRateAdj=		"40"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+heliotropeSpace;"
				systemAffinity=			"+envFire; -envWater;"
				levelFrequency=			"--cuv ----- ----- ----- -----"

				locationCriteria=		"+innerSystem, -void"
				/>

		<!-- Trade and Items -->
		
		<Items value="standard:level=3">
			<Item count="1d12" item="&itHelium3FuelRod;"/>
			<Item count="1d6" item="&itHeliotropeFuel;"/>
			<Table chance="20">
				<Lookup chance="40" count="1" table="&trConsumables4;"/>
				<Lookup chance="40" count="1" table="&trMinorItem4;"/>
				<Lookup chance="20" count="1" table="&trMajorItem4;"/>
			</Table>
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itSunflareCannon;"	posAngle="0" posRadius="0" posZ="100" omnidirectional="true"/>
			<Device deviceID="&itHeliotropeDefenseGridI;"/>
		</Devices>

		<!-- Ships and Defenses -->
		
		<Squadron table="&tbHeliotropeDefenders;"	count="challenge:standard"	reinforce="auto"/>

		<!-- Image and Effects -->
		
		<Image			imageID="&rsHeliotropeOutpost;" imageWidth="220" imageHeight="220" viewportRatio="0.029375"/>
		
		<DockingPorts
				portAngle=		"-15"
				portCount=		"8"
				portRadius=		"60"
				/>
		
		<!-- Random Encounters -->

		<Encounters frequency="common">
			<Lookup table="&tbHeliotropeEncounters;"/>
		</Encounters>
	</StationType>
<!-- Heretic.xml -->
<StationType UNID="&stHereticStation;"
			name=				": Heretic Station"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			
			size=				"390"
			armorID=			"&itP120HexphaseArmor;"
			hitPoints=			"740"
			multiHull=			"true"
			regen=              "15"
			shipRegen=			"6"
				 
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			fireRateAdj=		"40"
			>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; -premiumAmmo; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"		priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-10;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-10;" priceAdj="120"/>
			<ReplaceArmor	criteria="a L:1-10;" priceAdj="120"/>
			<InstallDevice	criteria="d L:1-10;" priceAdj="120"/>
			<RemoveDevice	criteria="d L:1-10;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>

		<Items>
			<RandomItem count="10" 
					criteria=		"ad L:1-10; +commonwealth; -defective; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:u|c|crv"
					/>
			<RandomItem count="10" 
					criteria=		"*~adm -defective; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>

			<Item count="4d12"	item="&itPteracniumFuelRod;" />
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true"/>
		</Devices>

		<!-- Satellites -->
		
		<Satellites overlapCheck="asteroids">
			<Orbitals distance="12" angle="45">
				<Station type="&stCommonwealthTurret;" imageVariant="2"/>
			</Orbitals>

			<Orbitals distance="12" angle="135">
				<Station type="&stCommonwealthTurret;" imageVariant="1"/>
			</Orbitals>

			<Orbitals distance="12" angle="225">
				<Station type="&stCommonwealthTurret;" imageVariant="0"/>
			</Orbitals>

			<Orbitals distance="12" angle="315">
				<Station type="&stCommonwealthTurret;" imageVariant="3"/>
			</Orbitals>
		</Satellites>

		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="2" table="&tbCommDefenders;"/>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Lookup chance="75" table="&tbCommDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->
		
		<Image imageID="&rsCommonwealthSettlement;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionMainHall" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +commonwealthSettlement; =" (sysGetLevel) ";")
									noMissionTextID: 'descHallEmpty
									maxPerStation: 1
									})
							</Action>

							<Action id="actionCommoditiesExchange">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>
		
		<!-- Events and Data -->

		<Language>
			<Text id="descWelcome">
				You are in the docking bay of a Commonwealth colony.
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stCommonwealthResearchHeretic;"
			name=				"Nares-Strong Research Station"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"

			attributes=			"commonwealth, commonwealthCustoms, commonResearch, friendly, hereticStation, human, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			size=				"390"
			armorID=			"&itP120HexphaseArmor;"
			hitPoints=			"370"
			multiHull=			"true"
			regen=              "4"
			shipRegen=			"6"
				 
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			fireRateAdj=		"40"
				 
			ignoreFriendlyFire=	"true"
			definiteArticle=	"true"
			>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Refuel			criteria="f +BasicFuel; L:1-10;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-10;" priceAdj="120"/>
			<ReplaceArmor	criteria="a L:1-10;" priceAdj="120"/>
			<InstallDevice	criteria="d L:1-10;" priceAdj="120"/>
			<RemoveDevice	criteria="d L:1-10;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>
		
		<Items>
			<Item count="4d12"	item="&itXenotiteFuelRod;" />
			<Item count="4d12"	item="&itPteracniumFuelRod;" />
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="2" table="&tbCommDefenders;"/>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Lookup chance="75" table="&tbCommDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->
		
		<Image imageID="&rsCommonwealthColony;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionResearchLevel" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +commonwealthResearch; =" (sysGetLevel) ";")
									noMissionTextID: 'descNoMissions
									})
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>
		
		<Language>
			<Text id="actionResearchLevel">[R]esearch Level</Text>

			<Text id="descWelcome">
				You are in the docking bay of a Commonwealth research station.
			</Text>
			<Text id="descNoMissions">

				Researchers stand around holocharts discussing graviton 
				science. The chief scientist talks to you:

				"We're studying the gravitational distortion the Iocrym used
				to trap us here. We've got ten years' worth of data to analyze."

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stRingersResearchHeretic;"
			name=				"Ringers research outpost"
			sovereign=			"&svRingers;"
			inherit=			"&baRingersStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			ignoreFriendlyFire=	"true"

			multiHull=			"true"
			armorID=			"&itDiamondLatticeArmor;"
			hitPoints=			"810"
			regen=              "8"
			fireRateAdj=		"15"
			explosionType=		"&vtPlasmaExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"friendly, hereticStation, independent, majorStation, neoHuman, populated, ringers"
			
			definiteArticle=	"true"
			>

		<Ships>
			<Table count="1d4">
				<Ship chance="50"	count="1" class="&scCenturionM;" orders="gateOnThreat" />
				<Ship chance="15"	count="1" class="&scEI500;" orders="gateOnThreat"/>
				<Ship chance="10"	count="1" class="&scWolfen;" orders="gateOnThreat"/>
				<Ship chance="25"	count="1" class="&scFerianMiner;" orders="gateOnThreat"/>
			</Table>
		</Ships>

		<Devices>
			<Device deviceID="&itPositronLancer;" omnidirectional="true"/>
		</Devices>

		<Items>
			<RandomItem count="1d12" 
					criteria=		"* +Meds; -defective; -Illegal; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ruc|u|r"
					/>

			<RandomItem count="1d4" 
					criteria=		"u -defective; -NotForSale; -NotStandard;"
					levelFrequency=	"systemLevel:ruc|u|r"
					/>

			<RandomItem count="2d12" 
					criteria=		"f -defective; -NotForSale; -NotStandard;"
					levelFrequency=	"systemLevel:ru|c|ur"
					/>

			<Item				count="1d12"	item="&itEuropanIceMoss;" />
			<Item				count="1d6"		item="&itEuropanIceVodka;" />
		</Items>

		<Trade currency="rin">
			<Sell	criteria="*NU +ringerValuable; -defective;"		priceAdj="250"/>
			<Sell	criteria="*NU -defective; -ID;"					priceAdj="100"/>
			<Buy	criteria="*NU +ringerValuable;"		priceAdj="200"/>
			<Buy	criteria="*NU +res; &gt;=4;"		priceAdj="90"/>
			<ConsumeTrade	criteria="{human.res}"		impact="2"/>
			<ConsumeTrade	criteria="{core.ore}"			impact="5"/> 
		</Trade>

		<Reinforcements minShips="3">
			<Table count="1d4">
				<Ship chance="50"	count="1" class="&scCenturionM;" orders="gateOnThreat" />
				<Ship chance="25"	count="1" class="&scFerianMiner;" orders="gateOnThreat"/>
				<Ship chance="15"	count="1" class="&scEI500;" orders="gateOnThreat"/>
				<Ship chance="10"	count="1" class="&scWolfen;" orders="gateOnThreat"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->

		<Image			imageID="&rsRingersCollective;" imageWidth="200" imageHeight="300" viewportRatio="0.04125"/>

		<DockingPorts>
			<Port posAngle="16"		posRadius="113" posZ="46"/>
			<Port posAngle="45"		posRadius="106" posZ="110"/>
			<Port posAngle="122"	posRadius="105" posZ="30"/>
			<Port posAngle="-171"	posRadius="121" posZ="100"/>

			<Port posAngle="-149"	posRadius="118" posZ="-110"/>
			<Port posAngle="-112"	posRadius="98"  posZ="-60"/>
			<Port posAngle="-65"	posRadius="90"  posZ="-30"/>
			<Port posAngle="-22"	posRadius="104" posZ="-46"/>
		</DockingPorts>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionResearchLab" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +ringersResearch; =" (sysGetLevel) ";")
									noMissionTextID: 'descNoMissions
									})
							</Action>

							<Action id="actionCommoditiesExchange">
								(switch
									(= (objGetBalance gPlayerShip 'rin) 0)
										(scrShowPane gScreen 'ExchangeIntro)

									(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<ExchangeIntro descID="descExchangeIntro">
						<Actions>
							<Action id="actionContinue" cancel="1" default="1">
								(block Nil
									(scrShowPane gScreen 'Default)
									(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
									)
							</Action>
						</Actions>
					</ExchangeIntro>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="actionCommoditiesExchange">[S]upplies</Text>
			<Text id="actionResearchLab">[R]esearch Lab</Text>

			<Text id="descWelcome">

				You are docked at a Ringers Collective. Ringer neohumans float
				through the vast volume of the station, perfectly adapted to
				zero-gravity and space.

			</Text>
			<Text id="descNoMissions">

				A young ringer greets you as you enter the lab. His melodic
				voice is translated through a device on his neck:

				"Earthican, welcome! We seek answers to questions unrelated to
				Earthicans. Return here later and perhaps we have questions for
				all human-descendants."

			</Text>
			<Text id="core.commoditiesExchangeDesc">

				The central structure of the Ringers Collective is a large marketplace
				containing sophisticated and rare devices from all over Human Space.
				Commonwealth credits are not accepted here.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stSistersResearchHeretic;"
			name=				":the St. Josephine mission"
			sovereign=			"&svSistersOfDomina;"
			inherit=			"&stSistersOfDomina;"
			   
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			   
			multiHull=			"true"
			armorID=			"&itLightIthaliumArmor;"
			hitPoints=			"470"
			regen=              "4"
			ejectaType=			"&vtWreckEjecta;"
			ignoreFriendlyFire=	"true"

			attributes=			"friendly, hereticStation, human, majorStation, populated, religious, sistersOfDomina"
			>

		<!-- Encounter Info -->

		<Encounter/>
		
	</StationType>
<StationType UNID="&stTVX1Outpost;"
			name=				": Taikon research outpost TVX-1"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"
			ignoreFriendlyFire=	"true"

			multiHull=			"true"
			armorID=			"&itQuadroCarbideArmor;"
			hitPoints=			"610"
			regen=              "6"
			fireRateAdj=		"20"
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"corporate, corporateCustoms, friendly, hereticStation, human, independent, populated"
			>

		<Image			imageID="&rsStations8;" imageX="0" imageY="448" imageWidth="128" imageHeight="192"/>

		<Ships>
			<Lookup count="2" table="&tbCorpDefenders;"/>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<Reinforcements minShips="4">
			<Table>
				<Lookup chance="75" table="&tbCorpDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Reinforcements>

		<Devices>
			<Device deviceID="&itHeavyIonBlaster;"	omnidirectional="true"/>
		</Devices>

		<Items>
			<Item	count="6d12" item="&itPteracniumFuelRod;"/>
		</Items>

		<Trade currency="rin">
			<Refuel			criteria="f +unid:&itPteracniumFuelRod;;" priceAdj="100"/>
			<Refuel			criteria="f +BasicFuel; L:1-10;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-11;" priceAdj="120"/>
			<ReplaceArmor	criteria="a L:1-11;" priceAdj="120"/>
			<InstallDevice	criteria="d L:1-11;" priceAdj="120"/>
			<RemoveDevice	criteria="d L:1-11;" priceAdj="100"/>
		</Trade>

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionResearchLab" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +taikonResearch; =" (sysGetLevel) ";")
									noMissionTextID: 'descNoMissions
									})
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts>
			<Port x="68"	y="35" />
			<Port x="42"	y="-71" />
			<Port x="-74"	y="-39" />
			<Port x="-38"	y="63" />
			<Port x="90"	y="-31" />
			<Port x="-28"	y="-90" />
			<Port x="-101"	y="21" />
			<Port x="36"	y="88" />
		</DockingPorts>

		<Language>
			<Text id="actionResearchLab">[R]esearch Lab</Text>

			<Text id="descWelcome">
				You are docked at a Taikon research station.
			</Text>
			<Text id="descNoMissions">

				A tall man in a corporate suit approaches you:

				"Welcome to TVX-1! Taikon Ventures is out here in the Heretic
				system studying Iocrym technology."

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stAresResearchHeretic;"
			name=				"Ares research outpost"
			sovereign=			"&svAresHeretic;"
			inherit=			"&unidCommonText;"

			attributes=			"ares, hereticStation, neoHuman, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockScreen=			"Main"
			ignoreFriendlyFire=	"true"

			armorID=			"&itHeavyTharsisPlate;"
			hitPoints=			"610"
			multiHull=			"true"
			regen=              "6"

			fireRateAdj=		"20"
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			
			definiteArticle=	"true"
			>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itLightningCannon;" omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships>
			<Ship		count="1d6"		class="&scSandstorm;" orders="guard"/>
		</Ships>

		<Reinforcements minShips="5">
			<Ship		count="1d4"		class="&scSandstorm;" orders="guard"/>
		</Reinforcements>

		<!-- Treasure -->

		<Items>
			<Table>
				<Lookup chance="25" count="1d3" table="&trConsumables7;"/>
				<Lookup chance="25" count="1"	table="&trConsumables8;"/>
				<Lookup chance="25" count="1"	table="&trMinorItem7;"/>
				<Lookup chance="15" count="1"	table="&trMinorItem8;"/>
				<Lookup chance="10" count="1"	table="&trMajorItem7;"/>
			</Table>
		</Items>

		<!-- Image and Effects -->
		
		<Image			imageID="&rsAresOutpost;" imageWidth="160" imageHeight="250"	viewportRatio="0.03"/>

		<DockingPorts
				portAngle=		"15"
				portCount=		"8"
				portRadius=		"95"
				/>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<InitialPane>
					; If the player saves the Antarctica, then the Ares will be friendly
					(if (not (msnFind "r +unid:&msEscapeFromDantalion;; +property:isSuccess;"))
						"GetOut"
						"Default"
						)
				</InitialPane>

				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionCommandCenter" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +aresResearch; =" (sysGetLevel) ";")
									noMissionTextID: 'descNoMissions
									})
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<GetOut descID="descGetOut">
						<Actions>
							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</GetOut>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="actionCommandCenter">[C]ommand Center</Text>

			<Text id="descWelcome">

				You are docked at an Ares research outpost. Ares warriors stare
				at you as you enter the station.

			</Text>
			<Text id="descGetOut">

				Ares warriors meet you at the airlock. Their weapons are pointed at you:

				"We don't want conflict, Human. Leave now and don't disturb our research."

			</Text>
			<Text id="descNoMissions">

				An Ares scientist comes forward:

				"Welcome, Human! It is good that we can meet under peaceful circumstances.
				We are studying the Iocrym, but unfortunately, there are no Iocrym stations in
				the system for us to probe. Perhaps you will have better luck elsewhere."

			</Text>

			<Text id="core.mapDesc">
				Research base
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stLogBuoy;"
			name=				"log buoy"
			sovereign=			"&svNeutral;"
			dockScreen=			"DisplayLog"
			noMapLabel=			"true"
			mass=				"1000"
			mobile=				"true"
			>

		<ImageVariants>
			<Image imageID="&rsLogBuoy;" imageX="0"   imageY="0"   imageWidth="40" imageHeight="40"/>
			<Image imageID="&rsLogBuoy;" imageX="40"  imageY="0"   imageWidth="40" imageHeight="40"/>
			<Image imageID="&rsLogBuoy;" imageX="80"  imageY="0"   imageWidth="40" imageHeight="40"/>
			<Image imageID="&rsLogBuoy;" imageX="120" imageY="0"   imageWidth="40" imageHeight="40"/>
		</ImageVariants>

		<DockScreens>
			<DisplayLog
					backgroundID=	"none"
					>
				<Display animate="false">
					<Text id="text" left="12" right="-12" top="16" bottom="-16">
						(objGetData gSource "logText")
					</Text>
				</Display>

				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDesc gScreen 
								"You are docked with a log buoy.\n\n"
								"The message includes archived star system coordinates. Press Download to "
								"program coordinates into your ship's computer."
								)
						</OnPaneInit>

						<Actions>
							<Action name="Download Coordinates" key="D" default="1">
								(block Nil
									(setq nextObj (objGetObjRefData gSource "nextObj"))
									(if nextObj
										(block Nil
											(shpCancelOrders gPlayerShip)
											(shpOrder gPlayerShip 'dock nextObj)
											)
										)

									(scrShowPane gScreen "DownloadComplete")
									)
							</Action>

							<Action name="Undock" key="U" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<DownloadComplete descID="descDownloadComplete">
						<Actions>
							<Action name="Undock" key="U" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</DownloadComplete>
				</Panes>
			</DisplayLog>
		</DockScreens>

		<DockingPorts>
			<Port x="0"		y="24" />
			<Port x="0"		y="-24" />
			<Port x="24"	y="0" />
			<Port x="-24"	y="0" />
		</DockingPorts>

		<Language>
			<Text id="descDownloadComplete">Download complete.</Text>
		</Language>
	</StationType>
<StationType UNID="&stSvalbardWreck;"
			name=				"wreck of the Svalbard Explorer"
			sovereign=			"&svNeutral;"
			inherit=			"&unidCommonText;"

			attributes=			"shipwreck"

			dockScreen=			"Main"

			scale=				"ship"
			mobile=				"true"
			immutable=			"true"

			ejectaType=			"&vtWreckEjecta;"
			>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockScreens>
			<Main>
				<InitialPane>
					(switch
						;	If Kate Morgental is already at the Control Point, then
						;	we don't need to do anything.

						(objGetData (@ (sysFindObject Nil "T +unid:&stHereticControlCenter;;") 0) 'stationMaster)
							'EmptyWreck

						;	If the quarantine has already been liftedn then nothing 
						;	to do.

						(sysGetData 'G2 'quarantineLifted)
							'EmptyWreck

						;	If we're already transfering people, then nothing to do.

						(typGetGlobalData &scSvalbardExplorer; 'inTransfer)
							'EmptyWreck

						'Default
						)
				</InitialPane>

				<Panes>
					<Default descID="textWelcome">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "Transfer")
							</Action>
						</Actions>
					</Default>

					<Transfer descID="textTransfer">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								(block Nil
									(shpCancelOrders gPlayerShip)
									(shpOrder gPlayerShip 'dock (sysFindObject gSource "TN +hereticControlPoint"))

									(typSetGlobalData &scSvalbardExplorer; 'inTransfer True)
									(scrExitDock gScreen)
									)
							</Action>
						</Actions>
					</Transfer>

					<EmptyWreck descID="textEmpty">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</EmptyWreck>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

		<Language>
			<Text id="textWelcome">

				The bridge of the Svalbard is smashed, but much of the research 
				team survived. Kate Morgental appears from the wreckage:

				"We've lost all the research! But we know that the Iocrym are 
				controlling the quarantine from a central spot. Can you take us 
				and our equipment to the control point? We'll set up a base 
				there."
			
			</Text>
			<Text id="textTransfer">

				"We've programmed the location of the Iocrym control point into 
				your computer. Just take us there and we'll set up a base."
			
			</Text>
			<Text id="textEmpty">
			
				You are docked with the empty wreck of the Svalbard Explorer.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stHereticGate;"
			name=				"Heretic Gate"
			sovereign=			"&svNeutral;"
			dockScreen=			"Main"

			immutable=			"true"
			inactive=			"true"

			attributes=			"stargate, uncharted"
			
			gateEffect=			"&efStargateOut;"
			definiteArticle=	"true"
			>
		<Image imageID="&rsDaazhenStargate;" imageWidth="350" imageHeight="350" imageFrameCount="48" imageTicksPerFrame="1" animationColumns="6"/>

		<DockingPorts
				portCount=		"4"
				portRadius=		"190"
				>
		</DockingPorts>
		
		<DockScreens>
			<Main
				name=			"Heretic Gate"
				>

				<InitialPane>
					(if (objGetData gSource "Active")
						"Default"
						"Activate"	
						)
				</InitialPane>

				<Panes>
					<Activate descID="descActivate">
						<Actions>
							<Action name="Activate Stargate" default="1" key="A">
								<Navigate screen="PickItem"/>
							</Action>

							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>

						</Actions>

					</Activate>

					<Default descID="descDefault">
						<Actions>
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>

						</Actions>

					</Default>
				</Panes>
			</Main>

			<PickItem
					name=				"Heretic Gate"
					type=				"itemPicker"
					>

				<ListOptions
					dataFrom=	"player"
					list=		"*U"
					/>

				<Panes>
					<Default descID="descControlRoom">
						<Actions>
							<Action name="Use this Item" default="1" key="U">
								(block Nil
									(setq gItem (scrGetItem gScreen))
									(switch
										(eq gItem Nil)
											Nil

										(eq (itmGetType gItem) &itStargateControlRod;)
											(block Nil
												(objSetData gSource "Active" True)
												(staSetActive gSource)
												(scrRemoveItem gScreen 1)
												(scrShowPane gScreen "Success")
												)

										(scrShowPane gScreen "Failure")
										)
									)
							</Action>

							<Action name="Leave" cancel="1" key="L">
								<Navigate screen="Main"/>
							</Action>

						</Actions>

					</Default>

					<Failure>
						<OnPaneInit>
							(scrSetDesc gScreen (cat "Using " (itmGetName gItem 4) " has no discernible effect on the stargate."))
						</OnPaneInit>

						<Actions>
							<Action name="Done" default="1" cancel="1" key="D">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>

					</Failure>

					<Success descID="descSuccess">
						<Actions>
							<Action name="Done" default="1" cancel="1" key="D">
								<Navigate screen="Main"/>
							</Action>
						</Actions>

					</Success>
				</Panes>

			</PickItem>

		</DockScreens>

		<Language>
			<Text id="descActivate">

				You are docked at the Heretic Gate. This gate has been 
				deactivated ever since the Ancient Races of the Galaxy 
				quarantined Human Space. The Heretic Gate is the only barrier 
				that stands between humanity and the rest of the Galaxy.
				
				It is also the only way to get to the Galactic Core.

			</Text>
			<Text id="descDefault">

				You are docked at the Heretic Gate. This gate leads out of the 
				Human Quarantine Zone and into the rest of the Galaxy.
				
				Your journey to the Galactic Core continues here...

			</Text>
			<Text id="descControlRoom">

				You are in the alien control room of the Heretic Gate. Pick an 
				item to use to attempt to activate the stargate.

			</Text>
			<Text id="descSuccess">

				As you install the alien hyperglyph rod the machines in the 
				control room hum with energy. The stargate spins slowly to life.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stHereticControlCenter;"
			name=				"Iocrym control point"
			sovereign=			"&svNeutral;"
			inherit=			"&unidCommonText;"

			dockScreen=			"Main"

			multiHull=			"true"
			immutable=			"true"

			attributes=			"hereticControlPoint, iocrym, uncharted"

			definiteArticle=	"true"
			>

		<Image imageID="&rsIocrymOutpost;" imageWidth="162" imageHeight="218"/>
		
		<DockScreens>
			<Main>
				<InitialPane>
					(switch
						;	If we're bringing Kate and others here.

						(typGetGlobalData &scSvalbardExplorer; 'inTransfer)
							'TransferSvalbardCrew

						;	Otherwise, continue

						'Default
						)
				</InitialPane>

				<Panes>
					<Default>
						<OnPaneInit>
							(if (objGetData gSource 'stationMaster)
								(scrSetDescTranslate gScreen 'descWelcomeCamp)
								(scrSetDescTranslate gScreen 'descWelcome)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionCentralChamber" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +hereticControlPoint; =" (sysGetLevel) ";")
									noMissionTextID: (switch
										(not (objGetData gSource 'stationMaster))
											'descChamberEmpty

										(sysGetData 'quarantineLifted)
											'descDisabled

										'descNoMissions
										)
									})
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<TransferSvalbardCrew descID="descTransferSvalbardCrew">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(block ()
									(shpCancelOrders gPlayerShip)
									(typSetGlobalData &scSvalbardExplorer; 'inTransfer Nil)
									(objSetData gSource 'stationMaster 'kateMorgental)

									(scrShowPane gScreen 'Default)
									)
							</Action>
						</Actions>
					</TransferSvalbardCrew>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts>
			<Port x="-36"	y="80" />
			<Port x="-87"	y="40" />
			<Port x="-92"	y="-33" />
			<Port x="-42"	y="-85" />
			<Port x="36"	y="80" />
			<Port x="87"	y="40" />
			<Port x="92"	y="-33" />
			<Port x="42"	y="-85" />
		</DockingPorts>
		
		<Language>
			<Text id="actionCentralChamber">[C]entral Chamber</Text>

			<Text id="descWelcome">

				You are docked at a massive alien structure. The walls appear to be made of a
				blue-green crystalline substance that looks fragile but is actually immensely strong.

			</Text>
			<Text id="descWelcomeCamp">

				You are docked at a massive alien structure. The walls appear to be made of a
				blue-green crystalline substance that looks fragile but is actually immensely strong.

				Cables and equipment run through the dock area into a large central chamber
				in front of you. You see researchers working in the distance.

			</Text>
			<Text id="descChamberEmpty">

				The central chamber is deserted, but the entire structure seems to hum with power.
				Built in to the walls of the chamber you see banks of alien machines covered in
				glowing symbols.

			</Text>
			<Text id="descNoMissions">

				The central chamber is full of both familiar human equipment and strange
				alien machines.	One of the researchers talks to you:

				"The technology here is incredible. It may take years, but one day we'll
				understand it!"

			</Text>
			<Text id="descDisabled">

				Researchers have connected their scanners and computers to the alien
				machines in the chamber. A researcher talks to you:

				"Now that we've disabled the Iocrym manipulators we have a little more time
				to study this technology. We're going to make some amazing discoveries here!
				Maybe someday soon we'll be as advanced as the Iocrym!"

			</Text>
			<Text id="descTransferSvalbardCrew">

				Kate Morgental disembarks with her research team:

				"Thanks for bringing us here; our whole mission would have failed without you.
				Fortunately we were able to salvage a lot of our equipment from the Svalbard."
			
			</Text>

			<Text id="core.mapDesc">
				Alien structure
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stIocrymManipulator;"
			name=				"Iocrym manipulator"
			sovereign=			"&svNeutral;"
			inherit=			"&unidCommonText;"

			dockScreen=			"Main"
			dockingPorts=		"4"
				 
			attributes=			"alien, iocrym"

			multiHull=			"true"
			immutable=			"true"
			>

		<ImageVariants>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="0"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="192"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="384"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="576"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="768"	imageWidth="192" imageHeight="192"/>

			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="960"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="1152"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="1344"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="1536"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="1728"	imageWidth="192" imageHeight="192"/>

			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="1920"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="2112"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="2304"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="2496"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="2688"	imageWidth="192" imageHeight="192"/>

			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="2880"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="3072"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="3264"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="3456"	imageWidth="192" imageHeight="192"/>
			<Image imageID="&rsIocrymManipulator;" imageX="0" imageY="3648"	imageWidth="192" imageHeight="192"/>
		</ImageVariants>

		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(switch
								(sysGetData 'quarantineLifted)
									(scrSetDescTranslate gScreen 'descInactive)

								(scrSetDescTranslate gScreen 'descWelcome)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionUndock" cancel="1" default="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<Events>
			<OnCreate>
				(sysAddObjRecurringTimerEvent 150 gSource "OnFirePulse")
			</OnCreate>

			<OnFirePulse>
				(if (not (sysGetData 'quarantineLifted))
					(sysCreateWeaponFire
						&itIocrymManipulator;
						gSource
						(objGetPos gSource)
						(objGetData gSource "fireAngle")
						50
						Nil
						)
					)
			</OnFirePulse>
		</Events>

		<Language>
			<Text id="descWelcome">
				You are docked at an alien structure of immense size. Vast energies pulse
				through its core and a massive beam of incredible power erupts regularly
				out of one end. You feel a dizzying vertigo just being near it.
			</Text>
			<Text id="descInactive">
				You are docked at an Iocrym structure of immense size. Though it has
				fortunately been deactivated, its purpose was to warp the gravity well
				around the Heretic sun and prevent anyone from leaving the inner system.
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stHereticSun;"
			name=				"Heretic"
			scale=				"star"

			attributes=			"star"
				 
			spaceColor=			"#495167"
			maxLightRadius=		"610"
			>
		
		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"490"
					intensity=		"25"
					primaryColor=	"#a6beff"
					secondaryColor=	"#a6beff"
					/>
		</ImageEffect>
		
		<Events>
			<OnCreate>
				(sysAddObjRecurringTimerEvent 30 gSource "OnEffect")
			</OnCreate>

			<OnEffect>
				(if (not (sysGetData 'quarantineLifted))
					(sysCreateEffect &efIocrymManipulatorWaves; gSource Nil)
					)
			</OnEffect>
		</Events>
	</StationType>
<!-- Heretic00.xml -->
<!-- Heretic01.xml -->
<!-- Heretic02.xml -->
<!-- Heretic03.xml -->
<!-- Heretic04.xml -->
<StationType UNID="&stMaryamsArchive;"
			name=				"Iocrym archive"
			sovereign=			"&svNeutral;"
			inherit=			"&unidCommonText;"

			attributes=			"ai, archive"

			dockScreen=			"Main"
			mass=				"2000"
			>

		<Image imageID="&rsIocrymOutpost;" imageWidth="162" imageHeight="218"/>

		<StaticData>
			<Data id="Questions">
				(
					{ id:'q1a	dependsOn:'q1	}
					{ id:'q1b	dependsOn:'q1	}
					{ id:'q1b1	dependsOn:'q1b	}
					{ id:'q1	}
					{ id:'q2	code: (lambda () (msnFireEvent (msnFind "Pa +unid:&msHereticMaryamsArchive;;") 'OnGiveROM))	}
					{ id:'q3	}
					{ id:'q4	}
					)
			</Data>
		</StaticData>

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionEnter" default="1">
								(switch
									(objGetData gSource 'neurohack.success)
										(scrShowScreen gScreen "NeurohackComplete")

									(geq (objGetData gSource 'neurohack.damaged) 3)
										(scrShowPane gScreen "AIDamaged")

									;	Attempt hacking
									(scrShowPane gScreen "Vault")
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<Vault descID="descVault">
						<Actions>
							<Action id="actionBegin" default="1">
								(switch
									(not (objGetItems gPlayerShip "*N +NeurohackROM;"))
										(scrShowPane gScreen "NoROM")

									(scrShowPane gScreen "NeurohackIntro")

									;(scrShowPane gScreen "NoVirusLeft")
									)
							</Action>

							<Action id="actionLeave" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</Vault>

					<NeurohackIntro descID="descNeurohackIntro">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(block Nil
									(scrShowScreen gScreen &dsNeurohack; {
										neurohackRom: (@ (objGetItems gPlayerShip "*N +NeurohackROM;") 0)
										willpower: 10000
										potential: (random 800 1200)
										maxDamage: 10
										nextScreen: 'NeurohackComplete

										onSuccess: (lambda () (objSetData gSource 'neurohack.success True))
										onFailure: (lambda () (objIncData gSource 'neurohack.failure))
										onDamaged: (lambda () (objIncData gSource 'neurohack.damaged))
										})
									)
							</Action>
						</Actions>
					</NeurohackIntro>

					<AIDamaged descID="descAIDamaged">
						<Actions>
							<Action id="actionLeave" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</AIDamaged>

					<NoVirusLeft descID="descNoVirusLeft">
						<Actions>
							<Action id="actionLeave" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</NoVirusLeft>
					
					<NoROM descID="descNoROM">
						<Actions>
							<Action id="actionLeave" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</NoROM>
				</Panes>
			</Main>
			
			<NeurohackComplete>
				<OnScreenInit>
					(switch
						;	If we failed, we set our failure result here. If we succeeded
						;	we wait until the player gets the ROM to set the status

						(geq (+ (objGetData gSource 'neurohack.failure) (objGetData gSource 'neurohack.damaged)) 3)
							(msnFailure (msnFind "Pa +unid:&msHereticMaryamsArchive;;"))
						)
				</OnScreenInit>

				<InitialPane>
					(if (objGetData gSource 'neurohack.success)
						"Default"
						"Failure"
						)
				</InitialPane>

				<Panes>
					<Default>
						<OnPaneInit>
							(block (
								;	Get the question lists
								(allQuestions (objGetStaticData gSource 'Questions))
								(usedQuestions (objGetData gSource 'usedQuestions))

								;	Filter the questions to exclude questions already asked
								;	and questions that depend on others.
								(filteredQuestions (map allQuestions 'excludeNil theQ
									(if (and
											(not (find usedQuestions (@ theQ 'id)))
											(or (not (@ theQ 'dependsOn)) (find usedQuestions (@ theQ 'dependsOn)))
											)
										(@ theQ 'id)
										)
									))

								;	Get the current answer if we have one.
								(curAnswer (scrGetData gScreen 'theAnswer))
								(curCode (@ (map allQuestions 'excludeNil theQ (if (= (@ theQ 'id) curAnswer) (@ theQ 'code))) 0))
								)

								;	Execute current answer code if available
								(if curCode
									((eval curCode))
									)

								;	Add actions for each question
								(enum filteredQuestions theQ
									(scrAddAction gScreen theQ Nil (scrTranslate gScreen (cat "textQuestion:" theQ)) Nil 'default
										(lambda ()
											(block Nil
												(scrSetData gScreen 'theAnswer theQ)
												(objSetData gSource 'usedQuestions (append theQ usedQuestions))
												(scrShowPane gScreen 'Default)
												)
											)
										)
									)

								;	Add the done action at the end
								(scrAddAction gScreen 'actionDoneSpecial Nil (scrTranslate gScreen 'actionDoneSpecial) Nil 'cancel
									(if (msnFind "o +unid:&msHereticIocrymAttack;;")
										(scrShowPane gScreen 'SentinelAttack)
										(scrShowScreen gScreen 'Main)
										)
									)

								;	Compute the current answer
								(switch
									(and (not curAnswer) (not filteredQuestions))
										(scrSetDescTranslate gScreen 'descNoMoreAnswers)

									(not curAnswer)
										(scrSetDescTranslate gScreen 'descSubdued)

									(not filteredQuestions)
										(scrSetDesc gScreen (cat
											(scrTranslate gScreen (cat "textAnswer:" curAnswer))
											"\n\n"
											(scrTranslate gScreen 'descNoMoreAnswers)
											))

									(scrSetDescTranslate gScreen (cat "textAnswer:" curAnswer))
									)
								)
						</OnPaneInit>
					</Default>

					<SentinelAttack descID="descSentinelAttack">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(block Nil
									(msnSetUnavailable (msnFind "Po +unid:&msHereticIocrymAttack;;"))
									(scrShowScreen gScreen "Main")
									)
							</Action>
						</Actions>
					</SentinelAttack>

					<Failure descID="descFailed">
						<Actions>
							<Action id="actionDone" default="1" cancel="1">
								(block (missionObj)
									;	If we fail for any reason the Iocrym attacks start
									(if (setq missionObj (msnFind "Po +unid:&msHereticIocrymAttack;;"))
										(msnSetUnavailable missionObj)
										)
									(scrShowScreen gScreen "Main")
									)
							</Action>
						</Actions>
					</Failure>
				</Panes>
			</NeurohackComplete>
		</DockScreens>

		<DockingPorts>
			<Port x="-36"	y="80" />
			<Port x="-87"	y="40" />
			<Port x="-92"	y="-33" />
			<Port x="-42"	y="-85" />
			<Port x="36"	y="80" />
			<Port x="87"	y="40" />
			<Port x="92"	y="-33" />
			<Port x="42"	y="-85" />
		</DockingPorts>
		
		<Language>
			<Text id="actionBegin">[B]egin Neurohack</Text>
			<Text id="actionDoneSpecial">[Esc] Done</Text>
			<Text id="actionEnter">[E]nter Chamber</Text>

			<Text id="descWelcome">

				You are docked at an alien installation&mdash;a cybernetic archive of some sort.
				An entrance before you leads to the primary chamber.

			</Text>
			<Text id="descVault">

				You are in the archive's primary chamber.

			</Text>
			<Text id="descNeurohackIntro">

				You connect your ship's computer to the archive and engage the neurohack ROM.
				The archive's AI accepts the connection, but you will have to subdue the AI
				before you can gain any information.

			</Text>
			<Text id="descAIDamaged">

				You are inside the archive's primary chamber. You attempt to connect your ship's
				computer, but all your efforts fail. It appears that the archive and the AI are
				permanently damaged.

			</Text>
			<Text id="descSubdued">

				You have subdued the AI! The AI speaks:

				"What do you wish to know?"

			</Text>
			<Text id="descNoVirusLeft">
			
				Your attempt to subdue the AI is unsuccessful. It appears the AI has 
				developed countermeasures that repel any attempt.

			</Text>
			<Text id="descNoROM">
			
				You cannot attempt to subdue the AI without a neurohack ROM.

			</Text>
			<Text id="descNoMoreAnswers">

				The AI has no more answers. It shuts itself off.

			</Text>
			<Text id="descSentinelAttack">

				The AI tells you one more thing:

				"Although you were able to defeat my countermeasures to access my information,
				you did not disable my communications channel. Now the Iocrym know that you are
				trying to break the quarantine."

			</Text>
			<Text id="descFailed">

				You have failed to subdue the AI.

			</Text>

			<String id="textQuestion:q1">"Why have the Iocrym [q]uarantined us?"</String>
			<Text id="textAnswer:q1">

				"Oracus threatens the Galaxy. The Iocrym are protecting the Galaxy from that threat.
				The first phase is to contain the threat at its point of origin. The second phase is to
				eliminate the threat."

			</Text>
			<String id="textQuestion:q1a">"What does [O]racus have to do with us?"</String>
			<Text id="textAnswer:q1a">

				"Oracus has been asleep for the last 30 million years.
				Now he wakens at the same time Humans begin their expansion into the Galaxy!
				The last war with Oracus began the same way and it nearly destroyed us."

			</Text>
			<String id="textQuestion:q1b">"What does '[e]liminate' mean?"</String>
			<Text id="textAnswer:q1b">

				"The quarantine bought us time to prepare, but it will not last forever.
				Oracus will see to that. The only solution is to sterilize the entire region.
				The Iocrym have already begun constructing stellar manipulators around the
				Gamma Crucis supergiant. When their work is complete they will induce a core collapse."

			</Text>
			<String id="textQuestion:q1b1">"How do we stop the [G]amma Crucis explosion?"</String>
			<String id="textAnswer:q1b1">

				"To reach Gamma Crucis you must break the quarantine."

			</String>
			<String id="textQuestion:q2">"How do we [b]reak the quarantine?"</String>
			<String id="textAnswer:q2">

				"Disable the control point. This data ROM will help you."

			</String>
			<String id="textQuestion:q3">"Why is [D]omina calling me to the Core?"</String>
			<String id="textAnswer:q3">

				"I do not know. But the idea to sterilize Human Space was hers."

			</String>
			<String id="textQuestion:q4">"What are our [c]hances of success?"</String>
			<Text id="textAnswer:q4">

				"The threat to the Galaxy is severe. If Oracus succeeds, there is a 72% chance the
				Ancient Races will be extinct in the next million years."

			</Text>

			<Text id="core.mapDesc">
				Alien structure
			</Text>
		</Language>
	</StationType>
<!-- Heretic05.xml -->
<!-- Heretic06.xml -->
<!-- Heretic07.xml -->
<!-- Heretic08.xml -->
<!-- Himal.xml -->
<StationType UNID="&stHimalRefuge;"
			name=				"Himal refuge"
			sovereign=			"&svHimalSeparatists;"

			attributes=			"asteroidBase, enemy, envAir, envAvoidsFire, generic, himal, human, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"78"
			fireRateAdj=		"30"
			explosionType=		"&vtKineticExplosion1;"
			ejectaType=			"&vtIceAsteroidEjecta;"
			>

		<!-- Encounter Info -->
		
		<Encounter
				systemCriteria=			"+himalSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"cuv-- ----- ----- ----- -----"

				locationCriteria=		"+outerSystem, -planetary"
				enemyExclusionRadius="50"
				/>

		<!-- Configuration -->

		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itLightPlasteelPlate;"
				hitPoints=		"40"
				regen=			"1"
				/>
		
		<Devices>
			<Device deviceID="&itBlaster;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships challenge="standard">
			<Ship			count="1"	class="&scHimalInterceptor;"	orders="patrol:15"/>
		</Ships>

		<!-- Treasure -->

		<Items>
			<Table count="1d6">
				<Item   chance="20"	count="1d6"		item="&itHelium3FuelRod;" />
				<Item   chance="20"	count="1d12"	item="&itWaterIce;" />
				<Item   chance="20"	count="1d4"		item="&itMartianNori;" />
				<Lookup chance="15" count="1"		table="&trConsumables1;"/>
				<Lookup chance="15" count="1"		table="&trMinorItem1;"/>
				<Lookup chance="10"	count="1"		table="&trMajorItem1;"/>
			</Table>
		</Items>

		<!-- Image and Effects -->

		<ImageVariants>
			<LocationCriteriaTable>
				<Image criteria="*ice"			imageID="&rsHimalRefugeIce;"			imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				<Image criteria="*metallic"		imageID="&rsHimalRefugeMetallic;"		imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				<Image criteria="*primordial"	imageID="&rsHimalRefugePrimordial;"		imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				<Image criteria="*volcanic"		imageID="&rsHimalRefugeVolcanic;"		imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				
				<Image criteria="*~"			imageID="&rsHimalRefugeRocky;"			imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"120"
				>
		</DockingPorts>

		<!-- Random Encounters -->

		<Encounters frequency="uncommon">
			<LevelTable>
				<Ship levelFrequency="ccccc ccccc" count="1"	class="&scHimalInterceptor;" eventHandler="&evStdZoneEncounterBehavior;">
					<Escorts>
						<Ship					   count="1d2"	class="&scHimalInterceptor;" orders="escort"/>
					</Escorts>
				</Ship>
			</LevelTable>
		</Encounters>

	</StationType>
<!-- HSCompatibility.xml -->
<StationType UNID="&stCargoCrate;"
			obsoleteVersion=			"37"
			name=				"abandoned cargo crate"
			sovereign=			"&svNeutral;"
			abandonedScreen=	"&dsAbandonedCrate;"

			structuralHitPoints="10"
			ejectaType=			"&vtWreckEjecta;"

			scale=				"ship"
			mobile=				"true"
			mass=				"50"
			destroyWhenEmpty=	"true"
			noMapIcon=			"true"
			>

		<ImageVariants>
			<Image			imageID="&rsStations1;" imageX="480" imageY="256" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsStations1;" imageX="480" imageY="288" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsStations1;" imageX="480" imageY="320" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsStations1;" imageX="480" imageY="352" imageWidth="32" imageHeight="32" />
		</ImageVariants>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

	</StationType>
<StationType UNID="&stNavSign;"
			obsoleteVersion=			"37"
			name=				"(navigational beacon)"
			sovereign=			"&svIndependent;"
			dockScreen=			"&dsNavSign;"
			abandonedScreen=	"&dsAbandonedNavSign;"
			noMapLabel=			"true"

			mass=				"5000"
			armorID=			"&itUltraLightTitaniumArmor;"
			hitPoints=			"10"

			sign=				"true"
			>

		<Image imageID="&rsStations1;" imageX="0" imageY="668" imageWidth="128" imageHeight="64"/>

		<DockingPorts>
			<Port x="-80"		y="0" />
		</DockingPorts>
	</StationType>
<StationType UNID="&stBattleArenaWall;"
			obsoleteVersion=			"37"
			name=				"(arena wall segment)"
			sovereign=			"&svCommonwealth;"
			attributes=			"battleArenaSegment"

			barrier=			"true"
			barrierEffect=		"&efBattleArenaWallHit;"
			multiHull=			"true"
			immutable=			"true"

			mass=				"500"
			noMapLabel=			"true"
			>

		<ImageVariants>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="0"    imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="128"  imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="256"  imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="384"  imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="512"  imageWidth="128" imageHeight="128"/>

			<Image			imageID="&rsBattleArena;" imageX="0" imageY="640"  imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="768"  imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="896"  imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="1024" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="1152" imageWidth="128" imageHeight="128"/>

			<Image			imageID="&rsBattleArena;" imageX="0" imageY="1280" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="1408" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="1536" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="1664" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="1792" imageWidth="128" imageHeight="128"/>

			<Image			imageID="&rsBattleArena;" imageX="0" imageY="1920" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="2048" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="2176" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="2304" imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArena;" imageX="0" imageY="2432" imageWidth="128" imageHeight="128"/>
			
			<Image			imageID="&rsBattleArenaExtra;" imageX="0" imageY="0"	imageWidth="164" imageHeight="164"/>
			<Image			imageID="&rsBattleArenaExtra;" imageX="0" imageY="164"	imageWidth="164" imageHeight="164"/>
			<Image			imageID="&rsBattleArenaExtra;" imageX="18" imageY="18"	imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArenaExtra;" imageX="18" imageY="182"	imageWidth="128" imageHeight="128"/>
			<Image			imageID="&rsBattleArenaExtra;" imageX="0" imageY="0"	imageWidth="0"	 imageHeight="0"/>
		</ImageVariants>

	</StationType>
<StationType UNID="&stKorolovAtCharon;"
			obsoleteVersion=			"37"
			name=				": Korolov Shipping"
			sovereign=			"&svCorporate;"
			dockScreen=			"Dispatch"
			abandonedScreen=	"Destroyed"
			dockingPorts=		"10"
			ignoreFriendlyFire=	"true"

			level=              "4"
			multiHull=			"true"
			armorID=			"&itPlasteelPlate;"
			maxHitPoints=		"630"
			hitPoints=			"250"
			regen=			    "6"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"corporate, corporateCustoms, corporateDecon, friendly, human, populated, majorStation, korolovCharon, korolovShipping"
			>

		<!-- Image and Effects -->
		
		<Image			imageID="&rsKorolovShipping;" imageWidth="292" imageHeight="364"/>

		<DockingPorts>
			<Port x="-18"	y="128" />
			<Port x="100"	y="127" />
			<Port x="156"	y="31" />
			<Port x="165"	y="-45" />
			<Port x="98"	y="-75" />
			<Port x="120"	y="-153" />

			<Port x="0"		y="-162" />
			<Port x="-90"	y="-165" />
			<Port x="-103"	y="-82" />
			<Port x="-178"	y="-46" />
			<Port x="-113"	y="43" />
			<Port x="-98"	y="122" />
		</DockingPorts>

		<Trade currency="credit">
			<Sell	criteria="*NU -illegal; -notForSale; -notStandard;"	priceAdj="100" noDescription="true"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-5;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-8;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-8;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-6" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-6;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>
		
		<Items>
			<RandomItem count="1d4" criteria="r -illegal; -military; -notForSale; -notStandard; L:3-6;"		levelFrequency="systemLevel:ru|c|curv"/>
		</Items>

		<Ships>
			<Lookup count="1d2" table="&tbCommDefenders;"/>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
			<Ship	count="3d6" class="&scRoninB;" orders="patrol" patrolDist="10"/>
		</Ships>

		<Events>
			<OnCreate>
				(block Nil
					; Create fleets of pirates to attack
					(for i 1 5
						(sysAddEncounterEventAtDist 500 gSource &etPirateAmbush3; (random 100 200))
						)

					; Under attack
					(sysAddObjTimerEvent 500 gSource "OnTimerAttack1")

					; Create drakes
					(sysAddObjTimerEvent 850 gSource "OnTimerAttack2")
					)
			</OnCreate>

			<OnDestroy>
				(block Nil
					(if (and 
							(eq (objGetData gSource "MissionStatus") "underAttack")
							(not (eq aOrderGiver gPlayerShip))
							)
						(block Nil
							(objSetData gSource "MissionStatus" "destroyed")
							(sysAddObjRecurringTimerEvent 150 gSource "OnCheckRevenge")
							)
						)
						
					(rpgDestroyItems gSource)
					)
			</OnDestroy>

			<OnObjDestroyed>
				(if (eq (objGetData gSource "MissionStatus") "underAttack")
					(block Nil
						(if (objGetData aObjDestroyed "Destroyer")
							(objIncData gSource "DestroyerCount" -1)
							)

						(if (leq (objGetData gSource "DestroyerCount") 0)
							(objSetData gSource "MissionStatus" "success")
							)
						)
					)
			</OnObjDestroyed>

			<OnTimerAttack1>
				(if (not (objIsAbandoned gSource))
					(block Nil
						(objSetData gSource "MissionStatus" "underAttack")
						)
					)
			</OnTimerAttack1>

			<OnTimerAttack2>
				(if (eq (objGetData gSource "MissionStatus") 'underAttack)
					(block (pos)
						(setq pos (sysVectorPolarOffset gSource (random 0 359) 120))

						; Create drake ships
						(for i 1 5
							(block (theShip)
								(setq theShip 
									(sysCreateShip 
											&scDrake; 
											(sysVectorPolarOffset pos (multiply i 30) 24)
											&svPirates;)
									)

								(shpOrderAttack theShip gSource)
								(shpOrderGate theShip)

								(objSetData theShip "Destroyer" True)
								(objRegisterForEvents gSource theShip)
								)
							)

						(objSetData gSource "DestroyerCount" 5)
						)
					)
			</OnTimerAttack2>

			<OnCheckRevenge>
				(block Nil
					(if (and (not (sysFindObject gSource "AT:charonFortress;"))
							(eq (count (sysFindObject gSource "AT:charonPirates;")) 0)
							)

						; Replace the destroyed korolov with new construction
						(block (newStation)
							(setq newStation (sysCreateStation &stKorolovAtCharonCons; (objGetPos gSource)))
							(objSetKnown newStation)
							(objDestroy gSource)
							(typSetGlobalData &stCharonPirateFortress; "status" 'allDestroyed)
							)
						)
					)
			</OnCheckRevenge>
		</Events>

		<DockScreens>
			<Dispatch
				name=			"Korolov Shipping"
				>

				<InitialPane>
					(block (missionStatus)
						(setq missionStatus (objGetData gSource "MissionStatus"))

						(switch
							(and (eq missionStatus 'success)
									(sysFindObject gSource "AT:charonPirates;"))
								"DestroyFortressMission"

							(and (eq missionStatus 'attackPlan)
									(not (sysFindObject gSource "AT:charonPirates;")))
								"DestroyFortressSuccess"

							"Default"
							)
						)
				</InitialPane>

				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDesc gScreen (typTranslate &stKorolovShipping; 'descWelcome))
						</OnPaneInit>

						<Actions>
							<Action name="Escort Freighter" default="1" key="E">
								(block (missionStatus)
									(setq missionStatus (objGetData gSource "MissionStatus"))
									(switch
										(eq missionStatus 'success)
											(scrShowPane gScreen "MissionOver")

										(eq missionStatus 'attackPlan)
											(scrShowPane gScreen "DestroyFortressInProgress")

										(eq missionStatus 'fortressDestroyed)
											(scrShowPane gScreen "MissionOver")

										(eq missionStatus 'underAttack)
											(scrShowPane gScreen "UnderAttack")

										(leq (typGetData &unidKorolovShipping; 'xp) 0)
											(scrShowPane gScreen "CantUseCommandCenter")

										(scrShowPane gScreen "Defend")
										)
									)
							</Action>

							<Action name="Dock Services" key="D">
								(block (xp)
									(setq xp (typGetData &unidKorolovShipping; 'xp))
									(if (leq xp 0)
										(scrShowPane gScreen "CantUseDockServices")
										
										(rpgDockServices gPlayerShip)
										)
									)
							</Action>

							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>

						</Actions>

					</Default>

					<CantUseCommandCenter
							desc=	"Sorry, only experienced pilots are allowed to escort freighters.">

						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</CantUseCommandCenter>

					<CantUseDockServices
							desc=	"The dock services area is restricted to members only.">

						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>

					</CantUseDockServices>

					<Defend
							desc=	"As you enter the command center, you see several people gathered around a central display table.&#x0a;&#x0a;A woman approaches you, &quot;We're planning a big attack on the Charon fortress in this system and we could use all the help we can get. Are you...&quot;">

						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								<ShowPane pane="Defend2"/>
							</Action>
						</Actions>

					</Defend>

					<Defend2
							desc=	"Before she can finish, the alarms bleat and she turns back to the display table.&#x0a;&#x0a;Her face goes white as she sees the mass of signals approaching the stations...">

						<Actions>
							<Action name="Leave" default="1" cancel="1" key="L">
								(block Nil
									(if (not (objGetData gSource "MissionStatus"))
										(objSetData gSource "MissionStatus" "underAttack")
										)
									(scrExitDock gScreen)
									)
							</Action>
						</Actions>

					</Defend2>

					<MissionOver
							desc=	"After a violent pirate attack, the command center is nearly ruined.&#x0a;&#x0a;&quot;Sorry, no freighters are looking for escorts right now.&quot;">

						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>

					</MissionOver>

					<UnderAttack
							desc=	"The command center is filled with men and women shouting orders and counter-orders. The constant drone of sirens is punctuated frequently by concussive blow of explosions.&#x0a;&#x0a;A woman shouts at you, &quot;Get out of here and make yourself useful!&quot;">

						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>

					</UnderAttack>

					<DestroyFortressMission>
						<OnPaneInit>
							(scrSetDesc gScreen (cat "The command center is smashed. Some people are caring for the injured while others look at the tactical screens. A woman approaches you:\n\n"
								"\"Thanks for your help! We were lucky that you were in the area. Now we need you to strike while we have the initiative. Destroy all the Charon stations in the system!\""
								))
						</OnPaneInit>

						<Actions>
							<Action name="Continue" key="C" default="1" cancel="1">
								(block Nil
									(objSetData gSource "MissionStatus" 'attackPlan)
									(scrExitDock gScreen)
									)
							</Action>
						</Actions>
					</DestroyFortressMission>

					<DestroyFortressInProgress>
						<OnPaneInit>
							(block (pirateStationsLeft)
								(setq pirateStationsLeft (count (sysFindObject gSource "AT:charonPirates; -charonFortress;")))
								(setq fortress (sysFindObject gSource "AT:charonFortress;"))

								(scrSetDesc gScreen (cat
									"The command center is nearly ruined, but several people are tracking the tactical situation:\n\n"
									(switch
										(and (not fortress) (eq pirateStationsLeft 1))
											"\"There is still one Charon station left in the system. Destroy it and you'll be done!\""

										(not fortress)
											(cat "\"Although the Charon Fortress has been destroyed there are still " (strNumber pirateStationsLeft) " Charon stations in the system.\"")

										(eq pirateStationsLeft 1)
											"\"There are two Charon stations still active in the system: the Fortress of the Charon Pirates and another lesser Charon station.\""

										(cat "\"There are " (strNumber pirateStationsLeft) " Charon pirate stations left, in addition to the Fortress of the Charon Pirates.\"")
										)
									))
								)
						</OnPaneInit>

						<Actions>
							<Action name="Continue" key="C" default="1" cancel="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</DestroyFortressInProgress>

					<DestroyFortressSuccess>
						<OnPaneInit>
							(block (roll)
								(setq roll (random 1 100))
								(switch
									(leq roll 30)
										(setq gItem (itmCreate &itXRayLaserCannon; 1))

									(leq roll 60)
										(setq gItem (itmCreate &itOmniParticleCannon; 1))

									(leq roll 80)
										(setq gItem (itmCreate &itMarkIHowitzer; 1))

									(setq gItem (itmCreate &itClass5Deflector; 1))
									)

								(scrSetDesc gScreen (cat "Everyone cheers as you enter.\n\n"
									"\"We don't have much in the way of rewards, but it would be our honor if you would accept "
									(itmGetName gItem 0x040)
									". The Charon pirates will no longer threaten the Commonwealth, and we owe it all to you!\""
									))
								)
						</OnPaneInit>

						<Actions>
							<Action name="Continue" key="C" default="1" cancel="1">
								(block Nil
									(objAddItem gPlayerShip gItem)
									(objSetData gSource "MissionStatus" 'fortressDestroyed)
									(scrShowPane gScreen "Default")
									)
							</Action>
						</Actions>
					</DestroyFortressSuccess>
				</Panes>

			</Dispatch>

			<Destroyed
				name=			"Korolov Shipping"
				>

				<OnScreenInit>
					(if (not (eq (objGetData gSource "MissionStatus") "destroyed"))
						(scrShowScreen gScreen "&dsRPGAbandonedStation;")
						)
				</OnScreenInit>

				<Panes>
					<Default
							desc=	"You are docked at the lifeless ruins of a destroyed station. Amid wrecked machinery and smoldering bodies you find a woman who is still alive.&#x0a;&#x0a;She grabs your hand, &quot;Avenge us...the Fortress is in the system...kill them all...&quot;">

						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								(block Nil
									(setq gItem (itmCreate &itCharonPirateMapROM; 1))
									(objAddItem gPlayerShip gItem)

									(objSetData gSource "MissionStatus" "revenge")
									(scrShowPane gScreen "Map")
									)
							</Action>
						</Actions>
					</Default>

					<Map>
						<OnPaneInit>
							(scrSetDesc gScreen
								(cat "As her lifeless hand releases yours, she drops " (itmGetName gItem 0x08) ".\n\nYou take the ROM with you, hoping that it will contain some useful information.")
								)
						</OnPaneInit>

						<Actions>
							<Action name="Undock" default="1" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Map>
				</Panes>
			</Destroyed>

		</DockScreens>

		<Language>
			<Text id="core.mapDescMain">
				"Hires freighter escorts"
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stDantalionSettlement;"
			obsoleteVersion=			"38"
			name=				"Commonwealth settlement"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, fleetDelivery, friendly, human, majorStation, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			size=				"390"
			armorID=			"&itP120HexphaseArmor;"
			hitPoints=			"740"
			multiHull=			"true"
			regen=			    "15"
			shipRegen=			"6"
				 
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			fireRateAdj=		"80"

			enemyExclusionRadius="40"
			>

		<Names noArticle="true">Commonwealth Settlement %1%0%0%0</Names>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; -premiumAmmo; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"	priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-7;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-8;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-8;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>

		<Items>
			<RandomItem count="10" 
					criteria=		"ad L:1-8; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:u|c|crv"
					/>
			<RandomItem count="10" 
					criteria=		"*~ad -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>

			<Item count="4d12"	item="&itPteracniumFuelRod;" />
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true"/>
		</Devices>

		<!-- Satellites -->
		
		<Satellites overlapCheck="asteroids">
			<Orbitals distance="12" angle="45">
				<Station type="&stCommonwealthTurret;" imageVariant="2"/>
			</Orbitals>

			<Orbitals distance="12" angle="135">
				<Station type="&stCommonwealthTurret;" imageVariant="1"/>
			</Orbitals>

			<Orbitals distance="12" angle="225">
				<Station type="&stCommonwealthTurret;" imageVariant="0"/>
			</Orbitals>

			<Orbitals distance="12" angle="315">
				<Station type="&stCommonwealthTurret;" imageVariant="3"/>
			</Orbitals>
		</Satellites>

		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="2" table="&tbCommDefenders;"/>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Lookup chance="75" table="&tbCommDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->
		
		<Image imageID="&rsCommonwealthSettlement;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default
							desc=	"You are in the docking bay of a Commonwealth settlement. Except for a few shuttles, the docking bay of this station is deserted. A loose hose is spilling dirty water onto the landing pad; elsewhere, an automatic load-lifter moves forward and back again as it unloads a ship's cargo hold. The air smells of liquid fuel and exhaust.">

						<Actions>
							<Action name="Meeting Hall" key="M" default="1">
								<ShowPane pane="MeetingHall"/>
							</Action>

							<Action name="Commodities Exchange" key="C">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action name="Dock Services" key="D">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>

						</Actions>

					</Default>

					<MeetingHall>
						<OnPaneInit>
							(block (desc)
								(switch
									; Antarctica not yet encountered
									(not (typGetGlobalData &scCSCTerra; "antarctica"))
										(setq desc (cat "The Meeting Hall is filled with worried-looking residents. Many are talking amongst themselves in low voices. The station master is addressing the group from the front of the hall:\n\n"
												"\"Once again, I urge everyone to remain calm! We have no reason to believe that the Antarctica will approach this settlement. The Fleet has been informed of the sighting, but we do not know when or if they will arrive.\""
												)
											)

									; Antarctica escaped
									(eq (typGetGlobalData &scCSCTerra; "antarctica") "escaped")
										(setq desc (cat "The Meeting Hall is filled with people. Most look happy and are talking amongst themselves. The station master addresses the crowd:\n\n"
												"\"Our latest information is that the Antarctica has left the system. We believe that it is heading for St. Katharine's, where the Fleet will no doubt deal with her.\""
												)
											)

									; Antarctica destroyed
									(setq desc (cat "The Meeting Hall is filled with people. Most look happy and are talking amongst themselves. The station master addresses the crowd:\n\n"
											"\"Our latest information is that the Antarctica was destroyed. We don't have any more information at this point, but we believe that the danger is over.\""
											)
										)
									)

								(scrSetDesc gScreen desc)
								)
						</OnPaneInit>

						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								(switch
									(and (not (typGetGlobalData &scCSCTerra; "antarctica"))
											(not (typGetGlobalData &scCSCAntarctica; "status"))
											(not (eq (objGetData gSource "informant") 'paid))
											)
										(scrShowPane gScreen "Informant")

									(scrShowPane gScreen "Default")
									)
							</Action>
						</Actions>
					</MeetingHall>

					<Informant>
						<OnPaneInit>
							(switch
								(not (objGetData gSource "informant"))
									(scrSetDesc gScreen "A woman wearing a ragged Fleet jacket with torn patches stops you as you leave.\n\n\"I know where the Antarctica is. It will cost you 10,000 rin if you want to know too.\"")

								(scrSetDesc gScreen "The woman wearing the ragged Fleet jacket stops you again.\n\n\"I know you're still looking for the Antarctica. For 10,000 rin I will tell you her location.\"")
								)
						</OnPaneInit>

						<Actions>
							<Action name="&quot;OK, you have a deal.&quot;" key="O">
								(block Nil
									(objSetData gSource "informant" 'offered)
									(switch
										(ls (objGetBalance gPlayerShip 'rin) 10000)
											(scrShowPane gScreen "NotEnoughRin")

										(scrShowPane gScreen "Informant2")
										)
									)
							</Action>

							<Action name="&quot;No thanks, I'll find her myself.&quot;" key="N" cancel="1">
								(block Nil
									(objSetData gSource "informant" 'offered)
									(scrShowPane gScreen "Default")
									)
							</Action>
						</Actions>
					</Informant>

					<Informant2>
						<OnPaneInit>
							(scrSetDesc gScreen "You transfer 10,000 rin to the woman's account. When she is satisfied, she takes your arm and whispers the coordinates in your ear. You memorize them and enter them into your computer.")
						</OnPaneInit>

						<Actions>
							<Action name="Continue" key="C" default="1" cancel="1">
								(block (theAntarctica)
									(objSetData gSource "informant" 'paid)
									(objCharge gPlayerShip 'rin 10000)

									(enum (sysFindObject gSource "s D:CSC;") theObj
										(if (eq (objGetData theObj "CSC") 'antarctica)
											(setq theAntarctica theObj)
											)
										)

									(if theAntarctica
										(block Nil
											(shpCancelOrders gPlayerShip)
											(shpOrder gPlayerShip 'attack theAntarctica)
											(objSetIdentified theAntarctica)
											)
										)

									(scrShowPane gScreen "Default")
									)
							</Action>
						</Actions>
					</Informant2>

					<NotEnoughRin>
						<OnPaneInit>
							(scrSetDesc gScreen 
								(cat "Unfortunately, you "
									(switch
										(eq (objGetBalance gPlayerShip 'rin) 0)
											"do not have any rin."
										(eq (objGetBalance gPlayerShip 'rin) 1)
											"only have a single rin."
										(cat "only have " (objGetBalance gPlayerShip 'rin) " rin.")
										)
									"\n\nThe woman smiles at you and says, \"Come back when you have something to deal with.\""
									)
								)
						</OnPaneInit>

						<Actions>
							<Action name="Continue" key="C" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</NotEnoughRin>
				</Panes>
			</Main>

		</DockScreens>

		<!-- Events and Data -->
		
		<StaticData>
			<NPCService>
				(	;	service					level	margin
					(	'repairArmor			8		100		)
					)
			</NPCService>
		</StaticData>
	</StationType>
<StationTypeDantalionSettlement;"
			obsoleteVersion=			"38"
			name=				"Commonwealth settlement"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, fleetDelivery, friendly, human, majorStation, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			size=				"390"
			armorID=			"&itP120HexphaseArmor;"
			hitPoints=			"740"
			multiHull=			"true"
			regen=			    "15"
			shipRegen=			"6"
				 
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			fireRateAdj=		"80"

			enemyExclusionRadius="40"
			>

		<Names noArticle="true">Commonwealth Settlement %1%0%0%0</Names>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; -premiumAmmo; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"	priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-7;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-8;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-8;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>

		<Items>
			<RandomItem count="10" 
					criteria=		"ad L:1-8; -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:u|c|crv"
					/>
			<RandomItem count="10" 
					criteria=		"*~ad -Illegal; -Military; -Alien; -Specialty; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>

			<Item count="4d12"	item="&itPteracniumFuelRod;" />
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true"/>
		</Devices>

		<!-- Satellites -->
		
		<Satellites overlapCheck="asteroids">
			<Orbitals distance="12" angle="45">
				<Station type="&stCommonwealthTurret;" imageVariant="2"/>
			</Orbitals>

			<Orbitals distance="12" angle="135">
				<Station type="&stCommonwealthTurret;" imageVariant="1"/>
			</Orbitals>

			<Orbitals distance="12" angle="225">
				<Station type="&stCommonwealthTurret;" imageVariant="0"/>
			</Orbitals>

			<Orbitals distance="12" angle="315">
				<Station type="&stCommonwealthTurret;" imageVariant="3"/>
			</Orbitals>
		</Satellites>

		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="2" table="&tbCommDefenders;"/>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Lookup chance="75" table="&tbCommDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->
		
		<Image imageID="&rsCommonwealthSettlement;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default
							desc=	"You are in the docking bay of a Commonwealth settlement. Except for a few shuttles, the docking bay of this station is deserted. A loose hose is spilling dirty water onto the landing pad; elsewhere, an automatic load-lifter moves forward and back again as it unloads a ship's cargo hold. The air smells of liquid fuel and exhaust.">

						<Actions>
							<Action name="Meeting Hall" key="M" default="1">
								<ShowPane pane="MeetingHall"/>
							</Action>

							<Action name="Commodities Exchange" key="C">
								(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
							</Action>

							<Action name="Dock Services" key="D">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>

						</Actions>

					</Default>

					<MeetingHall>
						<OnPaneInit>
							(block (desc)
								(switch
									; Antarctica not yet encountered
									(not (typGetGlobalData &scCSCTerra; "antarctica"))
										(setq desc (cat "The Meeting Hall is filled with worried-looking residents. Many are talking amongst themselves in low voices. The station master is addressing the group from the front of the hall:\n\n"
												"\"Once again, I urge everyone to remain calm! We have no reason to believe that the Antarctica will approach this settlement. The Fleet has been informed of the sighting, but we do not know when or if they will arrive.\""
												)
											)

									; Antarctica escaped
									(eq (typGetGlobalData &scCSCTerra; "antarctica") "escaped")
										(setq desc (cat "The Meeting Hall is filled with people. Most look happy and are talking amongst themselves. The station master addresses the crowd:\n\n"
												"\"Our latest information is that the Antarctica has left the system. We believe that it is heading for St. Katharine's, where the Fleet will no doubt deal with her.\""
												)
											)

									; Antarctica destroyed
									(setq desc (cat "The Meeting Hall is filled with people. Most look happy and are talking amongst themselves. The station master addresses the crowd:\n\n"
											"\"Our latest information is that the Antarctica was destroyed. We don't have any more information at this point, but we believe that the danger is over.\""
											)
										)
									)

								(scrSetDesc gScreen desc)
								)
						</OnPaneInit>

						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								(switch
									(and (not (typGetGlobalData &scCSCTerra; "antarctica"))
											(not (typGetGlobalData &scCSCAntarctica; "status"))
											(not (eq (objGetData gSource "informant") 'paid))
											)
										(scrShowPane gScreen "Informant")

									(scrShowPane gScreen "Default")
									)
							</Action>
						</Actions>
					</MeetingHall>

					<Informant>
						<OnPaneInit>
							(switch
								(not (objGetData gSource "informant"))
									(scrSetDesc gScreen "A woman wearing a ragged Fleet jacket with torn patches stops you as you leave.\n\n\"I know where the Antarctica is. It will cost you 10,000 rin if you want to know too.\"")

								(scrSetDesc gScreen "The woman wearing the ragged Fleet jacket stops you again.\n\n\"I know you're still looking for the Antarctica. For 10,000 rin I will tell you her location.\"")
								)
						</OnPaneInit>

						<Actions>
							<Action name="&quot;OK, you have a deal.&quot;" key="O">
								(block Nil
									(objSetData gSource "informant" 'offered)
									(switch
										(ls (objGetBalance gPlayerShip 'rin) 10000)
											(scrShowPane gScreen "NotEnoughRin")

										(scrShowPane gScreen "Informant2")
										)
									)
							</Action>

							<Action name="&quot;No thanks, I'll find her myself.&quot;" key="N" cancel="1">
								(block Nil
									(objSetData gSource "informant" 'offered)
									(scrShowPane gScreen "Default")
									)
							</Action>
						</Actions>
					</Informant>

					<Informant2>
						<OnPaneInit>
							(scrSetDesc gScreen "You transfer 10,000 rin to the woman's account. When she is satisfied, she takes your arm and whispers the coordinates in your ear. You memorize them and enter them into your computer.")
						</OnPaneInit>

						<Actions>
							<Action name="Continue" key="C" default="1" cancel="1">
								(block (theAntarctica)
									(objSetData gSource "informant" 'paid)
									(objCharge gPlayerShip 'rin 10000)

									(enum (sysFindObject gSource "s D:CSC;") theObj
										(if (eq (objGetData theObj "CSC") 'antarctica)
											(setq theAntarctica theObj)
											)
										)

									(if theAntarctica
										(block Nil
											(shpCancelOrders gPlayerShip)
											(shpOrder gPlayerShip 'attack theAntarctica)
											(objSetIdentified theAntarctica)
											)
										)

									(scrShowPane gScreen "Default")
									)
							</Action>
						</Actions>
					</Informant2>

					<NotEnoughRin>
						<OnPaneInit>
							(scrSetDesc gScreen 
								(cat "Unfortunately, you "
									(switch
										(eq (objGetBalance gPlayerShip 'rin) 0)
											"do not have any rin."
										(eq (objGetBalance gPlayerShip 'rin) 1)
											"only have a single rin."
										(cat "only have " (objGetBalance gPlayerShip 'rin) " rin.")
										)
									"\n\nThe woman smiles at you and says, \"Come back when you have something to deal with.\""
									)
								)
						</OnPaneInit>

						<Actions>
							<Action name="Continue" key="C" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</NotEnoughRin>
				</Panes>
			</Main>

		</DockScreens>

		<!-- Events and Data -->
		
		<StaticData>
			<NPCService>
				(	;	service					level	margin
					(	'repairArmor			8		100		)
					)
			</NPCService>
		</StaticData>
	</StationType>

	<!-- CSC America Encounter (DEPRECATED) -->

	<EncounterType UNID="&stCSCAmericaEncounter;"
			obsoleteVersion=			"37"
			name=				"(CSC America)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCTaskForce;" orders="hold">

				<Names definiteArticle="true">CSC America</Names>

				<InitialData>
					<CSC>"america"</CSC>
				</InitialData>

				<Escorts>
					<Ship					count="1"	class="&scCenturion;"	orders="guard" controller="fleetcommand">
						<Escorts>
							<Ship     count="6"	class="&scCenturion;"	orders="escort" controller="fleet"/>
						</Escorts>
					</Ship>
					<Ship					count="1"	class="&scCenturion;"	orders="guard" controller="fleetcommand">
						<Escorts>
							<Ship     count="6"	class="&scCenturion;"	orders="escort" controller="fleet"/>
						</Escorts>
					</Ship>
				</Escorts>
			</Ship>
		</Ships>

	</EncounterType>

	<!-- CSC Atlantica Encounter (DEPRECATED) -->

	<EncounterType </StationType>
<StationTypeCSCAmericaEncounter;"
			obsoleteVersion=			"37"
			name=				"(CSC America)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCTaskForce;" orders="hold">

				<Names definiteArticle="true">CSC America</Names>

				<InitialData>
					<CSC>"america"</CSC>
				</InitialData>

				<Escorts>
					<Ship					count="1"	class="&scCenturion;"	orders="guard" controller="fleetcommand">
						<Escorts>
							<Ship     count="6"	class="&scCenturion;"	orders="escort" controller="fleet"/>
						</Escorts>
					</Ship>
					<Ship					count="1"	class="&scCenturion;"	orders="guard" controller="fleetcommand">
						<Escorts>
							<Ship     count="6"	class="&scCenturion;"	orders="escort" controller="fleet"/>
						</Escorts>
					</Ship>
				</Escorts>
			</Ship>
		</Ships>

	</EncounterType>

	<!-- CSC Atlantica Encounter (DEPRECATED) -->

	<EncounterType UNID="&stCSCAtlanticaEncounter;"
			obsoleteVersion=			"37"
			name=				"(CSC Atlantica)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCTaskForce;" orders="hold">

				<Names definiteArticle="true">CSC Atlantica</Names>

				<InitialData>
					<CSC>"atlantica"</CSC>
				</InitialData>

				<Escorts>
					<Ship     count="2d6"	class="&scCenturion;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>

	</EncounterType>

	<!-- CSC Asia Encounter (DEPRECATED) -->

	<EncounterType </StationType>
<StationTypeCSCAtlanticaEncounter;"
			obsoleteVersion=			"37"
			name=				"(CSC Atlantica)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCTaskForce;" orders="hold">

				<Names definiteArticle="true">CSC Atlantica</Names>

				<InitialData>
					<CSC>"atlantica"</CSC>
				</InitialData>

				<Escorts>
					<Ship     count="2d6"	class="&scCenturion;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>

	</EncounterType>

	<!-- CSC Asia Encounter (DEPRECATED) -->

	<EncounterType UNID="&stCSCAsiaEncounter;"
			obsoleteVersion=			"37"
			name=				"(CSC Asia)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCTaskForce;" orders="hold">

				<Names definiteArticle="true">CSC Asia</Names>

				<InitialData>
					<CSC>"asia"</CSC>
				</InitialData>

				<Escorts>
					<Ship     count="2d6"	class="&scCenturion;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>

	</EncounterType>

	<!-- CSC India Encounter (DEPRECATED) -->

	<EncounterType </StationType>
<StationTypeCSCAsiaEncounter;"
			obsoleteVersion=			"37"
			name=				"(CSC Asia)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCTaskForce;" orders="hold">

				<Names definiteArticle="true">CSC Asia</Names>

				<InitialData>
					<CSC>"asia"</CSC>
				</InitialData>

				<Escorts>
					<Ship     count="2d6"	class="&scCenturion;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>

	</EncounterType>

	<!-- CSC India Encounter (DEPRECATED) -->

	<EncounterType UNID="&stCSCIndiaEncounter;"
			obsoleteVersion=			"37"
			name=				"(CSC India)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCTaskForce;" orders="hold">

				<Names definiteArticle="true">CSC India</Names>

				<InitialData>
					<CSC>"india"</CSC>
				</InitialData>

				<Escorts>
					<Ship     count="2d6"	class="&scCenturion;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>

	</EncounterType>

	<!-- CSC Pacifica Encounter (DEPRECATED) -->

	<EncounterType </StationType>
<StationTypeCSCIndiaEncounter;"
			obsoleteVersion=			"37"
			name=				"(CSC India)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCTaskForce;" orders="hold">

				<Names definiteArticle="true">CSC India</Names>

				<InitialData>
					<CSC>"india"</CSC>
				</InitialData>

				<Escorts>
					<Ship     count="2d6"	class="&scCenturion;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>

	</EncounterType>

	<!-- CSC Pacifica Encounter (DEPRECATED) -->

	<EncounterType UNID="&stCSCPacificaEncounter;"
			obsoleteVersion=			"37"
			name=				"(CSC Pacifica)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCTaskForce;" orders="hold">

				<Names definiteArticle="true">CSC Pacifica</Names>

				<InitialData>
					<CSC>"pacifica"</CSC>
				</InitialData>

				<Escorts>
					<Ship     count="2d6"	class="&scCenturion;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>

	</EncounterType>

	<!-- CSC Antarctica Encounter (DEPRECATED) -->

	<EncounterType </StationType>
<StationTypeCSCPacificaEncounter;"
			obsoleteVersion=			"37"
			name=				"(CSC Pacifica)"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"fleet,friendly,envAir,envEarth,envFire,envWater"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCTaskForce;" orders="hold">

				<Names definiteArticle="true">CSC Pacifica</Names>

				<InitialData>
					<CSC>"pacifica"</CSC>
				</InitialData>

				<Escorts>
					<Ship     count="2d6"	class="&scCenturion;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>

	</EncounterType>

	<!-- CSC Antarctica Encounter (DEPRECATED) -->

	<EncounterType UNID="&stCSCAntarcticaEncounter;"
			obsoleteVersion=			"38"
			name=				"(CSC Antarctica)"
			sovereign=			"&svCSCAntarctica;"

			level=				"9"
			attributes=			"fleet,friendly,primary,envAir,envEarth,envFire,envWater"
			maxAppearing=		"1"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCAntarctica;" orders="hold">
				<Names definiteArticle="true">CSC Antarctica</Names>
				
				<InitialData>
					<CSC>"antarctica"</CSC>
				</InitialData>
			</Ship>
		</Ships>
	</EncounterType>

	<!-- Svalbard Explorer Encounter (DEPRECATED) -->

	<EncounterType </StationType>
<StationTypeCSCAntarcticaEncounter;"
			obsoleteVersion=			"38"
			name=				"(CSC Antarctica)"
			sovereign=			"&svCSCAntarctica;"

			level=				"9"
			attributes=			"fleet,friendly,primary,envAir,envEarth,envFire,envWater"
			maxAppearing=		"1"
			>

		<Ships>
			<Ship	count="1"	class="&scCSCAntarctica;" orders="hold">
				<Names definiteArticle="true">CSC Antarctica</Names>
				
				<InitialData>
					<CSC>"antarctica"</CSC>
				</InitialData>
			</Ship>
		</Ships>
	</EncounterType>

	<!-- Svalbard Explorer Encounter (DEPRECATED) -->

	<EncounterType UNID="&stSvalbardEncounter;"
			obsoleteVersion=			"39"
			name=				"(Svalbard Explorer)"
			sovereign=			"&svCorporate;"

			level=				"10"
			attributes=			"friendly"
			maxAppearing=		"1"
			>

		<Ships>
			<Ship	count="1"	class="&scSvalbardExplorer;" orders="hold"/>
		</Ships>
	</EncounterType>

	<!-- Sister Maryam's Archive (moved to StarsOfThePilgrim in 1.8) -->

	<StationType </StationType>
<StationType UNID="&stMaryamsArchiveObsolete;"
			obsoleteVersion="39">
	</StationType>
<StationType UNID="&stBlackMarketRigelAurelius;"
			obsoleteVersion=			"40"
			name=				"Black Market station"
			sovereign=			"&svBlackMarket;"
			inherit=			"&baBlackMarketStation;"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"320"
			regen=			    "1.6"
			fireRateAdj=		"20"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"blackMarket, friendly, human, katamiRescue, majorStation, outlaws, populated"
			>

		<Image			imageID="&rsStations3;" imageX="128" imageY="0" imageWidth="128" imageHeight="128"/>

		<Ships>
			<Ship	count="1"	class="&scMolotok;" orders="guard"/>

			<Table count="1d4">
				<Ship chance="25"  count="1" class="&scZulu-II;" orders="gateOnThreat"/>
				<Ship chance="15"  count="1" class="&scOromo;" orders="gateOnThreat"/>
				<Ship chance="15"  count="1" class="&scWolfen;" orders="gateOnThreat"/>
				<Ship chance="30" count="1" class="&scEI500;" orders="gateOnThreat"/>
				<Ship chance="15"  count="1" class="&scT31ArmedTransport;" orders="gateOnThreat">
					<Items>
						<Item					count="8d20" item="&itSmartCannonShell;"/>
						<Lookup	chance="50"		count="1d3-1" table="&trIllegalItems2;"/>
						<Table chance="50">
							<Lookup chance="40" count="1" table="&trConsumables2;"/>
							<Lookup chance="40" count="1" table="&trMinorItem2;"/>
							<Lookup chance="20" count="1" table="&trMajorItem2;"/>
						</Table>
					</Items>
				</Ship>
			</Table>
		</Ships>

		<Devices>
			<Device deviceID="&itSlamCannon;"	omnidirectional="true" posAngle="45"  posRadius="60"/>
			<Device deviceID="&itSlamCannon;"	omnidirectional="true" posAngle="215" posRadius="60"/>
		</Devices>

		<Trade currency="credit">
			<Sell	criteria="m +illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="100" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="m +military; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="100" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU +Illegal; -ID; -NotForSale;"	priceAdj="110"/>
			<Sell	criteria="*NU -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="*NU +Illegal; -ID; -NotForSale;"	priceAdj="85"/>
			<Buy	criteria="*NU +military; -ID -NotForSale;"		priceAdj="90"/>
			<Buy	criteria="*NU +Illegal; -ID;"				priceAdj="10"/>
			<Buy	criteria="*NU +military; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-6;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-6;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-6;" priceAdj="100"/>
			<InstallDevice	criteria="c +Illegal; L:1-8" priceAdj="100"	upgradeInstallOnly="true"/>
			<RemoveDevice	criteria="c L:1-8;" priceAdj="100" upgradeInstallOnly="true"/>
			
			<InstallDevice	criteria="d L:1-8;" priceAdj="unavailable"	messageID="descNoInstall"/>
		</Trade>
		
		<Items>
			<RandomItem count="1d4"
					criteria=		"c L:1-8; +illegal; -notForSale; -notStandard;"
					levelFrequency=	"systemLevel:rrrru|c|cur"
					/>
			<RandomItem count="6d12" 
					criteria=		"t +consumerGood; +illegal;"
					levelFrequency=	"systemLevel:ruc|c|cur"
					/>
			<RandomItem count="4d4" 
					criteria=		"* +illegal; -consumerGood; -id;"
					levelFrequency=	"systemLevel:ruc|c|cur"
					/>
		</Items>

		<!-- Events and Data -->
		
		<StaticData>
			<Data id="blackMarket.deployBountyHunters">True</Data>
			
			<Data id="blackMarket.destroyPenalty">250000</Data>
			<Data id="blackMarket.destroyBountyHunters">(random 1 3)</Data>
		</StaticData>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionTalk">
								(block Nil
									(setq gPrevScreen "Main")
									(scrShowScreen gScreen "Boss")
									)
							</Action>

							<Action id="actionBuyItems" default="1">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionSellItems">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeSell;)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>

			<Boss>
				<Panes>
					<Default descID="descNoBoss">
						<Actions>
							<Action name="Continue" default="1" cancel="1" key="C">
								(scrShowScreen gScreen "Main")
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Boss>

		</DockScreens>

		<DockingPorts>
			<Port x="0"		y="90" />
			<Port x="0"		y="-90" />
			<Port x="60"	y="60" />
			<Port x="60"	y="-60" />
			<Port x="90"	y="0" />
			
			<Port x="-90"	y="0" />
			<Port x="-60"	y="60" />
			<Port x="-60"	y="-60" />
		</DockingPorts>

		<Language>
			<Text id="descNoInstall">
				We only install smuggler's equipment. We cannot install %itemName% on your ship.
			</Text>
			<Text id="dockServices:installAbility">
				We install smuggler's equipment up to tech level %maxLevel%.
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stBeringStation;"
			obsoleteVersion=	"45"
			name=				": Commonwealth residentials|Commonwealth residentials"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"
				 
			attributes=			"commonwealth, commonwealthCustoms, friendly, human, populated"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			size=				"390"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"320"
			regen=				"6"
			multiHull=			"true"
				 
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>
		
		<Trade currency="credit">
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>
		
		<!-- Ships and Defenses -->

		<Ships>
			<Lookup table="&tbCommDefenders;"/>
			<Lookup count="1d4+1" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<!-- Image and Effects -->
		
		<Image imageID="&rsCommonwealthResidentials;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->
		
		<Language>
			<Text id="descWelcome">
				Welcome to Commonwealth Residentials.
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stAbbasidOutpostCompatible;"
			obsoleteVersion=	"48"
			name=				"Abbasid outpost"
			sovereign=			"&svAbbasid;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itLightTitaniumArmor;"
			hitPoints=			"90"
			regen=				"1"
			fireRateAdj=		"40"
			explosionType=		"&vtBlastExplosion1;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, envFire, envAvoidsWater, human, populated"
			>

		<!-- Encounter Info -->

		<Image			imageID="&rsStations1;" imageX="256" imageY="512" imageWidth="128" imageHeight="128"/>

		<Devices>
			<Device deviceID="&itLaserArray;"	omnidirectional="true"/>
		</Devices>

		<Items>
			<Item chance="10"	count="1"		item="&itAbbasidThanogram;" />

			<Item chance="60"	count="1d12"	item="&itHelium3FuelRod;" />
			<Item chance="20"	count="1d12"	item="&itWaterIce;" />
			<Item chance="30"	count="1d12"	item="&itFrozenSupplies;" />
			<Table chance="30">
				<Lookup chance="20" count="1" table="&trConsumables2;"/>
				<Lookup chance="20" count="1" table="&trMinorItem2;"/>
				<Lookup chance="10" count="1" table="&trMajorItem2;"/>
				<Item   chance="50" count="1" item="&itLaserArray;" />
			</Table>
		</Items>

		<Satellites>
			<Orbitals count="1d4" distance="2d8+6" angle="random">
				<Station type="&stShipwreck1;">
					<InitialData>
						<!-- We don't want salvagers to take this loot (technically because
							they don't want to get close to the outpost, but game-wise 
							because we want players to get this loot). -->

						<Data id="core.noSalvage">True</Data>
					</InitialData>
				</Station>
			</Orbitals>
		</Satellites>
	</StationType>
<StationType UNID="&stStKatsArcologyOld;"
			obsoleteVersion=	"49"
			name=				"Arcology of New Victoria"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"

			virtual=			"true"
			definiteArticle=	"true"
			
			level=              "7"
			size=				"5000"
			attributes=			"commonwealthCustoms, dockObj, human, majorStation, stKatsArcology"
			>

		<Properties>
			<Constant		id="rpg.checkMilitaryID">"* +militaryID;"</Constant>
			<Constant		id="rpg.checkRadioactive">True</Constant>
			<Constant		id="rpg.showActualItem">True</Constant>
			<Constant		id="rpg.shipBrokerCriteria">"s +systemLevel:0-2; +commonwealth; -notStandard; +shipBroker;"</Constant>
			<DynamicData	id="rpg.shipBrokerInventory">(rpgGetShipInventory gSource)</DynamicData>
		</Properties>

		<Items>
			<RandomItem count="8d10" 
					criteria=		"ad~r L:1-7; -alien; -illegal; -military; -notForSale; -notStandard; -specialty;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="1d6" 
					criteria=		"r L:3-7; -alien; -illegal; -military; -notForSale; -notStandard;"	
					levelFrequency="systemLevel:ru|c|curv"
					/>
			
			<RandomItem count="20" 
					criteria=		"*~ad -alien; -illegal; -military; -notForSale; -notStandard; -specialty;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>
					
			<Item count="1d20" item="&itIncandescentCoffee;"/>
		</Items>

		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; -defective; -military; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="400" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"		priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-7;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-7;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-7;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-7;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-7;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<SellShip		criteria="s -notForSale;" priceAdj="100"/>
			<BuyShip		criteria="s L:1-10; -notForSale;" priceAdj="80"/>

			<BalanceTrade	criteria="{core.fusionFuel}"		impact="20"/>
			<BalanceTrade	criteria="{human.basicFood}"	impact="20"/>
			<BalanceTrade	criteria="{human.lux}"		impact="20"/>
			<BalanceTrade	criteria="{human.meds}"		impact="20"/>
			<BalanceTrade	criteria="{human.res}"		impact="20"/>
			<BalanceTrade	criteria="{core.ore}"			impact="10"/>
		</Trade>
		
		<!-- Satellites -->

		<Satellites>
			<Station type="&stStKatsArcology15;"	xOffset="355"	 yOffset="88"	segment="true"/>
			<Station type="&stStKatsArcology45;"	xOffset="260"	 yOffset="237"	segment="true"/>
			<Station type="&stStKatsArcology75;"	xOffset="95"	 yOffset="320"	segment="true"/>
			<Station type="&stStKatsArcology105;"	xOffset="-95"	 yOffset="320"	segment="true"/>
			<Station type="&stStKatsArcology135;"	xOffset="-260"	 yOffset="237"	segment="true"/>
			<Station type="&stStKatsArcology165;"	xOffset="-355"	 yOffset="88"	segment="true"/>
			<Station type="&stStKatsArcology195;"	xOffset="-355"	 yOffset="-90"	segment="true"/>
			<Station type="&stStKatsArcology225;"	xOffset="-260"	 yOffset="-252"	segment="true"/>
			<Station type="&stStKatsArcology255;"	xOffset="-95"	 yOffset="-323"	segment="true"/>
			<Station type="&stStKatsArcology285;"	xOffset="95"	 yOffset="-323"	segment="true"/>
			<Station type="&stStKatsArcology315;"	xOffset="260"	 yOffset="-252"	segment="true"/>
			<Station type="&stStKatsArcology345;"	xOffset="355"	 yOffset="-90"	segment="true"/>
		</Satellites>
		
		<HeroImage imageID="&rsStKatsArcologyHero;" imageWidth="800" imageHeight="528"/>
		
		<Events>
			<OnCreate>
				(block Nil
					(enum (sysFindObject gSource "T +arcology") theObj
						(block Nil
							; Create some visiting ships
							(for i 1 (random 2 3)
								(block (theShip)
									(setq theShip (sysCreateShip 
										&tbStKatsTraffic;
										(sysVectorPolarOffset theObj (random 0 359) 10)
										&svCommonwealth;
										&evStKatsTrafficBehaviorOld;
										))
										
									(setq aDockObj theObj)
									(objFireEvent theShip "OrderDockAtStKats")
									)
								)
							
							; Register for events from all the objects that make up
							; the arcology
							(objRegisterForEvents gSource theObj)
							)
						)
						
					; Register a callbacks
					(sysAddObjRecurringTimerEvent 60 gSource "OnProduceProduction")
					(sysAddObjRecurringTimerEvent 90 gSource "OnTrafficControl")
					)
			</OnCreate>

			<OnProduceProduction>
				(block Nil
					; Discard any rotted produce
					(enum (objGetItems gSource "* +FreshFood") theItem
						(if (eq (itmGetData theItem "status") 'rotted)
							(block Nil
								(objRemoveItem gSource theItem)
								
								; Rotted items don't count as "produced" so subtract 
								(objIncData gSource "totalProduced" (subtract 0 (itmGetCount theItem)))
								)
							)
						)
						
					; Add fresh produce
					(if (leq (random 1 100) 5)
						(block (produceAvail)
							(setq produceAvail 0)
							(enum (objGetItems gSource "* +FreshFood") theItem
								(setq produceAvail (add produceAvail (itmGetCount theItem)))
								)
							
							(if (and (ls produceAvail 20) 
									(ls (objGetData gSource "totalProduced") 50)
									)
								(block (produceCount theMonth theItemUNID expireTime)
									; Figure out how much to produce
									(setq produceCount (random 10 20))
									
									; Figure out which to produce based on the real
									; calendar
									
									(setq theMonth (item (unvGetRealDate) 1))
									(switch
										(leq theMonth 3)
											(setq theItemUNID &itIncandescentLucuma;)
											
										(leq theMonth 6)
											(setq theItemUNID &itIncandescentPeaches;)
											
										(leq theMonth 9)
											(setq theItemUNID &itIncandescentStrawberries;)
											
										(setq theItemUNID &itIncandescentBellFruit;)
										)
										
									; Expire time
									(setq expireTime (typGetStaticData theItemUNID "expireTime"))
										
									(objAddItem gSource 
										(itmSetData 
											(itmCreate theItemUNID produceCount)
											"expireTime"
											(add (unvGetTick) (random expireTime (add expireTime 1800)))
											produceCount
											)
										)
										
									(objIncData gSource "totalProduced" produceCount)
									)
								)
							)
						)
					)
			</OnProduceProduction>
			
			<OnTrafficControl>
				(block (totalShips)
					; Count the number of ships under traffic control
					(setq totalShips (count (sysFindObject Nil "s D:0010201F_status")))
					
					; If less than the ideal number, new ships jump in
					(if (ls totalShips 50)
						(block (theShip theTarget)
							(setq theShip (sysCreateShip 
								&tbStKatsTraffic;
								(random (sysFindObject Nil "G"))
								&svCommonwealth;
								&evStKatsTrafficBehaviorOld;
								))
								
							(objFireEvent theShip "OrderEnterSystem")
							)
						)
					)
			</OnTrafficControl>

			<GetRumors>
				(append
					(rpgRumorAdd 'stKatsParliament (make 'sequence 1 5) 20)
					)
			</GetRumors>
		</Events>
		
		<Language>
			<Text id="core.mapDescMain">
				"Capital of the Commonwealth"
			</Text>

			<Text id="rumor.stKatsParliament.1">

				You enter the beautiful hall where ministers from all over the 
				Commonwealth gather to legislate and debate.
				
				The minister from Zhang Li makes an impassioned appeal for a 
				bill funding the construction of three new Commonwealth Star 
				Carriers.

				She shows pictures of refugees displaced by the Ares, but the 
				chamber is nearly empty and her energy fades in mid-speech.

			</Text>
			<Text id="rumor.stKatsParliament.2">

				You enter the beautiful hall where ministers from all over the 
				Commonwealth gather to legislate and debate.

				The chamber is nearly full as ministers debate a bill calling 
				for material support to the Huari people. Those in favor cite 
				the cruel treatment the Huari have received under the Sung 
				Slavers.
				
				Those opposed recall that the Huari themselves were once 
				aggressors who killed Commonwealth settlers in the Ungoverned 
				Territories.
				
			</Text>
			<Text id="rumor.stKatsParliament.3">

				You enter the beautiful hall where ministers from all over the 
				Commonwealth gather to legislate and debate.

				The minister from 70 Ophiuchi speaks in the Center Well:

				"...and so I urge my fellow ministers to meet this challenge. 
				With the appropriations of CP1175 we can finally provide enough 
				resources to the Militia in order to secure the safety of our 
				citizens against Marauder tyranny."
				
			</Text>
			<Text id="rumor.stKatsParliament.4">

				You enter the beautiful hall where ministers from all over the 
				Commonwealth gather to legislate and debate.

				The minister from Kinder's Star reads a bill commemorating the 
				death of Militia Colonel Simon Francis Jezerski, who was killed 
				in the line of duty in a confrontation with the Death Drugs 
				Cartel.

			</Text>
			<Text id="rumor.stKatsParliament.5">

				You enter the beautiful hall where ministers from all over the 
				Commonwealth gather to legislate and debate.

				The minister from Numerianus speaks in the Center Well:

				"My fellow citizens, if compassion is not enough to compel you 
				to vote for this bill, then consider the risk that we take by 
				opposing it. If we do not provide a safe home for our zoanthrope
				brethren then the Dwarg will happily exploit them."
				
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stStKatsArcology15;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="45" imageY="0" imageWidth="115" imageHeight="220"/>

		<DockingPorts>
			<Port x="39"	y="60"	rotation="-159" />
			<Port x="55"	y="18"	rotation="-164"/>
			<Port x="67"	y="-31" rotation="-170"/>
			<Port x="-34"	y="-38" rotation="10"/>
			<Port x="-48"	y="8"	rotation="19"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stStKatsArcology45;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="0" imageY="245" imageWidth="220" imageHeight="180"/>

		<DockingPorts>
			<Port x="7"		y="76"	rotation="-128" />
			<Port x="45"	y="45"	rotation="-134"/>
			<Port x="80"	y="8"	rotation="-141"/>
			<Port x="-22"	y="-55"	rotation="42"/>
			<Port x="-53"	y="-15"	rotation="50"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stStKatsArcology75;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="0" imageY="500" imageWidth="220" imageHeight="115"/>

		<DockingPorts>
			<Port x="-30"	y="70"	rotation="-94" />
			<Port x="26"	y="65"	rotation="-102"/>
			<Port x="76"	y="49"	rotation="-112"/>
			<Port x="18"	y="-65"	rotation="69"/>
			<Port x="-33"	y="-45"	rotation="77"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stStKatsArcology105;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="220" imageY="500" imageWidth="220" imageHeight="115"/>

		<DockingPorts>
			<Port x="-72"	y="48"	rotation="-70" />
			<Port x="-22"	y="62"	rotation="-74"/>
			<Port x="31"	y="71"	rotation="-80"/>
			<Port x="36"	y="-46"	rotation="107"/>
			<Port x="-21"	y="-57"	rotation="102"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stStKatsArcology135;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="220" imageY="245" imageWidth="220" imageHeight="180"/>

		<DockingPorts>
			<Port x="-84"	y="14"	rotation="-37" />
			<Port x="-48"	y="51"	rotation="-47"/>
			<Port x="-8"	y="76"	rotation="-56"/>
			<Port x="49"	y="-20"	rotation="138"/>
			<Port x="13"	y="-52"	rotation="132"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stStKatsArcology165;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="280" imageY="0" imageWidth="115" imageHeight="220"/>

		<DockingPorts>
			<Port x="-70"	y="-29"	rotation="-6" />
			<Port x="-61"	y="22"	rotation="-14"/>
			<Port x="-42"	y="62"	rotation="-23"/>
			<Port x="53"	y="9"	rotation="168"/>
			<Port x="38"	y="-39"	rotation="161"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stStKatsArcology195;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="500" imageY="0" imageWidth="115" imageHeight="220"/>

		<DockingPorts>
			<Port x="-48"	y="-54"	rotation="21" />
			<Port x="-65"	y="-9"	rotation="12"/>
			<Port x="-70"	y="37"	rotation="3"/>
			<Port x="35"	y="35"	rotation="-161"/>
			<Port x="54"	y="-10"	rotation="-167"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stStKatsArcology225;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="440" imageY="245" imageWidth="220" imageHeight="180"/>

		<DockingPorts>
			<Port x="-6"	y="-75"	rotation="56" />
			<Port x="-51"	y="-43"	rotation="47"/>
			<Port x="-88"	y="0"	rotation="35"/>
			<Port x="11"	y="60"	rotation="-131"/>
			<Port x="48"	y="27"	rotation="-139"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stStKatsArcology255;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="440" imageY="485" imageWidth="220" imageHeight="115"/>

		<DockingPorts>
			<Port x="37"	y="-73"	rotation="84" />
			<Port x="-22"	y="-62"	rotation="74"/>
			<Port x="-77"	y="-43"	rotation="63"/>
			<Port x="-18"	y="57"	rotation="-105"/>
			<Port x="32"	y="44"	rotation="-107"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stStKatsArcology285;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="660" imageY="485" imageWidth="220" imageHeight="115"/>

		<DockingPorts>
			<Port x="77"	y="-50"	rotation="114" />
			<Port x="24"	y="-66"	rotation="103"/>
			<Port x="-30"	y="-73"	rotation="93"/>
			<Port x="-41"	y="40"	rotation="-80"/>
			<Port x="16"	y="54"	rotation="-73"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stStKatsArcology315;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="660" imageY="245" imageWidth="220" imageHeight="180"/>

		<DockingPorts>
			<Port x="85"	y="2"	rotation="146" />
			<Port x="53"	y="-35"	rotation="134"/>
			<Port x="10"	y="-65"	rotation="125"/>
			<Port x="-48"	y="28"	rotation="-54"/>
			<Port x="-9"	y="60"	rotation="-47"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stStKatsArcology345;"
			obsoleteVersion=	"49"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"
			dockScreen=			"&dsStKatsArcology;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"

			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"1000"
			regen=				"20"
			shipRegen=			"6"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"arcology, commonwealth, commonwealthCustoms, friendly, human, majorStation, populated"

			inherit=			"&baStKatsArcologyBase;"
			>

		<Image imageID="&rsStKatsArcology;" imageX="705" imageY="0" imageWidth="115" imageHeight="220"/>

		<DockingPorts>
			<Port x="72"	y="39"	rotation="162" />
			<Port x="63"	y="-9"	rotation="170"/>
			<Port x="47"	y="-56"	rotation="178"/>
			<Port x="-51"	y="-10"	rotation="-19"/>
			<Port x="-33"	y="43"	rotation="-11"/>
		</DockingPorts>
	</StationType>
<StationType UNID="&stSungSlaveQuarters1;"
			obsoleteVersion=	"49"
			name=				"Sung slave quarters|Sung slave quarters"
			sovereign=			"&svSungSlaves;"

			attributes=			"sungSlaveQuarters"

			dockScreen=			"&dsSungSlaveQuarters;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			mass=				"3000"
			armorID=			"&itUltraLightTitaniumArmor;"
			hitPoints=			"35"
			multiHull=			"true"
			structuralHitPoints="30"

			noMapLabel=			"true"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Image and Effects -->

		<ImageVariants>
			<Image			imageID="&rsStations4;" imageX="192" imageY="32" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsStations4;" imageX="192" imageY="64" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsStations4;" imageX="192" imageY="96" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

		<!-- Events and Data -->

		<InitialData>
			<sungSlave>True</sungSlave>
		</InitialData>

		<Language>
			<Text id="core.abandonedStationDesc">

				You are docked at a ruined structure once housing slaves.
				Lifeless forms float around in zero-G amid the scraps and mementos they once owned.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stSungSlaveQuarters2;"
			obsoleteVersion=	"49"
			name=				"Sung slave quarters|Sung slave quarters"
			sovereign=			"&svSungSlaves;"

			attributes=			"sungSlaveQuarters"

			dockScreen=			"&dsSungSlaveQuarters;"
			abandonedScreen=	"&dsRPGAbandonedStation;"


			mass=				"3000"
			armorID=			"&itUltraLightTitaniumArmor;"
			hitPoints=			"30"
			structuralHitPoints="10"

			noMapLabel=			"true"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Image and Effects -->

		<ImageVariants>
			<Image			imageID="&rsStations4;" imageX="224" imageY="0"  imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsStations4;" imageX="224" imageY="32" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsStations4;" imageX="224" imageY="64" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsStations4;" imageX="224" imageY="96" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

		<!-- Events and Data -->

		<InitialData>
			<sungSlave>True</sungSlave>
		</InitialData>

		<Language>
			<Text id="core.abandonedStationDesc">

				You are docked at a ruined structure once housing slaves.
				Lifeless forms float around in zero-G amid the scraps and mementos they once owned.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stSungFortressOld;"
			obsoleteVersion=	"49"
			name=				"Sung fortress(es)"
			sovereign=			"&svSung;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itSungArmor;"
			hitPoints=			"400"
			regen=              "11"
			explosionType=		"&vtBlastExplosion4;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, envAir, envEarth, envFire, envWater, human, majorStation, populated, sungSlavers"
			>
		<Image			imageID="&rsStations4;" imageX="0" imageY="192" imageWidth="128" imageHeight="128"/>

		<Ships>
			<Table>
				<Ship chance="30"	count="2d6" class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				<Group chance="60">
					<Ship			count="1"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
					<Ship			count="2d4"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
			</Table>
		</Ships>

		<Reinforcements minShips="3">
			<Table>
				<Ship chance="75"	count="1d4"	class="&scWindSlaver;"	orders="patrol" patrolDist="20"/>
				<Ship chance="25"	count="1d2"	class="&scSteelSlaver;"	orders="patrol" patrolDist="20"/>
			</Table>
		</Reinforcements>

		<Items>
			<Lookup					count="1d4"	table="&trStationSupplies;" />
			<Lookup					count="1"	table="&trConsumables6;"/>
			<Lookup					count="1"	table="&trMinorItem6;"/>
			<Table chance="75">
				<Lookup chance="40" count="1" table="&trConsumables7;"/>
				<Lookup chance="40" count="1" table="&trMinorItem7;"/>
				<Lookup chance="20" count="1" table="&trMajorItem7;"/>
			</Table>
		</Items>

		<Encounters frequency="common">
			<Ship   count="1d4"	class="&scWindSlaver;" orders="attack"/>
		</Encounters>

		<Satellites>
			<Station type="&stSungNEWall;" xOffset="64" yOffset="64"	segment="true"/>
			<Station type="&stSungNWWall;" xOffset="-64" yOffset="64"	segment="true"/>
			<Station type="&stSungSWWall;" xOffset="-64" yOffset="-64"	segment="true"/>
			<Station type="&stSungSEWall;" xOffset="64" yOffset="-64"	segment="true"/>
		</Satellites>

	</StationType>
<StationType UNID="&stSungNWWall;"
			obsoleteVersion=	"49"
			name=				"Sung defense tower"
			sovereign=			"&svSung;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"4"
			noMapLabel=			"true"
			noFriendlyFire=		"true"

			mass=				"50000"
			multiHull=			"true"
			armorID=			"&itSungArmor;"
			hitPoints=			"120"
			structuralHitPoints="100"
			fireRateAdj=		"30"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Image			imageID="&rsStations5;" imageX="0" imageY="0" imageWidth="128" imageHeight="128"/>

		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true"/>
		</Devices>

	</StationType>
<StationType UNID="&stSungNEWall;"
			obsoleteVersion=	"49"
			name=				"Sung defense tower"
			sovereign=			"&svSung;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"4"
			noMapLabel=			"true"
			noFriendlyFire=		"true"

			mass=				"50000"
			multiHull=			"true"
			armorID=			"&itSungArmor;"
			hitPoints=			"120"
			structuralHitPoints="100"
			fireRateAdj=		"30"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Image			imageID="&rsStations5;" imageX="128" imageY="0" imageWidth="128" imageHeight="128"/>

		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true"/>
		</Devices>

	</StationType>
<StationType UNID="&stSungSEWall;"
			obsoleteVersion=	"49"
			name=				"Sung defense tower"
			sovereign=			"&svSung;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"4"
			noMapLabel=			"true"
			noFriendlyFire=		"true"

			mass=				"50000"
			multiHull=			"true"
			armorID=			"&itSungArmor;"
			hitPoints=			"120"
			structuralHitPoints="100"
			fireRateAdj=		"30"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Image			imageID="&rsStations5;" imageX="128" imageY="128" imageWidth="128" imageHeight="128"/>

		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true"/>
		</Devices>

	</StationType>
<StationType UNID="&stSungSWWall;"
			obsoleteVersion=	"49"
			name=				"Sung defense tower"
			sovereign=			"&svSung;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"4"
			noMapLabel=			"true"
			noFriendlyFire=		"true"

			mass=				"50000"
			multiHull=			"true"
			armorID=			"&itSungArmor;"
			hitPoints=			"120"
			structuralHitPoints="100"
			fireRateAdj=		"30"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Image			imageID="&rsStations5;" imageX="0" imageY="128" imageWidth="128" imageHeight="128"/>

		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true"/>
		</Devices>

	</StationType>
<StationType UNID="&stSungCitadelOld;"
			obsoleteVersion=	"50"
			name=				"Sung citadel"
			sovereign=			"&svSung;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itSungArmor;"
			hitPoints=			"1500"
			regen=              "11"
			fireRateAdj=		"20"
			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, human, majorStation, populated, sungSlavers"
			>

		<!-- Encounter Info -->

		<Image			imageID="&rsStations6;" imageX="0" imageY="0" imageWidth="256" imageHeight="256"/>

		<Devices>
			<Device deviceID="&itCyberDeckLowerShields;"/>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true" posAngle="40"  posRadius="120"/>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true" posAngle="145" posRadius="125"/>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true" posAngle="270" posRadius="90"/>
		</Devices>

		<Ships>
			<Table>
				<Group chance="60">
					<Ship			count="1"	class="&scEarthSlaver;"		orders="patrol" patrolDist="30"/>
					<Ship			count="1d2"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
					<Ship			count="1d3"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
				<Group chance="30">
					<Ship			count="1"	class="&scEarthSlaver;"		orders="patrol" patrolDist="30"/>
					<Ship			count="1d6"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
				<Group chance="10">
					<Ship			count="1d4"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
					<Ship			count="1d6"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
			</Table>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Ship chance="50"	count="1d3"	class="&scWindSlaver;"	orders="patrol" patrolDist="20"/>
				<Ship chance="30"	count="1d2"	class="&scSteelSlaver;"	orders="patrol" patrolDist="20"/>
				<Ship chance="20"	count="1"	class="&scEarthSlaver;"	orders="patrol" patrolDist="30"/>
			</Table>
		</Reinforcements>

		<Items>
			<Item chance="80"		count="1d4" item="&itLongzhuSphere;"/>
			<Lookup					count="1d4"	table="&trStationSupplies;" />
			<Lookup					count="1"	table="&trConsumables6;"/>
			<Lookup					count="1"	table="&trMinorItem6;"/>
			<Table>
				<Lookup chance="45" count="1" table="&trConsumables7;"/>
				<Lookup chance="30" count="1" table="&trMinorItem7;"/>
				<Lookup chance="25" count="1" table="&trMajorItem7;"/>
			</Table>
		</Items>

		<Encounters frequency="common">
			<Table>
				<Ship chance="30"	count="2d3" class="&scWindSlaver;"		orders="attack"/>
				<Group chance="60">
					<Ship			count="1"	class="&scSteelSlaver;"		orders="attack"/>
					<Ship			count="1d4"	class="&scWindSlaver;"		orders="attack"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scSteelSlaver;"		orders="attack"/>
			</Table>
		</Encounters>

		<Satellites overlapCheck="asteroids">
			<Orbitals count="8" distance="14" angle="equidistant">
				<Station type="&stSungDefenseSat1;"/>
			</Orbitals>
		</Satellites>

	</StationType>
<StationTypeSungCitadelOld;"
			obsoleteVersion=	"50"
			name=				"Sung citadel"
			sovereign=			"&svSung;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itSungArmor;"
			hitPoints=			"1500"
			regen=              "11"
			fireRateAdj=		"20"
			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, human, majorStation, populated, sungSlavers"
			>

		<!-- Encounter Info -->

		<Image			imageID="&rsStations6;" imageX="0" imageY="0" imageWidth="256" imageHeight="256"/>

		<Devices>
			<Device deviceID="&itCyberDeckLowerShields;"/>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true" posAngle="40"  posRadius="120"/>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true" posAngle="145" posRadius="125"/>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true" posAngle="270" posRadius="90"/>
		</Devices>

		<Ships>
			<Table>
				<Group chance="60">
					<Ship			count="1"	class="&scEarthSlaver;"		orders="patrol" patrolDist="30"/>
					<Ship			count="1d2"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
					<Ship			count="1d3"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
				<Group chance="30">
					<Ship			count="1"	class="&scEarthSlaver;"		orders="patrol" patrolDist="30"/>
					<Ship			count="1d6"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
				<Group chance="10">
					<Ship			count="1d4"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
					<Ship			count="1d6"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
			</Table>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Ship chance="50"	count="1d3"	class="&scWindSlaver;"	orders="patrol" patrolDist="20"/>
				<Ship chance="30"	count="1d2"	class="&scSteelSlaver;"	orders="patrol" patrolDist="20"/>
				<Ship chance="20"	count="1"	class="&scEarthSlaver;"	orders="patrol" patrolDist="30"/>
			</Table>
		</Reinforcements>

		<Items>
			<Item chance="80"		count="1d4" item="&itLongzhuSphere;"/>
			<Lookup					count="1d4"	table="&trStationSupplies;" />
			<Lookup					count="1"	table="&trConsumables6;"/>
			<Lookup					count="1"	table="&trMinorItem6;"/>
			<Table>
				<Lookup chance="45" count="1" table="&trConsumables7;"/>
				<Lookup chance="30" count="1" table="&trMinorItem7;"/>
				<Lookup chance="25" count="1" table="&trMajorItem7;"/>
			</Table>
		</Items>

		<Encounters frequency="common">
			<Table>
				<Ship chance="30"	count="2d3" class="&scWindSlaver;"		orders="attack"/>
				<Group chance="60">
					<Ship			count="1"	class="&scSteelSlaver;"		orders="attack"/>
					<Ship			count="1d4"	class="&scWindSlaver;"		orders="attack"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scSteelSlaver;"		orders="attack"/>
			</Table>
		</Encounters>

		<Satellites overlapCheck="asteroids">
			<Orbitals count="8" distance="14" angle="equidistant">
				<Station type="&stSungDefenseSat1;"/>
			</Orbitals>
		</Satellites>

	</StationType>

	<!-- CSC Arctica Encounter -->

	<EncounterType UNID="&stCSCArcticaEncounter;"
			obsoleteVersion="51"
			name=				"(CSC Arctica)"
			sovereign=			"&svCommonwealthFleet;"
			>
		<Ships>
			<Ship	count="1"	class="&scCSCArctica;" orders="hold">
				<Escorts>
					<Ship     count="2d6"	class="&scCenturionM;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>
	</EncounterType>

	<!-- CSC Sahara Encounter -->

	<EncounterType </StationType>
<StationTypeCSCArcticaEncounter;"
			obsoleteVersion="51"
			name=				"(CSC Arctica)"
			sovereign=			"&svCommonwealthFleet;"
			>
		<Ships>
			<Ship	count="1"	class="&scCSCArctica;" orders="hold">
				<Escorts>
					<Ship     count="2d6"	class="&scCenturionM;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>
	</EncounterType>

	<!-- CSC Sahara Encounter -->

	<EncounterType UNID="&stCSCSaharaEncounter;"
			obsoleteVersion="51"
			name=				"(CSC Sahara)"
			sovereign=			"&svCommonwealthFleet;"
			>
		<Ships>
			<Ship	count="1"	class="&scCSCSahara;" orders="hold">
				<Escorts>
					<Ship     count="2d6"	class="&scCenturionM;"	orders="patrol" patrolDist="15"/>
				</Escorts>
			</Ship>
		</Ships>
	</EncounterType>

	<!-- Old Effects -->
	
	<Effect UNID="&efLargeExplosion1;"	obsoleteVersion="49">
		<Image imageID="&rsLargeExplosions;" 
				imageX="0" 
				imageY="0" 
				imageWidth="128" 
				imageHeight="128"
				imageFrameCount="16"
				imageTicksPerFrame="2"/>
	</Effect>

	<!-- Fleet Decontamination -->

	<DockScreen UNID="&dsFleetDecon;"	
			obsoleteVersion="52"
			nestedScreen="true"
			>
		<Panes>
			<Default>
				<OnPaneInit>
					(block Nil
						(scrSetDesc gScreen "The dockmaster decontaminates your ship before you are allowed to exit the airlock.")
						(shpDecontaminate gPlayerShip)
						)
				</OnPaneInit>

				<Actions>
					<Action name="Continue" default="1" cancel="1" key="C">
						(scrExitScreen gScreen (shpIsRadioactive gPlayerShip))
					</Action>
				</Actions>

			</Default>
		</Panes>
	</DockScreen>

	<!-- Commonwealth Decontamination -->

	<DockScreen UNID="&dsCommonwealthDecon;"
			obsoleteVersion="52"
			nestedScreen=	"true"
			inherit=		"&dsDockScreenBase;"
			>
		<Panes>
			<Default>
				<OnPaneInit>
					(block (
						(currencyUsed (objGetProperty gSource 'currency))
						(cost (ecoExchange 250 'credit currencyUsed))
						)
						(if (geq (objGetBalance gPlayerShip currencyUsed) cost)
							(block Nil
								(scrSetDescTranslate gScreen 'customs.chargedForDecon { cost:(fmtCurrency currencyUsed cost) })
								(objCharge gPlayerShip currencyUsed cost)
								(shpDecontaminate gPlayerShip)
								)
							(scrSetDescTranslate gScreen 'customs.cantAffordDecon { cost:(fmtCurrency currencyUsed cost) })
							)
						)
				</OnPaneInit>

				<Actions>
					<Action id="actionContinue" default="1" cancel="1">
						; If the ship is still radioactive, force undock.
						; Otherwise, we just exit the screen and go back to the default screen
						
						(scrExitScreen gScreen (shpIsRadioactive gPlayerShip))
					</Action>
				</Actions>
			</Default>
		</Panes>
		
		<Language>
			<Text id="customs.chargedForDecon">

				Commonwealth Customs stops your ship for decontamination. You 
				are automatically charged %cost% for decontaminating your ship.

			</Text>
			<Text id="customs.cantAffordDecon">

				Commonwealth Customs stops your ship for decontamination.
				Unfortunately, you do not have %cost% to pay for 
				decontamination.

			</Text>
		</Language>
	</DockScreen>

	<!-- Commonwealth Free Slaves -->

	<DockScreen UNID="&dsCommonwealthFreeSlaves;"
			obsoleteVersion="53"
			nestedScreen="true"
			inherit=		"&dsDockScreenBase;"
			>
		<InitialPane>
			(block (
				;	This is a list of all slaves we carry.

				(allSlaves (objGetItems gPlayerShip "* +slaves;"))
				(totalSlaves (map allSlaves 'reduceSum theItem (itmGetCount theItem)))
				)
				;	Remember these values. It's OK to do this here since they
				;	are just cached values.

				(scrSetData gScreen 'allSlaves allSlaves)
				(scrSetData gScreen 'totalSlaves totalSlaves)

				(switch
					;	If we have a smuggler's cargo hold then we get the option of
					;	not declaring the slaves

					(objGetItems gPlayerShip "*I +smugglersHold;")
						"FreeSlavesAsk"

					;	Otherwise, we always free them.

					"Default"
					)
				)
		</InitialPane>

		<Panes>
			<Default>
				<OnPaneInit>
					(block (
						(allSlaves (scrGetData gScreen 'allSlaves))
						(totalSlaves (scrGetData gScreen 'totalSlaves))

						desc
						)
						; Free the slaves

						(enum allSlaves itemToRemove
							(objRemoveItem gPlayerShip itemToRemove)
							)

						; Keep track of how many we have freed in total

						(objIncData gPlayerShip 'slavesFreed totalSlaves)

						; Create description

						(switch
							(= totalSlaves 1)
								(scrSetDescTranslate gScreen 'descRescue.1)

							(= totalSlaves 2)
								(scrSetDescTranslate gScreen 'descRescue.2)

							(scrSetDescTranslate gScreen 'descRescue.several)
							)
						)
				</OnPaneInit>

				<Actions>
					<Action id="actionContinue" default="1" cancel="1">
						(block (
							(freed (objGetData gPlayerShip "slavesFreed"))
							(rewarded (objGetData gPlayerShip "slaveReward"))
							)
							(switch
								(and (geq freed 12) (ls rewarded 12))
									(scrShowPane gScreen "Reward1")

								(and (geq freed 24) (ls rewarded 24))
									(scrShowPane gScreen "Reward1")

								(scrExitScreen gScreen)
								)
							)
					</Action>
				</Actions>
			</Default>

			<FreeSlavesAsk>
				<OnPaneInit>
					(scrSetDescTranslate gScreen 'descDeclareSlaves {
						itemName: (itmGetName (@ (scrGetData gScreen 'allSlaves) 0) 'count)
						})
				</OnPaneInit>

				<Actions>
					<Action id="actionDeclareSlaves" default="1">
						(scrShowPane gScreen 'Default)
					</Action>

					<Action id="actionNothingToDeclare" cancel="1">
						(block ()
							;	Set a flag for the remainder of the session.
							(scrSetSessionData gScreen 'commonwealth.noSlaveConfiscation True)
							(scrExitScreen gScreen)
							)
					</Action>
				</Actions>
			</FreeSlavesAsk>

			<Reward1>
				<OnPaneInit>
					(block (reward roll)
						; Create a random reward
						(setq roll (random 1 100))
						(switch
							(ls roll 25)
								(setq reward (itmCreate &itLongzhuSphere; (random 1 3)))

							(ls roll 60)
								(setq reward (itmCreate &itPromethiumCrystal; (random 1 4)))

							(setq reward (itmCreate &itCalligraphyScroll; 1))
							)

						; Give it to the player
						(objAddItem gPlayerShip reward)
						(scrSetDescTranslate gScreen 'descReward {
							itemName: (itmGetName reward 'count)
							})
						)
				</OnPaneInit>

				<Actions>
					<Action id="actionContinue" default="1" cancel="1">
						(block Nil
							(objSetData gPlayerShip "slaveReward" (objGetData gPlayerShip "slavesFreed"))
							(scrExitScreen gScreen)
							)
					</Action>
				</Actions>
			</Reward1>
		</Panes>

		<Language>
			<String id="actionDeclareSlaves">"[Y]es, I do."</String>
			<String id="actionNothingToDeclare">"[N]o.</String>

			<Text id="descDeclareSlaves">

				You approach the customs podium, an officer asks you:

				"Anything to declare?"

				You remember that you have %itemName% in your cargo hold.

			</Text>
			<Text id="descRescue.1">

				You inform the Commonwealth authorities that you have rescued 
				a slave.
				
				The jaded officer takes the slave coffin and files a routine 
				report.
			
			</Text>
			<Text id="descRescue.2">
			
				You inform the Commonwealth authorities that you have rescued a
				couple of slaves.
				
				The jaded officer takes the	two slave coffins and files a 
				routine report.
			
			</Text>
			<Text id="descRescue.several">

				You inform the Commonwealth authorities that you have rescued 
				several slaves. The officer in charge thanks you:

				"You must have a pretty good ship to have survived a fight 
				against Slavers!"
				
			</Text>
			<Text id="descReward">

				Medtechs revive one of the slaves, and after blinking away 
				confusion, she thanks you with a barely audible whisper.
				
				She puts something in your hand, then turns and walks away 
				without another word.
				
				When you open your hand you see %itemName%.
			
			</Text>
		</Language>
	</DockScreen>

	<!-- Old Image -->

	<Image UNID="&rsEI100Image;"	obsoleteVersion="40" bitmap="Resources\EI100.jpg" 		bitmask="Resources\EI100Mask.bmp" loadOnUse="true"/>
	<Image UNID="&rsEI200Image;"		obsoleteVersion="40" bitmap="Resources\EI200.jpg" bitmask="Resources\EI200Mask.bmp" loadOnUse="true"/>
	<Image UNID="&rsSapphireYachtHD;"	obsoleteVersion="41" bitmap="Resources\SapphireYachtHD.jpg" bitmask="Resources\SapphireYachtHDMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsMolotok;"		obsoleteVersion="41"	bitmap="Resources\Molotok.jpg" bitmask="Resources\MolotokMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsT31ArmedTransport;"	obsoleteVersion="41" bitmap="Resources\T31Transport.jpg"		bitmask="Resources\T31TransportMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsT55ArmedTransport;"	obsoleteVersion="41" bitmap="Resources\T55Transport.jpg"		bitmask="Resources\T55TransportMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsIAVHeavy;"	obsoleteVersion="41"				bitmap="Resources\IAVHeavy.jpg" bitmask="Resources\IAVHeavyMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsHimalInterceptorHD;"	obsoleteVersion="43"		bitmap="Resources\HimalInterceptorHD.jpg"		bitmask="Resources\HimalInterceptorHDMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsCSC;"			obsoleteVersion="43"		bitmap="Resources\CSC.jpg" bitmask="Resources\CSCMask.bmp" loadOnUse="true" />
	<Image UNID="&rsCSCBkgnd;"		obsoleteVersion="43" bitmap="Resources\CSCScreen.jpg" loadOnUse="true" />
	<Image UNID="&rsCharonFrigateImage;"	obsoleteVersion="43"	bitmap="Resources\CharonFrigate.jpg" bitmask="Resources\CharonFrigateMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsTripoli;"	obsoleteVersion="43"			bitmap="Resources\Tripoli.jpg"		bitmask="Resources\TripoliMask.bmp"  	loadOnUse="true"/>
	<Image UNID="&rsCorporateCruiser;"	obsoleteVersion="43"	bitmap="Resources\CorporateCruiser.jpg" bitmask="Resources\CorporateCruiserMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsEI7000Image;"	obsoleteVersion="43"		bitmap="Resources\EI7000.jpg" bitmask="Resources\EI7000Mask.bmp" loadOnUse="true"/>
	<Image UNID="&rsManufacturingPlant;"	obsoleteVersion="44" bitmap="Resources\ManufacturingPlant.jpg" bitmask="Resources\ManufacturingPlantMask.bmp" loadOnUse="true"/>

	<Image UNID="&rsAntaresIImage;"		obsoleteVersion="45"	bitmap="Resources\AntaresI.jpg" bitmask="Resources\AntaresIMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsAntaresIIImage;"	obsoleteVersion="45"	bitmap="Resources\AntaresII.jpg" bitmask="Resources\AntaresIIMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsAntaresVImage;"		obsoleteVersion="45"	bitmap="Resources\AntaresV.jpg" bitmask="Resources\AntaresVMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsAresSentryHD;"		obsoleteVersion="39" bitmap="Resources\AresSentryHD.jpg" bitmask="Resources\AresSentryHDMask.bmp" loadOnUse="true" />
	<Image UNID="&rsCometfall;"			obsoleteVersion="45"					bitmap="Resources\Cometfall.jpg" bitmask="Resources\CometfallMask.bmp" loadOnUse="true" />
	<Image UNID="&rsDeimos;"			obsoleteVersion="45"		bitmap="Resources\Deimos.jpg" bitmask="Resources\DeimosMask.bmp" loadOnUse="true" />
	<Image UNID="&rsPolarFreighter;"	obsoleteVersion="45"		bitmap="Resources\PolarFreighter.jpg" bitmask="Resources\PolarFreighterMask.bmp" loadOnUse="true" />
	<Image UNID="&rsAurochs;"			obsoleteVersion="45"	bitmap="Resources\Aurochs.jpg" bitmask="Resources\AurochsMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsAquila;"			obsoleteVersion="45"	bitmap="Resources\Aquila.jpg" bitmask="Resources\AquilaMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsIocrymSentinel;"	obsoleteVersion="45" bitmap="Resources\IocrymSentinel.jpg" bitmask="Resources\IocrymSentinelMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsIocrymCommandShip;"	obsoleteVersion="45" bitmap="Resources\IocrymCommandShip.jpg" bitmask="Resources\IocrymCommandShipMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsHurin;"				obsoleteVersion="45"		bitmap="Resources\Hurin.jpg"		bitmask="Resources\HurinMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsSteelSlaverHD;"		obsoleteVersion="46" bitmap="Resources\SteelSlaverHD.jpg"	bitmask="Resources\SteelSlaverHDMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsZulu;"				obsoleteVersion="46"				bitmap="Resources\Zulu.jpg"				bitmask="Resources\ZuluMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsBorer;"				obsoleteVersion="46"			bitmap="Resources\Borer.jpg" bitmask="Resources\BorerMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsWolfenGunship;"		obsoleteVersion="46" bitmap="Resources\ShipsWolfenGunship.jpg" bitmask="Resources\ShipsWolfenGunshipMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsWolfenGunshipHD;"	obsoleteVersion="46" bitmap="Resources\WolfenGunshipHD.jpg" bitmask="Resources\WolfenGunshipHDMask.bmp" loadOnUse="true"/>

	<Image UNID="&rsStKatsArcology;"	obsoleteVersion="49"		bitmap="Resources\StKatsArcologyOld.jpg" bitmask="Resources\StKatsArcologyOldMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsStKatsArcologyScreen;" obsoleteVersion="49"		bitmap="Resources\StKatsArcologyScreen.jpg" loadOnUse="true"/>
	<Image UNID="&rsStKatsArcologySchematic;" obsoleteVersion="49"	bitmap="Resources\StKatsArcologySchematic.jpg" bitmask="Resources\StKatsArcologySchematicMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsCorporateExplorer;"	obsoleteVersion="49" bitmap="Resources\CorporateExplorer.jpg" bitmask="Resources\CorporateExplorerMask.bmp" loadOnUse="true"/>

	<Image UNID="&rsSmallShips1;"		obsoleteVersion="49" bitmap="Resources\SmallShips1.jpg"	bitmask="Resources\SmallShips1Mask.bmp" loadOnUse="true"/>
	<Image UNID="&rsMediumShips1;"		obsoleteVersion="49"	bitmap="Resources\MediumShips1.jpg"	bitmask="Resources\MediumShips1Mask.bmp" loadOnUse="true"/>
	<Image UNID="&rsMediumShips2;"		obsoleteVersion="49" bitmap="Resources\MediumShips2.jpg"	bitmask="Resources\MediumShips2Mask.bmp" loadOnUse="true"/>
	<Image UNID="&rsMediumShips3;"		obsoleteVersion="49" bitmap="Resources\MediumShips3.jpg"	bitmask="Resources\MediumShips3Mask.bmp" loadOnUse="true"/>
	<Image UNID="&rsMediumShips4;"		obsoleteVersion="49" bitmap="Resources\MediumShips4.jpg"	bitmask="Resources\MediumShips4Mask.bmp" loadOnUse="true"/>
	<Image UNID="&rsLargeShips2;"		obsoleteVersion="49"	bitmap="Resources\LargeShips2.jpg"	bitmask="Resources\LargeShips2Mask.bmp" loadOnUse="true"/>
	<Image UNID="&rsSungTransport;"		obsoleteVersion="49" bitmap="Resources\SungTransport.jpg"	bitmask="Resources\SungTransportMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsSalvagerNomad;"		obsoleteVersion="49"				bitmap="Resources\SalvagerNomad.jpg"		bitmask="Resources\SalvagerNomadMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsXenophobeDefender;"	obsoleteVersion="49"		bitmap="Resources\XenophobeDefender.jpg"		bitmask="Resources\XenophobeDefenderMask.bmp"	loadOnUse="true"/>
	<Image UNID="&rsRanxDreadnought;"	obsoleteVersion="49"		bitmap="Resources\RanxDreadnought.jpg"		bitmask="Resources\RanxDreadnoughtMask.bmp"	loadOnUse="true"/>
	<Image UNID="&rsDragonSlaverImage;"	obsoleteVersion="49" bitmap="Resources\DragonSlaver.jpg"		bitmask="Resources\DragonSlaverMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsStargate;"			obsoleteVersion="49" bitmap="Resources\Stargates1.jpg"		bitmask="Resources\Stargates1Mask.bmp"  />
	<Image UNID="&rsShipInterior;"		obsoleteVersion="49" bitmap="Resources\ShipInterior.jpg"			loadOnUse="true" />
	<Image UNID="&rsLargeExplosions;"	obsoleteVersion="49" bitmap="Resources\LargeExplosions.jpg" bitmask="Resources\LargeExplosionsMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsVentariDestroyer;"	obsoleteVersion="49" bitmap="Resources\VentariDestroyer.jpg" bitmask="Resources\VentariDestroyerMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsLargeShips1;"		obsoleteVersion="49" bitmap="Resources\LargeShips1.jpg"	bitmask="Resources\LargeShips1Mask.bmp" loadOnUse="true"/>
	<Image UNID="&rsUrakDestroyer;"		obsoleteVersion="49" bitmap="Resources\UrakDestroyer.jpg" 	bitmask="Resources\UrakDestroyerMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsHeliotropeFrigate;"	obsoleteVersion="49"			bitmap="Resources\HeliotropeFrigate.jpg"		bitmask="Resources\HeliotropeFrigateMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsFerianWarrior;"		obsoleteVersion="49"		bitmap="Resources\FerianWarrior.jpg"	bitmask="Resources\FerianWarriorMask.bmp"	loadOnUse="true"/>
	<Image UNID="&rsXenophobeWorldship;"	obsoleteVersion="49"		bitmap="Resources\XenophobeWorldship.jpg"		bitmask="Resources\XenophobeWorldshipMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsXenophobeArk;"		obsoleteVersion="49"		bitmap="Resources\XenophobeArk.jpg"				bitmask="Resources\XenophobeArkMask.bmp"  		loadOnUse="true"/>

	<Image UNID="&rs1MAutonHD;"			obsoleteVersion="50" bitmap="Resources\1MAutonHD.jpg"		bitmask="Resources\1MAutonHDMask.bmp"		loadOnUse="true" />
	<Image UNID="&rsAutosentinelHD;"	obsoleteVersion="50" bitmap="Resources\AutosentinelHD.jpg"	bitmask="Resources\AutosentinelHDMask.bmp"	loadOnUse="true" />
	<Image UNID="&rsMediumAutonHD;"		obsoleteVersion="50" bitmap="Resources\MediumAutonHD.jpg"	bitmask="Resources\MediumAutonHDMask.bmp"	loadOnUse="true" />
	<Image UNID="&rsExplorerAuton;"		obsoleteVersion="50" bitmap="Resources\ExplorerAuton.jpg"	bitmask="Resources\ExplorerAutonMask.bmp"	loadOnUse="true" />

	<Image UNID="&rsCentauriHeavyRaiderImage;"	obsoleteVersion="51" bitmap="Resources\CentauriHeavyRaider.jpg" bitmask="Resources\CentauriHeavyRaiderMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsCentauriRaiderImage;"		obsoleteVersion="51" bitmap="Resources\CentauriRaider.jpg" bitmask="Resources\CentauriRaiderMask.bmp"  loadOnUse="true"/>
	<Image UNID="&rsTenhoveHD;"			obsoleteVersion="51" bitmap="Resources\TenhoveHD.jpg" 	bitmask="Resources\TenhoveHDMask.bmp" loadOnUse="true"/>

	<Image UNID="&rsPlagueHD;"			obsoleteVersion="52"				bitmap="Resources\PlagueHD.jpg"			bitmask="Resources\PlagueHDMask.bmp"		loadOnUse="true"/>
	<Image UNID="&rsRevelationsHD;"			obsoleteVersion="52" bitmap="Resources\RevelationsHD.jpg"	bitmask="Resources\RevelationsHDMask.bmp"	loadOnUse="true"/>
	<Image UNID="&rsEarthzoneHD;"		obsoleteVersion="52"			bitmap="Resources\EarthzoneHD.jpg"				bitmask="Resources\EarthzoneHDMask.bmp"  		loadOnUse="true"/>
	<Image UNID="&rsBritannia;"		obsoleteVersion="52"			bitmap="Resources\Britannia.jpg" bitmask="Resources\BritanniaMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsIAVLight;"			obsoleteVersion="52"			bitmap="Resources\IAVLight.jpg" bitmask="Resources\IAVLightMask.bmp" loadOnUse="true"/>
	<Image UNID="&rsIAVLightHD;"		obsoleteVersion="52"		bitmap="Resources\IAVLightHD.jpg" bitmask="Resources\IAVLightHDMask.bmp" loadOnUse="true"/>

	<Image UNID="&rsSandstormHD;"		obsoleteVersion="53"		bitmap="Resources\SandstormHD.jpg" bitmask="Resources\SandstormHDMask.bmp" loadOnUse="true" />
	<Image UNID="&rsWindSlaverHD;"		obsoleteVersion="53" bitmap="Resources\WindSlaverHD.jpg"		bitmask="Resources\WindSlaverHDMask.bmp"  loadOnUse="true"/>


</TranscendenceModule>
</StationType>
<!-- Huaramarca.xml -->
<!-- HuaramarcaMission01.xml -->
<!-- HuaramarcaMission02.xml -->
<!-- HuaramarcaMission03.xml -->
<!-- HuaramarcaMission04.xml -->
<StationType UNID="&stSungFortressInHuaramarca;"
			name=				"Sung fortress(es)"
			sovereign=			"&svSung;"
			inherit=			"&stSungFortress;"

			attributes=			"enemy, human, majorStation, populated, sungSlavers"
			>

		<Encounter/>

		<Ships>
			<Ship					count="1"	class="&scDragonSlaver;"	orders="patrol" patrolDist="20"/>
			<Ship					count="4"	class="&scEarthSlaver;"		orders="patrol" patrolDist="15"/>
			<Ship					count="30"	class="&scWindSlaver;"		orders="patrol" patrolDist="10"/>

			<Table>
				<Ship chance="30"	count="2d3" class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				<Group chance="60">
					<Ship			count="1"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
					<Ship			count="1d4"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
			</Table>
		</Ships>

		<Encounters/>
	</StationType>
<!-- HuaramarcaMission05.xml -->
<!-- HuaramarcaMission06.xml -->
<!-- HuaramarcaMission07.xml -->
<!-- Huari.xml -->
<StationType UNID="&stHuariTemple;"
			name=				"Huari temple"
			sovereign=			"&svHuariEmpire;"
			dockScreen=			"Main"
			abandonedScreen=	"TempleDestroyed"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itAdvancedPlasteelPlate;"
			hitPoints=			"2000"
            regen=              "24"
			fireRateAdj=		"10"
			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, envWater, envAvoidsEarth, generic, huari, huariTemple, human, majorStation, populated"
			level=				"6"
			>

		<Image			imageID="&rsHuariTemple;" imageWidth="330" imageHeight="330" viewportRatio="0.026875"/>

		<Devices>
		</Devices>

		<Items>
			<Table>
				<Lookup chance="40" count="1" table="&trConsumables7;"/>
				<Lookup chance="40" count="1" table="&trMinorItem7;"/>
				<Lookup chance="20" count="1" table="&trMajorItem7;"/>
			</Table>
		</Items>

		<Ships>
			<Ship					count="1d2"	class="&scHurinDestroyer;"	orders="patrol" patrolDist="40"/>
		</Ships>

		<Reinforcements minShips="1">
			<Ship					count="1d2"	class="&scHurinDestroyer;"	orders="patrol" patrolDist="40"/>
		</Reinforcements>

		<Encounters frequency="uncommon">
			<Ship count="1"	class="&scHurinDestroyer;" eventHandler="&evStdWanderBehavior;"	maxShips="4"/>
		</Encounters>

		<Events>
			<OnDestroy>
				(if (typGetData &svHuariEmpire; 'status)
					(typSetData &svHuariEmpire; 'status 'templeDestroyed)
					)
			</OnDestroy>
		</Events>

		<DockScreens>
			<Main>
				<OnScreenInit>
					(unvSetAchievement 'humanSpace.huaramarca)
				</OnScreenInit>

				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionGrandHall" default="1">
								(switch
									;	Sometimes, such as when we use a Penitent ship for a Benedict mission,
									;	we're not svPlayer. In those cases, we don't get a mission.

									(!= (obj@ gPlayerShip 'sovereign) &svPlayer;)
										(scrShowScreen gScreen &dsRPGMessage; {
											desc:(scrTranslate gScreen 'descNoMissions.generic)
											})

									;	Missions

									(rpgMissionAssignment {
										missionCriteria: (cat "n +huariTemple; =" (sysGetLevel) ";")
										noMissionTextID: 'descNoMissions.pilgrim
										})
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>

			<TempleDestroyed>
				<Panes>
					<Default descID="descTempleDestroyed">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</TempleDestroyed>
		</DockScreens>

		<Language>
			<Text id="actionGrandHall">[G]rand Hall</Text>
			<Text id="actionUndock">[U]ndock</Text>

			<Text id="descWelcome">

				The Huari temple is dark and cavernous. Huari men and women dressed in
				long, colorful clothing swarm around you as you enter. They are curious but shy.

			</Text>
			<String id="descNoMissions.pilgrim">

				"Welcome, pilgrim! All who are peaceful shall be offered peace in return."

			</String>
			<String id="descNoMissions.generic">

				The Grand Hall is empty.

			</String>
			<Text id="descTempleDestroyed">

				You find Apotamo's broken body among the ruins of the temple. He struggles 
				to whisper in your ear:

				"I was wrong. Only darkness awaits."

			</Text>
		</Language>

		<DockingPorts
				portAngle=	"-30"
				portCount=	"8"
				portRadius=	"175"
				/>
	</StationType>
<StationType UNID="&stHuariFortress;"
			name=				"Huari fortress(es)"
			sovereign=			"&svHuariEmpire;"
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itAdvancedPlasteelPlate;"
			hitPoints=			"1200"
            regen=              "11"
			fireRateAdj=		"20"
			explosionType=		"&vtBlastExplosion4;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, envWater, envAvoidsEarth, generic, huari, human, majorStation, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+huariSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"---vu ur--- ----- ----- -----"

				locationCriteria=		"-lifeZone, +planetary|+50"
				enemyExclusionRadius=	"100"
				/>

		<Image			imageID="&rsHuariFortress;" imageWidth="380" imageHeight="380"	viewportRatio="0.030625"/>

		<Devices>
			<Device deviceID="&itMarkIIIHowitzer;"	omnidirectional="true" posAngle="30"	posRadius="124"	posZ="104"/>
			<Device deviceID="&itMarkIIIHowitzer;"	omnidirectional="true" posAngle="120"	posRadius="124"	posZ="104"/>
			<Device deviceID="&itMarkIIIHowitzer;"	omnidirectional="true" posAngle="-60"	posRadius="124"	posZ="104"/>
			<Device deviceID="&itMarkIIIHowitzer;"	omnidirectional="true" posAngle="-150"  posRadius="124"	posZ="104"/>
		</Devices>

		<Items>
			<Item count="20d20" item="&itSuperconductingCoil;"/>
			<Group value="standard:level=6:x=2.5">
				<Lookup table="&trStdTreasure;"/>
			</Group>
		</Items>

		<Ships>
			<Ship					count="1d2"	class="&scHurinDestroyer;"	orders="patrol" patrolDist="40"/>
		</Ships>

		<Reinforcements minShips="1">
			<Ship					count="1d2"	class="&scHurinDestroyer;"	orders="patrol" patrolDist="40"/>
		</Reinforcements>

		<Encounters frequency="uncommon">
			<Ship count="1"	class="&scHurinDestroyer;" eventHandler="&evStdWanderBehavior;"	maxShips="4"/>
		</Encounters>

		<StaticData>
			<governorTable>
				(
					"Iraya"
					"Amamoto"
					"Paccatayo"
					"Uragamo"
					"Toccatamba"
					)
			</governorTable>
		</StaticData>

		<Events>
			<OnCreate>
				(objSetData gSource "governor" (random (objGetStaticData gSource "governorTable")))
			</OnCreate>
		</Events>

		<DockingPorts>
			<Port posAngle="-35"  posRadius="140"  posZ="0"		rotation="120"/>
			<Port posAngle="-85"  posRadius="140"  posZ="0"		rotation="120"/>

			<Port posAngle="55"   posRadius="140"  posZ="0"		rotation="210"/>
			<Port posAngle="5"	  posRadius="140"  posZ="0"		rotation="210"/>

			<Port posAngle="145"  posRadius="140"  posZ="0"		rotation="300"/>
			<Port posAngle="85"	  posRadius="140"  posZ="0"		rotation="300"/>

			<Port posAngle="235"  posRadius="140"  posZ="0"		rotation="30"	bringToFront="true"/>
			<Port posAngle="175"  posRadius="140"  posZ="0"		rotation="30"	bringToFront="true"/>
		</DockingPorts>

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionGrandHall" default="1">
								(switch
									;	Sometimes, such as when we use a Penitent ship for a Benedict mission,
									;	we're not svPlayer. In those cases, we don't get a mission.

									(!= (obj@ gPlayerShip 'sovereign) &svPlayer;)
										(scrShowScreen gScreen &dsRPGMessage; {
											desc:(scrTranslate gScreen 'textNoMissionAvailable {
												governor: (objGetData gSource 'governor)
												})
											})

									;	Missions

									(rpgMissionAssignment {
										missionCriteria: (cat "n +huariFortress; =" (sysGetLevel) ";")
										noMissionTextID: 'descNoMissions
										})
									)

							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="actionGrandHall">[G]rand Hall</Text>
			<Text id="actionUndock">[U]ndock</Text>

			<Text id="descWelcome">
				The Huari fortress is dark and cavernous. Huari men and women dressed in
				long, colorful clothing swarm around you as you enter. They are curious but shy.
			</Text>
			<Text id="descNoMissions">
				(block (
					(status (typGetData &svHuariEmpire; 'status))
					)
					(switch
						(= status 'defender)
							(objTranslate gSource 'textNoMissionForDefender)

						(= status 'loser)
							(objTranslate gSource 'textNoMissionForLoser)

						(= status 'templeDestroyed)
							(objTranslate gSource 'textTempleDestroyed {
								governor: (objGetData gSource 'governor)
								})

						(objTranslate gSource 'textNoMissionAvailable {
							governor: (objGetData gSource 'governor)
							})
						)
					)
			</Text>

			<Text id="textNoMissionAvailable">

				The Grand Hall is abuzz with activity; %governor% is too busy to see you.

			</Text>
			<Text id="textNoMissionForDefender">

				"Welcome back, %name%! Take your ease here before you continue
				your long journey."

			</Text>
			<Text id="textNoMissionForLoser">

				You enter the Grand Hall but the governors ignore your presence.
				You feel out of place here.

			</Text>
			<Text id="textTempleDestroyed">

				%governor% weeps alone in the Grand Hall.

				"All hope is lost now that our refuge has been destroyed.
				The Light has forsaken us and we are left with nothing."

			</Text>

			<Text id="huari.FirstIntro">

				Inside the Grand Hall you meet the governors of the fortress. A short,
				balding man with a ceremonial scepter greets you.

				"By all the mysteries of the Light! You come from a distant system to
				help us. So was it revealed. My name is %governor%, and I govern this
				fortress. If you have come to help us, then you are most welcome."

			</Text>
			<Text id="huari.Intro">

				%governor% is waiting for you:

				"Welcome back, friend. By all the glory of the Light, I can see you are
				confident and powerful. Will you use your powers to help us? If so, you
				are truly a shining messenger."

			</Text>
			<Text id="huari.Blacklisted">

				"The blessings of the Light are not always visible, but there is a
				streak of darkness within you that cannot be ignored. You are not
				our defender; you are just a fool who seeks but doesn't learn."

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stHuariHabitat;"
			name=				"Huari habitat"
			sovereign=			"&svHuariEmpire;"
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itAdvancedPlasteelPlate;"
			hitPoints=			"175"
			fireRateAdj=		"20"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, envWater, envAvoidsEarth, generic, huari, human, populated"
			level=				"5"
			>

		<Image			imageID="&rsHuariStationsImage;" imageX="0" imageY="270" imageWidth="162" imageHeight="174"/>

		<Devices>
			<Device deviceID="&itMarkIIIHowitzer;"	omnidirectional="true"/>
		</Devices>

		<Items>
			<Table>
				<Lookup chance="40" count="1" table="&trConsumables6;"/>
				<Lookup chance="40" count="1" table="&trMinorItem6;"/>
				<Lookup chance="20" count="1" table="&trMajorItem6;"/>
			</Table>
		</Items>

		<Ships>
			<Ship					count="1"	class="&scHurinDestroyer;"	orders="patrol" patrolDist="40"/>
		</Ships>

		<Reinforcements minShips="1">
			<Ship					count="1d2"	class="&scHurinDestroyer;"	orders="patrol" patrolDist="40"/>
		</Reinforcements>

		<DockScreens>
			<Main>

				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action name="Community Hall" key="C" default="1">
								(scrShowPane gScreen "CommunityHall")
							</Action>

							<Action name="Undock" key="U" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<CommunityHall>
						<OnPaneInit>
							(block (status)
								(setq status (typGetGlobalData &svHuariEmpire; "status"))
								(switch
									(eq status 'templeDestroyed)
										(scrSetDesc gScreen (cat
											"One of the station inhabitants approaches you:\n\n"
											"\"We mourn for the death of Apotamo and for the death of our race\"."
											))

									(scrSetDesc gScreen (cat
										"One of the station inhabitants approaches you:\n\n"
										"\"Welcome! You are not Huari, are you? Go to the temple and speak with Apotamo. He will guide you."
										))
									)
								)
						</OnPaneInit>

						<Actions>
							<Action name="Leave" key="L" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</CommunityHall>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts>
			<Port x="-74"	y="67" />
			<Port x="91"	y="24" />
			<Port x="67"	y="-65" />
			<Port x="33"	y="-85" />
			<Port x="-13"	y="-81" />

			<Port x="-61"	y="-62" />
			<Port x="-86"	y="0" />
		</DockingPorts>

		<Language>
			<Text id="descWelcome">

				The Huari habitat is filled with Huari men and women dressed in 
				long, colorful clothing.

			</Text>
		</Language>
	</StationType>
<!-- HuariMission01.xml -->
<!-- HuariMission02.xml -->
<!-- HuariMission03.xml -->
<!-- HUD.xml -->
<!-- HugoSandoval.xml -->
<!-- HumanSpaceMap.xml -->
<!-- HumanSpaceVol01.xml -->
<!-- HumanTech.xml -->
<!-- Ice.xml -->
<StationType UNID="&stIceAsteroidSizeA;"
		name=				"ice asteroid"
		attributes=			"asteroid, generic, ice, inner, lifeZone, outer"
		inherit=			"&baIceAsteroid;"

		scale=				"world"
		size=				"7"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsIceAsteroidSizeA;"/>

		<Items>
			<Table>
				<Null chance="95"/>
				<Lookup chance="5" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stIceAsteroidSizeB;"
		name=				"ice asteroid"
		attributes=			"asteroid, generic, ice, inner, lifeZone, outer"
		inherit=			"&baIceAsteroid;"

		scale=				"world"
		size=				"60"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsIceAsteroidSizeB;"/>

		<Items>
			<Table>
				<Null chance="95"/>
				<Lookup chance="5" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stIceAsteroidSizeC;"
		name=				"ice asteroid"
		attributes=			"asteroid, generic, ice, inner, lifeZone, outer"
		inherit=			"&baIceAsteroid;"

		scale=				"world"
		size=				"165"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsIceAsteroidSizeC;"/>

		<Items>
			<Table>
				<Null chance="95"/>
				<Lookup chance="5" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stIceAsteroidSizeD;"
		name=				"ice asteroid"
		attributes=			"asteroid, generic, ice, inner, lifeZone, outer"
		inherit=			"&baIceAsteroid;"

		scale=				"world"
		size=				"670"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsIceAsteroidSizeD;"/>

		<Items>
			<Table>
				<Null chance="95"/>
				<Lookup chance="5" count="1d10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stIcePlanetoidSizeE;"
		name=				"ice planetoid"
		attributes=			"generic, ice, inner, lifeZone, outer, planetoid"

		scale=				"world"
		size=				"1250"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsIcePlanetoidSizeE;"/>
	</StationType>
<StationType UNID="&stIcePlanetoidSizeF;"
		name=				"ice planetoid"
		attributes=			"generic, ice, inner, lifeZone, outer, planetoid"

		scale=				"world"
		size=				"2450"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsIcePlanetoidSizeF;"/>
	</StationType>
<StationType UNID="&stIcePlanetoidSizeG;"
		name=				"ice planetoid"
		attributes=			"generic, ice, inner, lifeZone, outer, planetoid"

		scale=				"world"
		size=				"4000"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsIcePlanetoidSizeG;"/>
	</StationType>
<!-- Iocrym.xml -->
<StationType UNID="&stIocrymOutpost;"
			name=				"Iocrym outpost"
			sovereign=			"&svIocrym;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			multiHull=			"true"
			armorID=			"&itIocrymPlate;"
			hitPoints=			"750"
			fireRateAdj=		"20"
			explosionType=		"&vtPlasmaExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, generic, iocrym, iocrymOutpost"
			>

		<Image imageID="&rsIocrymOutpost;" imageWidth="162" imageHeight="218"/>

		<Devices>
			<Device deviceID="&itIocrymRepeller;" omnidirectional="true"/>
		</Devices>

		<Ships>
			<Ship		count="1d6"		class="&scIocrymSentinel;" orders="patrol" patrolDist="10"/>
		</Ships>
		
		<Language>
			<Text id="core.abandonedStationDesc">

				You are docked at the remains of an alien outpost.
				The crystalline walls of this structure are cracked and pitted; 
				it appears that the outpost was fully automated as you see no signs of alien bodies.

			</Text>
		</Language>

		<DockingPorts>
			<Port x="-36"	y="80" />
			<Port x="-87"	y="40" />
			<Port x="-92"	y="-33" />
			<Port x="-42"	y="-85" />
			<Port x="36"	y="80" />
			<Port x="87"	y="40" />
			<Port x="92"	y="-33" />
			<Port x="42"	y="-85" />
		</DockingPorts>
	</StationType>
<!-- Jenna.xml -->
<!-- JiangsStar.xml -->
<!-- KateMorgental.xml -->
<!-- KobolWarlords.xml -->
<StationType UNID="&stKobolWarlordCamp;"
			name=				"Kobol warlord outpost(s)"
			sovereign=			"&svKobolWarlords;"

			attributes=			"enemy, envWater, envAvoidsEarth, generic, human, kobol, populated, warlords"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"322"
			fireRateAdj=		"20"
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+kobolSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"----- -cur- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"100"
				/>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itAdvancedCeralloyArmor;"
				hitPoints=		"470"
				regen=			"5"
				/>
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;"	posAngle="15"  posRadius="105" posZ="35"	fireArc="210"/>
			<Device deviceID="&itTeV9Blaster;"	posAngle="105" posRadius="105" posZ="35"	fireArc="210"/>
			<Device deviceID="&itTeV9Blaster;"	posAngle="195" posRadius="105" posZ="35"	fireArc="210"/>
			<Device deviceID="&itTeV9Blaster;"	posAngle="285" posRadius="105" posZ="35"	fireArc="210"/>

			<Device deviceID="&itTeV9Blaster;"	posAngle="60"  posRadius="60"  posZ="35"	omnidirectional="true" missileDefense="true" maxFireRange="6"/>
			<Device deviceID="&itTeV9Blaster;"	posAngle="150" posRadius="60"  posZ="35"	omnidirectional="true" missileDefense="true" maxFireRange="6"/>
			<Device deviceID="&itTeV9Blaster;"	posAngle="240" posRadius="60"  posZ="35"	omnidirectional="true" missileDefense="true" maxFireRange="6"/>
			<Device deviceID="&itTeV9Blaster;"	posAngle="330" posRadius="60"  posZ="35"	omnidirectional="true" missileDefense="true" maxFireRange="6"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Squadron table="&tbKobolDefenders;"	count="challenge:standard"	reinforce="auto"/>

		<!-- Treasure and Items -->

		<Items>
			<Item count="1d12"	  item="&itGotha400Seeker;"/>
			<Item count="4d12"	  item="&itGotha10Missile;"/>
			<Table>
				<Lookup chance="40" count="1" table="&trConsumables8;"/>
				<Lookup chance="40" count="1" table="&trMinorItem8;"/>
				<Lookup chance="20" count="1" table="&trMajorItem8;"/>
			</Table>
		</Items>

		<!-- Images and Effects -->

		<Image			imageID="&rsKobolOutpost;" imageWidth="250" imageHeight="250" viewportRatio="0.04"/>

		<DockingPorts
				portAngle=		"-30"
				portCount=		"8"
				portRadius=		"136"
				/>

		<!-- Random Encounters -->

		<Encounters frequency="common">
			<Lookup table="&tbKobolEncounters;"/>
		</Encounters>

	</StationType>
<!-- KorolovFreighters.xml -->
<!-- KorolovShipping.xml -->
<StationType UNID="&stKorolovShipping;"
			name=				": Korolov Shipping"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"
				 
			attributes=			"corporate, corporateCustoms, corporateDecon, envAir, envEarth, envFire, envWater, friendly, generic, human, majorStation, korolovShipping, populated"
				 
			dockScreen=			"Dispatch"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			size=				"390"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"630"
			multiHull=			"true"
			regen=              "6"
			shipRegen=			"6"
				 
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"+corporateCore;"
				levelFrequency=			"ccc-- ----- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"

				unique=					"inSystem"
				/>

		<!-- Properties -->

		<Properties>
			<Variant id="rpgCharacter.assistantDirector">
				(rpgCharacterRandom gSource "x +assistantDirector; +korolov;" 'assistantDirector)
			</Variant>
		</Properties>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; +basicAmmo; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -illegal; -notForSale; -notStandard;"	priceAdj="100"	noDescription="true"/>

			<Refuel			criteria="f +BasicFuel; L:1-5;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-8;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-8;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-6;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-6;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<BalanceTrade	criteria="{human.basicFood}"	impact="10"/>
			<BalanceTrade	criteria="{human.lux}"		impact="10"/>
			<BalanceTrade	criteria="{human.res}"		impact="10"/>
			<BalanceTrade	criteria="{core.ore}"			impact="5"/>

			<ConsumeTrade	criteria="{core.fusionFuel}"		impact="5"/>
		</Trade>
		
		<Items>
			<RandomItem count="1d4" criteria="r +commonwealth; -illegal; -military; -notForSale; -notStandard; L:3-6;"		levelFrequency="systemLevel:ru|c|curv"/>
		</Items>

		<!-- Configuration -->

		<!-- Satellites -->
		
		<Satellites>
			<Orbitals count="1d4" distance="2d8+6" angle="random">
				<Station type="&stSealedCargoContainer;"/>
			</Orbitals>
		</Satellites>

		<!-- Ships and Defenses -->
		
		<Ships>
			<Ship					count="1d2" class="&scRoninC;" orders="guard"/>
			<Table count="1d4+1">
				<Ship chance="20" 	count="1" class="&scEI100;" eventHandler="&evKorolovFreighterBehavior;"/>
				<Ship chance="20" 	count="1" class="&scEI200;" eventHandler="&evKorolovFreighterBehavior;"/>
				<Ship chance="15" 	count="1" class="&scEI7000;" eventHandler="&evKorolovFreighterBehavior;"/>
				<Ship chance="15" 	count="1" class="&scAntaresI;" eventHandler="&evKorolovFreighterBehavior;"/>
				<Ship chance="15" 	count="1" class="&scAntaresII;" eventHandler="&evKorolovFreighterBehavior;"/>
				<Ship chance="15" 	count="1" class="&scAntaresV;" eventHandler="&evKorolovFreighterBehavior;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->
		
		<Image			imageID="&rsKorolovShipping;" imageWidth="292" imageHeight="364"/>

		<DockingPorts>
			<Port x="-18"	y="128" />
			<Port x="100"	y="127" />
			<Port x="156"	y="31" />
			<Port x="165"	y="-45" />
			<Port x="98"	y="-75" />
			<Port x="120"	y="-153" />

			<Port x="0"		y="-162" />
			<Port x="-90"	y="-165" />
			<Port x="-103"	y="-82" />
			<Port x="-178"	y="-46" />
			<Port x="-113"	y="43" />
			<Port x="-98"	y="122" />
		</DockingPorts>

		<!-- Dock Screen -->

		<DockScreens>
			<Dispatch>
				<Display type="detailsPane">
					<OnDisplayInit>
						(typTranslate &unidKorolovShipping; 'rankDetails)
					</OnDisplayInit>
				</Display>

				<Panes>
					<Default descID="descWelcome">
						<OnPaneInit>
							(block (
								(playerLevel (typGetData &unidKorolovShipping; 'level))
								)
								(switch
									(not playerLevel)
										(block ()
											(scrSetActionDesc gScreen 'actionDockServices (scrTranslate gScreen 'descNoDockServices.noRank))
											(scrEnableAction gScreen 'actionDockServices Nil)

											(scrShowAction gScreen 'actionServiceRecord Nil)
											)

									(= playerLevel -1)
										(block ()
											(scrSetActionDesc gScreen 'actionDockServices (scrTranslate gScreen 'descNoDockServices.blacklisted))
											(scrEnableAction gScreen 'actionDockServices Nil)
											)
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionInformation">
								(scrShowScreen gScreen &dsRPGDialog; (objTranslate gSource 'korolov.info))
							</Action>

							<Action id="actionOperations" default="1">
								(block (
									(playerLevel (korGetPlayerLevel))
									theMission
									)
									;	If we've done enough escort missions we need to destroy any
									;	remaining open escort missions.

									(if (= (objGetData gSource 'remainingMissions) 0)
										(enum (msnFind gSource "oS +korolov; +escort;") theMission
											(msnDestroy theMission)
											)
										)

									(switch
										;	If we have an active mission from this station then we show it.

										(setq theMission (@ (msnFind gSource "aS +korolov;") 0))
											(scrShowScreen gScreen &dsRPGMission; {	missionObj: theMission })

										;	Check if we have any special (non-escort) missions

										(setq theMission (rpgMissionGetAssignment {
												missionCriteria: "n +korolov; -escort;"
												displayCriteria: "n +korolov; -escort;"
												}))
											(scrShowScreen gScreen &dsRPGMission; {	missionObj: theMission })

										;	Too many failures
										
										(= playerLevel -1)
											(scrShowScreen gScreen &dsRPGDialog; { desc:(scrTranslate gScreen 'descTooManyFailures) })

										;	Already a legend
										
										(= playerLevel 4)
											(scrShowScreen gScreen &dsRPGDialog; { desc:(scrTranslate gScreen 'descAlreadyALegend) })
											
										;	If the main stronghold is destroyed, no need for escorts
										
										(objIsAbandoned (objGetObjRefData gSource 'charonStronghold))
											(scrShowScreen gScreen &dsRPGDialog; { desc:(scrTranslate gScreen 'descNoEscortsNeeded) })
											
										;	If we failed to destroy stronghold, we stop missions
										
										(objGetData gSource 'charonDominates)
											(scrShowScreen gScreen &dsRPGDialog; { desc:(scrTranslate gScreen 'descFreightersGrounded) })
											
										;	If the Charon Fortress is destroyed, no missions
										
										(= (typGetGlobalData &stCharonPirateFortress; 'status) 'destroyed)
											(scrShowScreen gScreen &dsRPGDialog; { desc:(scrTranslate gScreen 'descFortressDestroyed) })
											
										;	If we're giving out escort missions, then show the list of
										;	freighters.
									
										(and (gr (objGetData gSource 'remainingMissions) 0)
												(find '(0 1 2 3) playerLevel)
												(not (objIsAbandoned (objGetObjRefData gSource 'charonStronghold)))
												)
											(scrShowScreen gScreen &dsKorolovEscortList;)
												
										;	Otherwise, nothing

										(scrShowScreen gScreen &dsRPGDialog; { desc:(scrTranslate gScreen 'descNoMissions) })
										)
									)
							</Action>

							<Action id="actionServiceRecord">
								(scrShowScreen gScreen 'ServiceRecord)
							</Action>

							<Action id="actionDockServices">
								(block (
									(playerLevel (typGetData &unidKorolovShipping; 'level))
									)
									(switch
										(not playerLevel)
											(scrShowScreen gScreen &dsRPGMessage; {
												desc: (scrTranslate gScreen 'descNoDockServicesAccess)
												})

										(= playerLevel -1)
											(scrShowScreen gScreen &dsRPGMessage; {
												desc: (scrTranslate gScreen 'descNoDockServicesAccess)
												})

										(rpgDockServices gPlayerShip)
										)
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Dispatch>
			
			<ServiceRecord
				name=			"Situation Screen"
				backgroundID=	"none"
				>
				<OnScreenInit>
					(block (
						(shipList (sort (map (korFreighterTypes) theType {
								class:theType
								name:(shpGetClassName theType 0x080)
								level:(max (typGetStaticData theType 'korolovMinLevel) 1)
								})
							'ascending 'name))
						(levelList (map (make 'sequence 3) level (filter shipList theShip (= (@ theShip 'level) level))))
						)
						(scrSetData gScreen 'nameList
							(join (map levelList theList (join (map theList theShip (@ theShip 'name)) "\n")) "\n\n")
							)
						(scrSetData gScreen 'levelList levelList)
						)
				</OnScreenInit>

				<Display>
					<Text left="140" top="24" right="-24" height="28" font="SubTitle" color="255,210,152">
						(plyComposeString gPlayer "%name%")
					</Text>

					<Image left="12" top="24" width="120" height="120" transparent="true">
						(block (
							(level (korGetPlayerLevel))
							)

							(if (gr level 0)
								(resCreateImageDesc
									&rsKorolovInsignia;
									(multiply 120 (subtract level 1))
									0
									120
									120
									)
								Nil
								)
							)
					</Image>

					<Text left="140" top="52" right="-24" height="32" font="Large" color="200,206,199">
						(@
							'(
								"Dishonorably discharged"	; -1 blacklisted
								"New pilot in the Korolov Shipping Corporation"				; 0
								"Apprentice in the Korolov Shipping Corporation"				; 1
								"Journeyman in the Korolov Shipping Corporation"				; 2
								"Master in the Korolov Shipping Corporation"					; 3
								"Legend in the Korolov Shipping Corporation"					; 4
								)
							(+ (typGetData &unidKorolovShipping; 'level) 1)
							)
					</Text>

					<Text left="140" top="84" right="-24" height="18" font="MediumBold" color="255,210,152">
						"Service Record:"
					</Text>

					<Text left="140" top="102" right="280" bottom="-120" font="LargeBold" color="200,206,199">
						(scrGetData gScreen 'nameList)
					</Text>

					<Text left="280" top="102" right="-24" bottom="-120" font="Large" color="149,153,148">
						(join (map (scrGetData gScreen 'levelList) theList
								(join (map theList theShip (korEscortRecord (@ theShip 'class))) "\n")
								)
							"\n\n")
					</Text>

					<Text left="140" top="400" right="-24" height="18" font="MediumBold" color="255,210,152">
						(block (showText)
							(setq showText (gr (typGetData &unidKorolovShipping; 'recordStrongholds) 0))
							(if showText "Commendations:" "")
							)
					</Text>

					<Text left="140" top="416" right="-24" bottom="-12" font="Large" color="149,153,148">
						(block (
							(strongholdsDestroyed (typGetData &unidKorolovShipping; 'recordStrongholds))
							)

							(cat
								(switch
									(not strongholdsDestroyed)
										""

									(= strongholdsDestroyed 0)
										""

									(= strongholdsDestroyed 1)
										"Korolov Sign of Distinction for destroying a Charon stronghold.\n"

									(cat
										"Korolov Sign of Honor for destroying "
										(strNumber strongholdsDestroyed)
										" Charon strongholds.\n"
										)
									)
								)
							)
					</Text>
				</Display>

				<Panes>
					<Default>
						<OnPaneInit>
						</OnPaneInit>

						<Actions>
							<Action id="actionDone" cancel="1" default="1">
								(scrShowScreen gScreen 'Dispatch)
							</Action>
						</Actions>
					</Default>
				</Panes>
			</ServiceRecord>
		</DockScreens>

		<!-- Events and Data -->
		
		<Events>
			<OnCreate>
				(block (charonStronghold)
					; Register a recurring event
					(sysAddObjRecurringTimerEvent 240 gSource "OnTrafficControl")

					; Allow a finite number of escort missions from each station
					(objSetData gSource 'remainingMissions (+ 3 (modulo (objGetDestiny gSource) 7)))

					; Find the primary Charon stronghold in the system
					(setq charonStronghold (chrGetPrimaryStronghold gSource))
					(objSetObjRefData gSource "charonStronghold" charonStronghold)
					)
			</OnCreate>

			<OnDestroy>
				(block Nil
					(typFireObjEvent &baCorporateStation; gSource 'OnDestroy)
					(sysCancelTimerEvent gSource "OnTrafficControl")
					)
			</OnDestroy>

			<OnTrafficControl>
				(korTrafficControl gSource)
			</OnTrafficControl>
			
			<OnObjDocked>
				(if (and (eq aDockTarget gSource)
						(not (objGetProperty gSource 'abandoned))
						(objGetData aObjDocked 'korolov_traffic)
						)
					(block (theEscort)
						(if (setq theEscort (objGetObjRefData aObjDocked 'escortID))
							(block Nil
								(shpCancelOrders theEscort)
								(if (gr (objGetOpenDockingPortCount gSource) 1)
									(shpOrder theEscort 'guard gSource)
									(shpOrder theEscort 'gate)
									)
								(objSetData theEscort 'korolovEscort Nil)
								)
							)
						(objSetObjRefData aObjDocked 'escortID Nil)
						)
					)
			</OnObjDocked>

			<GetRumors>
				(block (
					(rank (korGetPlayerLevel))
					)
					{
						attributes: "commonwealthPub"
						priority: 21
						textID: (switch
							(or (not rank) (= rank 0))	'rumor.commonwealthPub.norank
							(ls rank 0)					'rumor.commonwealthPub.blacklisted
														'rumor.commonwealthPub.member
							)
						data: {station: (objGetName gSource)}
						onExitRumor: (lambda (theRumor) (objSetKnown (@ theRumor 'sourceObj)))
						}
					)
			</GetRumors>
		</Events>

		<Language>
			<Text id="actionInformation">[I]nformation</Text>
			<Text id="actionOperations">[O]perations Level</Text>
			<Text id="actionServiceRecord">[S]ervice Record</Text>
			<Text id="actionEnemyData">[E]nemy Intelligence</Text>
			<Text id="actionNext">[N]ext Ship</Text>
			<Text id="actionPrev">[P]revious Ship</Text>

			<Text id="descNoServiceRecord">You have no service record with the Korolov Shipping Corporation.</Text>

			<Text id="descNoDockServicesAccess">The dock services area is restricted to members only.</Text>

			<Text id="descNoDockServices.noRank">Complete a mission to access dock services</Text>
			<Text id="descNoDockServices.blacklisted">Access denied due to blacklist</Text>
			
			<Text id="descWelcome">
				(block (
					(level (korGetPlayerLevel))
					)
					(cat
						(typTranslate gType 'descWelcomeStart) "\n\n"
						(switch
							(= level -1)
								(typTranslate gType 'descWelcome.blacklisted)

							(and (geq level 1) (leq level 4))
								(typTranslate gType (cat "descWelcome." level))

							(typTranslate gType 'descWelcome.1)
							)
						)
					)
			</Text>
			<Text id="descWelcomeStart">
				You are in the main hall of a Korolov Shipping Company station.
			</Text>
			<Text id="descWelcome.blacklisted">

				Conversations stop as you enter the room. Whispered 
				condemnations make it clear that you are not welcome among the 
				freighter crews and captains.

			</Text>
			<Text id="descWelcome.1">

				The walls are decorated with holopanes honoring the men and 
				women who died defending Korolov freighters.

			</Text>
			<Text id="descWelcome.2">

				The freighter captains welcome you as you enter.

			</Text>
			<Text id="descWelcome.3">

				The more experienced escort captains welcome you as you enter;
				you are treated with deference and respect.

			</Text>
			<Text id="descWelcome.4">

				Murmured excitement ripples across the hall as you enter; 
				everyone crowds around to greet you.

			</Text>

			<String id="descNoMissions">
				"Sorry, there are no missions currently available."
			</String>
			<Text id="descTooManyFailures">

				"Sorry, captain, but your escort record is terrible. 
				No freighter wants to be defended by you."

			</Text>
			<Text id="descAlreadyALegend">

				"Sorry, but Director Hammil doesn't want to risk your life. 
				The other shipping companies don't have a legendary pilot like you!"

			</Text>
			<Text id="descNoEscortsNeeded">

				"Sorry, there is no need for your escort skills now that the Charon base 
				in the system has been destroyed. I bet other systems could use your help, though."

			</Text>
			<Text id="descFreightersGrounded">

				"Sorry, all freighters are grounded. The Charon stronghold in 
				this system is too strong."

			</Text>
			<Text id="descFortressDestroyed">

				"Sorry, there is no need for your escort skills now that 
				the Fortress of the Charon Pirates has been destroyed."

			</Text>
			
			<Text id="descSelectOption">Select an option:</Text>

			<Text id="korolov.info">
				(list
					{	id: 'welcome
						descID: 'textInfo1
						actions: (list
							{	labelID: 'actionOurMission			nextPage:'ourMission	}
							{	labelID: 'actionFreighterData		nextPage:'code
								code: (lambda ()
									(scrShowScreen gScreen &dsRPGShipClassViewer; {
										list: (list

											;	NOTE: If you add items to the list, make sure
											;	you add a description in the Language section.

											{	shipClass:&scEI100;	}
											{	shipClass:&scEI200;	}
											{	shipClass:&scEI7000;	}
											{	shipClass:&scAntaresI;	}
											{	shipClass:&scAntaresII;	}
											{	shipClass:&scAntaresV;	}
											)
										})
									)
								}

							{	labelID: 'actionEnemyIntel			nextPage:'code
								code: (lambda ()
									(scrShowScreen gScreen &dsRPGShipClassViewer; {
										list: (list

											;	NOTE: If you add items to the list, make sure
											;	you add a description in the Language section.

											{	shipClass:&scCorsair;	}
											{	shipClass:&scViking;	}
											{	shipClass:&scCorsair-II;	}
											{	shipClass:&scViking-II;	}
											{	shipClass:&scDrake;	}
											{	shipClass:&scCharonFrigateRaider;	}
											)
										})
									)
								}

							{	labelID: 'actionDone				nextPage:'exitScreen	}
							)
						}
					{	id: 'ourMission
						descID: 'textOurMission1		labelID: 'actionContinue
						}
					{	descID: 'textOurMission2		labelID: 'actionContinue	}
					{	descID: 'textOurMission3		labelID: 'actionDone	nextPage: 'welcome	}
					)
			</Text>
			<Text id="actionOurMission">[O]ur Mission</Text>
			<Text id="actionFreighterData">[F]reighter Data</Text>
			<Text id="actionEnemyIntel">[E]nemy Intelligence</Text>

			<Text id="textInfo1">

				The Korolov Shipping Corporation is largest and oldest shipping
				company in Human Space.

			</Text>
			<Text id="textOurMission1">

				Let's face it: most people don't consider interplanetary 
				shipping to be a sexy occupation. 3DV catalogs are filled with 
				the exploits of the Fleet or even the Commonwealth Militia, but 
				(other than the fringe series 'Antares Heavy') no one chronicles
				the day-to-day challenges of the lowly freighter or the men and 
				women who keep it safe.

				That's a shame because the life of a freighter escort captain 
				can be very exciting. In the less-populated systems of the New 
				Beyond, the dangers from pirates and outlaws can be extreme.
				
				Fighting off a wave of Corsair-class gunships while defending a 
				12-kiloton freighter requires sharp skills and a strong 
				protective instinct.
				
				And the pay is pretty good too.
			
			</Text>
			<Text id="textOurMission2">

				If you want to be an escort pilot for Korolov you'll want to 
				make sure you and your ship are ready. Lasers are probably the 
				best option against the kinds of threats you'll encounter, the
				bigger the better.
				
				But don't neglect your shields: Sometimes you'll need to 
				interpose yourself between the freighter you're protecting and 
				an incoming missile.

			</Text>
			<Text id="textOurMission3">
			
				To be a successful escort pilot you also need to do some 
				planning before you go out. The more valuable the cargo, the 
				more powerful the threat against it. Don't accept a request to 
				escort a cargo load beyond your abilities.
				
				At the same time, managers at Korolov like their escort pilots 
				to have wide-ranging experience. Make sure you escort a variety
				of freighters, from the tiny EI100s to the massive Antares Vs.
			
			</Text>
			<Text id="rpg.shipClassDesc.&scEI100;">

				The EI100 class freighter was designed for fast interplanetary 
				transportation. Early in its history, it even carried 
				passengers, but today it carries light commodities.
				
				Because of the relatively low value of its cargo, the EI100 is
				often escorted by apprentice pilots.

			</Text>
			<Text id="rpg.shipClassDesc.&scEI200;">

				The EI200 class freighter is a larger and faster version of the 
				100 series. It has double the cargo capacity and upgraded armor 
				and weapons. It is designed to transport small quantities of 
				high-value cargo.
				
				The EI200 is so well defended that even apprentices are allowed 
				to escort them.

			</Text>
			<Text id="rpg.shipClassDesc.&scEI7000;">

				The 7000 is the most powerful member of the EI freighter series.
				With a cargo capacity of 2 kilotons and heavy armor and weapons,
				the EI7000 is ideal for high-value cargos.
				
				Only journeymen and masters are rated to escort the EI7000 
				class.

			</Text>
			<Text id="rpg.shipClassDesc.&scAntaresI;">

				The Antares I design is more than a hundred years old, built 
				originally by the massive Polyarny Shipyards orbiting Ceres. 
				Slow and unencumbered by armor, the Antares I can haul 30 
				kilotons of cargo, but only the most skilled pilots can protect
				it from pirate attack.
				
				Only masters in the Korolov Shipping Corporation are rated to 
				escort the Antares I class.

			</Text>
			<Text id="rpg.shipClassDesc.&scAntaresII;">

				While sacrificing none of its cargo capacity, the Antares II has
				a top speed 50% higher than its predecessor.
				
				Escort pilots must have the rank of journeyman or master to 
				defend the Antares II class.

			</Text>
			<Text id="rpg.shipClassDesc.&scAntaresV;">

				The Antares V is a stretched version of the earlier II series.
				It has larger cargo capacity and upgraded weapons.
				
				Escort pilots must have the rank of journeyman or master to 
				escort the Antares V class.

			</Text>
			<Text id="rpg.shipClassDesc.&scCorsair;">

				The backbone of the Charon Pirate fleet consists of these fast and
				deadly gunships. Piloted by young and somewhat inexperienced pirates,
				they are nonetheless dangerous in large numbers.

			</Text>
			<Text id="rpg.shipClassDesc.&scViking;">

				The Viking-class gunship is powerful and well-armored. It is slower
				than a Corsair, but more than fast enough to chase down a freighter.

			</Text>
			<Text id="rpg.shipClassDesc.&scCorsair-II;">

				More than an upgrade, the Corsair-II sports shields and a missile launcher.

			</Text>
			<Text id="rpg.shipClassDesc.&scViking-II;">

				The Viking-II is an upgraded version with shields and dual turbolasers.

			</Text>
			<Text id="rpg.shipClassDesc.&scDrake;">

				The Drake is the pirates' mobile battering ram. Heavily armored and loaded
				with missiles, the Drake will pummel you to pieces from long range.

			</Text>
			<Text id="rpg.shipClassDesc.&scCharonFrigateRaider;">

				The sight of these frigates brings fear to most freighter pilots. Fast,
				silent, and loaded with hurt, a Charon frigate can destroy a small fleet of
				escort ships. Do not challenge these ships unless you know what you're doing.

			</Text>

			<Text id="korolov.shipDesc.1454081">

				The backbone of the Charon Pirate fleet consists of these fast and
				deadly gunships. Piloted by young and somewhat inexperienced pirates,
				they are nonetheless dangerous in large numbers.

			</Text>
			<Text id="korolov.shipDesc.1454082">

				The Viking-class gunship is powerful and well-armored. It is slower
				than a Corsair, but more than fast enough to chase down a freighter.

			</Text>
			<Text id="korolov.shipDesc.1454083">

				More than an upgrade, the Corsair-II sports shields and a missile launcher.

			</Text>
			<Text id="korolov.shipDesc.134414405">

				The Viking-II is an upgraded version with shields and dual turbolasers.

			</Text>
			<Text id="korolov.shipDesc.134414404">

				The Drake is the pirates' mobile battering ram. Heavily armored and loaded
				with missiles, the Drake will pummel you to pieces from long range.

			</Text>
			<Text id="korolov.shipDesc.1454084">

				The sight of these frigates brings fear to most freighter pilots. Fast,
				silent, and loaded with hurt, a Charon frigate can destroy a small fleet of
				escort ships. Do not challenge these ships unless you know what you're doing.

			</Text>

			<Text id="rumor.commonwealthPub.norank">

				You spend 5 credits on drinks. You talk to a couple of freighter pilots
				who try to convince you to fly escort missions for Korolov Shipping.

			</Text>
			<Text id="rumor.commonwealthPub.blacklisted">

				A group of freighter pilots point in your direction, talking about how
				you blew your escort mission. You settle up a 5 credit tab and get ready
				to leave.

			</Text>
			<Text id="rumor.commonwealthPub.member">

				A group of freighter pilots welcome you into their group. You tell various
				stories about your run-ins with the Charon pirates, but in the end you still
				get stuck with the 5 credit tab.

			</Text>

			<Text id="core.mapDescMain">
				"Hires freighter escorts"
			</Text>
			<Code id="rpg.statusDetails">
				(typTranslate &unidKorolovShipping; 'rankDetails)
			</Code>
		</Language>
	</StationType>
<!-- Kronosaurus.xml -->
<!-- KronosaurusMission01.xml -->
<!-- KSMission01.xml -->
<!-- KSMission02.xml -->
<!-- KSMission03.xml -->
<!-- KSMissionC01.xml -->
<!-- KSMissionC02.xml -->
<StationType UNID="&stKorolovAtCharonCons;"
			name=				": Korolov Shipping"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"
				 
			attributes=			"corporate, corporateCustoms, corporateDecon, friendly, human, majorStation, populated, korolovShipping, underConstruction"
				 
            level=              "4"
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			size=				"390"
			armorID=			"&itPlasteelPlate;"
			maxHitPoints=		"470"
			hitPoints=			"150"
			multiHull=			"true"
			regen=			    "2"
				 
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Properties>
			<Variant id="rpgCharacter.assistantDirector">
				(rpgCharacterRandom gSource "x +assistantDirector; +korolov;" 'assistantDirector)
			</Variant>
		</Properties>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>
		
		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="1d2" table="&tbCommDefenders;"/>
			<Lookup count="1d4" table="&tbCommPrivateCrafts;"/>
			<Ship	count="2d6" class="&scRoninC;" orders="patrol" patrolDist="10"/>
		</Ships>

		<!-- Image and Effects -->
		
		<Image			imageID="&rsKorolovShippingConstruction;" imageWidth="332" imageHeight="376"/>

		<DockingPorts>
			<Port x="-18"	y="128" />
			<Port x="100"	y="127" />
			<Port x="156"	y="31" />
			<Port x="165"	y="-45" />
			<Port x="98"	y="-75" />
			<Port x="120"	y="-153" />

			<Port x="0"		y="-162" />
			<Port x="-90"	y="-165" />
			<Port x="-103"	y="-82" />
			<Port x="-178"	y="-46" />
			<Port x="-113"	y="43" />
			<Port x="-98"	y="122" />
		</DockingPorts>

		<!-- Dock Screen -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<Events>
		</Events>

		<Language>
			<Text id="descWelcome">

				You are in the main hall of a Korolov Shipping Company station. 
				The station is under construction.

			</Text>
			<Text id="core.mapDesc">
				Under construction
			</Text>
		</Language>
	</StationType>
<!-- LiaPereira.xml -->
<!-- Luminous.xml -->
<StationType UNID="&stLuminousAssembler;"
			name=				"Luminous Assembler"
			sovereign=			"&svLuminous;"

			attributes=			"ai, enemy, envWater, envAvoidsEarth, generic, luminous, score"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			armorID=			"&itLuminousArmature;"
			hitPoints=			"600"
			multiHull=			"true"
            regen=              "3.0"

			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+luminousSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"----- -ucur ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<!-- Treasure -->

		<Items>
			<Group value="standard:level=8:x=1.4">
				<Table>
					<RandomItem chance="40"	count="1d6"
							criteria=			"* +Info; -NotStandard; "
							levelFrequency=		"----u ccur-"
							/>
					<Lookup		chance="40" count="1d6" table="&trLuminousTreasure;"/>
					<Lookup		chance="20" count="1"	table="&trStdTreasure;"/>
				</Table>
			</Group>
		</Items>

		<!-- Configuration -->

		<Devices>
		</Devices>

		<!-- Satellites -->

		<!-- Ships and Defenses -->

		<Ships>
			<Ship			count="1d6"	class="&scLuminousDrone;"	orders="patrol" patrolDist="5"/>
		</Ships>

		<Construction constructionRate="500" maxConstruction="12">
			<Table>
				<Ship chance="100" count="1"	class="&scLuminousDrone;" orders="patrol" patrolDist="5"/>
			</Table>
		</Construction>

		<!-- Image and Effects -->

		<Image			imageID="&rsStations8;" imageX="0" imageY="0" imageWidth="192" imageHeight="192"/>

		<DockingPorts
				portCount=		"8"
				portRadius=		"100"
				/>

		<!-- Random Encounters -->
		
		<Encounters frequency="common">
			<Ship							   count="1"	 class="&scLuminousDrone;" eventHandler="&evStdPatrolEncounterBehavior;">
				<Escorts>
					<Ship					   count="1d4-1" class="&scLuminousDrone;" orders="escort"/>
				</Escorts>
			</Ship>
		</Encounters>

		<!-- Events and Data -->

		<GlobalData>
			<Resist>
				; particle  blast  ion  thermo  total
				(1 1 1 1 4)
			</Resist>
		</GlobalData>

		<Language>
			<Text id="core.abandonedStationDesc">

				You are docked at the remains of a Luminous assembler.
				This automated factory churned out drones controlled by 
				the mysterious sentient entity known as Luminous.

			</Text>
		</Language>
	</StationType>
<!-- Makayev.xml -->
<StationType UNID="&stArmsDealerMakayev;"
			name=				": Makayev-Energia Space Systems|Makayev-Energia Space Systems"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"5"
			multiHull=			"true"
			armorID=			"&itBlastPlate;"
			hitPoints=			"350"
			regen=				"12"
			fireRateAdj=		"20"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"corporate, corporateArms, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, makayev, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"--rur v---- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +makayev; -defective; -military; -illegal; -notForSale;" priceAdj="100" inventoryAdj="500" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>

			<RepairArmor	criteria="a L:1-8;" priceAdj="100"/>
			<ReplaceArmor	criteria="a +makayev; L:1-7;" priceAdj="100"/>
			<InstallDevice	criteria="d +makayev; L:1-7;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-7;" priceAdj="100"/>
			
			<ReplaceArmor	criteria="a L:1-7;" priceAdj="unavailable"	messageID="descNoInstall"/>
			<InstallDevice	criteria="d L:1-7;" priceAdj="unavailable"	messageID="descNoInstall"/>
		</Trade>

		<Items>
			<RandomItem count="1d12" 
					criteria=		"w L:1-7; +Makayev; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"10"
					enhancement=	"=(intMakayevWeaponEnhancement gItem)"
					/>

			<RandomItem chance="65" count="1d4" 
					criteria=		"d~w L:1-7; +Makayev; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>

			<RandomItem count="2d12" 
					criteria=		"a L:1-7; +Makayev; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"10"
					enhancement=	"=(intMakayevArmorEnhancement gItem)"
					/>

			<LevelTable count="1-8">
				<Item levelFrequency="----u ccur-"	count="40-60"	item="&itStrelkaRed;" />
				<Item levelFrequency="----- -uccu"	count="40-60"	item="&itStrelkaBlack;" />
			</LevelTable>
		</Items>

		<!-- Configuration -->

		<Devices>
			<LevelTable>
				<Device levelFrequency="ucr-- -----"	deviceID="&itMoskvaLightTurret;" />
				<Device levelFrequency="rucr- -----"	deviceID="&itSlamCannon;"		omnidirectional="true"/>
				<Device levelFrequency="-rucr -----"	deviceID="&itMarkIHowitzer;"	omnidirectional="true"/>
				<Device levelFrequency="--ruc r----"	deviceID="&itMarkIIIHowitzer;"	omnidirectional="true"/>
				<Device levelFrequency="---ru cr---"	deviceID="&itMarkVHowitzer;"	omnidirectional="true"/>
			</LevelTable>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships standingCount="3-4">
			<Table>
				<Lookup chance="75" table="&tbCorpMakayevDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsCorporateArmsDealer;" imageWidth="148" imageHeight="226" viewportRatio="0.03125"/>

		<DockingPorts
				portCount=		"8"
				portAngle=		"-15"
				portRadius=		"100"
				/>
		
		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionDockServices" default="1">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionBuyItems">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>

					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->

		<Language>
			<Text id="descWelcome">

				You are docked at a Makayev-Energia weapons franchise.

			</Text>
			<Text id="descNoInstall">

				We only install Makayev items. We cannot install %itemName% on 
				your ship.

			</Text>
			<Text id="dockServices:installAbility">

				We install Makayev items up to tech level %maxLevel%.

			</Text>

			<Text id="core.mapDesc">

				Repairs armor up to level 8 &mdash;
				Installs Makayev armor up to level 7 &mdash;
				Installs Makayev devices up to level 7 &mdash;
				Sells Makayev products

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stMakayevFactory;"
			name=				"Makayev manufacturing plant"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itAdvancedPlasteelPlate;"
			hitPoints=			"1890"
			regen=              "19"
			fireRateAdj=		"15"
			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"corporate, corporateArms, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, independent, generic, human, majorStation, Makayev, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"+corporateCore;"
				levelFrequency=			"----- rrur- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"75"

				unique=					"inSystem"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +makayev; -defective; -illegal; -notForSale;" priceAdj="100" inventoryAdj="800" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU +makayev; -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>

			<Refuel			criteria="f +BasicFuel; L:1-10;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-9;" priceAdj="100"/>
			<ReplaceArmor	criteria="a +makayev;" priceAdj="100"/>
			<InstallDevice	criteria="d +makayev;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-10;" priceAdj="100"/>
			
			<ReplaceArmor	criteria="a L:1-10;" priceAdj="unavailable"	messageID="descNoInstall"/>
			<InstallDevice	criteria="d L:1-10;" priceAdj="unavailable"	messageID="descNoInstall"/>

			<ConsumeTrade	criteria="{core.antimatterFuel}"	impact="3"/>
			<ConsumeTrade	criteria="{human.res}"		impact="3"/>
			<ConsumeTrade	criteria="{core.ore}"			impact="3"/>
		</Trade>

		<Items>
			<RandomItem count="2d3"
					criteria=		"w L:1-10; +Makayev; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:uc|c|crv"
					enhanced=		"20"
					enhancement=	"=(intMakayevWeaponEnhancement gItem)"
					/>

			<RandomItem count="2d6"
					criteria=		"a L:1-10; +Makayev; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:uc|c|crv"
					enhanced=		"20"
					enhancement=	"=(intMakayevArmorEnhancement gItem)"
					/>

			<RandomItem count="2d3"
					criteria=		"w L:1-10; +Makayev; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"10"
					enhancement=	"=(intMakayevWeaponEnhancement gItem)"
					/>

			<RandomItem count="2d6"
					criteria=		"a L:1-10; +Makayev; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"10"
					enhancement=	"=(intMakayevArmorEnhancement gItem)"
					/>

			<RandomItem count="1d4"
					criteria=		"d~w L:1-10; +Makayev; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:rucc|c|ur"
					/>
		</Items>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itMarkVHowitzer;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships standingCount="4-5">
			<Table>
				<Lookup chance="50" table="&tbCorpMakayevDefenders;"/>
				<Lookup chance="50" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image imageID="&rsMakayevFactory;" imageX="0" imageY="0" imageWidth="150" imageHeight="256"/>

		<DockingPorts>
			<Port x="22"	y="86" />
			<Port x="56"	y="35" />
			<Port x="69"	y="-39" />
			<Port x="33"	y="-75" />
			<Port x="-33"	y="-75" />
			
			<Port x="-69"	y="-39" />
			<Port x="-56"	y="35" />
			<Port x="-22"	y="86" />
		</DockingPorts>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionDockServices" default="1">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionBuyItems">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionRepairItems">
								(scrShowScreen gScreen "&dsRPGRepairItem;" {
									criteria: "*~aD +Makayev;"
									priceAdj: 65
									})
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>

					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->

		<Language>
			<Text id="actionRepairItems">[R]epair Items</Text>

			<Text id="descWelcome">
				Welcome to Makayev-Energia!
			</Text>
			<Text id="descNoInstall">

				We only install Makayev items. We cannot install %itemName% on 
				your ship.

			</Text>
			<Text id="dockServices:installAbility">

				We install Makayev items up to tech level %maxLevel%.

			</Text>
            
			<Text id="core.mapDesc">

				Refuels up to level 10 &mdash;
				Repairs/installs Makayev armor up to level 9 &mdash;
				Installs Makayev devices up to level 9 &mdash;
				Sells Makayev weapons and ammo

			</Text>
		</Language>
	</StationType>
<!-- Marauders.xml -->
<StationType UNID="&stMarauderOutpost;"
			name=				"Marauder outpost"
			sovereign=			"&svMarauders;"

			attributes=			"asteroidBase, enemy, envAir, envAvoidsFire, generic, human, lombardMarauders, marauders, pirates, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"78"
			fireRateAdj=		"30"
			explosionType=		"&vtBlastExplosion1;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->
		
		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"--uu- ----- ----- ----- -----"

				locationCriteria=		"+asteroids"
				enemyExclusionRadius=	"100"
				/>

		<Encounters frequency="common">
			<Lookup table="&tbMarauderEncounters;"/>
		</Encounters>

		<!-- Configuration -->

		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itLightPlasteelPlate;"
				hitPoints=		"160"
			    regen=			"2"
				/>
		
		<Devices>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships challenge="standard">
			<Table>
				<Ship chance="60"		count="1"	class="&scMarauderRaidPlatform;"	orders="patrol:50"/>
				<Lookup chance="40"		count="1"	table="&tbMarauderDefenders;"/>
			</Table>
		</Ships>

		<!-- Treasure -->

		<Items>
			<Table chance="70">
				<Lookup chance="40" count="1" table="&trConsumables4;"/>
				<Lookup chance="40" count="1" table="&trMinorItem4;"/>
				<Lookup chance="20" count="1" table="&trMajorItem4;"/>
			</Table>
		</Items>

		<!-- Image and Effects -->

		<ImageVariants>
			<LocationCriteriaTable>
				<Image criteria="*ice"			imageID="&rsMarauderOutpostIce;"			imageWidth="220" imageHeight="220"	viewportRatio="0.02375"/>
				<Image criteria="*metallic"		imageID="&rsMarauderOutpostMetallic;"		imageWidth="220" imageHeight="220"	viewportRatio="0.02375"/>
				<Image criteria="*primordial"	imageID="&rsMarauderOutpostPrimordial;"		imageWidth="220" imageHeight="220"	viewportRatio="0.02375"/>
				<Image criteria="*volcanic"		imageID="&rsMarauderOutpostVolcanic;"		imageWidth="220" imageHeight="220"	viewportRatio="0.02375"/>
				
				<Image criteria="*~"			imageID="&rsMarauderOutpostRocky;"			imageWidth="220" imageHeight="220"	viewportRatio="0.02375"/>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"120"
				>
		</DockingPorts>
	</StationType>
<StationType UNID="&stMarauderCompound;"
			name=				"Marauder compound"
			sovereign=			"&svMarauders;"

			attributes=			"asteroidBase, enemy, envAir, envAvoidsFire, generic, human, lombardMarauders, marauderCompound, marauders, pirates, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"144"
			fireRateAdj=		"20"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->
		
		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"--vcr ----- ----- ----- -----"

				locationCriteria=		"+asteroids"
				enemyExclusionRadius=	"100"
				/>

		<Encounters frequency="common">
			<Lookup table="&tbMarauderEncounters;"/>
		</Encounters>

		<!-- Configuration -->

		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itPlasteelPlate;"
				hitPoints=		"320"
			    regen=			"6"
				/>
		
		<Devices>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Squadron table="&tbMarauderDefenders;"	count="challenge:standard"	reinforce="auto"/>

		<!-- Treasure -->

		<Items>
			<Lookup count="1d3" table="&trStationSupplies;"/>
			<Table>
				<Lookup chance="40" count="1" table="&trConsumables5;"/>
				<Lookup chance="40" count="1" table="&trMinorItem5;"/>
				<Lookup chance="20" count="1" table="&trMajorItem5;"/>
			</Table>
		</Items>

		<!-- Image and Effects -->

		<ImageVariants>
			<LocationCriteriaTable>
				<Image criteria="*ice"			imageID="&rsMarauderCompoundIce;"			imageWidth="220" imageHeight="220"	viewportRatio="0.02375"/>
				<Image criteria="*metallic"		imageID="&rsMarauderCompoundMetallic;"		imageWidth="220" imageHeight="220"	viewportRatio="0.02375"/>
				<Image criteria="*primordial"	imageID="&rsMarauderCompoundPrimordial;"	imageWidth="220" imageHeight="220"	viewportRatio="0.02375"/>
				<Image criteria="*volcanic"		imageID="&rsMarauderCompoundVolcanic;"		imageWidth="220" imageHeight="220"	viewportRatio="0.02375"/>
				
				<Image criteria="*~"			imageID="&rsMarauderCompoundRocky;"			imageWidth="220" imageHeight="220"	viewportRatio="0.02375"/>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"120"
				>
		</DockingPorts>
	</StationType>
<StationType UNID="&stMarauderStronghold;"
			name=				"Marauder stronghold"
			sovereign=			"&svMarauders;"

			attributes=			"asteroidBase, enemy, envAir, envAvoidsFire, generic, human, lombardMarauders, marauderStronghold, marauders, pirates,populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"251"
			fireRateAdj=		"20"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->
		
		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"---ru v---- ----- ----- -----"

				locationCriteria=		"+lifeZone, -planetary"
				enemyExclusionRadius=	"100"
				/>

		<Encounters frequency="common">
			<Lookup table="&tbMarauderEncounters;"/>
		</Encounters>

		<!-- Configuration -->

		<Hull 	hullType=		"undergroundHull"
				armorID=		"&itPlasteelPlate;"
				hitPoints=		"400"
			    regen=			"6"
				/>
		
		<Devices>
			<Device deviceID="&itTurbolaserCannon;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Squadron table="&tbMarauderDefenders;"	count="challenge:hard"	reinforce="auto"/>

		<!-- Treasure -->

		<Items>
			<Lookup count="1d3" table="&trStationSupplies;"/>
			<Group value="standard:level=5:x=2.5">
				<Lookup table="&trStdTreasure;"/>
			</Group>
		</Items>

		<!-- Image and Effects -->

		<ImageVariants>
			<LocationCriteriaTable>
				<Image criteria="*ice"			imageID="&rsMarauderStrongholdIce;"			imageWidth="260" imageHeight="260"	viewportRatio="0.03375"/>
				<Image criteria="*metallic"		imageID="&rsMarauderStrongholdMetallic;"	imageWidth="260" imageHeight="260"	viewportRatio="0.03375"/>
				<Image criteria="*primordial"	imageID="&rsMarauderStrongholdPrimordial;"	imageWidth="260" imageHeight="260"	viewportRatio="0.03375"/>
				<Image criteria="*volcanic"		imageID="&rsMarauderStrongholdVolcanic;"	imageWidth="260" imageHeight="260"	viewportRatio="0.03375"/>
				
				<Image criteria="*~"			imageID="&rsMarauderStrongholdRocky;"		imageWidth="260" imageHeight="260"	viewportRatio="0.03375"/>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"150"
				>
		</DockingPorts>
	</StationType>
<!-- Metallic.xml -->
<StationType UNID="&stMetallicAsteroidSizeA;"
		name=				"metallic asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, metallic, outer"
		inherit=			"&baMetallicAsteroid;"

		scale=				"world"
		size=				"4"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsMetallicAsteroidSizeA;"/>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stMetallicAsteroidSizeB;"
		name=				"metallic asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, metallic, outer"
		inherit=			"&baMetallicAsteroid;"

		scale=				"world"
		size=				"55"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsMetallicAsteroidSizeB;"/>
		
		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stMetallicAsteroidSizeC;"
		name=				"metallic asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, metallic, outer"
		inherit=			"&baMetallicAsteroid;"

		scale=				"world"
		size=				"250"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsMetallicAsteroidSizeC;"/>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stMetallicAsteroidSizeD;"
		name=				"metallic asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, metallic, outer"
		inherit=			"&baMetallicAsteroid;"

		scale=				"world"
		size=				"625"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsMetallicAsteroidSizeD;"/>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stMetallicPlanetoidSizeE;"
		name=				"metallic planetoid"
		attributes=			"generic, inner, lifeZone,  metallic, outer, planetoid"

		scale=				"world"
		size=				"1150"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsMetallicPlanetoidSizeE;"/>
	</StationType>
<StationType UNID="&stMetallicPlanetoidSizeF;"
		name=				"metallic planetoid"
		attributes=			"generic, inner, lifeZone, metallic, outer, planetoid"

		scale=				"world"
		size=				"2050"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsMetallicPlanetoidSizeF;"/>
	</StationType>
<StationType UNID="&stMetallicPlanetoidSizeG;"
		name=				"metallic planetoid"
		attributes=			"generic, inner, lifeZone, metallic, outer, planetoid"

		scale=				"world"
		size=				"4000"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsMetallicPlanetoidSizeG;"/>
	</StationType>
<!-- Mining.xml -->
<StationType UNID="&stMinedOre;"
			name=				"mined ore"
			noArticle=			"true"
			sovereign=			"&svNeutral;"
				 
			attributes=			"minedOre"
				 
			dockScreen=			"&dsMinedOre;"

			scale=				"ship"
			mobile=				"true"
			mass=				"10"
			structuralHitPoints="100"
			destroyWhenEmpty=	"true"
			noMapIcon=			"true"

			autoLootCriteria=	"*I +autoLootOre;"
			>

		<ImageVariants>
			<Image			imageID="&rsOreSmall;" imageX="48" imageY="0" imageWidth="24" imageHeight="24" />
			<Image			imageID="&rsOreSmall;" imageX="48" imageY="24" imageWidth="24" imageHeight="24" />
			<Image			imageID="&rsOreSmall;" imageX="48" imageY="48" imageWidth="24" imageHeight="24" />
			<Image			imageID="&rsOreSmall;" imageX="48" imageY="72" imageWidth="24" imageHeight="24" />
		</ImageVariants>
		
		<HeroImage>
			<ImageVariants>
				<Image			imageID="&rsMinedOreHero;" imageWidth="600" imageHeight="528" />
				<Image			imageID="&rsMinedOreHero;" imageWidth="600" imageHeight="528" />
				<Image			imageID="&rsMinedOreHero;" imageWidth="600" imageHeight="528" />
				<Image			imageID="&rsMinedOreHero;" imageWidth="600" imageHeight="528" />
			</ImageVariants>
		</HeroImage>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

		<Events>
			<OnAutoLoot>

				;	gSource: This object
				;	aLootedBy: The object looting (usually the player ship).
				;	aLoot: A list of items looted.

				(switch
					(!= aLootedBy gPlayerShip)
						Nil

					(enum aLoot itemLooted
						(plyIncItemStat gPlayer 'itemsMinedCount itemLooted (itmGetCount itemLooted))
						)
					)

			</OnAutoLoot>
		</Events>

	</StationType>
<!-- MiningPods.xml -->
<StationType UNID="&stMiningPod;"
			name=				"(mining pod)"
			sovereign=			"&svNeutral;"
				 
			attributes=			"miningPod"

			scale=				"flotsam"
			mobile=				"true"
			mass=				"1"
			>

		<ImageVariants>
			<Image			imageID="&rsMiningPod;" imageX="0"  imageY="0"  imageWidth="24" imageHeight="24" />
			<Image			imageID="&rsMiningPod;" imageX="24" imageY="0"  imageWidth="24" imageHeight="24" />
		</ImageVariants>
		
		<Communications>
			<Message id="msgDetonate" name="Detonate" key="A">
				<OnShow>
					(and (= (objGetID gSender) (objGetData gSource 'ownerID))
						(not (objGetData gSource 'status))
						)
				</OnShow>
				
				<Invoke>
					(block (
						(podType (objGetData gSource 'podType))
						overlayID
						)
						
						;	Remove the radius overlay and add an armed radius
						
						(enum (objGetOverlays gSource) oldOverlayID
							(if (= (objGetOverlayType gSource oldOverlayID) &ovMiningPodRadius;)
								(objRemoveOverlay gSource oldOverlayID)
								)
							)

						(setq overlayID (objAddOverlay gSource &ovMiningPodArmedRadius;))
						(objSetOverlayProperty gSource overlayID 'counter (typGetStaticData podType 'effectRadius))
						
						;	Add a timer overlay to the pod
				
						(setq overlayID	(objAddOverlay gSource	&ovMiningPodTimer;))
						(objSetOverlayData gSource overlayID 'sourceID (objGetData gSource 'ownerID))
						(objSetOverlayData gSource overlayID 'startTime (unvGetTick))
						(objSetOverlayData gSource overlayID 'podType podType)
						
						;	Armed
						
						(objSetData gSource 'status 'armed)
						)
				</Invoke>
			</Message>
		</Communications>
	</StationType>
<!-- MiscItems.xml -->
<!-- MRAD.xml -->
<StationType UNID="&stMRADSensor;"
			name=				"(MRAD sensor)"
			sovereign=			"&svNeutral;"
			inherit=			"&unidCommonText;"

			dockScreen=			"Main"
			mass=				"2000"
            noMapDetails=       "true"
			
			attributes=			"mradProbe"
			>

		<ImageVariants>
			<Image imageID="&rsMRADProbe;" imageX="0"   imageY="0"   imageWidth="48" imageHeight="48"/>
			<Image imageID="&rsMRADProbe;" imageX="48"  imageY="0"   imageWidth="48" imageHeight="48"/>
			<Image imageID="&rsMRADProbe;" imageX="96"  imageY="0"   imageWidth="48" imageHeight="48"/>
			<Image imageID="&rsMRADProbe;" imageX="144" imageY="0"   imageWidth="48" imageHeight="48"/>
		</ImageVariants>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDescTranslate gScreen 'descWelcome)
						</OnPaneInit>

						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts>
			<Port x="0"		y="24" />
			<Port x="0"		y="-24" />
			<Port x="24"	y="0" />
			<Port x="-24"	y="0" />
		</DockingPorts>

		<Language>
			<Text id="descWelcome">
				You are docked with an MRAD graviton probe. Use the MRAD experiment
				device to access this probe.
			</Text>
		</Language>
	</StationType>
<!-- MuhammadCondi.xml -->
<!-- Neurohack.xml -->
<!-- NewVictoria.xml -->
<StationType UNID="&stStKatsArcology;"
			name=				":the Arcology of New Victoria"
			sovereign=			"&svCommonwealth;"
			inherit=			"&unidCommonText;"

			attributes=			"arcology, commonwealthCustoms, friendly, generic, human, majorStation, populated, stKatsArcology"

			dockScreen=			"&dsStKatsArcology;"

			level=              "7"
			size=				"5280"
			immutable=			"true"
			>

		<Properties>
			<Constant		id="rpg.checkMilitaryID">"* +militaryID;"</Constant>
			<Constant		id="rpg.checkRadioactive">True</Constant>
			<Constant		id="rpg.showActualItem">True</Constant>
			<Constant		id="rpg.shipBrokerCriteria">"s +systemLevel:0-2; +commonwealth; -notStandard; +shipBroker;"</Constant>
			<DynamicData	id="rpg.shipBrokerInventory">(rpgGetShipInventory gSource)</DynamicData>
		</Properties>

		<!-- Trade and Items -->

		<Trade currency="credit"	max="2500000">
			<Sell	criteria="m +commonwealth; -defective; -military; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="400" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="amdNU -Illegal; -NotForSale;"		priceAdj="50"/>
			<Buy	criteria="*NU -Illegal; -ID; -NotForSale;"	priceAdj="90"/>
			<Buy	criteria="*NU -Illegal; -ID;"				priceAdj="10"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-7;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-7;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-7;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-7;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-7;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<SellShip		criteria="s -notForSale;" priceAdj="100"/>
			<BuyShip		criteria="s L:1-10; -notForSale;" priceAdj="80"/>

			<BalanceTrade	criteria="{core.fusionFuel}"		impact="20"/>
			<BalanceTrade	criteria="{human.basicFood}"	impact="20"/>
			<BalanceTrade	criteria="{human.lux}"		impact="20"/>
			<BalanceTrade	criteria="{human.meds}"		impact="20"/>
			<BalanceTrade	criteria="{human.res}"		impact="20"/>
			<BalanceTrade	criteria="{core.ore}"			impact="10"/>
		</Trade>
		
		<Items>
			<RandomItem count="8d10" 
					criteria=		"ad~r L:1-7; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard; -specialty;"
					levelFrequency=	"systemLevel:r|c|cur"
					/>
			<RandomItem count="1d6" 
					criteria=		"r L:3-7; +commonwealth; -alien; -defective; -illegal; -military; -notForSale; -notStandard;"	
					levelFrequency="systemLevel:ru|c|curv"
					/>
			
			<RandomItem count="20" 
					criteria=		"*~adm -alien; -defective; -illegal; -military; -notForSale; -notStandard; -specialty;"
					levelFrequency=	"systemLevel:ru|c|cur"
					/>
					
			<Item count="1d20" item="&itIncandescentCoffee;"/>
		</Items>

		<!-- Satellites -->

		<Satellites>
			<Station type="&stStKatsArcologySegment;"	imageVariant="north"	 xOffset="0"    yOffset="620"	segment="true"/>
			<Station type="&stStKatsArcologySegment;"	imageVariant="east"	     xOffset="750"  yOffset="-30"	segment="true"/>
			<Station type="&stStKatsArcologySegment;"	imageVariant="southEast" xOffset="750"  yOffset="-610"	segment="true"/>
			<Station type="&stStKatsArcologySegment;"	imageVariant="south2"    xOffset="250"  yOffset="-650"	segment="true"/>
			<Station type="&stStKatsArcologySegment;"	imageVariant="south1"    xOffset="-250" yOffset="-620"	segment="true"/>
			<Station type="&stStKatsArcologySegment;"	imageVariant="southWest" xOffset="-750" yOffset="-580"	segment="true"/>
			<Station type="&stStKatsArcologySegment;"	imageVariant="west"      xOffset="-750" yOffset="-30"	segment="true"/>
		</Satellites>
		
		<!-- Image and Effects -->

		<HeroImage imageID="&rsStKatsArcologyHero;" imageX="0" imageY="0" imageWidth="1200" imageHeight="648"/>

		<DockingPorts
				portAngle=		"0"
				portCount=		"80"
				portRadius=		"900"

				viewportSize=	"13333"
				/>

		<!-- Events and Data -->

		<Events>
			<OnCreate>
				(block Nil
					; Create some visiting ships

					(for i 1 (random 32 48)
						(block (theShip)
							(setq theShip (sysCreateShip 
								&tbStKatsTraffic;
								(sysVectorPolarOffset gSource (random 0 359) 10)
								&svCommonwealth;
								&evStKatsTrafficBehavior;
								))
										
							(setq aDockObj gSource)
							(objFireEvent theShip "OrderDockAtStKats")
							)
						)
						
					; Register a callbacks
					(sysAddObjRecurringTimerEvent 60 gSource "OnProduceProduction")
					(sysAddObjRecurringTimerEvent 90 gSource "OnTrafficControl")
					)
			</OnCreate>

			<OnProduceProduction>
				(block Nil
					; Discard any rotted produce
					(enum (objGetItems gSource "* +FreshFood") theItem
						(if (eq (itmGetData theItem "status") 'rotted)
							(block Nil
								(objRemoveItem gSource theItem)
								
								; Rotted items don't count as "produced" so subtract 
								(objIncData gSource "totalProduced" (subtract 0 (itmGetCount theItem)))
								)
							)
						)
						
					; Add fresh produce
					(if (leq (random 1 100) 5)
						(block (produceAvail)
							(setq produceAvail 0)
							(enum (objGetItems gSource "* +FreshFood") theItem
								(setq produceAvail (add produceAvail (itmGetCount theItem)))
								)
							
							(if (and (ls produceAvail 20) 
									(ls (objGetData gSource "totalProduced") 50)
									)
								(block (produceCount theMonth theItemUNID expireTime)
									; Figure out how much to produce
									(setq produceCount (random 10 20))
									
									; Figure out which to produce based on the real
									; calendar
									
									(setq theMonth (item (unvGetRealDate) 1))
									(switch
										(leq theMonth 3)
											(setq theItemUNID &itIncandescentLucuma;)
											
										(leq theMonth 6)
											(setq theItemUNID &itIncandescentPeaches;)
											
										(leq theMonth 9)
											(setq theItemUNID &itIncandescentStrawberries;)
											
										(setq theItemUNID &itIncandescentBellFruit;)
										)
										
									; Expire time
									(setq expireTime (typGetStaticData theItemUNID "expireTime"))
										
									(objAddItem gSource 
										(itmSetData 
											(itmCreate theItemUNID produceCount)
											"expireTime"
											(add (unvGetTick) (random expireTime (add expireTime 1800)))
											produceCount
											)
										)
										
									(objIncData gSource "totalProduced" produceCount)
									)
								)
							)
						)
					)
			</OnProduceProduction>
			
			<OnTrafficControl>
				(block (totalShips)
					; Count the number of ships under traffic control
					(setq totalShips (count (sysFindObject Nil "s D:0010201F_status")))
					
					; If less than the ideal number, new ships jump in
					(if (ls totalShips 50)
						(block (theShip theTarget)
							(setq theShip (sysCreateShip 
								&tbStKatsTraffic;
								(random (sysFindObject Nil "G"))
								&svCommonwealth;
								&evStKatsTrafficBehavior;
								))
								
							(objFireEvent theShip "OrderEnterSystem")
							)
						)
					)
			</OnTrafficControl>

			<GetRumors>
				(append
					(rpgRumorAdd 'stKatsParliament (make 'sequence 1 5) 20)
					)
			</GetRumors>
		</Events>
		
		<Language>
			<Text id="core.mapDescMain">
				Capital of the Commonwealth
			</Text>

			<Text id="rumor.stKatsParliament.1">

				You enter the beautiful hall where ministers from all over the 
				Commonwealth gather to legislate and debate.
				
				The minister from Zhang Li makes an impassioned appeal for a 
				bill funding the construction of three new Commonwealth Star 
				Carriers.

				She shows pictures of refugees displaced by the Ares, but the 
				chamber is nearly empty and her energy fades in mid-speech.

			</Text>
			<Text id="rumor.stKatsParliament.2">

				You enter the beautiful hall where ministers from all over the 
				Commonwealth gather to legislate and debate.

				The chamber is nearly full as ministers debate a bill calling 
				for material support to the Huari people. Those in favor cite 
				the cruel treatment the Huari have received under the Sung 
				Slavers.
				
				Those opposed recall that the Huari themselves were once 
				aggressors who killed Commonwealth settlers in the Ungoverned 
				Territories.
				
			</Text>
			<Text id="rumor.stKatsParliament.3">

				You enter the beautiful hall where ministers from all over the 
				Commonwealth gather to legislate and debate.

				The minister from 70 Ophiuchi speaks in the Center Well:

				"...and so I urge my fellow ministers to meet this challenge. 
				With the appropriations of CP1175 we can finally provide enough 
				resources to the Militia in order to secure the safety of our 
				citizens against Marauder tyranny."
				
			</Text>
			<Text id="rumor.stKatsParliament.4">

				You enter the beautiful hall where ministers from all over the 
				Commonwealth gather to legislate and debate.

				The minister from Kinder's Star reads a bill commemorating the 
				death of Militia Colonel Simon Francis Jezerski, who was killed 
				in the line of duty in a confrontation with the Death Drugs 
				Cartel.

			</Text>
			<Text id="rumor.stKatsParliament.5">

				You enter the beautiful hall where ministers from all over the 
				Commonwealth gather to legislate and debate.

				The minister from Numerianus speaks in the Center Well:

				"My fellow citizens, if compassion is not enough to compel you 
				to vote for this bill, then consider the risk that we take by 
				opposing it. If we do not provide a safe home for our zoanthrope
				brethren then the Dwarg will happily exploit them."
				
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stStKatsArcologySegment;"
			name=				"New Victoria arcology segment"
			sovereign=			"&svCommonwealth;"

			attributes=			"stKatsArcologySegment"

			immutable=			"true"
			paintLayer=			"sendToBack"
			noMapIcon=			"true"
			>

		<!-- Images and Effects -->

		<ImageVariants>
			<Image id="north"		imageID="&rsStKatsArcologySegments;" imageX="0"	   imageY="0"     imageWidth="2000" imageHeight="520"  viewportRatio="0.075"/>
			<Image id="east"		imageID="&rsStKatsArcologySegments;" imageX="1500" imageY="520"   imageWidth="500"  imageHeight="780"  viewportRatio="0.075"/>
			<Image id="southEast"	imageID="&rsStKatsArcologySegments;" imageX="500"  imageY="920"   imageWidth="500"  imageHeight="380"  viewportRatio="0.075"/>
			<Image id="south1"		imageID="&rsStKatsArcologySegments;" imageX="500"  imageY="520"   imageWidth="500"  imageHeight="400"  viewportRatio="0.075"/>
			<Image id="south2"		imageID="&rsStKatsArcologySegments;" imageX="1000" imageY="520"   imageWidth="500"  imageHeight="460"  viewportRatio="0.075"/>
			<Image id="southWest"	imageID="&rsStKatsArcologySegments;" imageX="1000" imageY="980"   imageWidth="500"  imageHeight="320"  viewportRatio="0.075"/>
			<Image id="west"		imageID="&rsStKatsArcologySegments;" imageX="0"    imageY="520"   imageWidth="500"  imageHeight="780"  viewportRatio="0.075"/>
		</ImageVariants>

	</StationType>
<!-- NPCPilgrims.xml -->
<!-- Ore.xml -->
<!-- OreStone.xml -->
<StationType UNID="&stOreStoneAsteroidSizeA;"
		name=				"orestone asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, oreStone, outer"
		inherit=			"&baOreStoneAsteroid;"

		scale=				"world"
		size=				"3"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="0" imageY="0" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="0" imageY="32" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="0" imageY="64" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="0" imageY="96" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="0" imageY="128" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="0" imageY="160" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="0" imageY="192" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="0" imageY="224" imageWidth="32" imageHeight="32"/>
			
			<Image			imageID="&rsOreStoneAsteroids;" imageX="32" imageY="0" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="32" imageY="32" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="32" imageY="64" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="32" imageY="96" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="32" imageY="128" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="32" imageY="160" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="32" imageY="192" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="32" imageY="224" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOreStoneAsteroidSizeB;"
		name=				"orestone asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, oreStone, outer"
		inherit=			"&baOreStoneAsteroid;"

		scale=				"world"
		size=				"55"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="64" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="64" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="64" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="64" imageY="192" imageWidth="64" imageHeight="64"/>
			
			<Image			imageID="&rsOreStoneAsteroids;" imageX="128" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="128" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="128" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="128" imageY="192" imageWidth="64" imageHeight="64"/>
				
			<Image			imageID="&rsOreStoneAsteroids;" imageX="192" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="192" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="192" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="192" imageY="192" imageWidth="64" imageHeight="64"/>
				
			<Image			imageID="&rsOreStoneAsteroids;" imageX="256" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="256" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="256" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOreStoneAsteroids;" imageX="256" imageY="192" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOreStoneAsteroidSizeC;"
		name=				"oresone asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, oreStone, outer"
		inherit=			"&baOreStoneAsteroid;"

		scale=				"world"
		size=				"128"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="0"   imageY="256"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="0"   imageY="344"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="0"   imageY="432"   imageWidth="88" imageHeight="88"/>
		
			<Image	imageID="&rsOreStoneAsteroids;" imageX="88"   imageY="256"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="88"   imageY="344"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="88"   imageY="432"   imageWidth="88" imageHeight="88"/>
			
			<Image	imageID="&rsOreStoneAsteroids;" imageX="176"   imageY="256"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="176"   imageY="344"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="176"   imageY="432"   imageWidth="88" imageHeight="88"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOreStoneAsteroidSizeD;"
		name=				"orestone asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, oreStone, outer"
		inherit=			"&baOreStoneAsteroid;"

		scale=				"world"
		size=				"480"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="264"  imageY="256"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="372"  imageY="256"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="480"  imageY="256"   imageWidth="108" imageHeight="108"/>

			<Image	imageID="&rsOreStoneAsteroids;" imageX="264"  imageY="364"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="372"  imageY="364"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="480"  imageY="364"   imageWidth="108" imageHeight="108"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOreStonePlanetoidSizeE;"
		name=				"orestone planetoid"
		attributes=			"generic, inner, lifeZone, oreStone, outer, planetoid"
		inherit=			"&baOreStonePlanetoid;"

		scale=				"world"
		size=				"885"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="320"  imageY="0"	 imageWidth="128" imageHeight="128"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="320"  imageY="128"   imageWidth="128" imageHeight="128"/>
		
			<Image	imageID="&rsOreStoneAsteroids;" imageX="448"  imageY="0"	 imageWidth="128" imageHeight="128"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="448"  imageY="128"   imageWidth="128" imageHeight="128"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stOreStonePlanetoidSizeF;"
		name=				"orestone planetoid"
		attributes=			"generic, inner, lifeZone, oreStone, outer, planetoid"
		inherit=			"&baOreStonePlanetoid;"

		scale=				"world"
		size=				"2050"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="0"	  imageY="520"   imageWidth="156" imageHeight="156"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="156"  imageY="520"   imageWidth="156" imageHeight="156"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="312"  imageY="520"   imageWidth="156" imageHeight="156"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="468"  imageY="520"   imageWidth="156" imageHeight="156"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stOreStonePlanetoidSizeG;"
		name=				"orestone planetoid"
		attributes=			"generic, inner, lifeZone, oreStone, outer, planetoid"
		inherit=			"&baOreStonePlanetoid;"

		scale=				"world"
		size=				"3750"
		anonymous=			"true"

		ejectaType=			"&vtMetallicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="0"    imageY="676"   imageWidth="180" imageHeight="180"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="180"  imageY="676"   imageWidth="180" imageHeight="180"/>

			<Image	imageID="&rsOreStoneAsteroids;" imageX="0"    imageY="856"   imageWidth="180" imageHeight="180"/>
			<Image	imageID="&rsOreStoneAsteroids;" imageX="180"  imageY="856"   imageWidth="180" imageHeight="180"/>
		</ImageVariants>
	</StationType>
<!-- OutlawMiners.xml -->
<StationType UNID="&stAsteroidMineTitanium;"
			name=				"level 2 outlaw mine"
			sovereign=			"&svOutlawMiners;"
			inherit=			"&baOutlawMine;"
				 
			attributes=			"asteroidBase, enemy, envEarth, envAvoidsAir, generic, human, outlawMiners, outlaws, populated, settlers"
				 
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			explosionType=		"&vtKineticExplosion2;"
			ejectaType=			"&vtStoneAsteroidEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"ucr-- ----- ----- ----- -----"

				locationCriteria=		"++asteroids"
				/>

		<Encounters frequency="uncommon">
			<Lookup table="&tbOutlawMinerEncounters;"/>
		</Encounters>

		<!-- Trade and Items -->
		
		<Items>
			<Group value="standard:level=2:x=0.5">
				<Lookup table="&tbOutlawMineTreasure;"/>
			</Group>
		</Items>

		<!-- Configuration -->

		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itLightCeramicPlate;"
				hitPoints=		"90"
				regen=			"1"
				/>
		
		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup table="&tbOutlawMineTurrets;"/>
			<Lookup table="&tbOutlawMineDefenders;"/>
		</Ships>

		<Reinforcements minShips="2">
			<Lookup table="&tbOutlawMineDefenders;"/>
		</Reinforcements>
		
		<!-- Image and Effects -->
		
		<ImageVariants>
			<LocationCriteriaTable>
				<Variants criteria="*ice">
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*metallic">
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*primordial">
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*volcanic">
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				
				<Variants criteria="*~">
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"120"
				>
		</DockingPorts>

	</StationType>
<StationType UNID="&stAsteroidMinePalladium;"
			name=				"level 3 outlaw mine"
			sovereign=			"&svOutlawMiners;"
			inherit=			"&baOutlawMine;"
				 
			attributes=			"asteroidBase, enemy, envEarth, envAvoidsAir, generic, human, outlawMiners, outlaws, populated, settlers"
				 
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			explosionType=		"&vtKineticExplosion2;"
			ejectaType=			"&vtStoneAsteroidEjecta;"
			>

		<!-- Encounter Info -->
		
		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"rucr- ----- ----- ----- -----"

				locationCriteria=		"++asteroids"
				/>

		<Encounters frequency="uncommon">
			<Lookup table="&tbOutlawMinerEncounters;"/>
		</Encounters>

		<!-- Trade and Items -->
		
		<Items>
			<Group value="standard:level=3:x=0.5">
				<Lookup table="&tbOutlawMineTreasure;"/>
			</Group>
		</Items>

		<!-- Configuration -->

		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itCeramicPlate;"
				hitPoints=		"120"
				regen=			"1"
				/>
		
		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup table="&tbOutlawMineTurrets;"/>
			<Lookup table="&tbOutlawMineDefenders;"/>
		</Ships>

		<Reinforcements minShips="2">
			<Lookup table="&tbOutlawMineDefenders;"/>
		</Reinforcements>
		
		<!-- Image and Effects -->
		
		<ImageVariants>
			<LocationCriteriaTable>
				<Variants criteria="*ice">
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*metallic">
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*primordial">
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*volcanic">
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				
				<Variants criteria="*~">
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"120"
				>
		</DockingPorts>
	</StationType>
<StationType UNID="&stAsteroidMineCeralloy;"
			name=				"level 4 outlaw mine"
			sovereign=			"&svOutlawMiners;"
			inherit=			"&baOutlawMine;"
				 
			attributes=			"asteroidBase, enemy, envEarth, envAvoidsAir, generic, human, outlawMiners, outlaws, populated, settlers"
				 
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			explosionType=		"&vtBlastExplosion1;"
			ejectaType=			"&vtStoneAsteroidEjecta;"
			>

		<!-- Encounter Info -->
		
		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"-ruur ----- ----- ----- -----"

				locationCriteria=		"++asteroids"
				/>

		<Encounters frequency="uncommon">
			<Lookup table="&tbOutlawMinerEncounters;"/>
		</Encounters>

		<!-- Trade and Items -->
		
		<Items>
			<Group value="standard:level=4:x=0.5">
				<Lookup table="&tbOutlawMineTreasure;"/>
			</Group>
		</Items>

		<!-- Configuration -->

		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itHeavyCeramicPlate;"
				hitPoints=		"160"
				regen=			"2"
				/>
		
		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup table="&tbOutlawMineTurrets;"/>
			<Lookup table="&tbOutlawMineDefenders;"/>
		</Ships>

		<Reinforcements minShips="2">
			<Lookup table="&tbOutlawMineDefenders;"/>
		</Reinforcements>
		
		<!-- Image and Effects -->
		
		<ImageVariants>
			<LocationCriteriaTable>
				<Variants criteria="*ice">
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*metallic">
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*primordial">
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*volcanic">
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				
				<Variants criteria="*~">
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"120"
				>
		</DockingPorts>

	</StationType>
<StationType UNID="&stAsteroidMineDuralloy;"
			name=				"level 5 outlaw mine"
			sovereign=			"&svOutlawMiners;"
			inherit=			"&baOutlawMine;"
				 
			attributes=			"asteroidBase, enemy, envEarth, envAvoidsAir, generic, human, outlawMiners, outlaws, populated, settlers"
				 
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtStoneAsteroidEjecta;"
			>

		<!-- Encounter Info -->
		
		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"--ruc r---- ----- ----- -----"

				locationCriteria=		"++asteroids"
				enemyExclusionRadius=	"40"
				/>
		
		<Encounters frequency="uncommon">
			<Lookup table="&tbOutlawMinerEncounters;"/>
		</Encounters>

		<!-- Trade and Items -->
		
		<Items>
			<Group value="standard:level=5:x=0.5">
				<Lookup table="&tbOutlawMineTreasure;"/>
			</Group>
		</Items>
		
		<!-- Configuration -->

		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itPolyceramicPlate;"
				hitPoints=		"210"
				regen=			"2"
				/>
		
		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup table="&tbOutlawMineTurrets;"/>
			<Lookup table="&tbOutlawMineDefenders;"/>
		</Ships>

		<Reinforcements minShips="2">
			<Lookup table="&tbOutlawMineDefenders;"/>
		</Reinforcements>
		
		<!-- Image and Effects -->
		
		<ImageVariants>
			<LocationCriteriaTable>
				<Variants criteria="*ice">
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*metallic">
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*primordial">
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*volcanic">
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				
				<Variants criteria="*~">
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"120"
				>
		</DockingPorts>
		
	</StationType>
<StationType UNID="&stAsteroidMinePteracnium;"
			name=				"level 6 outlaw mine"
			sovereign=			"&svOutlawMiners;"
			inherit=			"&baOutlawMine;"
				 
			attributes=			"asteroidBase, enemy, envEarth, envAvoidsAir, generic, human, outlawMiners, outlaws, populated, settlers"
				 
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtStoneAsteroidEjecta;"
			>

		<!-- Encounter Info -->
		
		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"---ru ur--- ----- ----- -----"

				locationCriteria=		"++asteroids"
				enemyExclusionRadius=	"40"
				/>
		
		<Encounters frequency="uncommon">
			<Lookup table="&tbOutlawMinerEncounters;"/>
		</Encounters>
		
		<!-- Trade and Items -->
		
		<Items>
			<Group value="standard:level=6:x=0.5">
				<Lookup table="&tbOutlawMineTreasure;"/>
			</Group>
		</Items>
			
		<!-- Configuration -->

		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itCeralloyArmor;"
				hitPoints=		"280"
				regen=			"3"
				/>
		
		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup table="&tbOutlawMineTurrets;"/>
			<Lookup table="&tbOutlawMineDefenders;"/>
		</Ships>

		<Reinforcements minShips="2">
			<Lookup table="&tbOutlawMineDefenders;"/>
		</Reinforcements>
		
		<!-- Image and Effects -->
		
		<ImageVariants>
			<LocationCriteriaTable>
				<Variants criteria="*ice">
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineIce;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*metallic">
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineMetallic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*primordial">
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMinePrimordial;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				<Variants criteria="*volcanic">
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineVolcanic;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
				
				<Variants criteria="*~">
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="0"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="220"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="440"/>
					<Image imageID="&rsOutlawMineRocky;"	imageWidth="220" imageHeight="220"	imageX="0"	imageY="660"/>
				</Variants>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"120"
				>
		</DockingPorts>

	</StationType>
<StationType UNID="&stOutlawTurret;"
			name=				"Outlaw defense turret"
			sovereign=			"&svOutlawMiners;"
				 
			attributes=			"outlaws, staticDefense"

			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			mass=				"2000"
			armorID=			"&itCeralloyArmor;"
			hitPoints=			"90"
			structuralHitPoints="25"
			fireRateAdj=		"20"
				 
			ejectaType=			"&vtWreckEjecta;"
			noMapLabel=			"true"
			noFriendlyFire=		"true"
			>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itShtormRepeater;"	omnidirectional="true"/>
		</Devices>

		<!-- Image and Effects -->
		
		<ImageVariants>
			<Image			imageID="&rsStations4;" imageX="192" imageY="448" imageWidth="42" imageHeight="42"/>
			<Image			imageID="&rsStations4;" imageX="192" imageY="490" imageWidth="42" imageHeight="42"/>
			<Image			imageID="&rsStations4;" imageX="192" imageY="532" imageWidth="42" imageHeight="42"/>
			<Image			imageID="&rsStations4;" imageX="192" imageY="574" imageWidth="42" imageHeight="42"/>
		</ImageVariants>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

	</StationType>
<StationType UNID="&stOutlawHowitzer;"
			name=				"Outlaw howitzer"
			sovereign=			"&svOutlawMiners;"
				 
			attributes=			"outlaws, staticDefense"

			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			mass=				"2000"
			armorID=			"&itHeavyCeralloyArmor;"
			hitPoints=			"120"
			structuralHitPoints="25"
			fireRateAdj=		"20"
				 
			ejectaType=			"&vtWreckEjecta;"
			noMapLabel=			"true"
			noFriendlyFire=		"true"
			>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itMarkIIIHowitzer;"	omnidirectional="true"/>
		</Devices>

		<!-- Image and Effects -->
		
		<ImageVariants>
			<Image			imageID="&rsStations4;" imageX="192" imageY="448" imageWidth="42" imageHeight="42"/>
			<Image			imageID="&rsStations4;" imageX="192" imageY="490" imageWidth="42" imageHeight="42"/>
			<Image			imageID="&rsStations4;" imageX="192" imageY="532" imageWidth="42" imageHeight="42"/>
			<Image			imageID="&rsStations4;" imageX="192" imageY="574" imageWidth="42" imageHeight="42"/>
		</ImageVariants>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

	</StationType>
<!-- Outlaws.xml -->
<StationType UNID="&stOutlawConvoyEncounter;"
			name=				"(outlaw convoy)"
			sovereign=			"&svIndependentTrader;"

			attributes=			"debris, envWater, envAvoidsEarth, friendly, outlaw"

			abandonedScreen=			"&dsRPGAbandonedStation;"

			scale=				"ship"
			size=				"20"
			mass=				"50"
			structuralHitPoints="20"

			mobile=				"true"
			noMapIcon=			"true"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"uuurv ----- ----- ----- -----"

				locationCriteria=		"--planetary"
				/>

		<Names>abandoned cargo container</Names>

		<!-- Items -->

		<Items>
			<Table>
				<Null	chance="20"/>
				<Lookup chance="30" count="1d3" table="&trConsumables1;"/>
				<Lookup chance="15" count="1"	table="&trConsumables2;"/>
				<Lookup chance="25" count="1"	table="&trMinorItem1;"/>
				<Lookup chance="10" count="1"	table="&trMajorItem1;"/>
			</Table>
		</Items>

		<!-- Ships and Defenses -->

		<Ships>
			<LevelTable>
				<Ship	levelFrequence="ccuv- -----"	count="1"	class="&scT31ArmedTransport;"	orders="tradeRoute"	sovereign="&svBlackMarket;">
					<Items>
						<Table value="standard:level=2">
							<Lookup	chance="60"	count="1"	table="&trIllegalItems2;"/>
							<Lookup chance="30"	count="1"	table="&trStdTreasure;"/>
						</Table>
					</Items>

					<Escorts>
						<Ship     count="1d4"	class="&scZulu;"	orders="escort"/>
					</Escorts>
				</Ship>
				<Ship	levelFrequence="-rcuv -----"	count="1"	class="&scT31ArmedTransport;"	orders="tradeRoute"	sovereign="&svBlackMarket;">
					<Items>
						<Table value="standard:level=3">
							<Lookup	chance="60"	count="1"	table="&trIllegalItems2;"/>
							<Lookup chance="30"	count="1"	table="&trStdTreasure;"/>
						</Table>
					</Items>

					<Escorts>
						<Ship     count="1d4"	class="&scZulu-II;"	orders="escort"/>
					</Escorts>
				</Ship>
				<Ship	levelFrequence="--rcu vvvvv"	count="1"	class="&scT55ArmedTransport;"	orders="tradeRoute"	sovereign="&svBlackMarket;">
					<Items>
						<Table value="standard:level=3">
							<Lookup	chance="60"	count="1"	table="&trIllegalItems3;"/>
							<Lookup chance="30"	count="1"	table="&trStdTreasure;"/>
						</Table>
					</Items>

					<Escorts>
						<Ship     count="2d4"	class="&scZulu-II;"	orders="escort"/>
					</Escorts>
				</Ship>
			</LevelTable>
		</Ships>

		<!-- Image and Effects
		
			Abandoned containers are mostly yellow, with a small chance of other
			colors.

		-->

		<ImageVariants>
			<Image	imageID="&rsCargoContainer;"	imageX="0"   imageY="112" imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="56"  imageY="112" imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="112" imageY="112" imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="168" imageY="112" imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="224" imageY="112" imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="280" imageY="112" imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="336" imageY="112" imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="392" imageY="112" imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>

			<Image	imageID="&rsCargoContainer;"	imageX="0"   imageY="0"   imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
			<Image	imageID="&rsCargoContainer;"	imageX="224" imageY="56"  imageWidth="56" imageHeight="56" viewportRatio="0.00406"/>
		</ImageVariants>

		<DockingPorts
				portCount=		"2"
				portRadius=		"50"
				maxDist=		"3"
				/>

		<!-- Events and Data -->

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>
	</StationType>
<StationType UNID="&stOutlawBase;"
			name=				"outlaw camp"
			sovereign=			"&svOutlaw;"

			level=				"1"
			attributes=			"enemy, envWater, envAvoidsEarth, generic, human, outlaws, outlawSmugglers, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"69"
			explosionType=		"&vtKineticExplosion1;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"ucv-- ----- ----- ----- -----"

				locationCriteria=		"--innerSystem, +planetary"
				/>

		<!-- Treasure and Items -->

		<Items>
			<Lookup chance="25" count="1d2" table="&trIllegalItems1;"/>
			<Table chance="50">
				<Lookup chance="40" count="1" table="&trConsumables2;"/>
				<Lookup chance="40" count="1" table="&trMinorItem2;"/>
				<Lookup chance="20" count="1" table="&trMajorItem2;"/>
			</Table>
		</Items>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itLightCeramicPlate;"
				hitPoints=		"50"
				/>
		
		<Devices>
			<Device deviceID="&itRecoillessCannon;"	posAngle="0" posRadius="0" posZ="56" omnidirectional="true" missileDefense="true" />
		</Devices>

		<!-- Ships and Defenses -->

		<Squadron table="&tbOutlawDefenders;"	count="challenge:standard"	reinforce="auto"/>

		<!-- Images and Effects -->

		<Image imageID="&rsOutlawCamp;"			imageWidth="96" imageHeight="96"	viewportRatio="0.009375"/>

		<DockingPorts
				portAngle=		"-15"
				portCount=		"8"
				portRadius=		"60"
				/>

		<!-- Random Encounters -->

		<Encounters frequency="common">
			<Lookup table="&tbOutlawEncounters;"/>
		</Encounters>

		<!-- Events and Data -->

		<Events>
			<GetRumors>
				{
					attributes: "commonwealthPub"
					priority: 11
					textID: 'rumor.commonwealthPub
					}
			</GetRumors>
		</Events>

		<Language>
			<Text id="rumor.commonwealthPub">
				You spend 5 credits on drinks. A young stationer next to you
				comments that its a lot easier to get laudanum now that the
				Outlaw base is in the system.
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stOutlawBase2;"
			name=				"outlaw base"
			sovereign=			"&svOutlaw;"

			attributes=			"enemy, envWater, envAvoidsEarth, generic, human, outlaws, outlawSmugglers, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"186"
			fireRateAdj=		"30"
			explosionType=		"&vtKineticExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"vcr-- ----- ----- ----- -----"

				locationCriteria=		"--innerSystem, +planetary"
				/>

		<!-- Treasure and Items -->

		<Items>
			<Lookup					count="1d2" table="&trIllegalItems1;"/>
			<Table chance="50">
				<Lookup chance="40" count="1" table="&trConsumables3;"/>
				<Lookup chance="40" count="1" table="&trMinorItem3;"/>
				<Lookup chance="20" count="1" table="&trMajorItem3;"/>
			</Table>
		</Items>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itCeramicPlate;"
				hitPoints=		"90"
				regen=			"1"
				/>
		
		<Devices>
			<Device deviceID="&itHeavyRecoillessCannon;"	posAngle="-15" posRadius="40" posZ="20"	fireAngle="-15" fireArc="200"	missileDefense="true" />
			<Device deviceID="&itHeavyRecoillessCannon;"	posAngle="165" posRadius="40" posZ="20"	fireAngle="165" fireArc="200"	missileDefense="true" />
		</Devices>

		<!-- Ships and Defense -->

		<Squadron table="&tbOutlawDefenders;"	count="challenge:standard"	reinforce="auto"/>

		<!-- Images and Effects -->

		<Image imageID="&rsOutlawBase;"			imageWidth="186" imageHeight="186"	viewportRatio="0.025"/>

		<DockingPorts
				portAngle=		"-15"
				portCount=		"8"
				portRadius=		"110"
				/>

		<!-- Random Encounters -->

		<Encounters frequency="common">
			<Lookup table="&tbOutlawEncounters;"/>
		</Encounters>

	</StationType>
<StationType UNID="&stOutlawHaven;"
			name=				"outlaw haven"
			sovereign=			"&svOutlaw;"

			attributes=			"enemy, envWater, envAvoidsEarth, generic, human, outlawHaven, outlaws, outlawSmugglers, populated"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"200"
			fireRateAdj=		"20"
			explosionType=		"&vtKineticExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+outlawSpace;"
				systemAffinity=			"+envWater; -envEarth;"
				levelFrequency=			"-vcr- ----- ----- ----- -----"

				locationCriteria=		"+outerSystem, +planetary"
				enemyExclusionRadius=	"100"
				/>

		<!-- Treasure and Items -->

		<Items>
			<Table>
				<Lookup chance="40" count="1" table="&trConsumables3;"/>
				<Lookup chance="40" count="1" table="&trMinorItem3;"/>
				<Lookup chance="20" count="1" table="&trMajorItem3;"/>
			</Table>
		</Items>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itHeavyCeramicPlate;"
				hitPoints=		"250"
				regen=			"5"
				/>
		
		<Devices>
			<Device deviceID="&itArbalestCannon;"	posAngle="30"  posRadius="40" posZ="20"	fireAngle="30"  fireArc="180"	missileDefense="true" />
			<Device deviceID="&itArbalestCannon;"	posAngle="120" posRadius="40" posZ="20"	fireAngle="120" fireArc="180"	missileDefense="true" />
			<Device deviceID="&itArbalestCannon;"	posAngle="210" posRadius="40" posZ="20"	fireAngle="210" fireArc="180"	missileDefense="true" />
			<Device deviceID="&itArbalestCannon;"	posAngle="300" posRadius="40" posZ="20"	fireAngle="300" fireArc="180"	missileDefense="true" />
		</Devices>

		<!-- Ships and Defense -->

		<Squadrons>
			<Squadron table="&tbOutlawDefenders;"		count="challenge:standard"		reinforce="auto"/>
			<Squadron table="&tbOutlawTransports;"		count="1d2"						reinforce="auto"/>
		</Squadrons>

		<!-- Images and Effects -->

		<Image imageID="&rsOutlawHaven;"			imageWidth="200" imageHeight="200"	viewportRatio="0.0275"/>

		<DockingPorts
				portAngle=		"-15"
				portCount=		"8"
				portRadius=		"115"
				/>

		<!-- Random Encounters -->

		<Encounters frequency="common">
			<Lookup table="&tbOutlawEncounters;"/>
		</Encounters>

	</StationType>
<!-- Ovoids.xml -->
<StationType UNID="&stOvoidAsteroidSizeA1;"
		name=				"ovoid asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, ovoid"
		inherit=			"&baOvoidAsteroid;"

		scale=				"world"
		size=				"1"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="0" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="32" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="64" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="96" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="128" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="160" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="192" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="224" imageWidth="32" imageHeight="32"/>
			
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="0" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="32" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="64" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="96" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="128" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="160" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="192" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="224" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOvoidAsteroidSizeA2;"
		name=				"ovoid asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, ovoid"
		inherit=			"&baOvoidAsteroid;"

		scale=				"world"
		size=				"4"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsOvoidAsteroids;" imageX="64" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="64" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="64" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="64" imageY="192" imageWidth="64" imageHeight="64"/>
			
			<Image			imageID="&rsOvoidAsteroids;" imageX="128" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="128" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="128" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="128" imageY="192" imageWidth="64" imageHeight="64"/>
				
			<Image			imageID="&rsOvoidAsteroids;" imageX="192" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="192" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="192" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="192" imageY="192" imageWidth="64" imageHeight="64"/>
				
			<Image			imageID="&rsOvoidAsteroids;" imageX="256" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="256" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="256" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="256" imageY="192" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOvoidAsteroidSizeA3;"
		name=				"ovoid asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, ovoid"
		inherit=			"&baOvoidAsteroid;"

		scale=				"world"
		size=				"12"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"   imageY="256"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"   imageY="344"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"   imageY="432"   imageWidth="88" imageHeight="88"/>
		
			<Image	imageID="&rsOvoidAsteroids;" imageX="88"   imageY="256"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="88"   imageY="344"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="88"   imageY="432"   imageWidth="88" imageHeight="88"/>
			
			<Image	imageID="&rsOvoidAsteroids;" imageX="176"   imageY="256"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="176"   imageY="344"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="176"   imageY="432"   imageWidth="88" imageHeight="88"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOvoidAsteroidSizeB1;"
		name=				"ovoid asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, ovoid"
		inherit=			"&baOvoidAsteroid;"

		scale=				"world"
		size=				"35"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOvoidAsteroids;" imageX="264"  imageY="256"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="264"  imageY="364"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="264"  imageY="472"   imageWidth="108" imageHeight="108"/>
		
			<Image	imageID="&rsOvoidAsteroids;" imageX="372"  imageY="256"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="372"  imageY="364"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="372"  imageY="472"   imageWidth="108" imageHeight="108"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOvoidAsteroidSizeB2;"
		name=				"ovoid asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, ovoid"

		scale=				"world"
		size=				"70"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOvoidAsteroids;" imageX="320"  imageY="0"   imageWidth="128" imageHeight="128"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="320"  imageY="128"   imageWidth="128" imageHeight="128"/>
		
			<Image	imageID="&rsOvoidAsteroids;" imageX="448"  imageY="0"   imageWidth="128" imageHeight="128"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="448"  imageY="128"   imageWidth="128" imageHeight="128"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOvoidAsteroidSizeC;"
		name=				"ovoid asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, ovoid"

		scale=				"world"
		size=				"215"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"  imageY="580"   imageWidth="156" imageHeight="156"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="156"  imageY="580"   imageWidth="156" imageHeight="156"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="312"  imageY="580"   imageWidth="156" imageHeight="156"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="468"  imageY="580"   imageWidth="156" imageHeight="156"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOvoidAsteroidSizeD;"
		name=				"ovoid asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, ovoid"

		scale=				"world"
		size=				"320"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"    imageY="736"   imageWidth="180" imageHeight="180"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="180"  imageY="736"   imageWidth="180" imageHeight="180"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="360"  imageY="736"   imageWidth="180" imageHeight="180"/>
			
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"    imageY="916"   imageWidth="180" imageHeight="180"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="180"  imageY="916"   imageWidth="180" imageHeight="180"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="360"  imageY="916"   imageWidth="180" imageHeight="180"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<!-- OvoidsCompatibility.xml -->
<StationType UNID="&stOvoidAsteroidSizeAComp;"
		name=				"ovoid asteroid"
		attributes=			"asteroid, inner, lifeZone, outer, ovoid"
		inherit=			"&baOvoidAsteroid;"

		scale=				"world"
		size=				"4"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="0" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="32" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="64" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="96" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="128" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="160" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="192" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="0" imageY="224" imageWidth="32" imageHeight="32"/>
			
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="0" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="32" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="64" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="96" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="128" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="160" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="192" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="32" imageY="224" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOvoidAsteroidSizeBComp;"
		name=				"ovoid asteroid"
		attributes=			"asteroid, inner, lifeZone, outer, ovoid"
		inherit=			"&baOvoidAsteroid;"

		scale=				"world"
		size=				"70"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsOvoidAsteroids;" imageX="64" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="64" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="64" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="64" imageY="192" imageWidth="64" imageHeight="64"/>
			
			<Image			imageID="&rsOvoidAsteroids;" imageX="128" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="128" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="128" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="128" imageY="192" imageWidth="64" imageHeight="64"/>
				
			<Image			imageID="&rsOvoidAsteroids;" imageX="192" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="192" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="192" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="192" imageY="192" imageWidth="64" imageHeight="64"/>
				
			<Image			imageID="&rsOvoidAsteroids;" imageX="256" imageY="0" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="256" imageY="64" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="256" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsOvoidAsteroids;" imageX="256" imageY="192" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOvoidAsteroidSizeCComp;"
		name=				"ovoid asteroid"
		attributes=			"asteroid, inner, lifeZone, outer, ovoid"
		inherit=			"&baOvoidAsteroid;"

		scale=				"world"
		size=				"255"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"   imageY="256"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"   imageY="344"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"   imageY="432"   imageWidth="88" imageHeight="88"/>
		
			<Image	imageID="&rsOvoidAsteroids;" imageX="88"   imageY="256"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="88"   imageY="344"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="88"   imageY="432"   imageWidth="88" imageHeight="88"/>
			
			<Image	imageID="&rsOvoidAsteroids;" imageX="176"   imageY="256"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="176"   imageY="344"   imageWidth="88" imageHeight="88"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="176"   imageY="432"   imageWidth="88" imageHeight="88"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOvoidAsteroidSizeDComp;"
		name=				"ovoid asteroid"
		attributes=			"asteroid, inner, lifeZone, outer, ovoid"
		inherit=			"&baOvoidAsteroid;"

		scale=				"world"
		size=				"590"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOvoidAsteroids;" imageX="264"  imageY="256"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="264"  imageY="364"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="264"  imageY="472"   imageWidth="108" imageHeight="108"/>
		
			<Image	imageID="&rsOvoidAsteroids;" imageX="372"  imageY="256"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="372"  imageY="364"   imageWidth="108" imageHeight="108"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="372"  imageY="472"   imageWidth="108" imageHeight="108"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stOvoidPlanetoidSizeEComp;"
		name=				"ovoid planetoid"
		attributes=			"inner, lifeZone, outer, planetoid, ovoid"

		scale=				"world"
		size=				"1000"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOvoidAsteroids;" imageX="320"  imageY="0"   imageWidth="128" imageHeight="128"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="320"  imageY="128"   imageWidth="128" imageHeight="128"/>
		
			<Image	imageID="&rsOvoidAsteroids;" imageX="448"  imageY="0"   imageWidth="128" imageHeight="128"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="448"  imageY="128"   imageWidth="128" imageHeight="128"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stOvoidPlanetoidSizeFComp;"
		name=				"ovoid planetoid"
		attributes=			"inner, lifeZone, outer, planetoid, ovoid"

		scale=				"world"
		size=				"2450"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"  imageY="580"   imageWidth="156" imageHeight="156"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="156"  imageY="580"   imageWidth="156" imageHeight="156"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="312"  imageY="580"   imageWidth="156" imageHeight="156"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="468"  imageY="580"   imageWidth="156" imageHeight="156"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stOvoidPlanetoidSizeGComp;"
		name=				"ovoid planetoid"
		attributes=			"inner, lifeZone, outer, ovoid, planetoid"

		scale=				"world"
		size=				"3750"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"    imageY="736"   imageWidth="180" imageHeight="180"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="180"  imageY="736"   imageWidth="180" imageHeight="180"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="360"  imageY="736"   imageWidth="180" imageHeight="180"/>
			
			<Image	imageID="&rsOvoidAsteroids;" imageX="0"    imageY="916"   imageWidth="180" imageHeight="180"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="180"  imageY="916"   imageWidth="180" imageHeight="180"/>
			<Image	imageID="&rsOvoidAsteroids;" imageX="360"  imageY="916"   imageWidth="180" imageHeight="180"/>
		</ImageVariants>
	</StationType>
<!-- Part1Compatibility.xml -->
<!-- Penitents.xml -->
<StationType UNID="&stPenitentShrine;"
			name=				"Penitent shrine"
			sovereign=			"&svPenitents;"
				 
			attributes=			"enemy, envAir, envAvoidsFire, generic, human, penitents, populated, religious"
				 
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			armorID=			"&itLightBlastPlate;"
			hitPoints=			"210"
			multiHull=			"true"
            regen=              "2"
				 
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			noFriendlyFire=		"true"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+penitentSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"---rc uv--- ----- ----- -----"

				locationCriteria=		"+nebulae"
				enemyExclusionRadius=	"50"
				/>

		<!-- Trade and Items -->
		
		<Items>
			<Group value="standard:level=5">
				<Table>
					<Lookup	chance="20" count="1d4"	table="&trStationSupplies;" />
					<Lookup chance="40"	count="1" table="&trHaloGems;"/>
					<Lookup chance="40" count="1" table="&trStdTreasure;"/>
				</Table>
			</Group>
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itOracusHarassPower;"	missileDefense="true" />
		</Devices>

		<!-- Ships and Defenses -->

		<Ships>
			<Table>
				<Ship chance="50"	count="1d4"	class="&scRepentant;"	orders="guard"/>
				<Group chance="40">
					<Ship			count="1d2"	class="&scRepentant;"	orders="guard"/>
					<Ship			count="1"	class="&scAtonement;"	orders="guard"/>
				</Group>
				<Ship chance="10"	count="1d2"	class="&scAtonement;"	orders="guard"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsStations5;" imageX="0" imageY="256" imageWidth="128" imageHeight="128"/>

		<DockingPorts
				portCount=		"8"
				portRadius=		"64"
				>
		</DockingPorts>

		<Events>
			<GetRumors>
				{
					attributes: "commonwealthPub"
					priority: 50
					textID: 'rumor.commonwealthPub
					}
			</GetRumors>
		</Events>

		<Language>
			<Text id="rumor.commonwealthPub">
				You drink through 5 credits while talking to an attractive Sister:

				"The Sisters of Domina believe in the power of transcendence, but
				we worship Domina because she brings life and beauty. Say, you're
				not a Penitent, are you? Good! The Penitents only care about power
				and death&mdash;Oracus controls them, you know."
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stPenitentSanctum;"
			name=				"Penitent sanctum"
			sovereign=			"&svPenitents;"
				 
			attributes=			"enemy, envAir, envAvoidsFire, generic, human, penitents, populated, religious"
				 
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			armorID=			"&itBlastPlate;"
			hitPoints=			"700"
			multiHull=			"true"
            regen=              "8"
				 
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			noFriendlyFire=		"true"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+penitentSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"----r cuv-- ----- ----- -----"

				locationCriteria=		"+nebulae"
				enemyExclusionRadius=	"60"
				/>

		<!-- Trade and Items -->
		
		<Items>
			<Lookup					count="1d4"	table="&trStationSupplies;" />
			<Lookup chance="65"		count="1"	table="&trHaloGems;"/>
			<Table chance="50">
				<Lookup chance="40" count="1" table="&trConsumables7;"/>
				<Lookup chance="40" count="1" table="&trMinorItem7;"/>
				<Lookup chance="20" count="1" table="&trMajorItem7;"/>
			</Table>
		</Items>
		
		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itOracusHarassPower;"	missileDefense="true"/>
			<Device deviceID="&itAbsolutionCannon;"	omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships>
			<Table>
				<Ship chance="25"	count="1d6"	class="&scRepentant;"	orders="guard"/>
				<Group chance="50">
					<Ship			count="1d4"	class="&scRepentant;"	orders="guard"/>
					<Ship			count="1"	class="&scAtonement;"	orders="guard"/>
				</Group>
				<Ship chance="25"	count="1d4"	class="&scAtonement;"	orders="guard"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsStations5;" imageX="128" imageY="256" imageWidth="128" imageHeight="128"/>

		<DockingPorts
				portCount=		"8"
				portRadius=		"64"
				>
		</DockingPorts>
	</StationType>
<StationType UNID="&stPenitentMonastery;"
			name=				"Penitent monastery"
			sovereign=			"&svPenitents;"
				 
			attributes=			"enemy, envAir, envAvoidsFire, generic, human, penitents, populated, religious"
				 
			abandonedScreen=	"&dsRPGAbandonedStation;"
				 
			armorID=			"&itHeavyBlastPlate;"
			hitPoints=			"1800"
			multiHull=			"true"
            regen=              "35"
				 
			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			noFriendlyFire=		"true"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+penitentSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"----- vur-- ----- ----- -----"

				locationCriteria=		"+nebulae"
				enemyExclusionRadius=	"80"

				unique=					"inSystem"
				/>
		
		<!-- Trade and Items -->
		
		<Items value="standard:level=7:x=1.6">
			<Lookup					count="1d4"	table="&trStationSupplies;" />
			<Lookup chance="95"		count="1"	table="&trHaloGems;"/>
			<Table chance="50">
				<Lookup chance="40" count="1" table="&trConsumables7;"/>
				<Lookup chance="40" count="1" table="&trMinorItem7;"/>
				<Lookup chance="20" count="1" table="&trMajorItem7;"/>
			</Table>
		</Items>
		
		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itOracusHarassPower;" missileDefense="true"/>
			<Device deviceID="&itAbsolutionCannon;"	posAngle="10" posRadius="126" posZ="5" omnidirectional="true"/>
			<Device deviceID="&itAbsolutionCannon;"	posAngle="100" posRadius="126" posZ="5" omnidirectional="true"/>
			<Device deviceID="&itAbsolutionCannon;"	posAngle="190" posRadius="126" posZ="5" omnidirectional="true"/>
			<Device deviceID="&itAbsolutionCannon;"	posAngle="280" posRadius="126" posZ="5" omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships minShips="2">
			<Table>
				<Ship chance="20"	count="8-10"	class="&scRepentant;"	orders="patrol:10"/>
				<Group chance="50">
					<Ship			count="4-6"	class="&scRepentant;"	orders="patrol:10"/>
					<Ship			count="2-4"	class="&scAtonement;"	orders="guard"/>
				</Group>
				<Ship chance="20"	count="6-8"	class="&scAtonement;"	orders="guard"/>
				<Group chance="10">
					<Ship			count="1d4"	class="&scRepentant;"	orders="guard"/>
					<Ship			count="1"	class="&scExcruciatorDestroyer;"	orders="patrol:20"/>
				</Group>
			</Table>
		</Ships>

		<!-- Image and Effects -->
		
		<Image			imageID="&rsPenitentMonastery;" imageWidth="290" imageHeight="256" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"12"
				portRadius=		"160"
				>
		</DockingPorts>
	</StationType>
<!-- Pilgrim.xml -->
<!-- PlayerShips.xml -->
<!-- PointJuno.xml -->
<StationType UNID="&stPointJuno;"
			name=				": Point Juno"
			sovereign=			"&svCommonwealthFleet;"

			attributes=			"commonwealth, commonwealthFleet, commonwealthMilitary, fleetDelivery, fleetLaw, friendly, generic, human, majorStation, pointJuno, populated"
			inherit=			"&baCommonwealthStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"8"
			size=				"590"
			armorID=			"&itP1000HexphaseArmor;"
			hitPoints=			"2400"
			multiHull=			"true"
			regen=              "20"
			shipRegen=			"20"

			ignoreFriendlyFire=	"true"
			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Properties>
			<Constant		id="rpg.shipBrokerCriteria">"s L:7-9; +commonwealth; +military; -notStandard; +shipBroker;"</Constant>
			<DynamicData	id="rpg.shipBrokerInventory">(rpgGetShipInventory gSource)</DynamicData>
		</Properties>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; +military; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="500" levelFrequency="systemLevel:ruc|c|cur" noDescription="true"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100" noDescription="true"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-9;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-10;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-10;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-9;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-9;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>

			<SellShip		criteria="s -notForSale;" priceAdj="100"/>
			<BuyShip		criteria="s L:1-10; -notForSale;" priceAdj="80"/>
		</Trade>

		<Items>
			<!-- Some upgrades for sale -->
			
			<RandomItem count="1d6" criteria="r +commonwealth; -defective; -illegal; -notForSale; -notStandard; L:6-9;"		levelFrequency="systemLevel:ru|c|curv"/>
			<Lookup count="12-16" table="&tbCommonwealthFleetItems;"/>
		</Items>
		
		<!-- Configuration -->

		<!-- Satellites -->

		<Satellites>
			<Orbitals distance="12" angle="90">
				<Station type="&stNavBeacon;" imageVariant="1"/>
			</Orbitals>

			<Orbitals distance="12" angle="270">
				<Station type="&stNavBeacon;" imageVariant="1"/>
			</Orbitals>
		</Satellites>
		
		<!-- Ships and Defenses -->

		<Ships>
			<Ship					count="1"	class="&scBritannia;"	orders="guard" controller="fleetcommand">
				<Escorts>
					<Ship			count="8"	class="&scCenturionM;"	orders="escort" controller="fleet"/>
				</Escorts>
			</Ship>
			<Ship					count="1"	class="&scBritannia;"	orders="guard" controller="fleetcommand">
				<Escorts>
					<Ship			count="8"	class="&scCenturionM;"	orders="escort" controller="fleet"/>
				</Escorts>
			</Ship>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Ship chance="25" count="1" class="&scEI500;" orders="gateOnThreat"/>
				<Ship chance="10" count="1" class="&scWolfen;" orders="gateOnThreat"/>
				<Ship chance="15" count="1" class="&scRoninC;" orders="guard"/>
				<Ship chance="50" count="1" class="&scCenturionM;" orders="guard"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->

		<Image			imageID="&rsPointJuno;"		imageWidth="420" imageHeight="460" viewportRatio="0.0425"/>
		<HeroImage		imageID="&rsPointJunoHero;" imageWidth="800" imageHeight="650"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"210"
				>
		</DockingPorts>
		
		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionCentralCommand" default="1">
								(block (
									(rank (objGetData gPlayerShip 'fleetLevel))
									)
									(switch
										;	Can't get in unless the player is Fleet Lieutenant or above
										(ls rank 4)
											(scrShowScreen gScreen &dsRPGMessage; { textID:'descAccessDenied })

										;	Otherwise show missions
										(rpgMissionAssignment {
											missionCriteria: (cat "n +cscPointJuno; +rank" (int rank) "; =" (sysGetLevel) ";")
											noMissionTextID: 'descNoMissions
											})
										)
									)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionBuyShip">
								(scrShowScreen gScreen &dsRPGShipBroker;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>

		</DockScreens>

		<!-- Events and Data -->

		<Events>
			<OnDestroy>
				(block Nil
					(intCommonwealthOnDestroy)

					; Military will execute the player
					(if (and gPlayerShip (eq aOrderGiver gPlayerShip))
						(intFleetCrime 3 (cat "the destruction of " (objGetName gSource 4)))
						)
					)
			</OnDestroy>
		</Events>

		<Language>
			<!-- Code Points -->

			<Text id="descNoMissions">
				(switch
					(= (objGetProperty gPlayerShip 'characterClass) &unidPilgrimClass;)
						(objTranslate gSource 'descNoMissionsPilgrim)
					
					(objTranslate gSource 'descNoMissionsNormal)
					)
			</Text>

			<!-- Text -->

			<Text id="actionCentralCommand">[C]entral Command</Text>
			<Text id="actionDockServices">[D]ock Services</Text>
			<Text id="actionUndock">[U]ndock</Text>

			<Text id="descWelcome">You are docked at Point Juno.</Text>
			<Text id="descNoMissionsNormal">

				General Verner welcomes you as you enter:
				
				"I'm glad you're in no hurry. Rest here with us and continue your journey later."

			</Text>
			<Text id="descNoMissionsPilgrim">

				General Verner welcomes you as you enter:
				
				"I'm glad you're in no hurry to go to the Core. Rest here with us and seek Domina later."

			</Text>
			<Text id="descAccessDenied">

				Two armed guards block your path:
				
				"I'm sorry, %sir%, only Fleet Officers are allowed in Central Command."

			</Text>
			
			<Text id="core.mapDescMain">
				Commonwealth Fleet stronghold
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stCSCEuropaWreck;"
			name=				":the wreck of the CSC Europa"
			sovereign=			"&svCommonwealthFleet;"
			inherit=			"&unidCommonText;"
			
			abandonedScreen=	"Main"
			scale=				"ship"

			ejectaType=			"&vtWreckEjecta;"

			attributes=			"CSCEuropa, generic, locked, shipwreck, uncharted"
			>

		<Image			imageID="&rsCSCWreckage;" imageX="0" imageY="0" imageWidth="332" imageHeight="320"/>

		<Ships>
			<Table>
				<Group chance="60">
					<Ship	count="4"	class="&scChasm;"	orders="guard"	sovereign="&svAres;"/>
					<Ship	count="2d8"	class="&scSandstorm;" orders="patrol" patrolDist="10" sovereign="&svAres;"/>
					<Ship	count="1d2"	class="&scCometfall;" orders="patrol" patrolDist="15" sovereign="&svAres;"/>
				</Group>
				<Group chance="30">
					<Ship	count="2d6"	class="&scKobolGunshipDualTeV9;"	orders="patrol" patrolDist="5" sovereign="&svKobolWarlords;"/>
					<Ship	count="2d4"	class="&scKobolGunshipOmniTeV9;"	orders="patrol" patrolDist="5" sovereign="&svKobolWarlords;"/>
					<Ship	count="1d6"	class="&scKobolGunshipMissiles;"	orders="guard" sovereign="&svKobolWarlords;"/>
				</Group>
				<Group chance="10">
					<Ship	count="2d8"	class="&scCenturionRogue;"	orders="patrol"	patrolDist="5" sovereign="&svRogueFleet;"/>
					<Ship	count="1d8"	class="&scCenturionXRogue;"	orders="guard" sovereign="&svRogueFleet;"/>
				</Group>
			</Table>
		</Ships>

		<Items>
			<Item count="1" item="&itLamplighterPrototype;"/>
			<Table count="1d4">
				<Item chance="40"	count="1"		item="&itStarCannon;"/>
				<Item chance="30"	count="1"		item="&itNAMIHeavyLauncher;"/>
				<Item chance="20"	count="1"		item="&itR9Deflector;"/>
				<Item chance="10"	count="1"		item="&itPlasmaCannon;"/>
			</Table>
			<Table count="2d6">
				<Item chance="20"	count="24d40"	item="&itThermoCannonShell;"/>
				<Item chance="20"	count="4d20"	item="&itStaticMine;"/>
				<Item chance="15"	count="4d12"	item="&itXM900Missile;"/>
				<Item chance="15"	count="2d20"	item="&itTrackingMine;"/>
				<Item chance="10"	count="4d20"	item="&itS3Missile;"/>
				<Item chance="10"	count="1d12"	item="&itM2Missile;"/>
				<Item chance="5"	count="1d4"		item="&itM5Missile;"/>
				<Item chance="5"	count="2d12"	item="&itKytrynPlasmaSeed;"/>
			</Table>
		</Items>

		<Satellites>
			<Orbitals count="2d6" distance="2d8+4" angle="random">
				<Table>
					<Station chance="60" type="&stSandstormWreck;"/>
					<Station chance="40" type="&stCenturionWreck;"/>
				</Table>
			</Orbitals>
		</Satellites>

		<Events>
			<OnCreate>
				(block (codes)
					(setq codes '(anvil boson cloud dour enigma fallen golem heavy ice joust kilo labor metal neverland outpost proxy quasar rom sensor toxic ultra vial wren xavier yoke zone))
					(typSetGlobalData &stCSCEuropaWreck; "VaultCode" (cat (random codes) " " (random codes) " " (random 1 999)))
					)
			</OnCreate>
		</Events>

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descDefault">
						<Actions>
							<Action id="actionBridge" default="1">
								(scrShowPane gScreen "Bridge")
							</Action>

							<Action id="actionWeaponsVault">
								(if (objGetData gSource "VaultOpened")
									(scrShowPane gScreen "WeaponsVault")
									(scrShowPane gScreen "WeaponsVaultLocked")
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<Bridge descID="descBridge">
						<Actions>
							<Action id="actionDone" default="1" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</Bridge>

					<WeaponsVault>
						<OnPaneInit>
							(block nil
								(scrSetDescTranslate gScreen 'descWeaponsVault)
								(rpgSetLootAction gSource)
								)
						</OnPaneInit>
						
						<Actions>
							<Action id="actionLoot" default="1">
								(scrShowScreen gScreen &dsRPGLoot;)
							</Action>

							<Action id="actionJettison">
								(scrShowScreen gScreen &dsRPGJettison;)
							</Action>

							<Action id="actionDone" cancel="1" default="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>

					</WeaponsVault>

					<WeaponsVaultLocked
							descID=		"descWeaponsVaultLocked"
							showTextInput="true">

						<Actions>
							<Action id="actionEnterCode" default="1">
								(block Nil
									(if (eq (scrGetInputText gScreen) (typGetGlobalData &stCSCEuropaWreck; "VaultCode"))
										(block Nil
											(objSetData gSource "VaultOpened" True)
											(scrShowPane gScreen "WeaponsVault")
											)
										(scrShowPane gScreen "InvalidCode")
										)
									)
							</Action>

							<Action id="actionDoneSpecial" cancel="1">
								(scrShowPane gScreen "Default")
							</Action>
						</Actions>
					</WeaponsVaultLocked>

					<InvalidCode descID="descInvalidCode">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowPane gScreen "WeaponsVaultLocked")
							</Action>
						</Actions>
					</InvalidCode>
				</Panes>
			</Main>

		</DockScreens>

		<DockingPorts>
			<Port x="0"		y="120" />
			<Port x="0"		y="-120" />
			<Port x="80"	y="80" />
			<Port x="80"	y="-80" />
			<Port x="120"	y="0" />
			<Port x="-120"	y="0" />
			<Port x="-80"	y="80" />
			<Port x="-80"	y="-80" />
		</DockingPorts>
		
		<Language>
			<Text id="actionBridge">[B]ridge</Text>
			<Text id="actionWeaponsVault">[W]eapons Vault</Text>
			<Text id="actionEnterCode">[Enter] Enter Code</Text>
			<Text id="actionDoneSpecial">[Esc] Done</Text>

			<Text id="descDefault">
				You are docked with the hulking wreckage of the CSC Europa.
			</Text>
			<Text id="descBridge">
				The bridge is completely smashed. Bodies float around in zero-G amid
				the shredded remains of consoles and other electronic equipment.
			</Text>
			<Text id="descWeaponsVault">
				You are inside the CSC Europa's weapons vault.
			</Text>
			<Text id="descWeaponsVaultLocked">
				You are standing in front of the massive blast-proof doors of the
				ship's weapons vault. There is an alphabetic codepad on the door
				that requests an entry code.
			</Text>
			<Text id="descInvalidCode">
				The code appears to be invalid. The vault doors remained closed.
			</Text>
		</Language>

	</StationType>
<!-- Primordial.xml -->
<StationType UNID="&stPrimordialAsteroidSizeA;"
		name=				"primordial asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, primordial"
		inherit=			"&baPrimordialAsteroid;"

		scale=				"world"
		size=				"6"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsPrimordialAsteroidSizeA;"/>

		<Items>
			<Table>
				<Null chance="92"/>
				<Lookup chance="8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stPrimordialAsteroidSizeB;"
		name=				"primordial asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, primordial"
		inherit=			"&baPrimordialAsteroid;"

		scale=				"world"
		size=				"55"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsPrimordialAsteroidSizeB;"/>

		<Items>
			<Table>
				<Null chance="92"/>
				<Lookup chance="8" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stPrimordialAsteroidSizeC;"
		name=				"primordial asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, primordial"
		inherit=			"&baPrimordialAsteroid;"

		scale=				"world"
		size=				"250"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsPrimordialAsteroidSizeC;"/>

		<Items>
			<Table>
				<Null chance="92"/>
				<Lookup chance="8" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stPrimordialAsteroidSizeD;"
		name=				"primordial asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, primordial"
		inherit=			"&baPrimordialAsteroid;"

		scale=				"world"
		size=				"740"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsPrimordialAsteroidSizeD;"/>

		<Items>
			<Table>
				<Null chance="92"/>
				<Lookup chance="8" count="1d10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stPrimordialPlanetoidSizeE;"
		name=				"primordial planetoid"
		attributes=			"generic, inner, lifeZone, outer, planetoid, primordial"

		scale=				"world"
		size=				"1150"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsPrimordialPlanetoidSizeE;"/>
	</StationType>
<StationType UNID="&stPrimordialPlanetoidSizeF;"
		name=				"primordial planetoid"
		attributes=			"generic, inner, lifeZone, outer, planetoid, primordial"

		scale=				"world"
		size=				"1640"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsPrimordialPlanetoidSizeF;"/>
	</StationType>
<StationType UNID="&stPrimordialPlanetoidSizeF2;"
		name=				"primordial planetoid"
		attributes=			"generic, inner, lifeZone, outer, planetoid, primordial"

		scale=				"world"
		size=				"2530"
		anonymous=			"true"
		>
		<ImageVariants>
			<Image	imageID="&rsPrimordialWorlds;"	imageX="182" imageY="580"   imageWidth="158"  imageHeight="158"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stPrimordialPlanetoidSizeG;"
		name=				"primordial planetoid"
		attributes=			"generic, inner, lifeZone, outer, planetoid, primordial"

		scale=				"world"
		size=				"4000"
		anonymous=			"true"
		>
		<ImageLookup imageID="&rsPrimordialPlanetoidSizeG;"/>
	</StationType>
<StationType UNID="&stPrimordialTerrestrialSizeH;"
		name=				"primordial world"
		attributes=			"generic, inner, lifeZone, outer, primordial, terrestrial"

		scale=				"world"
		size=				"4285"
		anonymous=			"true"
		>
		<ImageVariants>
			<Image	imageID="&rsPrimordialWorlds;"	imageX="0"   imageY="580"   imageWidth="182"  imageHeight="182"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stPrimordialTerrestrialSizeH2;"
		name=				"primordial world"
		attributes=			"atmosphere, denseAtmosphere, generic, inner, lifeZone, outer, primordial, terrestrial"

		scale=				"world"
		size=				"6300"
		anonymous=			"true"
		>
		<ImageVariants>
			<Image	imageID="&rsPrimordialWorlds;"	imageX="0"   imageY="340"   imageWidth="240"  imageHeight="240"/>
			<Image	imageID="&rsPrimordialWorlds;"	imageX="240" imageY="340"   imageWidth="240"  imageHeight="240"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stPrimordialTerrestrialSizeJ;"
		name=				"primordial world"
		attributes=			"generic, inner, lifeZone, outer, primordial, terrestrial"

		scale=				"world"
		size=				"22000"
		anonymous=			"true"
		>
		<ImageVariants>
			<Image	imageID="&rsPrimordialWorlds;"	imageX="340" imageY="0"     imageWidth="270"  imageHeight="270"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stPrimordialGasGiantSizeK;"
		name=				"primordial gas giant"
		attributes=			"atmosphere, denseAtmosphere, gasGiant, generic, inner, lifeZone, outer, primordial"

		scale=				"world"
		size=				"48200"
		anonymous=			"true"
		>
		<ImageVariants>
			<Image	imageID="&rsPrimordialWorlds;"	imageX="0"   imageY="0"     imageWidth="340"  imageHeight="340"/>
		</ImageVariants>
	</StationType>
<!-- Psych00.xml -->
<!-- Psych01.xml -->
<!-- Pteravores.xml -->
<StationType UNID="&stPteravoreLair;"
			name=				"pteravore lair"
			sovereign=			"&svPteravores;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			stealth=			"10" 
			fireRateAdj=		"80"
			explosionType=		"&vtThermoExplosion1;"
			ejectaType=			"&vtStoneAsteroidEjecta;"

			attributes=			"asteroidBase, chitometallicEco, enemy, envFire, envAvoidsWater, galacticCreature, generic, pteravore, score"
			>

		<!-- Encounter Info -->

		<Encounter
				distanceCriteria=		"+nodeID:G2;"
				distanceFrequency=		"ccccc|rv---"
				systemAffinity=			"+envFire; -envWater;"
				levelFrequency=			"----- ----r cuur- ----- -----"

				locationCriteria=		"++asteroids"
				enemyExclusionRadius=	"80"
				/>

		<ImageVariants>
			<Image	imageID="&rsPteravoreLair;" imageX="0"	 imageY="0" imageWidth="150" imageHeight="150"/>
			<Image	imageID="&rsPteravoreLair;" imageX="150" imageY="0" imageWidth="120" imageHeight="150"/>
			<Image	imageID="&rsPteravoreLair;" imageX="270" imageY="0" imageWidth="120" imageHeight="150"/>
		</ImageVariants>

		<!-- Configuration -->
		
		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itAdvancedPlasteelPlate;"
				hitPoints=		"500"
			    regen=			"1.5"
				/>
		
		<Devices>
			<Device deviceID="&vtPteravoreSporeLauncher;"	omnidirectional="true"/>
		</Devices>

		<Items>
			<Item count="5d12"	item="&itPteracniumOre;" />
		</Items>

		<Language>
			<Text id="core.abandonedStationDesc">

				You are docked at the remains of a pteravore lair. These fearsome silicon-based
				lifeforms live on refined pteracnium, extracted from unsuspecting vessels.

			</Text>
		</Language>

		<Events>
			<OnDestroy>
				(if (and aOrderGiver
						(objCanAttack aOrderGiver)
						)
					(block Nil
						; Remember who killed us
						(objSetObjRefData gSource "destroyer" aOrderGiver)

						; Start a timer
						(sysAddObjRecurringTimerEvent 17 gSource "OnRevenge")
						)
					)
			</OnDestroy>

			<OnRevenge>
				(block (theDestroyer)
					(switch
						; If the destroyer was destroyed, then we're done
						(not (setq theDestroyer (objGetObjRefData gSource "destroyer")))
							(sysCancelTimerEvent gSource "OnRevenge")

						; If the destroyer is far away, then wait
						(gr (objGetDistance gSource theDestroyer) 30)
							Nil

						; Otherwise, send out streams of pteravores at the destroyer
						(block Nil
							(for i 1 (random 2 4)
								(sysCreateWeaponFire
									&vtPteravoreSporeLauncher;
									gSource
									(objGetPos gSource)
									(random 0 359)
									12
									theDestroyer
									)
								)

							; Chance that we stop
							(if (leq (random 1 100) 5)
								(sysCancelTimerEvent gSource "OnRevenge")
								)
							)
						)
					)
			</OnRevenge>
		</Events>

		<DockingPorts>
			<Port x="0"		y="90" />
			<Port x="0"		y="-90" />
			<Port x="60"	y="60" />
			<Port x="60"	y="-60" />
			<Port x="90"	y="0" />
			<Port x="-90"	y="0" />
			<Port x="-60"	y="60" />
			<Port x="-60"	y="-60" />
		</DockingPorts>

	</StationType>
<!-- QuantumCPU.xml -->
<!-- RaisuMission01.xml -->
<!-- RaisuMission02.xml -->
<!-- RaisuMission03.xml -->
<!-- RaisuStation.xml -->
<StationType UNID="&stRaisuStation;"
			name=				": Raisu Station"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"

			attributes=			"commonwealth, commonwealthCustoms, eridaniScript, friendly, human, majorStation, populated, raisuStation"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"3"
			size=				"160"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"150"
			multiHull=			"true"
			regen=				"1"

			ejectaType=			"&vtWreckEjecta;"
			>

		<Properties>
			<!-- playerStatus
			
				This describes the station's attitude towards the player. One of
				the following:

					Nil: Player not known.
					'ally: Player has helped the station.
					'hero: Player is considered a hero, gets free refuel and 
							armor repair.

			-->
			<Data id="playerStatus"></Data>

			<!-- status
			
				One of the following:

					destroyed: Destroyed by some other reason
					destroyedByPlayer: Player destroyed the station.
					destroyedByWarlords: Destroyed by Centauri warlords
					liberated: Arco Vaughn killed, but warlords still active
					defended: Station defended against counter attack, but warlords still active

			-->
			<Global id="status"></Global>

			<Constant id="rpgCharacter.stationMaster">
				{
					id: 'raisuStationMaster
					gender: 'genderFemale
					}
			</Constant>

			<Data id="rpg.storageID"></Data>
		</Properties>

		<!-- Encounter Info -->
		
		<Encounter
				exclusionRadius="80"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; +basicAmmo; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-4;" priceAdj="variable:100"/>
			<RepairArmor	criteria="a L:1-4;" priceAdj="variable:100"/>
			<ReplaceArmor	criteria="a L:1-4;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-4;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-4;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>

		<!-- Ships and Defenses -->

		<Ships challenge="standard">
			<Lookup table="&tbCommPrivateCrafts;"/>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsRaisuStation;" imageWidth="170" imageHeight="170" viewportRatio="0.02125"/>

		<DockingPorts
				portCount=		"8"
				portRadius=		"100"
				/>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Display type="detailsPane">
					<OnDisplayInit>
						(scrTranslate gScreen 'rpg.statusDetails)
					</OnDisplayInit>
				</Display>

				<Panes>
					<Default>
						<OnPaneInit>
							(block (
								(playerStatus (or (obj@ gSource 'playerStatus) 'default))
								)
								(scrSetDescTranslate gScreen (cat 'descWelcome. playerStatus))
								(scrShowAction gScreen 'actionTakeReward (rpgGetStorage gSource))
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionTakeReward">
								(scrShowScreen gScreen &dsRPGLoot; {
									sourceObj: (rpgGetStorage gSource)
									})
							</Action>

							<Action id="actionMainHall" default="1">
								(rpgMissionAssignment {
									missionCriteria: "n +raisuStation;"
									maxActive: 1
									noMissionTextID: 'descNoMissions

									missionGiver: (objGetProperty gSource 'rpgCharacter.stationMaster)
									})
							</Action>

							<Action id="actionDockServices">
								;	If the station is still controlled by warlords, then 
								;	no dock services.

								(switch
									(msnFind "c +unid:&msRaisuStation01;;")
										(rpgDockServices gPlayerShip { })

									(scrShowScreen gScreen &dsRPGMessage; {
										textID: 'descNoServices
										})
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Behavior -->

		<Events>
			<OnDestroy>
				(block ()
					(switch
						;	Player killed us.

						(and aOrderGiver (= aOrderGiver gPlayerShip))
							(objSet@ gSource 'status 'destroyedByPlayer)

						;	Centauri warlords killed us.

						(objHasAttribute aOrderGiver 'centauriWarlords)
							(objSet@ gSource 'status 'destroyedByWarlords)

						;	Something else killed us

						(objSet@ gSource 'status 'destroyed)
						)

					;	No loot if station is destroyed

					(enum (objGetItems gSource "*U") theItem
						(objRemoveItem gSource theItem)
						)
					)
			</OnDestroy>

			<GetPlayerPriceAdj>

				(switch
					;	If the player has destroyed the Centauri settlement, then
					;	she gets free refuel and repairs.

					(and (= (obj@ gSource 'playerStatus) 'hero)
							(or (= aService 'priceToRefuel)
								(= aService 'priceToRepairArmor)
								)
							)
						0

					;	Otherwise, nothing

					Nil
					)

			</GetPlayerPriceAdj>

			<GetGlobalAchievements>
				(block (
					(status (typ@ &stRaisuStation; 'status))
					)
					(if status {
						descID: (cat 'achievement. status)
						sectionID: 'achievementsAndRegrets
						})
					)
			</GetGlobalAchievements>
		</Events>

		<Language>
			<Text id="actionTakeReward">[T]ake Reward</Text>

			<Text id="descWelcome.default">

				You enter a large but deserted docking bay. Trash and other 
				debris is scattered around. A few dock workers are idling near
				a hatchway, but they studiously ignore you.

			</Text>
			<Text id="descWelcome.ally">
			
				Stationers greet you as you enter:

				"Welcome, %name%! We'll never forget that you defended us when
				no one else would."

			</Text>
			<Text id="descWelcome.hero">

				Stationers greet you as you enter:

				"Welcome, %name%! We'll never forget that you freed us from the
				warlords.

				"If your ship needs refueling or repairs, we'd be honored to 
				do so at no charge."
			
			</Text>
			<Text id="descNoMissions">

				The station master is working at her station. The comms channels
				are quiet and she stops to chat:

				"It's calm now, but I've been hearing a lot of military chatter 
				lately."

			</Text>
			<Text id="descNoServices">

				The docking bay is deserted. No one is here to service your 
				ship.
			
			</Text>

			<Code id="rpg.statusDetails">
				(block (
					(mission01Obj (msnFind "*P +unid:&msRaisuStation01;;"))
					(mission02Obj (msnFind "*P +unid:&msRaisuStation02;;"))
					(mission03Obj (msnFind "*P +unid:&msRaisuStation03;;"))
					(globalStatus (typ@ &stRaisuStation; 'status))
					(centauriLeft (count (sysFindObject gPlayerShip "TA +centauriWarlords; +populated; -occupation; -uncharted;")))
					(centauriDestroyed (count (sysFindObject gPlayerShip "TK +centauriWarlords; +populated; -occupation; -uncharted;")))
					(settlementObj (sysFindObject gPlayerShip "TAN +unid:&stCentauriSettlement;;"))

					(raisuStatus
						(switch
							(msn@ mission03Obj 'isDeclined)
								'uneasyPeace

							(msn@ mission03obj 'isCompleted)
								'victory

							(msn@ mission03obj 'isOpen)
								'retaliating

							(msn@ mission02obj 'isCompleted)
								'liberated

							(msn@ mission02Obj 'isActive)
								'defending

							(msn@ mission02Obj 'isOpen)
								'expectingAttack

							(= globalStatus 'liberated)
								'liberated

							(msn@ mission01Obj 'isDeclined)
								'hiding

							(sysFindObject gSource "s +centauriWarlords; N:100;")
								'hidingFromWarlords

							(msn@ mission01Obj 'isActive)
								'challengeArcoVaughn

							(msn@ mission01Obj 'isOpen)
								'hiding

							'unknown
							)
						)
					)
					{
						title: (scrTranslate gScreen 'status.title)
						largeIcon: (objGetImageDesc gSource)

						details: (list
							{
								title: (scrTranslate gScreen 'status.status)
								desc: (scrTranslate gScreen 'status.rtfValue { 
									value: (scrTranslate gScreen (cat 'status. raisuStatus))
									})
								}
							{
								title: (scrTranslate gScreen 'status.centauriLeft)
								desc: (scrTranslate gScreen 'status.rtfValue { 
									value: centauriLeft
									})
								}
							(if (gr centauriDestroyed 0)
								{
									title: (scrTranslate gScreen 'status.centauriDestroyed)
									desc: (scrTranslate gScreen 'status.rtfValue { 
										value: centauriDestroyed
										})
									}
								)
							(if (typ@ &scArcoVaughnHeavyRaider; 'status)
								{
									title: (scrTranslate gScreen 'status.arcoVaughn)
									desc: (scrTranslate gScreen 'status.rtfValue { 
										value: (scrTranslate gScreen 'status.killed)
										})
									}
								)
							(switch
								(not settlementObj)
									{
										title: (scrTranslate gScreen 'status.centauriSettlement)
										desc: (scrTranslate gScreen 'status.rtfValue { 
											value: (scrTranslate gScreen 'status.destroyed)
											})
										}

								(= raisuStatus 'uneasyPeace)
									{
										title: (scrTranslate gScreen 'status.centauriSettlement)
										desc: (scrTranslate gScreen 'status.rtfValue { 
											value: (scrTranslate gScreen 'status.peaceful)
											})
										}
								)
							)

						detailsStyle: 'stats
						align: 'bottom
						}
					)
			</Code>
			<Text id="status.title">Raisu Station</Text>

			<Text id="status.status">Status:</Text>
			<Text id="status.hiding">Fearful of Warlords</Text>
			<Text id="status.hidingFromWarlords">Hiding from Warlords</Text>
			<Text id="status.challengeArcoVaughn">Hunting Arco Vaughn</Text>
			<Text id="status.liberated">Freed from Warlord Occupation</Text>
			<Text id="status.expectingAttack">Expecting Retaliation</Text>
			<Text id="status.defending">Defending against Warlords</Text>
			<Text id="status.retaliating">Threatening Warlord Settlement</Text>
			<Text id="status.uneasyPeace">Coexisting with Warlord Settlement</Text>
			<Text id="status.victory">Eliminated Warlord Settlement</Text>
			<Text id="status.unknown">UNKNOWN</Text>

			<Text id="status.centauriLeft">Active Centauri Stations:</Text>
			<Text id="status.centauriDestroyed">Centauri Stations Destroyed:</Text>

			<Text id="status.arcoVaughn">Arco Vaughn Status:</Text>
			<Text id="status.killed">Killed</Text>

			<Text id="status.centauriSettlement">Centauri Settlement Status:</Text>
			<Text id="status.destroyed">Destroyed</Text>
			<Text id="status.peaceful">Peaceful</Text>

			<RTF id="status.rtfValue">{/rtf {/f:LargeBold;/c:#ffe667; %value%}}</RTF>

			<Text id="achievement.destroyed">Allowed Raisu Station to be destroyed</Text>
			<Text id="achievement.destroyedByPlayer">Destroyed Raisu Station</Text>
			<Text id="achievement.destroyedByWarlords">Failed to defend Raisu Station</Text>
			<Text id="achievement.liberated">Liberated Raisu Station</Text>
			<Text id="achievement.defended">Defended Raisu Station from Centauri warlord attack</Text>
		</Language>
	</StationType>
<!-- Rama.xml -->
<!-- RanxEmpire.xml -->
<StationType UNID="&stRanxOutpost;"
			name=				"Ranx outpost"
			sovereign=			"&svRanxEmpire;"

			attributes=			"enemy, envEarth, envAvoidsAir, generic, human, populated, ranx"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"300"
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+ranxSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"----- ucur- ----- ----- -----"

				locationCriteria=		"-outerSystem, +planetary|+50"
				enemyExclusionRadius=	"60"
				/>

		<Encounters frequency="uncommon">
			<Lookup table="&tbRanxEncounters;"/>
		</Encounters>

		<!-- Properties -->

		<Properties>
			<Definition id="supplyList">
				(list
					{	itemType:&itAkan30CannonShell;		multiplier:3	}
					)
			</Definition>

			<DynamicData id="rpg.suppliesNeeded">
				(rpgCalcSuppliesNeeded gSource (obj@ gSource 'supplyList))
			</DynamicData>
		</Properties>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itLightOrthoSteel;"
				hitPoints=		"370"
				regen=			"4"
				/>
		
		<Devices>
			<Device deviceID="&itAkan30Cannon;"	posAngle="7"    posRadius="48" posZ="35" fireAngle="7"  fireArc="120"		missileDefense="true">
				<Items>
					<Item count="30d40"	item="&itAkan30CannonShell;" />
				</Items>
			</Device>
			<Device deviceID="&itAkan30Cannon;"	posAngle="97"   posRadius="48" posZ="35" fireAngle="97"  fireArc="120"		missileDefense="true"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="187"  posRadius="48" posZ="35" fireAngle="187"  fireArc="120"		missileDefense="true"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="277"  posRadius="48" posZ="35" fireAngle="277"  fireArc="120"		missileDefense="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Squadrons>
			<Squadron table="&tbRanxDefenders;"		count="challenge:standard"/>
			<Squadron table="&tbRanxResupply;"		count="property:rpg.suppliesNeeded"		reinforceLimit="3" />
		</Squadrons>

		<!-- Treasure -->

		<Items value="standard:level=7:x=1.2">
			<Table chance="50">
				<Lookup chance="40" count="1" table="&trConsumables8;"/>
				<Lookup chance="40" count="1" table="&trMinorItem8;"/>
				<Lookup chance="20" count="1" table="&trMajorItem8;"/>
			</Table>
		</Items>

		<!-- Image and Effects -->

		<Image imageID="&rsRanxOutpost;"			imageWidth="300" imageHeight="300"	viewportRatio="0.03875"/>

		<DockingPorts>
			<Port posAngle="65" posRadius="82" rotation="255" />
			<Port posAngle="85" posRadius="82" rotation="255"/>

			<Port posAngle="155" posRadius="82" rotation="345" />
			<Port posAngle="175" posRadius="82" rotation="345"/>

			<Port posAngle="245" posRadius="82" rotation="75" />
			<Port posAngle="265" posRadius="82" rotation="75"/>

			<Port posAngle="335" posRadius="82" rotation="165" />
			<Port posAngle="355" posRadius="82" rotation="165"/>
		</DockingPorts>

	</StationType>
<StationType UNID="&stRanxFortress;"
			name=				"Ranx fortress(es)"
			sovereign=			"&svRanxEmpire;"

			attributes=			"enemy, envEarth, envAvoidsAir, generic, human, majorStation, populated, ranx"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"599"
			explosionType=		"&vtThermoExplosion4;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+ranxSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"----- -rcr- ----- ----- -----"

				locationCriteria=		"-outerSystem, +planetary|+50"
				enemyExclusionRadius=	"100"
				/>

		<Encounters frequency="common">
			<Lookup table="&tbRanxEncounters;"/>
		</Encounters>

		<!-- Properties -->

		<Properties>
			<Definition id="supplyList">
				(list
					{	itemType:&itAkan30CannonShell;		multiplier:5	}
					{	itemType:&itKilotonCannonShell;		multiplier:1	}
					)
			</Definition>

			<DynamicData id="rpg.suppliesNeeded">
				(rpgCalcSuppliesNeeded gSource (obj@ gSource 'supplyList))
			</DynamicData>
		</Properties>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itOrthoSteel;"
				hitPoints=		"2400"
				regen=			"19"
				/>
		
		<Devices>
			<Device deviceID="&itAkan30Cannon;"	posAngle="7"    posRadius="114" posZ="60" fireAngle="7"  fireArc="120"		missileDefense="true">
				<Items>
					<Item count="50d40"		item="&itAkan30CannonShell;" />
					<Item count="72-120"	item="&itKilotonCannonShell;" />
				</Items>
			</Device>
			<Device deviceID="&itAkan30Cannon;"	posAngle="97"   posRadius="114" posZ="60" fireAngle="97"  fireArc="120"		missileDefense="true"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="187"  posRadius="114" posZ="60" fireAngle="187"  fireArc="120"		missileDefense="true"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="277"  posRadius="114" posZ="60" fireAngle="277"  fireArc="120"		missileDefense="true"/>

			<Device deviceID="&itAkan30Cannon;"	posAngle="52"    posRadius="114" posZ="60" fireAngle="52"  fireArc="120"		missileDefense="true"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="142"   posRadius="114" posZ="60" fireAngle="142"  fireArc="120"		missileDefense="true"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="232"   posRadius="114" posZ="60" fireAngle="232"  fireArc="120"		missileDefense="true"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="312"   posRadius="114" posZ="60" fireAngle="312"  fireArc="120"		missileDefense="true"/>

			<!-- Inner Guns -->

			<Device deviceID="&itAkan30Cannon;"	posAngle="7"    posRadius="114" posZ="60" fireAngle="187"  fireArc="120"	maxFireRange="6"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="97"   posRadius="114" posZ="60" fireAngle="277"  fireArc="120"	maxFireRange="6"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="187"  posRadius="114" posZ="60" fireAngle="7"  fireArc="120"	maxFireRange="6"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="277"  posRadius="114" posZ="60" fireAngle="97"  fireArc="120"	maxFireRange="6"/>

			<Device deviceID="&itAkan30Cannon;"	posAngle="52"    posRadius="114" posZ="60" fireAngle="232"  fireArc="120"	maxFireRange="6"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="142"   posRadius="114" posZ="60" fireAngle="312"  fireArc="120"	maxFireRange="6"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="232"   posRadius="114" posZ="60" fireAngle="52"  fireArc="120"	maxFireRange="6"/>
			<Device deviceID="&itAkan30Cannon;"	posAngle="312"   posRadius="114" posZ="60" fireAngle="142"  fireArc="120"	maxFireRange="6"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Squadrons>
			<Squadron table="&tbRanxDefenders;"			count="challenge:hard"/>
			<Squadron table="&tbRanxDreadnoughtPatrol;"	count="1"	reinforceInterval="60"	reinforceLimit="3" />
			<Squadron table="&tbRanxResupply;"			count="property:rpg.suppliesNeeded"		reinforceLimit="3" />
		</Squadrons>

		<!--
		<Ships>
			<Ship			count="1d6"	class="&scRanxGunship;"	orders="patrol" patrolDist="5"/>
			<Ship			count="1d6"	class="&scRanxGunship;"	orders="guard" />
			<Ship					count="1"	class="&scRanxDreadnought;"	orders="patrol" patrolDist="150">
				<Escorts>
					<Ship			count="1d4"	class="&scRanxGunship;"	orders="escort"/>
				</Escorts>
			</Ship>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Ship chance="75"  count="1d4"	class="&scRanxGunship;" orders="patrol" patrolDist="5"/>
				<Ship chance="25"  count="1"	class="&scRanxDreadnought;"	orders="patrol" patrolDist="25">
					<Escorts>
						<Ship			count="1d4"	class="&scRanxGunship;"	orders="escort"/>
					</Escorts>
				</Ship>
			</Table>
		</Reinforcements>
		-->

		<!-- Treasure -->

		<Items value="standard:level=8:x=2">
			<Table count="1-2">
				<Lookup chance="40" count="1" table="&trConsumables9;"/>
				<Lookup chance="40" count="1" table="&trMinorItem9;"/>
				<Lookup chance="20" count="1" table="&trMajorItem9;"/>
			</Table>
		</Items>

		<!-- Image and Effects -->

		<Image			imageID="&rsRanxFortress;" imageWidth="380" imageHeight="380" viewportRatio="0.0375"/>

		<DockingPorts>
			<Port posAngle="65" posRadius="150" rotation="255" />
			<Port posAngle="85" posRadius="150" rotation="255"/>

			<Port posAngle="155" posRadius="150" rotation="345" />
			<Port posAngle="175" posRadius="150" rotation="345"/>

			<Port posAngle="245" posRadius="150" rotation="75" />
			<Port posAngle="265" posRadius="150" rotation="75"/>

			<Port posAngle="335" posRadius="150" rotation="165" />
			<Port posAngle="355" posRadius="150" rotation="165"/>
		</DockingPorts>

	</StationType>
<!-- Rasiermesser.xml -->
<StationType UNID="&stArmsDealerRasiermesser;"
			name=				": Rasiermesser Arms &amp; Armor|Rasiermesser Arms &amp; Armor"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"4"
			multiHull=			"true"
			armorID=			"&itLightGusokuArmor;"
			hitPoints=			"160"
			regen=				"2"
			fireRateAdj=		"80"
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"corporate, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, generic, human, independent, populated, rasiermesser"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"*"
				levelFrequency=			"-rurv ----- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"50"
				/>

		<!-- Trade and Items -->

		<Items>
			<RandomItem count="1d12" 
					criteria=		"w L:1-7; +Rasiermesser; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"10"
					enhancement=	"=(intRasiermesserWeaponEnhancement gItem)"
					/>

			<RandomItem count="2d12" 
					criteria=		"a L:1-7; +Rasiermesser; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:u|c|cur"
					enhanced=		"10"
					enhancement=	"=(intRasiermesserArmorEnhancement)"
					/>
		</Items>

		<Trade currency="credit">
			<Sell	criteria="m +rasiermesser; -defective; -military; -illegal; -notForSale;" priceAdj="100" inventoryAdj="800" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>

			<RepairArmor	criteria="a L:1-7;" priceAdj="100"/>
			<ReplaceArmor	criteria="a +rasiermesser; L:1-7;" priceAdj="100"/>
			<InstallDevice	criteria="d +rasiermesser; L:1-7;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-7;" priceAdj="100"/>
			
			<ReplaceArmor	criteria="a L:1-7;" priceAdj="unavailable"	messageID="descNoInstall"/>
			<InstallDevice	criteria="d L:1-7;" priceAdj="unavailable"	messageID="descNoInstall"/>
		</Trade>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itAkan30Cannon;"	omnidirectional="true">
				<Items>
					<Item count="900" item="&itAkan30CannonShell;"/>
				</Items>
			</Device>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships standingCount="3-4">
			<Table>
				<Lookup chance="75" table="&tbCorpRasiermesserDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsCorporateArmsDealer;" imageWidth="148" imageHeight="226" viewportRatio="0.03125"/>

		<DockingPorts
				portCount=		"8"
				portAngle=		"-15"
				portRadius=		"100"
				/>
		
		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionOperations">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +rasiermesserArmsDealer; =" (sysGetLevel) ";")
									noMissionTextID: 'descNoMissions
									maxPerStation: 1
									})
							</Action>

							<Action id="actionDockServices" default="1">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionBuyItems">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>

					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->

		<Language>
			<Text id="descWelcome">

				You are docked at a Rasiermesser arms dealer.

			</Text>
			<Text id="descNoMissions">

				The operations level is filled with screens. A couple of 
				controllers sit in front of them looking bored. One of them 
				turns to you:

				"Nothing going on today, fortunately!"

			</Text>

			<Text id="descNoInstall">

				We only install Rasiermesser items. We cannot install %itemName%
				on your ship.

			</Text>
			<Text id="dockServices:installAbility">

				We install Rasiermesser items up to tech level %maxLevel%.

			</Text>
			
			<Text id="core.mapDesc">

				Repairs armor up to level 7 &mdash;
				Installs Rasiermesser armor up to level 7 &mdash;
				Installs Rasiermesser devices up to level 7 &mdash;
				Sells Rasiermesser products

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stRasiermesserFactory;"
			name=				"Rasiermesser manufacturing plant"
			sovereign=			"&svCorporate;"
			inherit=			"&baCorporateStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itLightGusokuArmor;"
			hitPoints=			"1470"
			regen=              "15"
			fireRateAdj=		"80"
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"corporate, corporateCustoms, envAir, envEarth, envFire, envWater, friendly, generic, human, independent, majorStation, populated, rasiermesser"
			>

		<Properties>
			<Global id="DvalinSystem">Nil</Global>
			<Global id="showDvalinAttribute">Nil</Global>

			<Data id="Dvalin">Nil</Data>
			<Data id="DvalinArmorGiven">Nil</Data>
			<Data id="DvalinWeaponGiven">Nil</Data>
			<Data id="giftXP">0</Data>
			<Data id="xp">0</Data>

			<Data id="rpg.storageID"></Data>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+corporateSpace;"
				systemAffinity=			"+corporateCore;"
				levelFrequency=			"----r uur-- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"75"

				unique=					"inSystem"
				/>

		<!-- Trade and Items -->

		<Items>
			<RandomItem count="1d12"
					criteria=		"w L:1-10; +Rasiermesser; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"20"
					enhancement=	"=(intRasiermesserWeaponEnhancement gItem)"
					/>

			<RandomItem count="1d12"
					criteria=		"a L:1-10; +Rasiermesser; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:r|c|cur"
					enhanced=		"20"
					enhancement=	"=(intRasiermesserArmorEnhancement)"
					/>

			<RandomItem count="1d12"
					criteria=		"w L:1-10; +Rasiermesser; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:v|u|cur"
					enhanced=		"10"
					enhancement=	"=(intRasiermesserWeaponEnhancement gItem)"
					/>

			<RandomItem count="1d12"
					criteria=		"a L:1-10; +Rasiermesser; -defective; -NotForSale;"
					levelFrequency=	"systemLevel:v|u|cur"
					enhanced=		"10"
					enhancement=	"=(intRasiermesserArmorEnhancement)"
					/>

			<Item chance="95" count="4"			item="&itV300PoweredArmor;" />
		</Items>

		<Trade currency="credit">
			<Sell	criteria="m +rasiermesser; -defective; -illegal; -notForSale;" priceAdj="100" inventoryAdj="800" levelFrequency="systemLevel:ruc|c|cur"/>
			<Sell	criteria="*NU -defective; -Illegal; -ID; -NotForSale;"	priceAdj="100"/>

			<Refuel			criteria="f +BasicFuel; L:1-9;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-9;" priceAdj="100"/>
			<ReplaceArmor	criteria="a +rasiermesser;" priceAdj="100"/>
			<InstallDevice	criteria="d +rasiermesser;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-10;" priceAdj="100"/>
			
			<ReplaceArmor	criteria="a L:1-10;" priceAdj="unavailable"	messageID="descNoInstall"/>
			<InstallDevice	criteria="d L:1-10;" priceAdj="unavailable"	messageID="descNoInstall"/>

			<ConsumeTrade	criteria="{core.antimatterFuel}"	impact="3"/>
			<ConsumeTrade	criteria="{human.res}"		impact="3"/>
			<ConsumeTrade	criteria="{core.ore}"			impact="4"/>
		</Trade>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itAkan30Cannon;"	omnidirectional="true">
				<Items>
					<Item count="900" item="&itAkan30CannonShell;"/>
				</Items>
			</Device>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships standingCount="3-4">
			<Table>
				<Lookup chance="75" table="&tbCorpRasiermesserDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Ships>

		<!-- Image and Effects -->

		<Image imageID="&rsRasiermesserFactory;" imageWidth="320" imageHeight="580" viewportRatio="0.0225"/>
		<HeroImage imageID="&rsRasiermesserFactoryHero;" imageWidth="850" imageHeight="648"/>

		<DockingPorts
				portAngle=		"8"
				portCount=		"8"
				portRadius=		"150"
				>
		</DockingPorts>

		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionResearchLab" default="1">
								(block (storageObj)
									(switch
										;	If we've previously left some rewards here, get them.

										(setq storageObj (rpgGetStorage gSource))
											(scrShowScreen gScreen &dsRPGLoot; {
												sourceObj: storageObj
												})

										;	If this is Dvalin's lab, then go there

										(objGetProperty gSource 'Dvalin )
											(scrShowScreen gScreen 'ResearchLab)

										;	Otherwise, nothing exciting.

										(scrShowScreen gScreen 'SecondaryLab)
										)
									)
							</Action>

							<Action id="actionBuyItems">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionRepairItems">
								(scrShowScreen gScreen &dsRPGRepairItem; {
									criteria: "*~aD +Rasiermesser;"
									priceAdj: 65
									})
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>

			<ResearchLab>
				<Panes>
					<Default>
						<OnPaneInit>
							(block (
								(xp (or (objGetProperty gSource 'xp) 0))
								)
								(switch
									(ls xp 50)
										(scrSetDescTranslate gScreen 'DvalinIntro.01)

									(ls xp 150)
										(scrSetDescTranslate gScreen 'DvalinIntro.02)

									(ls xp 500)
										(scrSetDescTranslate gScreen 'DvalinIntro.03)

									(not (objGetProperty gSource 'DvalinWeaponGiven))
										(scrSetDescTranslate gScreen 'DvalinIntro.04)

									(block ()
										(scrSetDescTranslate gScreen 'DvalinIntro.05)
										(scrEnableAction gScreen 'actionOfferItem Nil)
										)
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionOfferItem" default="1">
								(block ()
									(scrShowScreen gScreen "OfferItem")

									;	After offering, we know what kinds of items
									;	Dvalin is looking for

									(typSetProperty &stRasiermesserFactory; 'showDvalinAttribute True)
									)
							</Action>

							<Action id="actionLeave" cancel="1">
								(scrShowScreen gScreen 'Main)
							</Action>
						</Actions>
					</Default>
				</Panes>
			</ResearchLab>

			<OfferItem
				type=				"itemPicker"
				>

				<ListOptions
					dataFrom=	"player"
					list=		"aswU +notForSale; -illegal; -rasiermesser; F:rv-;"
					/>

				<Panes>
					<Default>
						<OnPaneInit>
							(block (
								(theItem (scrGetItem gScreen))
								)
								(scrSetDesc gScreen (cat
									(scrTranslate gScreen 'DvalinOfferIntro)
									"\n\n"
									(if theItem
										(scrTranslate gScreen 'DvalinOfferItem { itemName:(itmGetName theItem 0) })
										(scrTranslate gScreen 'DvalinNothingToOffer)
										)
									))

								(scrEnableAction gScreen 'actionOfferItem theItem)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionOfferItem" default="1">
								(block (
									(theItem (scrGetItem gScreen))
									(itemLevel (itmGetLevel theItem))

									;	Armor is worth half as much
									(itemScoreAdj (if (= (itmGetProperty theItem 'category) 'armor) 0.5 1.0))

									;	Higher level items are exponentially more valuable
									(itemScore (round (* itemScoreAdj (pow 1.5 itemLevel))))

									(haveCount 0)

									haveDamaged haveUndamaged gain result
									)

									; See if we've already got the item that the player donated

									(enum (objGetItems gSource "aswU +NotForSale; F:rv-;") itemAtLab
										(if (eq (itmGetType itemAtLab) (itmGetType theItem))
											(block Nil
												(setq haveCount (add haveCount (itmGetCount theItem)))
												(if (itmIsDamaged itemAtLab)
													(setq haveDamaged True)
													(setq haveUndamaged True)
													)
												)
											)
										)

									; Figure out how valuable this item is to Dvalin

									(switch
										(and (not haveDamaged) (not haveUndamaged))
											(if (itmIsDamaged theItem)
												(block Nil
													(setq gain (multiply 5 itemScore))
													(setq result (scrTranslate gScreen 'DvalinImpressed {
														itemName: (itmGetName theItem 'article)
														}))
													)
												(block Nil
													(setq gain (multiply 10 itemScore))
													(setq result (scrTranslate gScreen 'DvalinEcstatic {
														itemName: (itmGetName theItem 'article)
														}))
													)
												)

										(and (not haveUndamaged) (not (itmIsDamaged theItem)))
											(block Nil
												(setq gain (multiply 7 itemScore))
												(setq result (scrTranslate gScreen 'DvalinVeryPleased {
													itemName: (itmGetName theItem 0)
													}))
												)

										(gr haveCount 5)
											(block Nil
												(setq gain 0)
												(setq result (scrTranslate gScreen 'DvalinUninterested {
													itemName: (itmGetName theItem 0)
													}))
												)

										(or (not haveDamaged) (not (itmIsDamaged theItem)))
											(block Nil
												(setq gain (multiply 3 itemScore))
												(setq result (scrTranslate gScreen 'DvalinPleased {
													itemName: (itmGetName theItem 0)
													}))
												)

										(block Nil
											(setq gain (multiply 2 itemScore))
											(setq result (scrTranslate gScreen 'DvalinNotVeryInterested {
												itemName: (itmGetName theItem 0)
												}))
											)
										)

									; Increase XP
									(objIncProperty gSource 'xp gain)

									; Transfer the item
									(objRemoveItem gPlayerShip theItem 1)
									(objAddItem gSource theItem 1)

									; Done
									(scrShowScreen gScreen 'Reward {
										result: result
										noGift: (= gain 0)
										})
									)
							</Action>

							<Action id="actionCancel" cancel="1">
								(scrShowScreen gScreen 'ResearchLab)
							</Action>
						</Actions>
					</Default>
				</Panes>
			</OfferItem>

			<Reward>
				<Panes>
					<Default>
						<OnPaneInit>
							(scrSetDesc gScreen (@ gData 'result))
						</OnPaneInit>

						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(block (
									(xp (or (objGetProperty gSource 'xp) 0))
									(noGift (@ gData 'noGift))

									;	We double xp required after each gift
									(minXP (max (multiply (objGetProperty gSource 'giftXP) 2) 100))

									(roll (random 1 100))

									(giftItem Nil)
									)
									; Figure out what kind of gift to give

									(switch
										(or noGift (ls xp minXP))
											Nil

										(geq xp 2400)
											Nil

										(geq xp 800)
											(if (not (objGetProperty gSource 'DvalinWeaponGiven))
												(block Nil
													(setq giftItem (itmCreate &itDvalinIon9Cannon; 1))
													(objSetProperty gSource 'DvalinWeaponGiven True)

													;	Once the Ion9 has been given, we no longer care 
													;	about Dvalin items.

													(typSetProperty &stRasiermesserFactory; 'showDvalinAttribute Nil)
													)
												)

										(geq xp 400)
											(if (not (objGetProperty gSource 'DvalinArmorGiven))
												(block Nil
													(setq giftItem (itmCreate &itDvalinArmor; (objGetProperty gPlayerShip 'armorCount)))
													(objSetProperty gSource 'DvalinArmorGiven True)
													)
												)

										(geq xp 200)
											(switch
												(leq roll 60)
													(setq giftItem (itmSetEnhanced (itmCreate &itAkan600Turret; 1) {
														enhancement: "+hpBonus:50"
														type: &itBlastUpgrade;
														}))

												(leq roll 90)
													(setq giftItem (itmSetEnhanced (itmCreate &itAkan600Turret; 1) {
														enhancement: "+hpBonus:70"
														type: &itBlastUpgrade;
														}))

												(setq giftItem (itmSetEnhanced (itmCreate &itAkan600Turret; 1) {
													enhancement: "+speed:80"
													type: &itWeaponSpeedROM;
													}))
												)

										(geq xp 100)
											(switch
												(leq roll 60)
													(setq giftItem (itmSetEnhanced (itmCreate &itAdvancedCeralloyArmor; (objGetProperty gPlayerShip 'armorCount)) {
														enhancement: "+hpBonus:100"
														type: &itPlasteelNanos;
														}))

												(leq roll 90)
													(setq giftItem (itmSetEnhanced (itmCreate &itAdvancedCeralloyArmor; (objGetProperty gPlayerShip 'armorCount)) {
														enhancement: "+reflect:ion"
														type: &itIonReflectCoating;
														}))

												(setq giftItem (itmSetEnhanced (itmCreate &itAdvancedCeralloyArmor; (objGetProperty gPlayerShip 'armorCount)) {
													enhancement: "+regen"
													type: &itRegeneratingNanos;
													}))
												)
										)

									; Give the gift
									(if giftItem
										(block Nil
											(rpgStoreItem gSource giftItem)
											(objSetProperty gSource "giftXP" minXP)
											(scrSetData gScreen 'giftItem giftItem)
											(scrShowPane gScreen 'Gift)
											)
										(scrShowScreen gScreen 'ResearchLab)
										)
									)
							</Action>
						</Actions>
					</Default>

					<Gift>
						<OnPaneInit>
							(block (
								(giftItem (scrGetData gScreen 'giftItem))
								)
								(scrSetDescTranslate gScreen 
									(switch
										(gr (itmGetCount giftItem) 1)
											'DvalinGiftMultiple

										(= (itmGetType giftItem) &itDvalinIon9Cannon;)
											'DvalinGiftIon9

										'DvalinGiftSingle
										)
									{
										itemName: (itmGetName giftItem '(demonstrative noModifiers))
										}
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(block ()
									(scrShowScreen gScreen 'Main)

									(scrShowScreen gScreen &dsRPGLoot; {
										sourceObj: (rpgGetStorage gSource)
										})
									)
							</Action>
						</Actions>
					</Gift>
				</Panes>
			</Reward>

			<SecondaryLab>
				<Panes>
					<Default descID="descSecondaryLab">
						<Actions>
							<Action id="actionLeave" default="1" cancel="1">
								(scrShowScreen gScreen "Main")
							</Action>
						</Actions>
					</Default>
				</Panes>
			</SecondaryLab>
		</DockScreens>

		<!-- Events and Data -->

		<AttributeDesc>
			<!-- Define attribute for items that Dvalin is interested in. -->
		
			<ItemAttribute label="Dvalin valuable"		criteria="asw +notForSale; F:rv-;">
				<OnShow>(typGetProperty gType 'showDvalinAttribute)</OnShow>
			</ItemAttribute>
		</AttributeDesc>

		<Events>
			<OnCreate>
				(if (not (objGetProperty gSource 'DvalinSystem))
					(block Nil
						(objSetProperty gSource 'DvalinSystem (sysGetNode))
						(objSetProperty gSource 'Dvalin True)
						)
					)
			</OnCreate>
		</Events>

		<Language>
			<Text id="actionOfferItem">[O]ffer Item</Text>
			<Text id="actionRepairItems">[R]epair Items</Text>
			<Text id="actionResearchLab">Research [L]ab</Text>

			<Text id="descWelcome">

				Welcome to Rasiermesser! We are the leading manufacturer of 
				innovative weapon systems in Human Space.

			</Text>
			<Text id="descNoInstall">

				We only install Rasiermesser items. We cannot install %itemName%
				on your ship.

			</Text>
			<Text id="descSecondaryLab">

				The lab is filled with racks of equipment and testing structures. A small 
				number of researchers are testing the quality and reliability of various items.

			</Text>
			<Text id="dockServices:installAbility">

				We install Rasiermesser items up to tech level %maxLevel%.

			</Text>
			<Text id="DvalinIntro.01">

				The lab is filled with racks of equipment; researchers are 
				testing various new weapons here.

				Sitting by the corner, a small stocky man mumbles to himself as 
				he pores through dozens of screens of information. His name is 
				Dvalin, the chief scientist for the Rasiermesser Corporation.

			</Text>
			<Text id="DvalinIntro.02">

				The center of the lab has a massive testing area; a segment of 
				armor on a static frame is being subjected to intense energies.

				Dvalin walks over to you and points to the test: "Dat is my new
				nano-sintered armor. It will be twice as strong as hexphase, ya?
				It will be done soon!"

			</Text>
			<Text id="DvalinIntro.03">

				One side of the lab has a static frame holding a complex weapon;
				scientists and engineers work on it under Dvalin's direction.

				Dvalin walks over to you: "It is my new project, ya? An ion 
				weapon as powerful as a howitzer!"

			</Text>
			<Text id="DvalinIntro.04">

				The center of the lab has a massive testing area; a 
				dangerous-looking weapon attached to a static frame burns a hole
				in a sample of blast plate.

				Dvalin walks over to you and points at the test: "Vat do you 
				think? Impressive, ya? Much better than Akan!"

			</Text>
			<Text id="DvalinIntro.05">

				The center of the lab has a massive testing area; an Ion9 cannon
				is attached to a static frame.

				Dvalin walks over to you: "How do you like you Ion9? Impressive,
				ya? We're trying to adapt it for mass production."
			
			</Text>
			<Text id="DvalinOfferIntro">

				Dvalin is looking for rare and powerful items to reverse-engineer
				and learn from.
			
			</Text>
			<Text id="DvalinOfferItem">

				The %itemName% could be useful in his research.
			
			</Text>
			<Text id="DvalinNothingToOffer">

				Unfortunately, Dvalin is not interested in any of the items in 
				your cargo hold.
			
			</Text>
			<Text id="DvalinEcstatic">

				Dvalin is ecstatic: "Gods! I have not seen %itemName% before! It
				is in excellent condition, ya?"
			
			</Text>
			<Text id="DvalinImpressed">

				Dvalin is impressed: "Gods! %ItemName%! A pity it is not intact,
				ya?"
				
			</Text>
			<Text id="DvalinVeryPleased">

				Dvalin is very pleased: "At last! An undamaged %itemName%! It is
				in excellent condition, ya?"
			
			</Text>
			<Text id="DvalinPleased">

				Dvalin is pleased: "Good work! This %itemName% will be analyzed 
				with the others."
			
			</Text>
			<Text id="DvalinNotVeryInterested">

				Dvalin is somewhat interested: "Another one, ya? Put it over 
				there; we will analyze it."

			</Text>
			<Text id="DvalinUninterested">

				Dvalin is uninterested: "Another one, ya? We will use it for 
				ballast, perhaps."
			
			</Text>
			<Text id="DvalinGiftSingle">

				Dvalin thanks you for helping his research:

				"Danke for your aid! Our research advances because of you. 
				Please, accept %itemName%. It has special enhancements, ya?"

			</Text>
			<Text id="DvalinGiftIon9">

				Dvalin thanks you for helping his research:

				"Danke for your aid! Because of your help I have created 
				the Ion9 cannon.
				
				"Take it on your journey. It is my greatest accomplishment."

			</Text>
			<Text id="DvalinGiftMultiple">

				Dvalin thanks you for helping his research:

				"Danke for your aid! Our research advances because of you. 
				Please, accept %itemName%. I made them specially for you!"

			</Text>
			
			<Text id="core.mapDescCustom">
				(if (objGetProperty gSource 'Dvalin)
					(cat (typTranslate gType 'mapDescDvalin) " "
						(typTranslate gType 'core.mapDesc)
						)
					(typTranslate gType 'core.mapDesc)
					)
			</Text>
			<Text id="mapDescDvalin">

				Dvalin's Research Lab &mdash;

			</Text>
			<Text id="core.mapDesc">

				Refuels up to level 9 &mdash; 
				Repairs armor up to level 9 &mdash;
				Installs Rasiermesser armor up to level 8 &mdash;
				Installs Rasiermesser devices up to level 9 &mdash;
				Sells Rasiermesser products

			</Text>
		</Language>

	</StationType>
<!-- RasiermesserMission01.xml -->
<!-- RejuvTank.xml -->
<!-- ResidentialsMission01.xml -->
<!-- ResidentialsMission02.xml -->
<!-- ResidentialsMission03.xml -->
<!-- Ringers.xml -->
<StationType UNID="&stRingersCollective;"
			name=				"Ringers collective"
			sovereign=			"&svRingers;"
			inherit=			"&baRingersStation;"
				 
			attributes=			"envEarth, envAvoidsAir, friendly, generic, independent, majorStation, neoHuman, populated, ringers"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"329"
			armorID=			"&itDiamondLatticeArmor;"
			hitPoints=			"850"
			multiHull=			"true"
			regen=              "15"
			fireRateAdj=		"10"

			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+ringerSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"----- rcurv ----- ----- -----"

				locationCriteria=		"+outerSystem, +ringedGiant|+100"
				enemyExclusionRadius=	"100"
				/>

		<!-- Trade and Items -->

		<Trade currency="rin"	max="300000">
			<Sell	criteria="*NU +ringerValuable; -defective;"		priceAdj="250"/>
			<Sell	criteria="*NU -defective; -ID;"					priceAdj="100"/>
			<Buy	criteria="*NU +ringerValuable;"		priceAdj="200"/>
			<Buy	criteria="*NU +res; &gt;=4;"		priceAdj="90"/>

			<ConsumeTrade	criteria="{human.res}"		impact="2"/>
			<ConsumeTrade	criteria="{core.ore}"			impact="5"/>
		</Trade>

		<Items>
			<RandomItem count="1d12" 
					criteria=		"* +Meds; -defective; -Illegal; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ruc|u|r"
					/>

			<RandomItem count="1d4" 
					criteria=		"w -defective; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|ur"
					/>

			<RandomItem count="1d4" 
					criteria=		"d~w -defective; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|ur"
					/>

			<RandomItem count="1d8" 
					criteria=		"a -defective; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|u|cur"
					/>

			<RandomItem count="1d4" 
					criteria=		"u -defective; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|ur"
					/>

			<RandomItem count="2d12" 
					criteria=		"f -defective; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|ur"
					/>

			<Item				count="4d12"	item="&itEuropanIceMoss;" />
			<Item				count="1d12"	item="&itEuropanIceVodka;" />

			<Table>
				<Null chance="57"/>
				<RandomItem chance="37" count="1"	criteria="u +HaloGem; -NotStandard;"	levelFrequency="----- -ccur"/>
				<RandomItem chance="6"	count="2"	criteria="u +HaloGem; -NotStandard;"	levelFrequency="----- -ccur"/>
			</Table>

			<Item chance="50"	count="1"		item="&itPlasmaTorch;" />
		</Items>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itPositronLancer;" omnidirectional="true" posAngle="0" posRadius="40"/>
			<Device deviceID="&itPositronLancer;" omnidirectional="true" posAngle="120" posRadius="40"/>
			<Device deviceID="&itPositronLancer;" omnidirectional="true" posAngle="240" posRadius="40"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships>
			<Lookup count="1" table="&tbCommDefenders;"/>
			<Lookup count="1d3" table="&tbCommPrivateCrafts;"/>
			<Ship chance="50"	count="1" class="&scFerianMiner;" orders="gateOnThreat"/>
		</Ships>

		<Reinforcements minShips="3">
			<Table>
				<Lookup chance="20" table="&tbCommDefenders;"/>
				<Lookup chance="60" table="&tbCommPrivateCrafts;"/>
				<Ship   chance="20"	class="&scFerianMiner;" orders="gateOnThreat"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->

		<Image			imageID="&rsRingersCollective;" imageWidth="200" imageHeight="300" viewportRatio="0.04125"/>

		<DockingPorts>
			<Port posAngle="16"		posRadius="113" posZ="46"/>
			<Port posAngle="45"		posRadius="106" posZ="110"/>
			<Port posAngle="122"	posRadius="105" posZ="30"/>
			<Port posAngle="-171"	posRadius="121" posZ="100"/>

			<Port posAngle="-149"	posRadius="118" posZ="-110"/>
			<Port posAngle="-112"	posRadius="98"  posZ="-60"/>
			<Port posAngle="-65"	posRadius="90"  posZ="-30"/>
			<Port posAngle="-22"	posRadius="104" posZ="-46"/>
		</DockingPorts>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionCommoditiesExchange" default="1">
								(switch
									(= (objGetBalance gPlayerShip 'rin) 0)
										(scrShowPane gScreen 'ExchangeIntro)

									(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<ExchangeIntro descID="descExchangeIntro">
						<Actions>
							<Action id="actionContinue" cancel="1" default="1">
								(block Nil
									(scrShowPane gScreen 'Default)
									(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
									)
							</Action>
						</Actions>
					</ExchangeIntro>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="descWelcome">

				You are docked at a Ringers Collective. Ringer neohumans float
				through the vast volume of the station, perfectly adapted to
				zero-gravity and space.

			</Text>
			<Text id="core.commoditiesExchangeDesc">

				The central structure of the Ringers Collective is a large marketplace
				containing sophisticated and rare devices from all over Human Space.
				Commonwealth credits are not accepted here.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stRingerShipyard;"
			name=				"Ringer shipyard"
			sovereign=			"&svRingers;"
			inherit=			"&baRingersStation;"
				 
			attributes=			"envEarth, envAvoidsAir, friendly, generic, independent, majorStation, neoHuman, populated, ringers"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"564"
			armorID=			"&itDiamondLatticeArmor;"
			hitPoints=			"2450"
			multiHull=			"true"
			regen=              "25"
			fireRateAdj=		"10"

			explosionType=		"&vtThermoExplosion4;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+ringerSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"----- -ruur ----- ----- -----"

				locationCriteria=		"+outerSystem, +ringedGiant|+100"
				enemyExclusionRadius=	"150"
				/>

		<!-- Trade and items -->

		<Trade currency="rin">
			<Sell	criteria="*NU +ringerValuable; -defective;"		priceAdj="250"/>
			<Sell	criteria="*NU -defective; -ID;"					priceAdj="100"/>
			<Buy	criteria="*NU +ringerValuable;"		priceAdj="200"/>
			<Buy	criteria="*NU +res; &gt;=4;"		priceAdj="90"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-9;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-12;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-12;" priceAdj="100"/>
			<InstallDevice	criteria="w L:1-10" priceAdj="200"/>
			<InstallDevice	criteria="d~w L:1-10;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-10;" priceAdj="100"/>

			<BalanceTrade	criteria="{human.res}"		impact="4"/>
			<BalanceTrade	criteria="{core.ore}"			impact="10"/>
		</Trade>

		<Items>
			<RandomItem count="1d4" criteria="r -defective; -illegal; -notForSale; -notStandard; L:7-9;"		levelFrequency="systemLevel:ru|c|curv"/>
			
			<RandomItem count="1d4" 
					criteria=		"w L:1-10; -defective; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|ur"
					/>

			<RandomItem count="1d8" 
					criteria=		"d~w L:1-10; -defective; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ruc|u|r"
					/>

			<RandomItem count="1d8" 
					criteria=		"a L:1-10; -defective; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:r|u|cur"
					/>

			<RandomItem count="4d12" 
					criteria=		"f -defective; -NotStandard; -NotForSale;"
					levelFrequency=	"systemLevel:ru|c|ur"
					/>

			<Item				count="1"		item="&itPlasmaTorch;" />
		</Items>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itPositronLancer;" omnidirectional="true" posAngle="0" posRadius="40"/>
			<Device deviceID="&itPositronLancer;" omnidirectional="true" posAngle="120" posRadius="40"/>
			<Device deviceID="&itPositronLancer;" omnidirectional="true" posAngle="240" posRadius="40"/>
		</Devices>

		<!-- Ships and Defense -->

		<Ships>
			<Lookup count="1d2" table="&tbCommDefenders;"/>
			<Lookup count="1d3" table="&tbCommPrivateCrafts;"/>
			<Ship chance="50"	count="1" class="&scFerianMiner;" orders="gateOnThreat"/>
		</Ships>

		<Reinforcements minShips="3">
			<Table>
				<Lookup chance="20" table="&tbCommDefenders;"/>
				<Lookup chance="60" table="&tbCommPrivateCrafts;"/>
				<Ship   chance="20"	class="&scFerianMiner;" orders="gateOnThreat"/>
			</Table>
		</Reinforcements>

		<!-- Image and Effects -->

		<Image			imageID="&rsRingersShipyard;" imageWidth="380" imageHeight="380" viewportRatio="0.0365"/>

		<DockingPorts
				portCount=		"9"
				portRadius=		"212"
				/>

		<!-- Dock Screens -->

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionCommoditiesExchange" default="1">
								(switch
									(= (objGetBalance gPlayerShip 'rin) 0)
										(scrShowPane gScreen 'ExchangeIntro)

									(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
									)
							</Action>

							<Action id="actionDockServices">
								(switch
									(= (objGetBalance gPlayerShip 'rin) 0)
										(scrShowPane gScreen 'DockServicesGreeter)

									(rpgDockServices gPlayerShip)
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>

					<ExchangeIntro descID="descExchangeIntro">
						<Actions>
							<Action id="actionContinue" cancel="1" default="1">
								(block Nil
									(scrShowPane gScreen 'Default)
									(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
									)
							</Action>
						</Actions>
					</ExchangeIntro>

					<DockServicesGreeter descID="descDockServicesGreeter">
						<Actions>
							<Action id="actionContinue" cancel="1" default="1">
								(block Nil
									(scrShowPane gScreen 'Default)
									
									(rpgDockServices gPlayerShip)
									)
							</Action>
						</Actions>
					</DockServicesGreeter>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="descWelcome">

				You are docked at a Ringer Shipyard. Ringer neohumans float
				through the vast volume of the station, perfectly adapted to
				zero-gravity and space.

			</Text>
			<Text id="descDockServicesGreeter">

				As you enter the shipyard, a greeter scans you and says,

				"Earthican, welcome. Your account balance is 0 rin. Collective
				does not seek Commonwealth money."

			</Text>
			<Text id="core.commoditiesExchangeDesc">

				The central structure of the Ringers Shipyard is a large marketplace
				containing sophisticated and rare devices from all over Human Space.
				Commonwealth credits are not accepted here.

			</Text>
		</Language>
	</StationType>
<!-- Rocky.xml -->
<StationType UNID="&stRockyAsteroidSizeA;"
		name=				"rocky asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, rocky"
		inherit=			"&baRockyAsteroid;"

		scale=				"world"
		size=				"4"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsRockyAsteroidSizeA;"/>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stRockyOuterAsteroidSizeA;"
		name=				"rocky outer asteroid"
		attributes=			"asteroid, generic, outer, rocky"
		inherit=			"&baRockyAsteroid;"

		scale=				"world"
		size=				"4"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="768" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="800" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="832" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="864" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="896" imageWidth="32" imageHeight="32"/>

			<Image			imageID="&rsWorlds1;" imageX="224" imageY="928" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="960" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsWorlds1;" imageX="224" imageY="992" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="95"/>
				<Lookup chance="5" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stRockyAsteroidSizeB;"
		name=				"rocky asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, rocky"
		inherit=			"&baRockyAsteroid;"

		scale=				"world"
		size=				"65"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsRockyAsteroidSizeB;"/>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stRockyOuterAsteroidSizeB;"
		name=				"rocky outer asteroid"
		attributes=			"asteroid, generic, outer, rocky"
		inherit=			"&baRockyAsteroid;"

		scale=				"world"
		size=				"65"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="0"   imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="64"  imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="128" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="192" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="256" imageWidth="64" imageHeight="64"/>

			<Image			imageID="&rsWorlds1;" imageX="192" imageY="320" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="384" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsWorlds1;" imageX="192" imageY="448" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="95"/>
				<Lookup chance="5" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stRockyAsteroidSizeC;"
		name=				"rocky asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, rocky"
		inherit=			"&baRockyAsteroid;"

		scale=				"world"
		size=				"250"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsRockyAsteroidSizeC;"/>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stRockyOuterAsteroidSizeC;"
		name=				"rocky outer asteroid"
		attributes=			"asteroid, generic, outer, rocky"
		inherit=			"&baRockyAsteroid;"

		scale=				"world"
		size=				"250"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsRockyAsteroids;" imageX="90"  imageY="0"   imageWidth="90" imageHeight="90"/>
			<Image	imageID="&rsRockyAsteroids;" imageX="90"  imageY="90"  imageWidth="90" imageHeight="90"/>
			<Image	imageID="&rsRockyAsteroids;" imageX="90"  imageY="180" imageWidth="90" imageHeight="90"/>
			<Image	imageID="&rsRockyAsteroids;" imageX="90"  imageY="270" imageWidth="90" imageHeight="90"/>
			<Image	imageID="&rsRockyAsteroids;" imageX="90"  imageY="360" imageWidth="90" imageHeight="90"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="95"/>
				<Lookup chance="5" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stRockyAsteroidSizeD;"
		name=				"rocky asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, rocky"
		inherit=			"&baRockyAsteroid;"

		scale=				"world"
		size=				"625"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsRockyAsteroidSizeD;"/>

		<Items>
			<Table>
				<Null chance="90"/>
				<Lookup chance="10" count="1d10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stRockyOuterAsteroidSizeD;"
		name=				"rocky outer asteroid"
		attributes=			"asteroid, generic, outer, rocky"
		inherit=			"&baRockyAsteroid;"

		scale=				"world"
		size=				"625"
		anonymous=			"true"

		ejectaType=			"&vtIceAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsRockyAsteroids;" imageX="290" imageY="0"   imageWidth="110" imageHeight="110"/>
			<Image	imageID="&rsRockyAsteroids;" imageX="290" imageY="110" imageWidth="110" imageHeight="110"/>
			<Image	imageID="&rsRockyAsteroids;" imageX="290" imageY="220" imageWidth="110" imageHeight="110"/>
			<Image	imageID="&rsRockyAsteroids;" imageX="290" imageY="330" imageWidth="110" imageHeight="110"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="95"/>
				<Lookup chance="5" count="1d10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stRockyPlanetoidSizeE;"
		name=				"rocky planetoid"
		attributes=			"generic, inner, lifeZone, outer, planetoid, rocky"

		scale=				"world"
		size=				"1150"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsRockyPlanetoidSizeE;"/>
	</StationType>
<StationType UNID="&stRockyPlanetoidSizeF;"
		name=				"rocky planetoid"
		attributes=			"generic, inner, lifeZone, outer, planetoid, rocky"

		scale=				"world"
		size=				"2050"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsRockyPlanetoidSizeF;"/>
	</StationType>
<StationType UNID="&stRockyPlanetoidSizeG;"
		name=				"rocky planetoid"
		attributes=			"generic, inner, lifeZone, outer, planetoid, rocky"

		scale=				"world"
		size=				"4000"
		anonymous=			"true"

		ejectaType=			"&vtStoneAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsRockyPlanetoidSizeG;"/>
	</StationType>
<!-- RogueFleet.xml -->
<StationType UNID="&stRogueFleetCache;"
			name=				"Rogue Fleet cache"
			sovereign=			"&svRogueFleet;"

			attributes=			"enemy, envAir, envAvoidsFire, generic, human, populated, rogue, rogueFleet"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"353"
			fireRateAdj=		"20"
			explosionType=		"&vtThermoExplosion1;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+rogueFleetSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"----- vcu-- ----- ----- -----"

				locationCriteria=		"+asteroids"
				enemyExclusionRadius=	"50"
				/>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itP120HexphaseArmor;"
				hitPoints=		"370"
				regen=			"2"
				/>
		
		<Devices>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true" posAngle="0" posRadius="0" posZ="20"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships>
			<Ship		count="1d3"		class="&scCenturionRogue;" orders="patrol" patrolDist="20"/>
			<Ship		count="1d3"		class="&scCenturionRogue;" orders="guard"/>
		</Ships>

		<!-- Treasure -->

		<Items>
			<Item count="2d6"	  item="&itPteracniumFuelRod;"/>
			<Table>
				<Item	chance="25"	count="2d6" item="&itPteracniumFuelRod;"/>
				<Item	chance="30"	count="4d8" item="&itS3Missile;"/>
				<Item	chance="15"	count="2d8" item="&itP120HexphaseArmor;"/>
				<Item	chance="10"	count="1" item="&itTeV9Blaster;"/>
				<Lookup chance="10" count="1" table="&trConsumables8;"/>
				<Lookup chance="5"	count="1" table="&trMinorItem8;"/>
				<Lookup chance="5"	count="1" table="&trMajorItem8;"/>
			</Table>
		</Items>

		<!-- Image and Effects -->

		<Image imageID="&rsRogueFleetCache;"			imageWidth="280" imageHeight="280"	viewportRatio="0.04375"/>

		<DockingPorts>
			<Port posAngle="-38" posRadius="100" rotation="-140"/>
			<Port posAngle="-62" posRadius="100" rotation="40"/>

			<Port posAngle="82"  posRadius="100" rotation="-20"/>
			<Port posAngle="58"  posRadius="100" rotation="160"/>

			<Port posAngle="202" posRadius="100" rotation="100"/>
			<Port posAngle="178" posRadius="100" rotation="280"/>

			<Port posAngle="-110" posRadius="110" />
			<Port posAngle="10"   posRadius="110" />
			<Port posAngle="130"  posRadius="110" />
		</DockingPorts>

	</StationType>
<StationType UNID="&stRogueFleetSettlement;"
			name=				"Rogue Fleet settlement"
			sovereign=			"&svRogueFleet;"
				 
			attributes=			"enemy, envAir, envAvoidsFire, generic, human, populated, rogue, rogueFleet"
				 
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"375"				 
			shipRegen=			"4"
			fireRateAdj=		"20"
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+rogueFleetSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"----- -rcr- ----- ----- -----"

				locationCriteria=		"+asteroids"
				enemyExclusionRadius=	"50"
				/>

		<!-- Configuration -->
		
		<Hull 	hullType=		"multiHull"
				armorID=		"&itP120HexphaseArmor;"
				hitPoints=		"950"
				regen=			"20"
				/>
		
		<Devices>
			<Device deviceID="&itStarCannon;"	omnidirectional="true" posAngle="0" posRadius="0" posZ="20"/>
		</Devices>

		<!-- Ships and Defenses -->
		
		<Ships>
			<Ship		count="1"		class="&scCenturionXRogue;" orders="patrol" patrolDist="20">
				<Escorts>
					<Ship		count="1d3"		class="&scCenturionRogue;" orders="escort"/>
				</Escorts>
			</Ship>
			<Ship		count="1"		class="&scCenturionXRogue;" orders="guard"/>
			<Ship		count="1d3"		class="&scCenturionRogue;" orders="guard"/>
		</Ships>

		<!-- Treasure -->

		<Items value="standard:level=8:x=1.4">
			<Table>
				<Item	chance="20"	count="2d6" item="&itPteracniumFuelRod;"/>
				<Item	chance="20"	count="4d8" item="&itS3Missile;"/>
				<Item	chance="10"	count="2d8" item="&itM2Missile;"/>
				<Lookup chance="25" count="1" table="&trConsumables9;"/>
				<Lookup chance="15" count="1" table="&trMinorItem9;"/>
				<Lookup chance="10" count="1" table="&trMajorItem9;"/>
			</Table>
		</Items>
		
		<!-- Image and Effects -->
		
		<Image imageID="&rsRogueFleetSettlement;"		imageWidth="290" imageHeight="290"	viewportRatio="0.0475"/>

		<DockingPorts>
			<Port posAngle="10"  posRadius="140"/>
			<Port posAngle="40"  posRadius="140"/>
			<Port posAngle="70"  posRadius="140"/>

			<Port posAngle="130" posRadius="140"/>
			<Port posAngle="150" posRadius="140"/>
			<Port posAngle="190" posRadius="140"/>

			<Port posAngle="240" posRadius="140"/>
			<Port posAngle="270" posRadius="140"/>
			<Port posAngle="310" posRadius="140"/>
		</DockingPorts>
	</StationType>
<!-- RPGAnalyzers.xml -->
<!-- RPGAutons.xml -->
<StationType UNID="&stAutonWreck;"
			name=				"(shipwreck)"
			sovereign=			"&svNeutral;"
			dockScreen=			"&dsRPGAutonWreck;"
			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"

			ejectaType=			"&vtWreckEjecta;"
			
			attributes=			"shipwreck"
			>
		<Properties>
			<Data id="autonItem"></Data>
		</Properties>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<!-- RPGAuxDevices.xml -->
<!-- RPGBehaviors.xml -->
<!-- RPGCharacterClasses.xml -->
<!-- RPGCharacters.xml -->
<!-- RPGCode.xml -->
<!-- RPGCommoditiesExchange.xml -->
<!-- RPGCommonText.xml -->
<!-- RPGCompatibility.xml -->
<!-- RPGComponents.xml -->
<!-- RPGCrime.xml -->
<!-- RPGDeviceDockScreens.xml -->
<!-- RPGDialog.xml -->
<!-- RPGDockManagement.xml -->
<!-- RPGDockScreens.xml -->
<!-- RPGDockServices.xml -->
<!-- RPGLibrary.xml -->
<!-- RPGMembership.xml -->
<!-- RPGMining.xml -->
<!-- RPGMissions.xml -->
<!-- RPGMissionTemplate01.xml -->
<!-- RPGMissionTemplate02.xml -->
<!-- RPGMissionTemplate03.xml -->
<!-- RPGMissionTemplate04.xml -->
<!-- RPGMissionTemplate05.xml -->
<!-- RPGMissionTemplate06.xml -->
<!-- RPGMissionTemplate07.xml -->
<!-- RPGPlayer.xml -->
<!-- RPGRumors.xml -->
<!-- RPGShipBroker.xml -->
<!-- RPGShipScreens.xml -->
<!-- RPGSlaves.xml -->
<!-- RPGSquadronUI.xml -->
<!-- RPGTradingComputer.xml -->
<!-- RPGTypes.xml -->
<StationType UNID="&stGenericCargoCrate;"
			name=				"abandoned cargo crate"
			sovereign=			"&svNeutral;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			attributes=			"crate"

			structuralHitPoints="10"
			ejectaType=			"&vtWreckEjecta;"

			scale=				"ship"
			mobile=				"true"
			mass=				"50"
			destroyWhenEmpty=	"true"
			noMapIcon=			"true"
			>

		<ImageVariants>
			<Image			imageID="&rsGenericCargoCrate;" imageX="0" imageY="0" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsGenericCargoCrate;" imageX="0" imageY="32" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsGenericCargoCrate;" imageX="0" imageY="64" imageWidth="32" imageHeight="32" />
			<Image			imageID="&rsGenericCargoCrate;" imageX="0" imageY="96" imageWidth="32" imageHeight="32" />
		</ImageVariants>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

		<Language>
			<Text id="descAbandonedStation">
				"You are docked with an abandoned cargo crate."
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stShipwreck;"
			name=				"(shipwreck)"
			sovereign=			"&svNeutral;"
			dockScreen=			"&dsRPGAbandonedStation;"
			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"

			ejectaType=			"&vtWreckEjecta;"
			
			attributes=			"shipwreck"
			>
		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<!-- RPGUsefulItems.xml -->
<!-- RPGViewers.xml -->
<!-- RPGWingmen.xml -->
<!-- Salvagers.xml -->
<StationType UNID="&stSalvagerEncounter;"
			name=				"(salvager encounter)"
			sovereign=			"&svUnknownEnemy;"
			dockScreen=			"&dsAbandonedShip;"

			scale=				"ship"
			mobile=				"true"
			noMapIcon=			"true"

			ejectaType=			"&vtWreckEjecta;"

			attributes=			"debris, friendly, shipwreck"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+salvagerSpace;"
				systemAffinity=			"*"
				levelFrequency=			"ruurv ----- ----- ----- -----"

				locationCriteria=		"--planetary"
				/>

		<ImageVariants>
			<Shipwreck class="&scBorer;"/>
			<Shipwreck class="&scEarthzone;"/>
			<Shipwreck class="&scRoninA;"/>
		</ImageVariants>

		<Ships>
			<Ship	count="1"	class="&scSalvagerNomad;" orders="scavenge"		sovereign="&svSalvagers;"/>
		</Ships>

		<Items>
			<Table>
				<Null	chance="20"/>
				<Lookup chance="30" count="1d3" table="&trConsumables1;"/>
				<Lookup chance="15" count="1"	table="&trConsumables2;"/>
				<Lookup chance="25" count="1"	table="&trMinorItem1;"/>
				<Lookup chance="10" count="1"	table="&trMajorItem1;"/>
			</Table>
		</Items>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
		</Events>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<!-- Sanctuary.xml -->
<StationType UNID="&stCathedralOfDomina;"
			name=				"Cathedral of Domina"
			sovereign=			"&svSistersOfDomina;"
			inherit=			"&baSistersStation;"

			attributes=			"envAir, envAvoidsFire, friendly, generic, human, majorStation, populated, religious, sistersOfDomina"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"8"				 
			size=				"565"
			armorID=			"&itHeavyMeteorsteel;"
			hitPoints=			"1680"
			multiHull=			"true"
			regen=              "16"
			shipRegen=			"4"
				 
			explosionType=		"&vtBlastExplosion5;"
			ejectaType=			"&vtWreckEjecta;"

			definiteArticle=	"true"
			>
		
		<!-- Encounter Info -->
		
		<Encounter
				exclusionRadius="80"
				/>

		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<AcceptDonation	criteria="* -ID; -questItem;" priceAdj="100" actualPrice="true"/>

			<Refuel			criteria="f +basicFuel; L:1-10;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>

		<Items>
			<Table count="1d6">
				<Lookup chance="25" count="1d3" table="&trConsumables2;"/>
				<Lookup chance="25" count="1"	table="&trConsumables3;"/>
				<Lookup chance="25" count="1"	table="&trMinorItem2;"/>
				<Lookup chance="15" count="1"	table="&trMinorItem3;"/>
				<Lookup chance="10" count="1"	table="&trMajorItem2;"/>
			</Table>
		</Items>

		<!-- Configuration -->
		
		<!-- Satellites -->

		<!-- Ships and Defenses -->
		
		<Ships>
			<Lookup count="1d2+1" table="&tbCommDefenders;"/>
			<Lookup count="1d3+1" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<!-- Image and Effects -->
		
		<Image			imageID="&rsCathedralOfDomina;" imageWidth="380" imageHeight="380" viewportRatio="0.0725"/>
		
		<DockingPorts
				portCount=		"12"
				portRadius=		"205"
				>
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<OnScreenInit>
					(unvSetAchievement 'humanSpace.visitCathedralOfDomina)
				</OnScreenInit>

				<Display type="detailsPane">
					<OnDisplayInit>
						(typTranslate &svSistersOfDomina; 'statusDisplay)
					</OnDisplayInit>
				</Display>

				<Panes>
					<Default>
						<OnPaneInit>
							(block ()
								(scrSetDesc gScreen (objTranslate gSource 'descWelcome))

								;	No Sanctum if you're not a pilgrim

								(if (!= (objGetProperty gPlayerShip 'characterClass) &unidPilgrimClass;)
									(scrShowAction gScreen 'actionSanctum Nil)
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionCentralChamber" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +cathedralOfDominaMission; =5;")
									noMissionTextID: 'descNothingToTalkAbout
									})
							</Action>
							<Action id="actionSanctum">
								(scrShowScreen gScreen &dsSistersSanctum;)
							</Action>
							<Action id="actionPilgrimsAid">
								(scrShowScreen gScreen &dsSistersDockServices;)
							</Action>
							<Action id="actionDonate">
								(scrShowScreen gScreen &dsDominaTithe;)
							</Action>
							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>
		
		<!-- Events and Behavior -->

		<Language>
			<Text id="actionCentralChamber">[C]entral Chamber</Text>
			<Text id="actionDonate">[D]onate</Text>
			<Text id="actionPilgrimsAid">[P]ilgrim's Aid</Text>
			<Text id="actionSanctum">[S]anctum</Text>
			<Text id="actionUndock">[U]ndock</Text>
			
			<Text id="descWelcome">

				The Cathedral of Domina is the center of the Sisterhood, and 
				one of their most holy sites. Built originally in the 2150s, 
				the cathedral has expanded to become a small metropolis.

			</Text>
			<Text id="descNothingToTalkAbout">

				The beautiful central chamber, built hundreds of years ago by 
				Saint Eugenia, is lit by the holograms of various Sisters. 
				Lay and ordained women walk through the halls in quiet 
				conversation.

			</Text>

            <Text id="core.mapDesc">
                Contemplation and communion
            </Text>
			<Text id="rpg.statusDisplay">
				(typTranslate &svSistersOfDomina; 'statusDisplay)
			</Text>
		</Language>
	</StationType>
<!-- Sapiens.xml -->
<StationType UNID="&stTerroristCamp;"
			name=				"Sapiens outpost(s)"
			sovereign=			"&svSapiens;"

			attributes=			"enemy, envFire, envAvoidsWater, generic, human, populated, sapiens, sapiensCamp"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"252"
			fireRateAdj=		"30"
			explosionType=		"&vtRadioactiveExplosion1;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+sapiensSpace;"
				systemAffinity=			"+envFire; -envWater;"
				levelFrequency=			"-vcuv ----- ----- ----- -----"

				locationCriteria=		"+lifeZone"
				enemyExclusionRadius=	"50"
				/>

		<Encounters frequency="common">
			<Lookup table="&tbSapiensEncounters;"/>
		</Encounters>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itHardenedReactiveArmor;"
				hitPoints=		"120"
				regen=			"1"
				/>
		
		<Devices>
			<Device deviceID="&itFlenserCannon;"	omnidirectional="true"/>
			<Device deviceID="&vtSapiensMineLauncher;"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships>
			<Table>
				<Ship chance="60" class="&scPlague;" count="1d4" orders="guard"/>
				<Ship chance="30" class="&scRevelations;" count="1d2" orders="guard"/>
				<Group chance="10">
					<Ship class="&scPlague;" count="1" orders="guard"/>
					<Ship class="&scRevelations;" count="1" orders="guard"/>
				</Group>
			</Table>
		</Ships>

		<!-- Treasure -->

		<Items>
			<Group value="standard:level=3:x=1.3">
				<Item		chance="50"	count="1d4"	  item="&itFusionTrigger;"/>
				<Item		chance="50"	count="1d6"	  item="&itRadioactiveWaste;"/>
				<Lookup table="&trStdTreasure;"/>
			</Group>
		</Items>

		<!-- Image and Effects -->

		<Image imageID="&rsSapiensOutpost;"			imageWidth="230" imageHeight="230"	viewportRatio="0.0325"/>

		<DockingPorts
				portAngle=		"-8"
				portCount=		"8"
				portRadius=		"90"
				/>

		<!-- Events and Behavior -->

		<Events>
			<GetRumors>
				{
					attributes: "commonwealthPub"
					priority: 30
					textID: 'rumor.commonwealthPub
					onExitRumor: (lambda (theRumor) (objSetKnown (@ theRumor 'sourceObj)))
					}
			</GetRumors>
		</Events>

		<Language>
			<Text id="rumor.commonwealthPub">

				You spend 5 credits and listen to a nuclear technician:

				"I just got paid ten kilocreds to install a radiation room at
				the Sapiens outpost! Those flippers scare me&mdash;with all 
				their talk about 'human purity' they seem a little short on the
				brain scale."

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stTerroristCompound;"
			name=				"Sapiens compound"
			sovereign=			"&svSapiens;"

			attributes=			"enemy, envFire, envAvoidsWater, generic, human, populated, sapiens, sapiensCompound"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"279"
			fireRateAdj=		"20"
			explosionType=		"&vtRadioactiveExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+sapiensSpace;"
				systemAffinity=			"+envFire; -envWater;"
				levelFrequency=			"--vcu v---- ----- ----- -----"

				locationCriteria=		"+lifeZone"
				enemyExclusionRadius=	"50"
				/>

		<Encounters frequency="common">
			<Lookup table="&tbSapiensEncounters;"/>
		</Encounters>
		
		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itHardenedReactiveArmor;"
				hitPoints=		"320"
				regen=			"6"
				/>
		
		<Devices>
			<Device deviceID="&itNAMIMissileLauncher;"	omnidirectional="true"/>
			<Device deviceID="&vtSapiensMineLauncher;"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships>
			<Table>
				<Ship chance="20" class="&scPlague;" count="2d3" orders="guard"/>
				<Ship chance="40" class="&scRevelations;" count="1d4" orders="guard"/>
				<Group chance="40">
					<Ship class="&scPlague;" count="1d2+1" orders="guard"/>
					<Ship class="&scRevelations;" count="1" orders="guard"/>
				</Group>
			</Table>
		</Ships>

		<!-- Treasure -->

		<Items>
			<Group value="standard:level=4:x=2.0">
				<Item chance="60"		count="2d8"	  item="&itXM300Missile;"/>
				<Item chance="70"		count="4d8"	  item="&itFusionTrigger;"/>
				<Item chance="60"		count="2d6"   item="&itRadioactiveWaste;"/>
				<Lookup chance="50"						table="&trStdTreasure;"/>
			</Group>
		</Items>

		<!-- Image and Effects -->

		<Image imageID="&rsSapiensCompound;"			imageWidth="262" imageHeight="262"	viewportRatio="0.04"/>

		<DockingPorts
				portAngle=		"0"
				portCount=		"12"
				portRadius=		"116"
				/>

		<!-- Events and Behavior -->

		<Events>
			<OnCreate>
				(sysAddObjRecurringTimerEvent 150 gSource "OnProduceMissiles")
			</OnCreate>
			
			<OnProduceMissiles>
				(if (not (objIsAbandoned gSource))
					(block (reapers)
						
						;	check how many reaper missiles we have and produce more if we're going to run out
						
						(setq reapers (@ (objGetItems gSource "m +unid:&itXM300Missile;;") 0))
						(if (or (not reapers) (ls (itmGetCount reapers) 16))
							(objAddItem gSource
								(itmCreate &itXM300Missile; (random 10 40))		;	produce between 10 and 40 missiles
								)
							)
						)
					)
			</OnProduceMissiles>
		</Events>
	</StationType>
<!-- Scoria.xml -->
<StationType UNID="&stScoriaAsteroidSizeA1;"
		name=				"Scoria Asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, scoria"
		inherit=			"&baScoriaAsteroid;"

		scale=				"world"
		size=				"1"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="0"   imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="32"  imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="64"  imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="96"  imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="128" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="160" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="192" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="224" imageWidth="32" imageHeight="32"/>
			
			<Image			imageID="&rsScoriaAsteroids;" imageX="32"  imageY="0"   imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="32"  imageY="32"  imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="32"  imageY="64"  imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="32"  imageY="96"  imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="32"  imageY="128" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="32"  imageY="160" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="32"  imageY="192" imageWidth="32" imageHeight="32"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="32"  imageY="224" imageWidth="32" imageHeight="32"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stScoriaAsteroidSizeA2;"
		name=				"Scoria Asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, scoria"
		inherit=			"&baScoriaAsteroid;"

		scale=				"world"
		size=				"1"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsScoriaAsteroids;" imageX="64"  imageY="0"   imageWidth="48" imageHeight="48"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="64"  imageY="48"  imageWidth="48" imageHeight="48"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="64"  imageY="96"  imageWidth="48" imageHeight="48"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="64"  imageY="144" imageWidth="48" imageHeight="48"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="64"  imageY="192" imageWidth="48" imageHeight="48"/>

			<Image			imageID="&rsScoriaAsteroids;" imageX="112" imageY="0"   imageWidth="48" imageHeight="48"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="112" imageY="48"  imageWidth="48" imageHeight="48"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="112" imageY="96"  imageWidth="48" imageHeight="48"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="112" imageY="144" imageWidth="48" imageHeight="48"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="112" imageY="192" imageWidth="48" imageHeight="48"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stScoriaAsteroidSizeA3;"
		name=				"Scoria Asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, scoria"
		inherit=			"&baScoriaAsteroid;"

		scale=				"world"
		size=				"4"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="256" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="320" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="384" imageWidth="64" imageHeight="64"/>

			<Image			imageID="&rsScoriaAsteroids;" imageX="64"  imageY="256" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="64"  imageY="320" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="64"  imageY="384" imageWidth="64" imageHeight="64"/>

			<Image			imageID="&rsScoriaAsteroids;" imageX="128" imageY="256" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="128" imageY="320" imageWidth="64" imageHeight="64"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="128" imageY="384" imageWidth="64" imageHeight="64"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stScoriaAsteroidSizeA4;"
		name=				"Scoria Asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, scoria"
		inherit=			"&baScoriaAsteroid;"

		scale=				"world"
		size=				"9"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsScoriaAsteroids;" imageX="160" imageY="0"   imageWidth="80" imageHeight="80"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="160" imageY="80"  imageWidth="80" imageHeight="80"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="160" imageY="160" imageWidth="80" imageHeight="80"/>

			<Image			imageID="&rsScoriaAsteroids;" imageX="240" imageY="0"   imageWidth="80" imageHeight="80"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="240" imageY="80"  imageWidth="80" imageHeight="80"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="240" imageY="160" imageWidth="80" imageHeight="80"/>

			<Image			imageID="&rsScoriaAsteroids;" imageX="320" imageY="0"   imageWidth="80" imageHeight="80"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="320" imageY="80"  imageWidth="80" imageHeight="80"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="320" imageY="160" imageWidth="80" imageHeight="80"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stScoriaAsteroidSizeB1;"
		name=				"Scoria Asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, scoria"
		inherit=			"&baScoriaAsteroid;"

		scale=				"world"
		size=				"24"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsScoriaAsteroids;" imageX="192" imageY="240" imageWidth="100" imageHeight="100"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="292" imageY="240" imageWidth="100" imageHeight="100"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="392" imageY="240" imageWidth="100" imageHeight="100"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="492" imageY="240" imageWidth="100" imageHeight="100"/>

			<Image			imageID="&rsScoriaAsteroids;" imageX="192" imageY="340" imageWidth="100" imageHeight="100"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="292" imageY="340" imageWidth="100" imageHeight="100"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="392" imageY="340" imageWidth="100" imageHeight="100"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="492" imageY="340" imageWidth="100" imageHeight="100"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stScoriaAsteroidSizeB2;"
		name=				"Scoria Asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, scoria"
		inherit=			"&baScoriaAsteroid;"

		scale=				"world"
		size=				"50"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsScoriaAsteroids;" imageX="400" imageY="0"   imageWidth="120" imageHeight="120"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="520" imageY="0"   imageWidth="120" imageHeight="120"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="640" imageY="0"   imageWidth="120" imageHeight="120"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="760" imageY="0"   imageWidth="120" imageHeight="120"/>

			<Image			imageID="&rsScoriaAsteroids;" imageX="400" imageY="120" imageWidth="120" imageHeight="120"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="520" imageY="120" imageWidth="120" imageHeight="120"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="640" imageY="120" imageWidth="120" imageHeight="120"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="760" imageY="120" imageWidth="120" imageHeight="120"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stScoriaAsteroidSizeC1;"
		name=				"Scoria Asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, scoria"
		inherit=			"&baScoriaAsteroid;"

		scale=				"world"
		size=				"120"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="448" imageWidth="150" imageHeight="150"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="150" imageY="448" imageWidth="150" imageHeight="150"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="300" imageY="448" imageWidth="150" imageHeight="150"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="450" imageY="448" imageWidth="150" imageHeight="150"/>

			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="598" imageWidth="150" imageHeight="150"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="150" imageY="598" imageWidth="150" imageHeight="150"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="300" imageY="598" imageWidth="150" imageHeight="150"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="450" imageY="598" imageWidth="150" imageHeight="150"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stScoriaAsteroidSizeC2;"
		name=				"Scoria Asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, scoria"
		inherit=			"&baScoriaAsteroid;"

		scale=				"world"
		size=				"250"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="748" imageWidth="180" imageHeight="180"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="180" imageY="748" imageWidth="180" imageHeight="180"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="360" imageY="748" imageWidth="180" imageHeight="180"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="540" imageY="748" imageWidth="180" imageHeight="180"/>

			<Image			imageID="&rsScoriaAsteroids;" imageX="0"   imageY="928" imageWidth="180" imageHeight="180"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="180" imageY="928" imageWidth="180" imageHeight="180"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="360" imageY="928" imageWidth="180" imageHeight="180"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="540" imageY="928" imageWidth="180" imageHeight="180"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stScoriaAsteroidSizeD;"
		name=				"Scoria Asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, scoria"
		inherit=			"&baScoriaAsteroid;"

		scale=				"world"
		size=				"480"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image			imageID="&rsScoriaAsteroids;" imageX="600" imageY="240" imageWidth="210" imageHeight="210"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="810" imageY="240" imageWidth="210" imageHeight="210"/>

			<Image			imageID="&rsScoriaAsteroids;" imageX="600" imageY="450" imageWidth="210" imageHeight="210"/>
			<Image			imageID="&rsScoriaAsteroids;" imageX="810" imageY="450" imageWidth="210" imageHeight="210"/>
		</ImageVariants>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" count="1d10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stScoriaPlanetoidSizeE;"
		name=				"scoria planetoid"
		attributes=			"generic, inner, lifeZone, outer, planetoid, scoria"
		inherit=			"&baScoriaPlanetoid;"

		scale=				"world"
		size=				"820"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageVariants>
			<Image	imageID="&rsScoriaAsteroids;" imageX="720"  imageY="660"   imageWidth="240" imageHeight="240"/>
			<Image	imageID="&rsScoriaAsteroids;" imageX="960"  imageY="660"   imageWidth="240" imageHeight="240"/>

			<Image	imageID="&rsScoriaAsteroids;" imageX="720"  imageY="900"   imageWidth="240" imageHeight="240"/>
			<Image	imageID="&rsScoriaAsteroids;" imageX="960"  imageY="900"   imageWidth="240" imageHeight="240"/>
		</ImageVariants>
	</StationType>
<!-- ShieldEnhancementItems.xml -->
<!-- Sisters01.xml -->
<!-- Sisters02.xml -->
<!-- Sisters03.xml -->
<!-- SistersDonate.xml -->
<!-- SistersOfDomina.xml -->
<StationType UNID="&stSistersOfDomina;"
			name=				":the Sisters of Domina|Sisters of Domina"
			sovereign=			"&svSistersOfDomina;"
			inherit=			"&baSistersStation;"
			   
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"245"
			multiHull=			"true"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"160"
			regen=              "2"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"envAir, envAvoidsFire, friendly, generic, human, majorStation, populated, religious, sistersOfDomina"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"ruccc ur--- ----- ----- -----"

				locationCriteria=		"-innerSystem, +planetary"

				unique=					"inSystem"
				/>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<AcceptDonation	criteria="* -ID; -questItem;" priceAdj="100" actualPrice="true"/>

			<Refuel			criteria="f +basicFuel; L:1-10;" priceAdj="100"/>
			<Decontaminate	criteria="*"		priceAdj="100"/>
		</Trade>

		<Items>
			<Table count="1d6">
				<Lookup chance="25" count="1d3" table="&trConsumables2;"/>
				<Lookup chance="25" count="1"	table="&trConsumables3;"/>
				<Lookup chance="25" count="1"	table="&trMinorItem2;"/>
				<Lookup chance="15" count="1"	table="&trMinorItem3;"/>
				<Lookup chance="10" count="1"	table="&trMajorItem2;"/>
			</Table>
		</Items>

		<!-- Configuration -->

		<!-- Ships and Defenses -->

		<Ships>
			<Lookup count="1d2" table="&tbCommDefenders;"/>
			<Lookup count="1d3" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<!-- Image and Effects -->

		<Image			imageID="&rsSistersAbbey;" imageWidth="224" imageHeight="330" viewportRatio="0.0325"/>
		<HeroImage		imageID="&rsSistersShrineHero;" imageWidth="400" imageHeight="650"/>
		
		<DockingPorts
				portCount=		"8"
				portRadius=		"135"
				portAngle=		"-5"
				/>

		<!-- Dock Screen -->

		<DockScreens>
			<Main>
				<Display type="detailsPane">
					<OnDisplayInit>
						(typTranslate &svSistersOfDomina; 'statusDisplay)
					</OnDisplayInit>
				</Display>

				<Panes>
					<Default>
						<OnPaneInit>
							(block Nil
								(if (objGetData gSource "freeSanctum")
									(scrSetDescTranslate gScreen 'WelcomeFreeSanctum)
									(scrSetDescTranslate gScreen 'Welcome)
									)

								;	No Sanctum if you're not a pilgrim

								(if (!= (objGetProperty gPlayerShip 'characterClass) &unidPilgrimClass;)
									(scrShowAction gScreen 'actionSanctum Nil)
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionTalkToAbbess" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +sistersMission; =" (sysGetLevel) ";")
									noMissionTextID: 'descNothingToTalkAbout
									maxPerStation: 1
									})
							</Action>
							<Action id="actionSanctum">
								(scrShowScreen gScreen &dsSistersSanctum;)
							</Action>
							<Action id="actionPilgrimsAid">
								(scrShowScreen gScreen &dsSistersDockServices;)
							</Action>
							<Action id="actionDonate">
								(scrShowScreen gScreen &dsDominaTithe;)
							</Action>
							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<!-- Events and Data -->

		<Events>
			<GetRumors>
				(block (communionItem)
					(append
						(if (setq communionItem (random (objGetItems gPlayerShip "*U +communion;")))
							(rpgRumorAdd 'sistersMission 'offerItem 100 nil {
								itemName: (itmGetName communionItem 'article)
								})
							)
						)
					)
			</GetRumors>
		</Events>

		<Language>
			<Text id="actionTalkToAbbess">[M]atriarch's Chancery</Text>
			<Text id="actionDonate">[D]onate</Text>
			<Text id="actionPilgrimsAid">[P]ilgrims' Aid</Text>
			<Text id="actionSanctum">[S]anctum</Text>
			<Text id="actionUndock">[U]ndock</Text>
			
			<Text id="Welcome">
				You are docked at an abbey of the Sisters of Domina.
			</Text>
			<Text id="WelcomeFreeSanctum">

				You are docked at an abbey of the Sisters of Domina. 
				A woman wearing a flowing cardinal robe is before you.
					
				"Take your ease here before you go, or seek guidance 
				at our Sanctum. May the blessings of Domina protect you."

			</Text>
			<Text id="descNothingToTalkAbout">
				(cat
					(objTranslate gSource 'descAbbessAdviceIntro)
					"\n\n"
					(objTranslate gSource (cat 'descAbbessAdvice (min (sysGetLevel) 7)))
					)
			</Text>
			<Text id="descAbbessAdviceIntro">

				You enter the abbess's spartan office and chat with her. She 
				leaves you with a small piece of advice:

			</Text>
			<Text id="descAbbessAdvice1">
			
				"You are one of the few who can commune with Domina; do not 
				waste this blessing."
				
			</Text>
			<Text id="descAbbessAdvice2">
			
				"Do not kill for sport. But do not be afraid to fight for 
				Domina."

			</Text>
			<Text id="descAbbessAdvice3">
			
				"Domina seeks connection with all thinking beings, and even 
				death cannot fully erase the luminous patterns of sentience."
				
			</Text>
			<Text id="descAbbessAdvice4">
			
				"Domina can guide you, but you must seek your own answers."

			</Text>
			<Text id="descAbbessAdvice5">
			
				"Do not let Domina's brilliance blind you to the strength and 
				worth of mere humans."
				
			</Text>
			<Text id="descAbbessAdvice6">
			
				"Domina controls you, but it's up to you to keep your humanity.
				Always remember that."
				
			</Text>
			<Text id="descAbbessAdvice7">
			
				"The universe is dark and lonely; I do not envy your task."
				
			</Text>

			<Text id="rumor.sistersMission.offerItem">

				The abbess greets you as you enter:

				"Welcome, %name%! You have %itemName% in your cargo hold. That
				would make a wonderful offering to Domina. Go to our sanctum
				and make an offering."

			</Text>

			<Text id="core.mapDesc">
				Contemplation and communion
			</Text>

			<Code id="rpg.statusDetails">
				(typTranslate &svSistersOfDomina; 'statusDisplay)
			</Code>
		</Language>
	</StationType>
<!-- SistersPilgrimsAid.xml -->
<!-- SistersSanctum.xml -->
<!-- Stargates.xml -->
<StationType UNID="&stStargate;"
			name=				"(stargate)"
			sovereign=			"&svNeutral;"
			dockScreen=			"Main"

			immutable=			"true"

			attributes=			"generic, stargate"
			
			gateEffect=			"&efStargateOut;"
			definiteArticle=	"true"
			>
		<Encounter
				exclusionRadius="50"
				/>

		<Image imageID="&rsDaazhenStargate;" imageWidth="350" imageHeight="350" imageFrameCount="48" imageTicksPerFrame="1" animationColumns="6"/>

		<DockingPorts
				portCount=		"4"
				portRadius=		"190"
				>
		</DockingPorts>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="descWelcome">

				You are docked at an alien stargate. These giant structures are 
				used by the Ancient Races to move their starships across the 
				Galaxy.
				
				Stargates are the best mode of faster-than-light travel and 
				they are the only method known to humans.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stStargateBeacon;"
			name=				"(stargate beacon)"
			sovereign=			"&svNeutral;"
			noMapLabel=			"true"
			immutable=			"true"
			mass=				"5000"
			>

		<Image imageID="&rsStdStargate;" imageX="0" imageY="128" imageWidth="28" imageHeight="28"/>

	</StationType>
<StationType UNID="&stMajellenStargate;"
			name=				"(stargate)"
			sovereign=			"&svNeutral;"
			dockScreen=			"Main"

			immutable=			"true"
			attributes=			"generic, majellen, stargate"

			gateEffect=			"&efStargateOut;"

			definiteArticle=	"true"
			>
		<Image imageID="&rsMajellenStargate;" imageWidth="400" imageHeight="400" imageFrameCount="48" imageTicksPerFrame="1" animationColumns="6"/>

		<DockingPorts
				portCount=		"4"
				portRadius=		"150"
				>
		</DockingPorts>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="descWelcome">

				You are docked at an alien stargate. These giant structures are 
				used by the Ancient Races to move their starships across the 
				Galaxy.
				
				Stargates are the best mode of faster-than-light travel and 
				they are the only method known to humans.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stUnchartedMajellenStargate;"
			name=				"(stargate)"
			sovereign=			"&svNeutral;"
			dockScreen=			"Main"

			immutable=			"true"
			attributes=			"majellen, stargate, uncharted"

			gateEffect=			"&efStargateOut;"

			definiteArticle=	"true"
			>
		<Image imageID="&rsMajellenStargate;" imageWidth="400" imageHeight="400" imageFrameCount="48" imageTicksPerFrame="1" animationColumns="6"/>

		<DockingPorts
				portCount=		"4"
				portRadius=		"150"
				>
		</DockingPorts>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<Language>
			<Text id="descWelcome">

				You are docked at an alien stargate. These giant structures are 
				used by the Ancient Races to move their starships across the 
				Galaxy.
				
				Stargates are the best mode of faster-than-light travel and 
				they are the only method known to humans.

			</Text>
		</Language>
	</StationType>
<!-- Stars.xml -->
<StationType UNID="&stStarClassM8;"
		name=				"(M8 class red dwarf)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#673b34"
		maxLightRadius=		"350"
		>

		<ImageEffect>
			<Group>
				<Orb
						style=			"smooth"
						radius=			"300"
						intensity=		"25"
						primaryColor=	"#ff2600"
						secondaryColor=	"#ff2600"
						/>
				<Image imageID="&rsRedDwarfStar2;" imageX="0" imageY="0" imageWidth="150" imageHeight="150"/>
			</Group>
		</ImageEffect>
	</StationType>
<StationType UNID="&stStarClassM5;"
		name=				"(M5 class red dwarf)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#674a38"
		maxLightRadius=		"450"
		>

		<ImageEffect>
			<Group>
				<Orb
						style=			"smooth"
						radius=			"375"
						intensity=		"25"
						primaryColor=	"#ff8534"
						secondaryColor=	"#ff8534"
						/>
				<Image imageID="&rsRedDwarfStar2;" imageX="0" imageY="150" imageWidth="200" imageHeight="200"/>
			</Group>
		</ImageEffect>
	</StationType>
<StationType UNID="&stStarClassM0;"
		name=				"(M0 class red dwarf)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#675442"
		maxLightRadius=		"545"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"445"
					intensity=		"25"
					primaryColor=	"#ffb367"
					secondaryColor=	"#ffb367"
					/>
		</ImageEffect>
	</StationType>
<StationType UNID="&stStarClassK5;"
		name=				"(K5 class star)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#675747"
		maxLightRadius=		"570"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"460"
					intensity=		"25"
					primaryColor=	"#ffcc99"
					secondaryColor=	"#ffcc99"
					/>
		</ImageEffect>
	</StationType>
<StationType UNID="&stStarClassK0;"
		name=				"(K0 class star)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#67604c"
		maxLightRadius=		"590"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"480"
					intensity=		"25"
					primaryColor=	"#ffecb3"
					secondaryColor=	"#ffecb3"
					/>
		</ImageEffect>
	</StationType>
<StationType UNID="&stStarClassG5;"
		name=				"(G5 class star)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#66664c"
		maxLightRadius=		"610"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"490"
					intensity=		"25"
					primaryColor=	"#ffffbf"
					secondaryColor=	"#ffffbf"
					/>
		</ImageEffect>
	</StationType>
<StationType UNID="&stStarClassG2;"
		name=				"(G2 class star)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#676752"
		maxLightRadius=		"620"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"500"
					intensity=		"25"
					primaryColor=	"#ffffcc"
					secondaryColor=	"#ffffcc"
					/>
		</ImageEffect>
	</StationType>
<StationType UNID="&stStarClassG0;"
		name=				"(G0 class star)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#67675c"
		maxLightRadius=		"630"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"510"
					intensity=		"25"
					primaryColor=	"#ffffe6"
					secondaryColor=	"#ffffe6"
					/>
		</ImageEffect>
	</StationType>
<StationType UNID="&stStarClassF5;"
		name=				"(F5 class star)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#616767"
		maxLightRadius=		"650"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"525"
					intensity=		"25"
					primaryColor=	"#f3ffff"
					secondaryColor=	"#f3ffff"
					/>
		</ImageEffect>
	</StationType>
<StationType UNID="&stStarClassF0;"
		name=				"(F0 class star)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#575b67"
		maxLightRadius=		"670"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"535"
					intensity=		"25"
					primaryColor=	"#d9f3ff"
					secondaryColor=	"#d9f3ff"
					/>
		</ImageEffect>
	</StationType>
<StationType UNID="&stStarClassA5;"
		name=				"(A5 class star)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#4c5367"
		maxLightRadius=		"720"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"570"
					intensity=		"25"
					primaryColor=	"#bfd1ff"
					secondaryColor=	"#bfd1ff"
					/>
		</ImageEffect>
	</StationType>
<StationType UNID="&stStarClassA0;"
		name=				"(A0 class star)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#495167"
		maxLightRadius=		"800"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"630"
					intensity=		"25"
					primaryColor=	"#a6beff"
					secondaryColor=	"#a6beff"
					/>
		</ImageEffect>
	</StationType>
<StationType UNID="&stNebulaStar;"
		name=				"(nebula star)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#433d4d"
		maxLightRadius=		"400"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"400"
					intensity=		"25"
					primaryColor=	"#cfb2ff"
					secondaryColor=	"#cfb2ff"
					/>
		</ImageEffect>
	</StationType>
<StationType UNID="&stRedGiantStar;"
		name=				"(red giant star)"
		scale=				"star"
				 
		attributes=			"generic, star"
				 
		spaceColor=			"#663524"
		maxLightRadius=		"620"
		>
		
		<ImageEffect>
			<Group>
				<Orb
						style=			"smooth"
						radius=			"500"
						intensity=		"30"
						primaryColor=	"#ff4000"
						secondaryColor=	"#ff4000"
						/>
				
				<Image imageID="&rsRedGiantStar2;" imageX="0" imageY="0" imageWidth="512" imageHeight="512"/>
			</Group>
		</ImageEffect>
	</StationType>
<StationType UNID="&stWhiteDwarfStar;"
		name=				"(white dwarf star)"
		scale=				"star"
				 
		attributes=			"generic, gravityDanger, star"
				 
		spaceColor=			"#495167"
		maxLightRadius=		"300"
		mass=				"1.0"
		gravityRadius=		"10"
		>

		<ImageEffect>
			<Orb
					style=			"smooth"
					radius=			"330"
					intensity=		"50"
					primaryColor=	"#a6beff"
					secondaryColor=	"#a6beff"
					/>
		</ImageEffect>
	</StationType>
<!-- StarsOfThePilgrim.xml -->
<StationType<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE TranscendenceAdventure
	[
	<!-- 0020xxxx THE STARS OF THE PILGRIM ADVENTURE ======================= -->
	
	<!-- 0000-000F CORE/COMPATIBILITY -->
	
	<!ENTITY unidStarsOfThePilgrim		"0x00200000">
	<!-- HUMAN SPACE LIBRARY 0x00200001 -->
	<!-- HUMAN SPACE LIBRARY 0x00200002 -->
	<!-- HUMAN SPACE LIBRARY 0x00200003 -->
	<!ENTITY unidPartISystemMap			"0x00200004">
	<!ENTITY msReachGalacticCore		"0x00200005">
	<!ENTITY unidBenedictStoryArc		"0x00200006">
	<!ENTITY dsBenedictIntro			"0x00200007">
	<!ENTITY msBenedictsDrones			"0x00200008">
	<!ENTITY msBenedictAndFiona			"0x00200009">
	<!-- UNUSED 0x0020000A -->
	<!ENTITY msBenedictToKorolov		"0x0020000B">
	<!ENTITY msBenedictTraining			"0x0020000C">
	<!ENTITY rsGalacticCoreMissionTile	"0x0020000D">
	<!ENTITY unidAchievements			"0x0020000E">
	
	<!-- 0010-005F BENEDICT MISSION ARC -->
	
	<!ENTITY msBenedictInNewBeyond		"0x00200010">
	<!ENTITY tbBenedict04Encounters		"0x00200011">
	<!ENTITY msFionaInStKats			"0x00200012">
	<!ENTITY msFindHandOfSolace			"0x00200013">
	<!ENTITY stHandOfSolaceWreck		"0x00200014">
	<!ENTITY ovBenedict05ScanRange		"0x00200015">
	<!ENTITY tbBenedict05Encounters		"0x00200016">
	<!ENTITY msInfiltratePenitents		"0x00200017">
	<!ENTITY svBenedict06Infiltrate		"0x00200018">
	<!ENTITY evBenedict06PenitentBase	"0x00200019">
	<!ENTITY ovBenedict06Disarm			"0x0020001A">
	<!ENTITY msRescueBenedict			"0x0020001B">
	<!ENTITY evBenedict07PenitentWreck	"0x0020001C">
	<!ENTITY msRescueChildrenFromPenitents	"0x0020001D">
	<!ENTITY evBenedict08PenitentBase	"0x0020001E">
	<!ENTITY evBenedict07FionaWreck		"0x0020001F">
	<!ENTITY evBenedict06PenitentShip	"0x00200020">
	<!ENTITY evBenedict07Wingman		"0x00200021">
	<!ENTITY evBenedict02FionaWreck		"0x00200022">
	<!ENTITY baBenedictMission			"0x00200023">
	<!ENTITY rsBenedictMission			"0x00200024">
	<!ENTITY evBenedict05ASandoval		"0x00200025">

	<!-- 0060-007F HERETIC MISSION ARC -->
	
	<!ENTITY msHereticIocrymAttack		"0x00200060">
	<!ENTITY msHereticIocrymAttackMsg	"0x00200061">
	<!ENTITY msHereticSvalbard			"0x00200062">
	<!ENTITY dsHereticSvalbardDonate	"0x00200063">
	<!ENTITY msHereticControlPoint		"0x00200064">
	<!ENTITY msHereticFurtherResearch	"0x00200065">
	<!ENTITY msHereticSettlement		"0x00200066">
	<!ENTITY msHereticMaryamsArchive	"0x00200067">
	<!ENTITY stMaryamsArchive			"0x00200068">
	<!ENTITY msHereticHuygensExplorer	"0x00200069">
	<!ENTITY evHereticHuygensExplorer	"0x0020006A">
	<!ENTITY msHereticIocrymArtifact	"0x0020006B">
	<!ENTITY msHereticIocrymOutpost		"0x0020006C">
	<!ENTITY msHereticMRADExperiment	"0x0020006D">

	<!-- 0080-00BF MISCELLANEOUS MISSIONS -->

	<!ENTITY msPsychEval01				"0x00200080">
	<!ENTITY msPsychEval00				"0x00200081">

	<!-- 0021xxxx HUARI ==================================================== -->
	
	<!ENTITY smHuariSpace				"0x00210001">
	<!ENTITY msHuaramarcaTuali			"0x00210002">
	<!ENTITY msHuaramarcaDreamTest		"0x00210003">
	<!ENTITY msHuaramarcaDefendTemple	"0x00210004">
	<!ENTITY msHuaramarcaAttackBase		"0x00210005">
	<!ENTITY msHuaramarcaDragonSlaver	"0x00210006">
	<!ENTITY msHuaramarcaArchcannon		"0x00210007">
	<!ENTITY msHuaramarcaRevelation		"0x00210008">

	<!-- 0082xxxx PART I SOUNDTRACK ======================================== -->

	<!ENTITY muDominaMainTheme			"0x00820020">
	<!ENTITY muDominaEndTitles01		"0x00820120">
	]>
	
<TranscendenceAdventure
		UNID=				"&unidStarsOfThePilgrim;"
		name=				"Domina &amp; Oracus I: The Stars of the Pilgrim"
		release=			"1" 
		>
	
	<Library unid="&unidCoreTypesLibrary;"/>
	<Library unid="&unidRPGLibrary;"/>
	<Library unid="&unidGalaxyLibrary;"/>
	<Library unid="&unidHumanSpaceLibrary;"/>

	<AdventureDesc
			unid=			"&adPart1Desc;"
			backgroundID=	"&rsPart1Cover;"
			inherit=		"&unidCommonText;"
				
			startingShipCriteria=	"* +00200000_PlayerShip;"
			include10StartingShips=	"true" 
			startingSystem=			"SE"
			startingPos=			"Start"
			>

		<Properties>
			<!--
				This is needed by trnCreateAllStargates (which is used by all 
				standard systems) to figure out which node is closest to the
				Galactic Core. This allows us to create inbound vs. outbound
				stargates.
			-->
			<Constant id="core.defaultCorewardNode">		'G2</Constant>

			<Constant id="core.defaultInteraction">			Nil</Constant>
			<Constant id="core.defaultShotHP">				Nil</Constant>
			<Constant id="core.hideDisintegrationImmune">	Nil</Constant>
			<Constant id="core.hideIonizeImmune">			Nil</Constant>
			<Constant id="core.hideRadiationImmune">		Nil</Constant>
			<Constant id="core.hideShatterImmune">			Nil</Constant>
		</Properties>
		
		<EncounterOverrides>
			<!-- NOTE: We have 1 guaranteed station (in BA), so this will 
				usually be a second guaranteed station. -->

			<Encounter UNID="&stBlackMarketStation;"	minAppearing="1"/>

			<Encounter </StationType>
<StationTypeBlackMarketStation;"	minAppearing="1"/>

			<Encounter UNID="&stRasiermesserFactory;"	minAppearing="1"/>
			<Encounter </StationType>
<StationTypeRasiermesserFactory;"	minAppearing="1"/>
			<Encounter UNID="&stTinkerGathering;"		minAppearing="1"/>
		</EncounterOverrides>

		<Events>
			<OnGameStart>
				(block Nil
					(gamSetCrawlImage &rsProlog1;)
					(gamSetCrawlSoundtrack &muDominaMainTheme;)
					(gamSetCrawlText (typTranslate gType 'openingCrawl))
					)
			</OnGameStart>

			<OnGameEnd>
				(block Nil
					(gamSetCrawlImage
						(if (eq aEndGameReason 'leftHumanSpace)
							&rsEndGameEscaped;
							&rsEndGameDestroyed;
							)
						)

					(gamSetCrawlSoundtrack &muDominaEndTitles01;)

					(gamSetCrawlText 
						(cat
							(typTranslate &unidCommonText; 'epitaph {
								epitaph: aEpitaph
								systemsVisited: aSystemsVisited
								enemiesDestroyed: aEnemiesDestroyed
								bestEnemiesDestroyed: aBestEnemiesDestroyed
								bestEnemyClass: aBestEnemyClass
								})
							"\n\n"
							(if (= aEndGameReason 'leftHumanSpace)
								(typTranslate gType 'lastPhrase.continued)
								(typTranslate gType 'lastPhrase.never)
								)
							)
						)

					;	Achievement

					(if (= aEndGameReason 'leftHumanSpace)
						(unvSetAchievement (cat 'sotp.completed. (unv@ 'difficulty)))
						)
					)
			</OnGameEnd>

			<GetGlobalAchievements>
				(append
					(intGetGlobalAchievements)

					(switch
						(= aEndGameReason 'leftHumanSpace)
							{	descID: 'achieve.leftHumanSpace
								sectionID: 'exploration
								sort: 'Z006
								}

						{	descID: 'achieve.neverLeftHumanSpace
							sectionID: 'exploration
							sort: 'Z006
							}
						)
					)
			</GetGlobalAchievements>
				
			<OnGlobalUniverseCreated>
				(block (theMission)

					; Give the "Reach the Galactic Core" mission to the player

					(setq theMission (msnCreate &msReachGalacticCore; Nil))
					(if theMission
						(msnAccept theMission)
						)
					)
			</OnGlobalUniverseCreated>
		</Events>

		<Language>
			<RTF id="description">
				{/rtf
					Called by Domina to journey to the Galactic Core, you 
					leave the safe environs of your home system and explore the
					farthest reaches of Human Space.

					But dangers stalk your passage and even Domina's protection 
					is no guarantee, for none who have been called have yet 
					returned.

					Will your pilgrimage be more successful?
				}
			</RTF>
			<Text id="openingCrawl">

				When the dream came, you knew Domina had chosen you. You would 
				sacrifice everything for the chance She offered: to join Her at 
				the Galactic Core, the eternal temple of the gods.

				Leaving your former life behind, you begin the long journey. No
				matter what obstacles lie in your path you will not fail Domina. 
				You will reach the Galactic Core.

			</Text>
			<Text id="lastPhrase.continued">To be continued...</Text>
			<Text id="lastPhrase.never">%He% never reached the Galactic Core.</Text>

			<Text id="achieve.leftHumanSpace">Left Human Space</Text>
			<Text id="achieve.neverLeftHumanSpace">Never left Human Space</Text>
		</Language>
	</AdventureDesc>
		
	<Module filename="Achievements.xml"/>
	<Module filename="Benedict00.xml"/>
	<Module filename="Benedict01.xml"/>
	<Module filename="Benedict02.xml"/>
	<!-- Benedict03 is obsolete. -->
	<Module filename="Benedict04.xml"/>
	<Module filename="Benedict05.xml"/>
	<Module filename="Benedict05A.xml"/>
	<Module filename="Benedict06.xml"/>
	<Module filename="Benedict07.xml"/>
	<Module filename="Benedict08.xml"/>
	<Module filename="BenedictStoryArc.xml"/>
	<Module filename="Elysium.xml"/>
	<Module filename="Heretic00.xml"/>
	<Module filename="Heretic01.xml"/>
	<Module filename="Heretic02.xml"/>
	<Module filename="Heretic03.xml"/>
	<Module filename="Heretic04.xml"/>
	<Module filename="Heretic05.xml"/>
	<Module filename="Heretic06.xml"/>
	<Module filename="Heretic07.xml"/>
	<Module filename="Heretic08.xml"/>
	<Module filename="Huaramarca.xml"/>
	<Module filename="HuaramarcaMission01.xml"/>
	<Module filename="HuaramarcaMission02.xml"/>
	<Module filename="HuaramarcaMission03.xml"/>
	<Module filename="HuaramarcaMission04.xml"/>
	<Module filename="HuaramarcaMission05.xml"/>
	<Module filename="HuaramarcaMission06.xml"/>
	<Module filename="HuaramarcaMission07.xml"/>
	<Module filename="Part1Compatibility.xml"/>
	<Module filename="PlayerShips.xml"/>
	<Module filename="Psych00.xml"/>
	<Module filename="Psych01.xml"/>
		
<!-- ADVENTURE MAP -->

	<SystemMap UNID="&unidPartISystemMap;"
			displayOn="&smHumanSpace;"
			>
		<Properties>
			<Global id="hereticTraveler"></Global>
			<Global id="interstellarTraveler"></Global>
			<Global id="outerRealmTraveler"></Global>
		</Properties>
			
		<TopologyCreator>
			<Node ID="NewBeyondMainline"/>
			<Stargate from="CP:Outbound" to="SK:Inbound"/>
			
			<Node ID="UngovernedTerritoriesMainline"/>
			<Stargate from="C9:Outbound" to="A1:Inbound"/>
			
			<Node ID="OuterRealmMainline"/>
			<Stargate from="G2:Outbound" to="EndGame"/>
			
			<Node ID="Elysium"/>
		</TopologyCreator>
		
		<Node	ID="EndGame"
				endGame="true"
				endGameReason="leftHumanSpace"
				epitaph="left Human Space on a journey to the Galactic Core"
				>
		</Node>

		<Node ID="Elysium">
			<System
					UNID=				"&ssElysium;"
					name=				"Elysium"
					level=				"5"
					/>

			<Stargates>
				<Stargate name="SE" to="SE:Outbound"/>
				<Stargate name="BA" to="BA:Outbound"/>
				<Stargate name="SK" to="SK:Outbound"/>
				<Stargate name="C6" to="C6:Outbound"/>
				<Stargate name="CD" to="CD:Outbound"/>
				<Stargate name="C9" to="C9:Outbound"/>
				<Stargate name="EC" to="EC:Outbound"/>
				<Stargate name="PJ" to="PJ:Outbound"/>
				<Stargate name="G2" to="G2:Inbound"/>
			</Stargates>
		</Node>

		<Events>
			<OnGlobalUniverseCreated>
				(block Nil
					;	Several well-known sites are known to the player at the beginning
					;	of the game. This will hopefully give the player various landmarks
					;	to try to reach.

					(unvSetObjectKnown 'SE "t +unid:&stStartonEridani;;")
					(unvSetObjectKnown 'BA "t +unid:&stBattleArena;;")
					(unvSetObjectKnown 'SK "tV +unid:&stStKatsArcology;;")
					(unvSetObjectKnown 'CD "t +unid:&stCathedralOfDomina;;")
					;	LATER: Add Jiang's Star
					(unvSetObjectKnown 'PJ "t +unid:&stPointJuno;;")
					(unvSetObjectKnown 'A7 "t +unid:&stCommonwealthSettlement;;")
					)
			</OnGlobalUniverseCreated>

			<OnGlobalPlayerEnteredSystem>
				(switch
					(= (sysGetNode) (obj@ gPlayerShip 'startingSystem))
						Nil

					;	Achievement when we leave our home system.

					(not (typ@ gType 'interstellarTraveler))
						(block ()
							(typSet@ gType 'interstellarTraveler True)
							(unvSetAchievement 'sotp.interstellarTraveler)
							)

					;	Achievement when we first enter the Outer Realm

					(and (sysHasAttribute 'outerRealm)
							(not (typ@ gType 'outerRealmTraveler))
							)
						(block ()
							(typSet@ gType 'outerRealmTraveler True)
							(unvSetAchievement 'humanSpace.outerRealm)
							)

					;	Achievement when we reach Heretic

					(and (= (sysGetNode) 'G2)
							(not (typ@ gType 'hereticTraveler))
							)
						(block ()
							(typSet@ gType 'hereticTraveler True)
							(unvSetAchievement 'humanSpace.heretic)
							)
					)
			</OnGlobalPlayerEnteredSystem>
		</Events>
	</SystemMap>

<!-- SPECIAL MISSIONS -->
	
	<MissionType UNID="&msReachGalacticCore;"
			name=				"Reach Galactic Core"
			attributes=			""

			level=				"10"
				 
			noDebrief=			"true"
			noStats=			"true"
			>
		
		<Image imageID="&rsGalacticCoreMissionTile;"	imageWidth="384" imageHeight="192"/>

		<Language>
			<Text id="Name">
				Reach the Galactic Core
			</Text>
			<Text id="Summary">

				When the dream came, you knew Domina had chosen you. 
				You would sacrifice everything for the chance She offered: 
				to join Her at the Galactic Core, the eternal temple of the gods.

				Leaving your former life behind, you begin the long journey. 
				No matter what obstacles lie in your path you will not fail Domina.
				You will reach the Galactic Core.

				System: Unknown\n
				Payment: Unknown

			</Text>
		</Language>
	</MissionType>

<!-- RESOURCES -->

	<Image UNID="&rsPart1Cover;"				bitmap="Resources\Part1Cover.jpg"			loadOnUse="true" />
	<Image UNID="&rsProlog1;"					bitmap="Resources\Prolog1.jpg"				loadOnUse="true" />
	<Image UNID="&rsGalacticCoreMissionTile;"	bitmap="Resources\GalacticCoreMissionTile.jpg"				loadOnUse="true" />

</TranscendenceAdventure>
</StationType>
<!-- StarSystems.xml -->
<!-- StdArmor.xml -->
<!-- StdAutons.xml -->
<!-- StdDevices.xml -->
<!-- StdDockScreens.xml -->
<!-- StdEffects.xml -->
<!-- StdFuel.xml -->
<!-- StdMiningEquipment.xml -->
<!-- StdPlayerShips.xml -->
<!-- StdShields.xml -->
<!-- StdSovereigns.xml -->
<!-- StdSystems.xml -->
<!-- StdTypes.xml -->
<StationType UNID="&stFlotsam;"
			name=				"(flotsam)"
			sovereign=			"&svNeutral;"
			inherit=			"&unidCommonText;"
			
			abandonedScreen=	"Main"

			scale=				"ship"
			mobile=				"true"
			mass=				"1"
			destroyWhenEmpty=	"true"
			noMapIcon=			"true"
			>

		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(block (
								(theItem (item (objGetItems gSource "*") 0))
								)

								(if theItem
									(block nil
										(scrSetData gScreen 'itemName (itmGetName theItem 0x08))
										(scrSetDescTranslate gScreen 'descFindItem)
									)

									(block Nil
										(scrSetDescTranslate gScreen 'descItemSecure)
										(scrShowAction gScreen 'actionLoot Nil)
										)
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionLoot" default="1">
								(scrShowScreen gScreen &dsRPGLoot;)
							</Action>

							<Action id="actionUndock" cancel="1" default="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>
				
		<Language>
			<Text id="descFindItem">(cat "You find " (scrGetData gScreen 'itemName) " floating in space.")</Text>
			<Text id="descItemSecure">"The item is secure aboard your ship."</Text>
		</Language>
	</StationType>
<StationType UNID="&stTanRuDorem;"
			name=				": Tan&#x95;Ru&#x95;Dorem"
			sovereign=			"&svNeutral;"
			dockScreen=			"Main"

			multiHull=			"true"
			immutable=			"true"
			>

		<Image imageID="&rsStations7;" imageX="0" imageY="768" imageWidth="256" imageHeight="256"/>

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts>
			<Port x="79"	y="75" />
			<Port x="0"		y="100" />
			<Port x="-73"	y="74" />
			<Port x="-109"	y="0" />
			<Port x="-87"	y="-75" />
			<Port x="0"		y="-109" />
			<Port x="82"	y="-82" />
			<Port x="109"	y="8" />
		</DockingPorts>

		<Language>
			<Text id="descWelcome">

				You are docked at a strange station, apparently devoid of inhabitants. The 
				immense docking bay is built out of a metal engraved with faintly luminous 
				hieroglyphics.
				
				The walls are warm to the touch and hum with power.

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stNavBeacon;"
			name=				"(navigational beacon)"
			sovereign=			"&svIndependent;"
			dockScreen=			"&dsNavBeacon;"
			noMapLabel=			"true"
			beacon=				"true"
			immutable=			"true"
			mass=				"2500"
			>

		<Names noArticle="true">NavBeacon %s-%0%0%0</Names>

		<DockingPorts
				maxDist=		"3"
				>
			<Port x="0"		y="24" />
			<Port x="0"		y="-24" />
			<Port x="24"	y="0" />
			<Port x="-24"	y="0" />
		</DockingPorts>

		<ImageVariants>
			<Image imageID="&rsNavBeacon;" imageX="0" imageY="0"   imageWidth="64" imageHeight="64" imageFrameCount="2" imageTicksPerFrame="120" flashTicks="3" />
			<Image imageID="&rsNavBeacon;" imageX="0" imageY="64"  imageWidth="64" imageHeight="64" imageFrameCount="2" imageTicksPerFrame="120" flashTicks="3" />
			<Image imageID="&rsNavBeacon;" imageX="0" imageY="128" imageWidth="64" imageHeight="64" imageFrameCount="2" imageTicksPerFrame="120" flashTicks="3" />
			<Image imageID="&rsNavBeacon;" imageX="0" imageY="192" imageWidth="64" imageHeight="64" imageFrameCount="2" imageTicksPerFrame="120" flashTicks="3" />
		</ImageVariants>

	</StationType>
<StationType UNID="&stDebugDepot;"
			name=				"(debug depot)"
			sovereign=			"&svIndependent;"
			dockScreen=			"Main"
			scale=				"ship"
			noMapIcon=			"true"
			>
			
		<ImageShipwreck class="&scMikeno;"/>
		
		<DockScreens>
			<Main name="Debug Depot">
				<Panes>
					<Default>
						<Actions>
							<Action name="Undock" default="1" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
	</StationType>
<!-- StdUnknownItems.xml -->
<!-- StdWeapons.xml -->
<!-- StKatharines.xml -->
<!-- Stormhound.xml -->
<!-- SungCitadel.xml -->
<StationType UNID="&stSungCitadel;"
			name=				"Sung citadel"
			sovereign=			"&svSung;"

			attributes=			"enemy, envAir, envEarth, envFire, envWater, generic, human, majorStation, populated, sungSlavers"

			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			level=				"7"
			size=				"440"
			armorID=			"&itHeavySungArmor;"
			hitPoints=			"1500"
			multiHull=			"true"
            regen=              "11"

			fireRateAdj=		"20"
			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+sungSpace;"
				systemAffinity=			"*"
				levelFrequency=			"----v urv-- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"100"
				/>

		<!-- Treasure and Items -->

		<Items>
			<Item chance="80"		count="1d4" item="&itLongzhuSphere;"/>
			<Lookup					count="1d4"	table="&trStationSupplies;" />
			<Lookup					count="1"	table="&trConsumables6;"/>
			<Lookup					count="1"	table="&trMinorItem6;"/>
			<Table>
				<Lookup chance="45" count="1" table="&trConsumables7;"/>
				<Lookup chance="30" count="1" table="&trMinorItem7;"/>
				<Lookup chance="25" count="1" table="&trMajorItem7;"/>
			</Table>
		</Items>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itCyberDeckLowerShields;"/>

			<!-- Inner Wall -->

			<Device segmentID="inner45"  deviceID="&itParticleBeamWeapon;"	posAngle="21"  posRadius="220" posZ="30"	omnidirectional="true" missileDefense="true" maxFireRange="10"/>
			<Device segmentID="inner45"  deviceID="&itParticleBeamWeapon;"	posAngle="39"  posRadius="220" posZ="30"	omnidirectional="true" missileDefense="true" maxFireRange="10"/>

			<Device segmentID="inner135" deviceID="&itParticleBeamWeapon;"	posAngle="111" posRadius="220" posZ="30"	omnidirectional="true" missileDefense="true" maxFireRange="10"/>
			<Device segmentID="inner135" deviceID="&itParticleBeamWeapon;"	posAngle="129" posRadius="220" posZ="30"	omnidirectional="true" missileDefense="true" maxFireRange="10"/>

			<Device segmentID="inner225" deviceID="&itParticleBeamWeapon;"	posAngle="201" posRadius="220" posZ="30"	omnidirectional="true" missileDefense="true" maxFireRange="10"/>
			<Device segmentID="inner225" deviceID="&itParticleBeamWeapon;"	posAngle="219" posRadius="220" posZ="30"	omnidirectional="true" missileDefense="true" maxFireRange="10"/>

			<Device segmentID="inner315" deviceID="&itParticleBeamWeapon;"	posAngle="291" posRadius="220" posZ="30"	omnidirectional="true" missileDefense="true" maxFireRange="10"/>
			<Device segmentID="inner315" deviceID="&itParticleBeamWeapon;"	posAngle="309" posRadius="220" posZ="30"	omnidirectional="true" missileDefense="true" maxFireRange="10"/>

			<!-- Outer Wall -->

			<Device segmentID="outer0"   deviceID="&itParticleBeamWeapon;"	posAngle="15"  posRadius="292" posZ="70"		omnidirectional="true" />
			<Device segmentID="outer60"  deviceID="&itParticleBeamWeapon;"	posAngle="75"  posRadius="292" posZ="70"		omnidirectional="true" />
			<Device segmentID="outer120" deviceID="&itParticleBeamWeapon;"	posAngle="135" posRadius="292" posZ="70"		omnidirectional="true" />
			<Device segmentID="outer180" deviceID="&itParticleBeamWeapon;"	posAngle="195" posRadius="292" posZ="70"		omnidirectional="true" />
			<Device segmentID="outer240" deviceID="&itParticleBeamWeapon;"	posAngle="255" posRadius="292" posZ="70"		omnidirectional="true" />
			<Device segmentID="outer300" deviceID="&itParticleBeamWeapon;"	posAngle="315" posRadius="292" posZ="70"		omnidirectional="true" />

		</Devices>

		<!-- Ships and Defenses -->

		<Ships>
			<Table>
				<Group chance="60">
					<Ship			count="1"	class="&scEarthSlaver;"		orders="patrol" patrolDist="30"/>
					<Ship			count="1d2"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
					<Ship			count="1d3"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
				<Group chance="30">
					<Ship			count="1"	class="&scEarthSlaver;"		orders="patrol" patrolDist="30"/>
					<Ship			count="1d6"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
				<Group chance="10">
					<Ship			count="1d4"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
					<Ship			count="1d6"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
			</Table>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Ship chance="50"	count="1d3"	class="&scWindSlaver;"	orders="patrol" patrolDist="20"/>
				<Ship chance="30"	count="1d2"	class="&scSteelSlaver;"	orders="patrol" patrolDist="20"/>
				<Ship chance="20"	count="1"	class="&scEarthSlaver;"	orders="patrol" patrolDist="30"/>
			</Table>
		</Reinforcements>

		<!-- Satellites -->

		<Satellites>
			<Station id="inner45"	type="&stSungCitadelInnerWall;"	imageVariant="angle45"	xOffset="124"  yOffset="62"		segment="true"/>
			<Station id="inner135"	type="&stSungCitadelInnerWall;"	imageVariant="angle135"	xOffset="-62"  yOffset="124"	segment="true"/>
			<Station id="inner225"	type="&stSungCitadelInnerWall;"	imageVariant="angle225"	xOffset="-124" yOffset="-62"	segment="true"/>
			<Station id="inner315"	type="&stSungCitadelInnerWall;"	imageVariant="angle315"	xOffset="62"   yOffset="-124"	segment="true"/>

			<Station id="outer0"	type="&stSungCitadelOuterWall;"	imageVariant="angle0"	xOffset="248"  yOffset="62"		segment="true"/>
			<Station id="outer60"	type="&stSungCitadelOuterWall;"	imageVariant="angle60"	xOffset="62"   yOffset="217"	segment="true"/>
			<Station id="outer120"	type="&stSungCitadelOuterWall;"	imageVariant="angle120"	xOffset="-186" yOffset="155"	segment="true"/>
			<Station id="outer180"	type="&stSungCitadelOuterWall;"	imageVariant="angle180"	xOffset="-248" yOffset="-62"	segment="true"/>
			<Station id="outer240"	type="&stSungCitadelOuterWall;"	imageVariant="angle240"	xOffset="-62"  yOffset="-217"	segment="true"/>
			<Station id="outer300"	type="&stSungCitadelOuterWall;"	imageVariant="angle300"	xOffset="186"  yOffset="-155"	segment="true"/>
		</Satellites>

		<!-- Images and Effects -->

		<Image			imageID="&rsSungCitadel;" imageX="1116" imageY="0" imageWidth="372" imageHeight="372" viewportRatio="0.0325"/>

		<DockingPorts
				portAngle=		"52"
				portCount=		"8"
				portRadius=		"190"
				/>

		<!-- Random Encounters -->

		<Encounters frequency="common">
			<Table>
				<Ship chance="30"	count="2d3" class="&scWindSlaver;"		orders="attack"/>
				<Group chance="60">
					<Ship			count="1"	class="&scSteelSlaver;"		orders="attack"/>
					<Ship			count="1d4"	class="&scWindSlaver;"		orders="attack"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scSteelSlaver;"		orders="attack"/>
			</Table>
		</Encounters>
	</StationType>
<StationType UNID="&stSungCitadelInnerWall;"
			name=				"Sung defense tower"
			sovereign=			"&svSung;"

			mass=				"100000"

			noMapLabel=			"true"
			noFriendlyTarget=	"true"
			destroyWhenAbandoned="true"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itSungArmor;"
				hitPoints=		"340"
				regen=			"1"
				/>

		<!-- Images and Effects -->

		<ImageVariants>
			<Image id="angle45"		imageID="&rsSungCitadel;"	imageX="0"	 imageY="310" imageWidth="248"	imageHeight="372"	viewportRatio="0.045"/>
			<Image id="angle135"	imageID="&rsSungCitadel;"	imageX="496" imageY="372" imageWidth="372"	imageHeight="248"	viewportRatio="0.045"/>
			<Image id="angle225"	imageID="&rsSungCitadel;"	imageX="248" imageY="310" imageWidth="248"	imageHeight="372"	viewportRatio="0.045"/>
			<Image id="angle315"	imageID="&rsSungCitadel;"	imageX="868" imageY="372" imageWidth="372"	imageHeight="248"	viewportRatio="0.045"/>
		</ImageVariants>

	</StationType>
<StationType UNID="&stSungCitadelOuterWall;"
			name=				"Sung defense tower"
			sovereign=			"&svSung;"

			mass=				"100000"

			noMapLabel=			"true"
			noFriendlyTarget=	"true"
			destroyWhenAbandoned="true"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Configuration -->

		<Hull 	hullType=		"multiHull"
				armorID=		"&itSungArmor;"
				hitPoints=		"220"
				regen=			"1"
				/>

		<!-- Images and Effects -->

		<ImageVariants>
			<Image id="angle0"		imageID="&rsSungCitadel;"	imageX="992" imageY="0"   imageWidth="124"	imageHeight="372"	viewportRatio="0.045"/>
			<Image id="angle60"		imageID="&rsSungCitadel;"	imageX="496" imageY="186" imageWidth="372"	imageHeight="186"	viewportRatio="0.045"/>
			<Image id="angle120"	imageID="&rsSungCitadel;"	imageX="0"   imageY="0"   imageWidth="248"	imageHeight="310"	viewportRatio="0.045"/>
			<Image id="angle180"	imageID="&rsSungCitadel;"	imageX="868" imageY="0"   imageWidth="124"	imageHeight="372"	viewportRatio="0.045"/>
			<Image id="angle240"	imageID="&rsSungCitadel;"	imageX="496" imageY="0"   imageWidth="372"	imageHeight="186"	viewportRatio="0.045"/>
			<Image id="angle300"	imageID="&rsSungCitadel;"	imageX="248" imageY="0"   imageWidth="248"	imageHeight="310"	viewportRatio="0.045"/>
		</ImageVariants>

	</StationType>
<!-- SungFortress.xml -->
<StationType UNID="&stSungFortress;"
			name=				"Sung fortress(es)"
			sovereign=			"&svSung;"

			attributes=			"enemy, envAir, envEarth, envFire, envWater, generic, human, majorStation, populated, sungSlavers"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"328"
			armorID=			"&itSungArmor;"
			hitPoints=			"400"
			multiHull=			"true"
            regen=              "11"

			explosionType=		"&vtBlastExplosion4;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+sungSpace;"
				systemAffinity=			"*"
				levelFrequency=			"---vc uu--- ----- ----- -----"

				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"100"
				/>

		<!-- Treasure and Items -->

		<Items>
			<Lookup					count="1d4"	table="&trStationSupplies;" />
			<Lookup					count="1"	table="&trConsumables6;"/>
			<Lookup					count="1"	table="&trMinorItem6;"/>
			<Table chance="75">
				<Lookup chance="40" count="1" table="&trConsumables7;"/>
				<Lookup chance="40" count="1" table="&trMinorItem7;"/>
				<Lookup chance="20" count="1" table="&trMajorItem7;"/>
			</Table>
		</Items>

		<!-- Configuration -->

		<!-- Ships and Defenses -->

		<Ships>
			<Table>
				<Ship chance="30"	count="2d6" class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				<Group chance="60">
					<Ship			count="1"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
					<Ship			count="2d4"	class="&scWindSlaver;"		orders="patrol" patrolDist="20"/>
				</Group>
				<Ship chance="10"	count="1d4"	class="&scSteelSlaver;"		orders="patrol" patrolDist="20"/>
			</Table>
		</Ships>

		<Reinforcements minShips="3">
			<Table>
				<Ship chance="75"	count="1d4"	class="&scWindSlaver;"	orders="patrol" patrolDist="20"/>
				<Ship chance="25"	count="1d2"	class="&scSteelSlaver;"	orders="patrol" patrolDist="20"/>
			</Table>
		</Reinforcements>

		<!-- Satellites -->

		<Satellites>
			<Station type="&stSungFortressWallNW;" xOffset="-99" yOffset="59"	segment="true"/>
			<Station type="&stSungFortressWallNE;" xOffset="59"  yOffset="99"	segment="true"/>
			<Station type="&stSungFortressWallSE;" xOffset="99"  yOffset="-59"	segment="true"/>
			<Station type="&stSungFortressWallSW;" xOffset="-59" yOffset="-99"	segment="true"/>
		</Satellites>

		<!-- Images and Effects -->

		<Image			imageID="&rsSungFortress;" imageX="384" imageY="0" imageWidth="260" imageHeight="260" viewportRatio="0.02"/>

		<DockingPorts
				portAngle=		"75"
				portCount=		"8"
				portRadius=		"140"
				/>

		<!-- Random Encounters -->

		<Encounters frequency="common">
			<Ship   count="1d4"	class="&scWindSlaver;" orders="attack"/>
		</Encounters>
	</StationType>
<StationType UNID="&stSungFortressWallNW;"
			name=				"Sung defense tower"
			sovereign=			"&svSung;"
			inherit=			"&baSungFortressWall;"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			noMapLabel=			"true"
			noFriendlyFire=		"true"

			mass=				"50000"
			destroyWhenAbandoned="true"
			noIndependentAttack="true"
			fireRateAdj=		"30"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	posX="-44" posY="-48" posZ="0"	omnidirectional="true"/>
		</Devices>

		<!-- Images and Effects -->

		<Image			imageID="&rsSungFortress;" imageX="0" imageY="0" imageWidth="152" imageHeight="232"/>

	</StationType>
<StationType UNID="&stSungFortressWallNE;"
			name=				"Sung defense tower"
			sovereign=			"&svSung;"
			inherit=			"&baSungFortressWall;"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			noMapLabel=			"true"
			noFriendlyFire=		"true"

			mass=				"50000"
			destroyWhenAbandoned="true"
			noIndependentAttack="true"
			fireRateAdj=		"30"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	posX="20" posY="-56" posZ="0" omnidirectional="true"/>
		</Devices>

		<!-- Images and Effects -->

		<Image			imageID="&rsSungFortress;" imageX="152" imageY="0" imageWidth="232" imageHeight="152"/>

	</StationType>
<StationType UNID="&stSungFortressWallSW;"
			name=				"Sung defense tower"
			sovereign=			"&svSung;"
			inherit=			"&baSungFortressWall;"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			noMapLabel=			"true"
			noFriendlyFire=		"true"

			mass=				"50000"
			destroyWhenAbandoned="true"
			noIndependentAttack="true"
			fireRateAdj=		"30"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	posX="-23" posY="0" posZ="0" omnidirectional="true"/>
		</Devices>

		<!-- Images and Effects -->

		<Image			imageID="&rsSungFortress;" imageX="0" imageY="232" imageWidth="232" imageHeight="152"/>

	</StationType>
<StationType UNID="&stSungFortressWallSE;"
			name=				"Sung defense tower"
			sovereign=			"&svSung;"
			inherit=			"&baSungFortressWall;"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			noMapLabel=			"true"
			noFriendlyFire=		"true"

			mass=				"50000"
			destroyWhenAbandoned="true"
			noIndependentAttack="true"
			fireRateAdj=		"30"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	posX="42" posY="-15" posZ="0" omnidirectional="true"/>
		</Devices>

		<!-- Images and Effects -->

		<Image			imageID="&rsSungFortress;" imageX="232" imageY="152" imageWidth="152" imageHeight="232"/>

	</StationType>
<!-- SungSlaveCamp.xml -->
<StationType UNID="&stSungSlaveCamp;"
			name=				"Sung slave camp"
			sovereign=			"&svSung;"

			attributes=			"enemy, envAir, envEarth, envFire, envWater, generic, human, populated, sungSlaveCamp, sungSlavers"

			abandonedScreen=	"&dsRPGAbandonedStation;"

			size=				"328"
			armorID=			"&itSungArmor;"
			hitPoints=			"150"
			multiHull=			"true"
			regen=				"4"

			fireRateAdj=		"80"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+sungSpace;"
				systemAffinity=			"*"
				levelFrequency=			"--vcu r---- ----- ----- -----"
				locationCriteria=		"+planetary"
				enemyExclusionRadius=	"60"
				/>

		<!-- Trade and Items -->

		<Items>
			<Lookup					count="1d4"	table="&trStationSupplies;" />
			<Table>
				<Lookup chance="40" count="1" table="&trConsumables5;"/>
				<Lookup chance="40" count="1" table="&trMinorItem5;"/>
				<Lookup chance="20" count="1" table="&trMajorItem5;"/>
			</Table>
		</Items>

		<!-- Configuration -->

		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true"/>
		</Devices>

		<Satellites overlapCheck="asteroids">
			<Orbitals count="6" distance="15" angle="equidistant">
				<Station type="&stSungDefenseSat1;"/>
			</Orbitals>

			<Orbitals count="3d2" distance="8" angle="equidistant:0" overlapCheck="none">
				<Station type="&stSungSlaveQuarters;"	imageVariant="quarters1" rotation="orbitPos:180"/>
			</Orbitals>

			<Orbitals count="4d2" distance="10" angle="equidistant:15" overlapCheck="none">
				<Station type="&stSungSlaveQuarters;"	imageVariant="quarters2" rotation="orbitPos:180"/>
			</Orbitals>

			<Orbitals count="5d2" distance="12" angle="equidistant:-15" overlapCheck="none">
				<Station type="&stSungSlaveQuarters;"	imageVariant="quarters3" rotation="orbitPos:180"/>
			</Orbitals>
		</Satellites>

		<!-- Ships and Defenses -->

		<Ships>
			<Ship		count="1d3+1"	class="&scWindSlaver;" orders="patrol" patrolDist="20"/>
		</Ships>

		<Encounters frequency="common">
			<Ship   count="1d4"	class="&scWindSlaver;" orders="attack"/>
		</Encounters>

		<!-- Image and Effects -->

		<Image			imageID="&rsSungKeep;" imageWidth="260" imageHeight="260" viewportRatio="0.02"/>

		<DockingPorts
				portAngle=		"30"
				portCount=		"8"
				portRadius=		"140"
				/>

		<!-- Events and Data -->

		<InitialData>
			<sung>True</sung>
		</InitialData>

		<Events>
			<OnCreate>
				;	Count the number of slave quarters in the area

				(objSetData gSource "totalSlaveCount" 
					(count (sysFindObject gSource "T:sungSlaveQuarters; N:15;"))
					)
			</OnCreate>

			<GetRumors>
				{
					attributes: "commonwealthPub"
					priority: 41
					textID: 'rumor.commonwealthPub
					}
			</GetRumors>
		</Events>

		<Language>
			<Text id="rumor.commonwealthPub">

				You spend 5 credits while listening to a drunk woman:

				"My sister-in-law was abducted by those filthy Sung. We finally
				got her released by buying her contract. I can't believe they
				allow slavery to exist. Hey, can you buy me a drink?"

			</Text>
		</Language>
	</StationType>
<StationType UNID="&stSungSlaveQuarters;"
			name=				"Sung slave quarters|Sung slave quarters"
			sovereign=			"&svSungSlaves;"

			attributes=			"sungSlaveQuarters"

			dockScreen=			"&dsSungSlaveQuarters;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			mass=				"3000"
			armorID=			"&itUltraLightTitaniumArmor;"
			hitPoints=			"30"
			structuralHitPoints="10"

			noMapLabel=			"true"
			ejectaType=			"&vtWreckEjecta;"
			>

		<!-- Image and Effects -->

		<ImageVariants>
			<Image id="quarters1"	imageID="&rsSungSlaveQuarters;" imageX="0"   imageY="0" imageWidth="100" imageHeight="100" rotationCount="12" rotationColumns="1" viewportRatio="0.005"/>
			<Image id="quarters2"	imageID="&rsSungSlaveQuarters;" imageX="100" imageY="0" imageWidth="100" imageHeight="100" rotationCount="12" rotationColumns="1" viewportRatio="0.005"/>
			<Image id="quarters3"	imageID="&rsSungSlaveQuarters;" imageX="200" imageY="0" imageWidth="100" imageHeight="100" rotationCount="12" rotationColumns="1" viewportRatio="0.005"/>
		</ImageVariants>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>

		<!-- Events and Data -->

		<InitialData>
			<sungSlave>True</sungSlave>
		</InitialData>

		<Language>
			<Text id="core.abandonedStationDesc">

				You are docked at a ruined structure once housing slaves.
				Lifeless forms float around in zero-G amid the scraps and mementos they once owned.

			</Text>
		</Language>
	</StationType>
<!-- SungSlavers.xml -->
<StationType UNID="&stSungDefenseSat1;"
			name=				"Sung defense satellite"
			sovereign=			"&svSung;"
			attributes=			"sungSlavers, staticDefense"

			abandonedScreen=	"&dsRPGAbandonedStation;"
			noMapLabel=			"true"
			fireRateAdj=		"40"
			noFriendlyFire=		"true"

			mass=				"2500"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"60"
			structuralHitPoints="20"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Image			imageID="&rsStations4;" imageX="192" imageY="0" imageWidth="32" imageHeight="32"/>

		<Devices>
			<Device deviceID="&itParticleBeamWeapon;"	omnidirectional="true"/>
		</Devices>

		<DockingPorts
				portCount=		"2"
				portRadius=		"24"
				maxDist=		"3"
				/>
	</StationType>
<!-- Tenhove.xml -->
<!-- TeratonResearch.xml -->
<!-- Teratons.xml -->
<StationType UNID="&stTeratonFactory;"
			name=				"Teraton fabricator"
			sovereign=			"&svTeratons;"
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			multiHull=			"true"
			armorID=			"&itIthaliumArmor;"
			hitPoints=			"1200"
			regen=              "24"
			fireRateAdj=		"10"
			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"envAir, envAvoidsFire, independent, friendly, generic, majorStation, populated, neoHuman, teraton, teratonFactory"

			inherit=			"&baTeratonNestBase;"
			>

		<Names>Teraton Nest</Names>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+teratonSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"----- --ruv ----- ----- -----"

				locationCriteria=		"+outerSystem, -void"
				enemyExclusionRadius=	"50"
				/>

		<Image			imageID="&rsStations9;" imageX="0" imageY="0" imageWidth="256" imageHeight="256"/>

		<Items>
			<RandomItem count="20" 
					criteria=		"* +Res; -NotStandard"
					level=			"7"
					levelCurve=		"3"
					/>
			<RandomItem count="10" 
					criteria=		"f -NotStandard"
					level=			"8"
					levelCurve=		"3"
					/>
		</Items>

		<Trade currency="rin">
			<Sell	criteria="*NU +soul;"							priceAdj="unavailable"/>
			<Sell	criteria="*NU +ringerValuable;"					priceAdj="250"/>
			<Sell	criteria="*NU +alien;"							priceAdj="120"/>
			<Sell	criteria="*NU -ID;"								priceAdj="100"/>
			<Buy	criteria="*NU +soul;"							priceAdj="constant:1000"/>
			<Buy	criteria="*NU +alien;"							priceAdj="50"/>
			<Buy	criteria="*NU +res; &gt;=6;"					priceAdj="90"/>
			<Buy	criteria="wmNU &gt;=5;"							priceAdj="50"/>
		</Trade>
		
		<StaticData>
			<FactoryTable>
				(	; pattern				minM	minE	minD	chgM	chgE	chgD	output		output level
					(&itRingerAmbrosia;		Nil		Nil		Nil		0		0		+5		Nil			Nil)
					(&itRingerSpice;		Nil		Nil		Nil		0		0		+1		Nil			Nil)
					(&itRadioactiveWaste;	Nil		Nil		Nil		0		-1		-5		Nil			Nil)
					(&itOrganicAcid;		Nil		Nil		Nil		0		0		-1		Nil			Nil)
					("* +Soul;"				Nil		Nil		Nil		0		0		"+l"	Nil			Nil)
					("* +Food; +Lux;"		Nil		1		Nil		0		-1		+1		Nil			Nil)
					("* +Res; +ZeroPoint;"	Nil		Nil		Nil		0		"+l"	0		Nil			Nil)
					("* +Res; +AntiMatter;"	Nil		Nil		Nil		0		"+l"	0		Nil			Nil)
					("* +Res; +Nuclear;"	Nil		Nil		Nil		0		"+l"	0		Nil			Nil)
					("* +Res;"				Nil		Nil		Nil		"+l"	0		0		Nil			Nil)
					("f"					Nil		Nil		Nil		0		"+l"	0		Nil			Nil)
					("a"					Nil		1		Nil		"+l"	-1		0		Nil			Nil)
					("* +Meds;"				Nil		Nil		Nil		0		0		"-l"	Nil			Nil)

					("wD L:2-7;"			"+2l"	"+2l"	2		"-2l"	"-2l"	-2		"w"			"l")
					("wD L:2-7;"			"+2l"	"+2l"	Nil		"-2l"	"-2l"	0		"w"			"l-1")
					("w L:2-7;"				"+2l"	"+2l"	2		"-2l"	"-2l"	-2		"w"			"l+1")
					("w L:2-7;"				"+2l"	"+2l"	Nil		"-2l"	"-2l"	0		"w"			"l")
					("wD L:8-10;"			"+2l"	"+2l"	5		"-2l"	"-2l"	-5		"w"			"l-1")
					("wD L:8-10;"			"+2l"	"+2l"	2		"-2l"	"-2l"	-2		"w"			"l-2")
					("w L:8-10;"			"+2l"	"+2l"	5		"-2l"	"-2l"	-5		"w"			"l")
					("w L:8-10;"			"+2l"	"+2l"	2		"-2l"	"-2l"	-2		"w"			"l-1")

					("sD L:2-7;"			"+l"	"+l"	2		"-l"	"-l"	-2		"s"			"l")
					("sD L:2-7;"			"+l"	"+l"	Nil		"-l"	"-l"	0		"s"			"l-1")
					("s L:2-7;"				"+l"	"+l"	2		"-l"	"-l"	-2		"s"			"l+1")
					("s L:2-7;"				"+l"	"+l"	Nil		"-l"	"-l"	0		"s"			"l")
					("sD L:8-10;"			"+l"	"+l"	5		"-l"	"-l"	-5		"s"			"l-1")
					("sD L:8-10;"			"+l"	"+l"	2		"-l"	"-l"	-2		"s"			"l-2")
					("s L:8-10;"			"+l"	"+l"	5		"-l"	"-l"	-5		"s"			"l")
					("s L:8-10;"			"+l"	"+l"	2		"-l"	"-l"	-2		"s"			"l-1")

					("vrD L:2-7;"			"+l"	"+2l"	2		"-l"	"-2l"	-2		"vr"		"l")
					("vrD L:2-7;"			"+l"	"+2l"	Nil		"-l"	"-2l"	0		"vr"		"l-1")
					("vr L:2-7;"			"+l"	"+2l"	2		"-l"	"-2l"	-2		"vr"		"l+1")
					("vr L:2-7;"			"+l"	"+2l"	Nil		"-l"	"-2l"	0		"vr"		"l")
					("vrD L:8-10;"			"+l"	"+2l"	5		"-l"	"-2l"	-5		"vr"		"l-1")
					("vrD L:8-10;"			"+l"	"+2l"	2		"-l"	"-2l"	-2		"vr"		"l-2")
					("vr L:8-10;"			"+l"	"+2l"	5		"-l"	"-2l"	-5		"vr"		"l")
					("vr L:8-10;"			"+l"	"+2l"	2		"-l"	"-2l"	-2		"vr"		"l-1")

					("d~swvrD L:2-7;"		"+l"	"+l"	2		"-l"	"-l"	-2		"d~swvr"	"l")
					("d~swvrD L:2-7;"		"+l"	"+l"	Nil		"-l"	"-l"	0		"d~swvr"	"l-1")
					("d~swvr L:2-7;"		"+l"	"+l"	2		"-l"	"-l"	-2		"d~swvr"	"l+1")
					("d~swvr L:2-7;"		"+l"	"+l"	Nil		"-l"	"-l"	0		"d~swvr"	"l")
					("d~swvrD L:8-10;"		"+l"	"+l"	5		"-l"	"-l"	-5		"d~swvr"	"l-1")
					("d~swvrD L:8-10;"		"+l"	"+l"	2		"-l"	"-l"	-2		"d~swvr"	"l-2")
					("d~swvr L:8-10;"		"+l"	"+l"	5		"-l"	"-l"	-5		"d~swvr"	"l")
					("d~swvr L:8-10;"		"+l"	"+l"	2		"-l"	"-l"	-2		"d~swvr"	"l-1")

					("d"					Nil		Nil		Nil		"+l"	"+l"	"-l"	Nil			Nil)

					("m &lt;11"				"+l"	"+l"	Nil		"-l"	"-l"	0		"replicate"	Nil)
					("m &lt;16"				"+2l"	"+2l"	Nil		"-2l"	"-2l"	0		"replicate"	Nil)

					(Nil					Nil		Nil		Nil		0		0		0		Nil			Nil)
					)
			</FactoryTable>
		</StaticData>

		<Events>
			<OnCreate>
				(block (allFoods)
					; Set energy, material, and disposition randomly
					(objSetData gSource "disposition" (random -1 1))
					(objSetData gSource "energy" (random -2 2))
					(objSetData gSource "material" (random -2 2))

					; The "bias" of the creature alters its tells
					(objSetData gSource "bias" (random -2 2))

					; Make a list of the creature's food preferences
					(setq allFoods (shuffle (itmGetTypes "* +Food; +Lux; -UNID:&itRingerAmbrosia;; -UNID:&itRingerSpice;;")))
					(objSetData gSource "love" (subset allFoods 0 2))
					(objSetData gSource "hate" (subset allFoods 2 4))
					)
			</OnCreate>
		</Events>

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionFabricatorChamber" default="1">
								<Navigate screen="Factory"/>
							</Action>

							<Action id="actionCommoditiesExchange">
								(if (not (intTeratonMugging))
									(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>

			<Factory>

				<Panes>
					<Default>
						<OnPaneInit>
							(block (disposition energy material lastItemDrop numberLeft)
								(setq disposition (add (objGetData gSource "disposition") (objGetData gSource "bias")))
								(setq energy (objGetData gSource "energy"))
								(setq material (objGetData gSource "material"))
								(setq lastItemDrop (objGetData gSource 'lastItemDrop))
								(setq numberLeft (objHasItem gPlayerShip lastItemDrop 1))
								
								;	Set the item as screen data because gSource isn't defined in Language elements.
								(scrSetData gScreen 'lastItemDrop lastItemDrop)
								
								;	Make the action backgrounds max. width.
								(scrSetActionDesc gScreen 'actionDummy "This text needs to be loooooooooooooooooooooooooooooooooooooooooooooong.")
								(scrShowAction gScreen 'actionDummy Nil)
								
								(switch
									(not lastItemDrop)
										(scrShowAction gScreen 'actionDropAnother Nil)
									numberLeft
										(scrSetActionDesc gScreen 'actionDropAnother (scrTranslate gScreen 'actionDescDropAnother { number:numberLeft }))
									(block nil
										(scrEnableAction gScreen 'actionDropAnother Nil)
										(scrSetActionDesc gScreen 'actionDropAnother (scrTranslate gScreen 'actionDescNoneLeft))
										)
									)
									
								(scrSetDesc gScreen
									(cat (scrTranslate gScreen 'descFactory)
										"\n\n"
										(switch
											(geq disposition 7)
												"The organic mass purrs with contentment."

											(geq disposition 2)
												"The organic mass appears calm."

											(geq disposition 0)
												"The organic mass appears wary."

											(ls disposition -7)
												"The organic mass flails its tentacles in rage."

											"The organic mass appears restless and angry."
											)

										(switch
											(leq energy 0)
												" It has 0 energy points"

											(eq energy 1)
												" It has 1 energy point"

											(cat " It has " energy " energy points")
											)

										(switch
											(leq material 0)
												" and 0 material points."

											(eq material 1)
												" and 1 material point."

											(cat " and " material " material points.")
											)
										)
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionDropItem" default="1">
								<Navigate screen="DropItem"/>
							</Action>
							
							<Action id="actionDropAnother">
								(intFabricatorDropItem (objGetData gSource 'lastItemDrop))
							</Action>
							
							<Action id="actionDummy"/>

							<Action id="actionLeave" cancel="1">
								<Navigate screen="Main"/>
							</Action>
						</Actions>
					</Default>

					<Result>
						<OnPaneInit>
							(scrSetDesc gScreen (scrGetData gScreen 'dropResult))
						</OnPaneInit>

						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(if (and (ls (objGetData gSource "disposition") -9) (leq (random 1 100) 25))
									(scrShowPane gScreen "AngryTentacles")
									(scrShowPane gScreen "Default")
									)
							</Action>
						</Actions>
					</Result>

					<AngryTentacles descID="descAngryTentacles">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(block Nil
									(plyDestroyed gPlayer "was eaten by an angry Teraton fabricator")
									(scrExitScreen gScreen 'forceUndock)
									)
							</Action>
						</Actions>
					</AngryTentacles>
				</Panes>
			</Factory>

			<DropItem
				type=			"itemPicker"
				>

				<ListOptions
					dataFrom=	"player"
					list=		"*U -ID; -questItem;"
					/>

				<Panes>
					<Default>
						<OnPaneInit>
							(block nil
								(scrSetDescTranslate gScreen 'descDropItem)
								(if (not (scrGetItem gScreen))
									(block nil
										(scrSetActionDesc gScreen 'actionDropThis (scrTranslate gScreen 'descNoItemsHere))
										(scrEnableAction gScreen 'actionDropThis Nil)
										)
									)
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionDropThis" default="1">
								(intFabricatorDropItem (scrGetItem gScreen))
							</Action>

							<Action id="actionCancel" cancel="1">
								<Navigate screen="Factory"/>
							</Action>
						</Actions>
					</Default>

				</Panes>
			</DropItem>

		</DockScreens>

		<DockingPorts>
			<Port x="-64"	y="77" />
			<Port x="-32"	y="126" />
			<Port x="0"		y="77" />
			<Port x="78"	y="-20" />
			<Port x="124"	y="-80" />
			<Port x="54"	y="-80" />
			<Port x="-40"	y="-68" />
			<Port x="-106"	y="-64" />
			<Port x="-72"	y="0" />
		</DockingPorts>

		<Language>
			<Text id="actionFabricatorChamber">[F]abricator Chamber</Text>
			<Text id="actionDropItem">[D]rop Item in Pit</Text>
			<Text id="actionDropThis">[D]rop this Item</Text>
			<Text id="actionDropAnother">
				(block (text)
					(setq text (typTranslate gType 'actionDropAnotherText {
						itemName:(itmGetName (scrGetData gScreen 'lastItemDrop) 0x400)
						}))
					(if (gr (count text) 46)
						(setq text (cat (subset text 0 45)
										(typTranslate &unidCommonText; 'ellipsis)
							))
						)
					text
					)
			</Text>
			<Text id="actionDropAnotherText">Drop [A]nother %itemName%</Text>
			<Text id="actionDescDropAnother">
				"You have %number% left."
			</Text>
			<Text id="actionDescNoneLeft">
				"You have none left."
			</Text>
			
			<Text id="descDropItem">What item do you wish to drop into the Teraton pit?</Text>
			<Text id="descFactory">
				You are in the vast central chamber of the Teraton nest. A
				large pit in the center of the cavern is inhabited by a mass
				of tentacles, cilia, and grotesque organs.
			</Text>
			<Text id="descResultNewItem">
				Tentacles reach out to accept your offering and the organic mass
				swallows it with a hiss. Organs gurgle and glow for a while, and
				then tentacles pull a slimy mass out of some orifice and deposit
				it at your feet.

				You see %itemName%.
			</Text>
			<Text id="descResultLike">
				Tentacles eagerly reach out to accept your offering and the
				organic mass swallows it with a hiss.

				The organic mass spews a sweet, pleasant mist.
			</Text>
			<Text id="descResultDislike">
				Tentacles reach out to accept your offering and the organic
				mass tentatively swallows it.

				With a roar of anger, the organic mass spews a thick mist of
				bile. You are covered in a slimy broth of chemicals.
			</Text>
			<Text id="descResultFeed">
				Tentacles reach out to accept your offering and the organic
				mass swallows it.

				Organs and bladders gurgle as they process the %food% you have
				fed them.
			</Text>
			<Text id="descResultDiscard">
				Tentacles reach out to accept your offering, but after a
				tentative taste they discard it through one of the many tunnels
				along the wall of the pit.
			</Text>
			<Text id="descResultUnknown">
				Tentacles reach out to accept your offering, but after a
				tentative taste, they crush it and discard it through one of
				the many tunnels along the wall of the pit.
			</Text>
			<Text id="descAngryTentacles">
				Angered by your offerings, the tentacles of the pit reach out
				to grab you. Before you can run, they slip around your neck
				and waist and pull you down into the pit.

				You are dissolved by the various acids and enzymes of the
				grotesque organic mass.
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stTeratonResearch;"
			name=				"Teraton research center"
			sovereign=			"&svTeratons;"
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			multiHull=			"true"
			armorID=			"&itIthaliumArmor;"
			hitPoints=			"1200"
			regen=              "24"
			fireRateAdj=		"10"
			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"envAir, envAvoidsFire, generic, independent, friendly, majorStation, populated, neoHuman, teraton, teratonResearch"

			inherit=			"&baTeratonNestBase;"
			>

		<Names>Teraton Nest</Names>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+teratonSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"----- --rr- ----- ----- -----"

				locationCriteria=		"+outerSystem, -void"
				enemyExclusionRadius=	"50"
				/>

		<Image			imageID="&rsStations9;" imageX="0" imageY="0" imageWidth="256" imageHeight="256"/>

		<Items>
			<RandomItem count="12" 
					criteria=		"* -NotStandard"
					level=			"7"
					levelCurve=		"1"
					/>
			<RandomItem count="1d2" 
					criteria=		"* +Alien; -NotStandard;"
					level=			"9"
					levelCurve=		"3"
					/>
		</Items>

		<Trade currency="rin">
			<Sell	criteria="*NU +soul;"							priceAdj="unavailable"/>
			<Sell	criteria="*NU +ringerValuable;"					priceAdj="250"/>
			<Sell	criteria="*NU +alien;"							priceAdj="120"/>
			<Sell	criteria="*NU -ID;"								priceAdj="100"/>
			<Buy	criteria="*NU +soul;"							priceAdj="constant:1000"/>
			<Buy	criteria="*NU +alien;"							priceAdj="50"/>
			<Buy	criteria="*NU +res; &gt;=6;"					priceAdj="90"/>
			<Buy	criteria="wmNU &gt;=5;"							priceAdj="50"/>
		</Trade>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionResearchChamber" default="1">
								(rpgMissionAssignment {
									missionCriteria: (cat "n +teratonResearch; =" (sysGetLevel) ";")
									noMissionTextID: 'descResearchNone
									})
							</Action>

							<Action id="actionCommoditiesExchange">
								(if (not (intTeratonMugging))
									(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>

		</DockScreens>

		<DockingPorts>
			<Port x="-64"	y="77" />
			<Port x="-32"	y="126" />
			<Port x="0"		y="77" />
			<Port x="78"	y="-20" />
			<Port x="124"	y="-80" />
			<Port x="54"	y="-80" />
			<Port x="-40"	y="-68" />
			<Port x="-106"	y="-64" />
			<Port x="-72"	y="0" />
		</DockingPorts>

		<Language>
			<Text id="actionResearchChamber">[R]esearch Chamber</Text>

			<Text id="descResearchNone">
				You enter a dim cavern filled with arcane equipment. Dozens of
				human subjects, wired, tubed, and in various stages of health
				and wholeness, lie on articulated beds. A tall Teraton with
				supernumerary fingers tends to the patients with a mixture of
				curiosity and concern.
			</Text>
		</Language>
	</StationType>
<StationType UNID="&stTeratonTradingPost;"
			name=				"Teraton trading post"
			sovereign=			"&svTeratons;"
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			multiHull=			"true"
			armorID=			"&itIthaliumArmor;"
			hitPoints=			"1200"
			regen=              "20"
			fireRateAdj=		"10"
			explosionType=		"&vtThermoExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"envAir, envAvoidsFire, generic, independent, friendly, majorStation, populated, neoHuman, teraton, teratonTrading"

			inherit=			"&baTeratonNestBase;"
			>

		<Names>Teraton Nest</Names>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+teratonSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"----- -vcuv ----- ----- -----"

				locationCriteria=		"+outerSystem, -void"
				enemyExclusionRadius=	"50"
				/>

		<Image			imageID="&rsStations9;" imageX="0" imageY="0" imageWidth="256" imageHeight="256"/>

		<Items>
			<RandomItem count="20" 
					criteria=		"* -NotStandard"
					level=			"7"
					levelCurve=		"1"
					/>
			<RandomItem count="10" 
					criteria=		"adm -NotStandard"
					level=			"8"
					levelCurve=		"1"
					/>
			<RandomItem count="5" 
					criteria=		"wm -NotStandard"
					level=			"9"
					levelCurve=		"2"
					/>
			<RandomItem count="5" 
					criteria=		"fmut +Consumable; -NotStandard;"
					level=			"10"
					levelCurve=		"2"
					/>
		</Items>

		<Trade currency="rin">
			<Sell	criteria="*NU +soul;"							priceAdj="unavailable"/>
			<Sell	criteria="*NU +ringerValuable;"					priceAdj="250"/>
			<Sell	criteria="*NU +alien;"							priceAdj="120"/>
			<Sell	criteria="*NU -ID;"								priceAdj="100"/>
			<Buy	criteria="*NU +soul;"							priceAdj="constant:1000"/>
			<Buy	criteria="*NU +alien;"							priceAdj="50"/>
			<Buy	criteria="*NU +res; &gt;=6;"					priceAdj="90"/>
			<Buy	criteria="wmNU &gt;=5;"							priceAdj="50"/>
		</Trade>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionCommoditiesExchange">
								(if (not (intTeratonMugging))
									(scrShowScreen gScreen &dsRPGCommoditiesExchange;)
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>

					</Default>
				</Panes>
			</Main>

		</DockScreens>

		<DockingPorts>
			<Port x="-64"	y="77" />
			<Port x="-32"	y="126" />
			<Port x="0"		y="77" />
			<Port x="78"	y="-20" />
			<Port x="124"	y="-80" />
			<Port x="54"	y="-80" />
			<Port x="-40"	y="-68" />
			<Port x="-106"	y="-64" />
			<Port x="-72"	y="0" />
		</DockingPorts>

	</StationType>
<StationType UNID="&stTeratonChrysalis;"
			name=				"Teraton chrysalis(es)"
			sovereign=			"&svTeratons;"
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"4"
			noMapLabel=			"true"
			noFriendlyFire=		"true"

			multiHull=			"true"
			mass=				"5000"
			armorID=			"&itLightIthaliumArmor;"
			hitPoints=			"250"
			regen=				"10"
			structuralHitPoints="20"
			fireRateAdj=		"20"
			ejectaType=			"&vtWreckEjecta;"
			
			attributes=			"teraton, teratonChrysalis"
			>

		<Image	imageID="&rsTeratonChrysalis;" imageWidth="100" imageHeight="100"/>
		
		<Language>
			<Text id="actionUndock">[U]ndock</Text>

			<Text id="descWelcome">
				You are docked with a Teraton chrysalis&mdash;a pulsing mass
				of biomechanical systems. You see a bony structure taking
				shape inside the large spherical structure.
			</Text>
			<Text id="core.abandonedStationDesc">

				You are docked at the dead remains of a Teraton chrysalis.
				The bony, motionless mass at its center bleeds an ochre fluid.

			</Text>
		</Language>
		
		<Events>
			<OnBehavior>
				(block (openTime)
					(if (and (setq openTime (objGetData gSource "openTime"))
							(geq (unvGetTick) openTime)
							(not (objIsAbandoned gSource)))
						(block (theType theObj)
							; Create open animation effect
							(sysCreateEffect &efTeratonChrysalisOpen; Nil (objGetPos gSource))
							
							; Create the object
							(setq theType (objGetData gSource "type"))
							(switch
								(eq theType 'defender)
									(block (theBase)
										(setq theObj (sysCreateStation &stTeratonDefender; (objGetPos gSource)))
										
										; Find the nearest Teraton nest and make this a subordinate
										(if (setq theBase (sysFindObject gSource "TAN +teraton; +populated"))
											(objAddSubordinate theBase theObj)
											)
										)
								)
							
							; Destroy ourselves
							(objDestroy gSource)
							)
						)
					)
			</OnBehavior>
			
			<OnCreate>
				(sysAddObjRecurringTimerEvent 30 gSource "OnBehavior")
			</OnCreate>
		</Events>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

	</StationType>
<StationType UNID="&stTeratonDefender;"
			name=				"Teraton Defender"
			sovereign=			"&svTeratons;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"4"
			noMapLabel=			"true"
			noFriendlyFire=		"true"

			multiHull=			"true"
			mass=				"5000"
			armorID=			"&itLightIthaliumArmor;"
			hitPoints=			"150"
			structuralHitPoints="40"
			fireRateAdj=		"20"
			ejectaType=			"&vtWreckEjecta;"
			
			attributes=			"generic, staticDefense, teraton, teratonDefender"
			>

		<Image	imageID="&rsTeratonDefender;" imageWidth="64" imageHeight="64" imageFrameCount="12" imageTicksPerFrame="2"/>

		<Devices>
			<Device deviceID="&itKytrynBlaster;"	omnidirectional="true"/>
		</Devices>

		<Language>
			<Text id="core.abandonedStationDesc">

				You are docked at the dead remains of a Teraton defender.
				Wisps of high-energy plasma vent from holes along a bony central mass.

			</Text>
		</Language>
	</StationType>
<!-- Tinkers.xml -->
<StationType UNID="&stTinkerGathering;"
			name=				"Tinker gathering"
			sovereign=			"&svTinkers;"
				 
			attributes=			"envEarth, envAvoidsAir, friendly, generic, human, independent, majorStation, populated, tinkers"
				 
			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"5"
			size=				"110"
			armorID=			"&itReinforcedTitanium1;"
			hitPoints=			"250"
			regen=              "2"
			multiHull=			"true"
			fireRateAdj=		"20"
				 
			explosionType=		"&vtBlastExplosion2;"
			ejectaType=			"&vtWreckEjecta;"
			>

		<Properties>
			<!--
			By default we accept any military ID (even ones from APD or ED),
			but we do not check illegals.
			-->
			<Definition	id="rpg.checkMilitaryID">	"* +militaryID;"</Definition>
			<Definition id="rpg.checkIllegals">		Nil</Definition>
		</Properties>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+tinkerSpace;"
				systemAffinity=			"+envEarth; -envAir;"
				levelFrequency=			"uccuu r---- ----- ----- -----"

				locationCriteria=		"+asteroids, -asteroidbelt"
				enemyExclusionRadius=	"50"

				unique=					"inSystem"
				/>

		<Names noArticle="true">

			Tinker Alvarez; Tinker Anand; Tinker Bell; Tinker Brill; 
			Tinker Curie; Tinker Cray; Tinker Draper; Tinker Edison; 
			Tinker Fermi; Tinker Goddard; Tinker Hale; Tinker Hopper; 
			Tinker Hypatia; Tinker Julian; Tinker Kroll; Tinker Kwolek; 
			Tinker Lawrence; Tinker Lovelace; Tinker Mazor; Tinker Noyce; 
			Tinker Olsen; Tinker Orban; Tinker Plank; Tinker Rohrer; 
			Tinker Sikorsky; Tinker Telkes; Tinker Tesla; 
			Tinker Tsiolkovsky; Tinker Vorster; Tinker Wang;

		</Names>
		
		<!-- Trade and Items -->
		
		<Trade currency="credit">
			<Sell	criteria="*U -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="*DU -Illegal; -ID; -NotForSale;"	priceAdj="100"/>
			<Buy	criteria="*DU -Illegal; -ID;"				priceAdj="50"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-8;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-8;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-8;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-8;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-8;" priceAdj="100"/>
		</Trade>
		
		<Items>
			<RandomItem count="3d6" 
					criteria=		"aswd -Illegal; -Military; -NotStandard; -NotForSale;"
					level=			"3"
					levelCurve=		"2"
					damaged=		"100"
					/>
		</Items>

		<!-- Configuration -->
		
		<Devices>
			<Device deviceID="&itFlenserCannon;"	omnidirectional="true"/>
		</Devices>
		
		<!-- Ships and Defenses -->

		<Ships>
			<Lookup count="1d4" table="&tbCommDefenders;"/>
			<Lookup count="1d2" table="&tbCommPrivateCrafts;"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Lookup chance="75" table="&tbCommDefenders;"/>
				<Lookup chance="25" table="&tbCommPrivateCrafts;"/>
			</Table>
		</Reinforcements>
		
		<!-- Image and Effects -->
		
		<ImageVariants>
			<Image	imageID="&rsTinkerStations;" imageX="0"   imageY="0"   imageWidth="130" imageHeight="130"/>
			<Image	imageID="&rsTinkerStations;" imageX="0"   imageY="130" imageWidth="130" imageHeight="130"/>
		</ImageVariants>

		<DockingPorts>
			<Port x="0"		y="90" />
			<Port x="0"		y="-90" />
			<Port x="60"	y="60" />
			<Port x="60"	y="-60" />
			<Port x="90"	y="0" />
			<Port x="-90"	y="0" />
			<Port x="-60"	y="60" />
			<Port x="-60"	y="-60" />
		</DockingPorts>
		
		<!-- Dock Screens -->
		
		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descWelcome">
						<Actions>
							<Action id="actionBuyScrap" default="1">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeBuy;)
							</Action>

							<Action id="actionSellScrap">
								(scrShowScreen gScreen &dsRPGCommoditiesExchangeSell;)
							</Action>

							<Action id="actionCustomWork">
								(if (objGetData gSource 'customIntroDone)
									(scrShowScreen gScreen &dsTinkerCustomWork; {
										criteria: "* +hasComponents:true; +tinkers;"
										})
									(scrShowPane gScreen "CustomWorkIntro")
									)
							</Action>

							<Action id="actionDockServices">
								(rpgDockServices gPlayerShip)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
						
					<CustomWorkIntro descID="descCustomWorkIntro">
						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(block Nil
									(objSetData gSource 'customIntroDone True)
									(scrShowPane gScreen "Default")
									(scrShowScreen gScreen &dsTinkerCustomWork; {
										criteria: "* +hasComponents:true; +tinkers;"
										})
									)
							</Action>
						</Actions>
					</CustomWorkIntro>
				</Panes>
			</Main>

			<Decon>
				<Panes>
					<Default>
						<OnPaneInit>
							(block (
								; Figure out how much it would cost to make the ship immune to radiation
								(cost (* 400 (shpGetArmorCount gPlayerShip)))
								)

								(if (geq (plyGetCredits gPlayer) cost)
									(scrSetDescTranslate gScreen 'descDecon { cost:(fmtCurrency 'credit cost) })
									(scrSetDescTranslate gScreen 'descDeconCantAfford)
									)
								(scrSetData gScreen 'deconCost cost)
								(scrEnableAction gScreen 'actionDecon (geq (plyGetCredits gPlayer) cost))
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionDecon" default="1">
								(block (
									(cost (scrGetData gScreen 'deconCost))
									(armorEnhanced 0)
									)
									;	Decontaminate
									(plyCharge gPlayer cost)
									(shpDecontaminate gPlayerShip)

									;	Make immune
									(objEnumItems gPlayerShip "aI" theItem
										(block (result)
											(setq result (shpEnhanceItem gPlayerShip theItem {
												enhancement: "+immunity:radiation"
												type: &itRadiationImmuneCoating;
												}))

											(switch
												(or (eq result 0) (eq result 2) (eq result 6) (eq result 7))
													(setq armorEnhanced (add armorEnhanced 1))
												)
											)
										)

									;	Compose the result
									(switch
										(= armorEnhanced (shpGetArmorCount gPlayerShip))
											(scrSetData gScreen 'deconResult 'descDeconImmune)

										(= armorEnhanced 0)
											(scrSetData gScreen 'deconResult 'descDeconNotImmune)

										(scrSetData gScreen 'deconResult 'descDeconPartialImmune)
										)

									(scrShowPane gScreen "DeconDone")
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								(scrExitScreen gScreen 'forceUndock)
							</Action>
						</Actions>

					</Default>

					<DeconDone>
						<OnPaneInit>
							(scrSetDescTranslate gScreen (scrGetData gScreen 'deconResult))
						</OnPaneInit>

						<Actions>
							<Action id="actionContinue" default="1" cancel="1">
								(scrShowScreen gScreen "Main")
							</Action>
						</Actions>
					</DeconDone>
				</Panes>
			</Decon>
		</DockScreens>
		
		<!-- Events and Behavior -->

		<StaticData>
			<CustomWork>
				(
					(&itTitaniumOre;		2	&itLightTitaniumArmor;)
					(&itHeavyWater;			4	&itLightXMHArmor;)
					(&itSiliconArmorPatch;	4	&itPhotorepairArmor;)
					(&itCarbonSpool;		2	&itHeavyCeramicPlate;)
					(&itPlasteelOre;		4	&itPlasteelPlate;)
					(&itHyperfiberRoll;		4	&itLightTevlarArmor;)
					(&itDuralloyOre;		5	&itDuralloyArmor;)
					(&itReactiveArmor;		4	&itAdvancedReactiveArmor;)
					(&itCeralloyOre;		5	&itCeralloyArmor;)
					(&itOrthoSteelOre;		10	&itOrthoSteel;)

					(&itClass1Deflector;	4	&itSolonShieldGenerator;)
					(&itClass2Deflector;	2	&itSolonShieldGenerator;)
					(&itSuperconductingCoil; 8	&itSuperconductingShields;)

					(&itRecoillessCannon;	4	&itDualRecoillessCannon;)
					(&itLaserCannon;		8	&itLaserArray;)
					(&itPartisanCannon;		2	&itSmartCannon;)
					(&itTurbolaserCannon;	4	&itDualTurbolaserCannon;)
					(&itRadioactiveWaste;	8	&itWasteCannon;)
					(&itFusionTrigger;		1	&itXM900Missile;)

					(&itRepairingNanos;		6	&itArmorRepairDevice;)
					)
			</CustomWork>
		</StaticData>

		<Events>
			<GetDockScreen>
				; If the ship is radioactive then we need to decontaminate
				(if (and (shpIsRadioactive gPlayerShip)
						(not (objIsAbandoned gSource))
						)
					(list "Decon" 10)
					Nil
					)
			</GetDockScreen>
		</Events>
		
		<Language>
			<Text id="actionBuyScrap">[B]uy Scrap</Text>
			<Text id="actionCustomWork">[C]ustom Work</Text>
			<Text id="actionDockServices">[D]ock Services</Text>
			<Text id="actionSellScrap">[S]ell Scrap</Text>
			<Text id="actionDecon">[D]econtaminate</Text>
			<Text id="actionContinue">[C]ontinue</Text>
			<Text id="actionUndock">[U]ndock</Text>
			
			<Text id="descWelcome">
				You are docked at a station belonging to the Tinkers Guild.
				The docking bay is decorated with various ancient devices of
				unknown origin and purpose.
			</Text>
			<Text id="descCustomWorkIntro">
				You're in a machine shop surrounded by moving autowelders and
				cutters. A dark-skinned woman stands amid the chaos holding a
				datapad.

				"We have a list of items we can fabricate for you. You'll need
				to provide the required scrap items or raw materials plus
				fabrication cost."
			</Text>

			<Text id="descDecon">
				A woman in a hazmat suit meets you at the airlock.

				"Seriously, your ship is pretty toxic. Do you want us to take
				care of it? We can fix it for %cost%."
			</Text>
			<Text id="descDeconCantAfford">
				A woman in a hazmat suit meets you at the airlock.

				"Ugh, your ship is pretty toxic. Please come back after you've
				deconned!"
			</Text>
			<Text id="descDeconImmune">
				The woman in the hazmat suit decontaminates your ship with
				various robots. She applies borocarbide paste to your ship.

				"The new borocarbide coating will make your ship immune to
				radiation."
			</Text>
			<Text id="descDeconPartialImmune">
				The woman in the hazmat suit decontaminates your ship with
				various robots. She applies borocarbide paste to your ship.

				"I tried to make your ship immune to radiation, but it didn't
				fully work. You must have some other coatings on your armor."
			</Text>
			<Text id="descDeconNotImmune">
				The woman in the hazmat suit decontaminates your ship with
				various robots. She applies borocarbide paste to your ship.

				"I tried to make your ship immune to further contamination, but
				it didn't take. You must have some other coatings on your armor."
			</Text>

			<Text id="rpg.stationWillNotBuy">

				%StationName% buys damaged items. We are not 
				interested in buying %itemName%.

			</Text>
			<Text id="core.mapDesc">
				Fabricates special items &mdash; Repairs/installs armor up to level 8 &mdash; Buys and sells scrap
			</Text>
		</Language>
	</StationType>
<!-- Transcendence.xml -->
<!-- UndergroundCaverns.xml -->
<!-- UndergroundStructures.xml -->
<!-- UrakWarlords.xml -->
<StationType UNID="&stUrakOutpost;"
			name=				"Urak outpost"
			sovereign=			"&svUrakWarlords;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			multiHull=			"true"
			armorID=			"&itUrakArmorLight;"
			hitPoints=			"60"
			regen=				"1"
			fireRateAdj=		"60"
			explosionType=		"&vtKineticExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, envAir, envAvoidsFire, generic, human, populated, urakWarlords"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+urakSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"rcuv- ----- ----- ----- -----"

				locationCriteria=		"-innerSystem, -void"
				enemyExclusionRadius=	"50"
				/>

		<Image			imageID="&rsStations2;" imageX="128" imageY="0" imageWidth="128" imageHeight="128"/>

		<Devices>
			<Device deviceID="&itSlamCannon;"	omnidirectional="true"/>
		</Devices>

		<Ships>
			<Ship				count="1d4" class="&scUrakSentinel;" orders="patrol" patrolDist="5"/>
		</Ships>

		<Reinforcements minShips="3">
			<Ship				count="1d2" class="&scUrakSentinel;" orders="patrol" patrolDist="5"/>
		</Reinforcements>

		<Items>
			<Group value="standard:level=2:x=2.0">
				<Table>
					<Lookup chance="30" count="1" table="&trConsumables3;"/>
					<RandomItem chance="30"
							criteria=			"* +Res; -NotStandard;"
							levelFrequency=		"rucur"
							/>
					<Item chance="15" count="1d4" item="&itUrakArmorLight;"/>
					<Item chance="10" count="1" item="&itUrakMassDriver;"/>
					<Lookup chance="10" count="1" table="&trMinorItem3;"/>
					<Lookup chance="5" count="1" table="&trMajorItem3;"/>
				</Table>
			</Group>
		</Items>

		<DockingPorts>
			<Port x="11"	y="60" />
			<Port x="83"	y="44" />
			<Port x="59"	y="-12" />
			<Port x="54"	y="-81" />
			<Port x="-19"	y="-60" />
			<Port x="-88"	y="-51" />
			<Port x="-60"	y="11" />
			<Port x="-50"	y="74" />
		</DockingPorts>
	</StationType>
<StationType UNID="&stUrakMine;"
			name=				"Urak mine"
			sovereign=			"&svUrakWarlords;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			fireRateAdj=		"60"
			explosionType=		"&vtKineticExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"asteroidBase, enemy, envAir, envAvoidsFire, generic, human, populated, urakWarlords"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+urakSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"-vcuv ----- ----- ----- -----"

				locationCriteria=		"+outerSystem"
				enemyExclusionRadius=	"50"
				/>

		<!-- Configuration -->

		<Hull 	hullType=		"asteroidHull"
				armorID=		"&itUrakArmorLight;"
				hitPoints=		"120"
				regen=			"1"
				/>
		
		<Devices>
			<Device deviceID="&itUrakHowitzer;" omnidirectional="true"/>
		</Devices>

		<!-- Ships and Defenses -->

		<Ships>
			<Ship				count="1d4" class="&scUrakSentinel;" orders="patrol" patrolDist="5"/>
		</Ships>

		<Reinforcements minShips="3">
			<Ship				count="1d2" class="&scUrakSentinel;" orders="patrol" patrolDist="5"/>
		</Reinforcements>

		<!-- Treasure -->

		<Items>
			<RandomItem count="1d4"
					criteria=			"* +Res; -NotStandard;"
					levelFrequency=		"-uccu"
					/>
			<RandomItem chance="30"
					criteria=			"* +Res; -NotStandard;"
					levelFrequency=		"---uc cu---"
					/>
			<Table>
				<Lookup chance="40" count="1" table="&trConsumables3;"/>
				<Item chance="25" count="1d4" item="&itUrakArmorLight;"/>
				<Item chance="20" count="1" item="&itUrakMassDriver;"/>
				<Lookup chance="10" count="1" table="&trMinorItem3;"/>
				<Lookup chance="5" count="1" table="&trMajorItem3;"/>
			</Table>
		</Items>

		<!-- Image and Effects -->

		<ImageVariants>
			<LocationCriteriaTable>
				<Image criteria="*ice"			imageID="&rsUrakMineIcy;"			imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				<Image criteria="*metallic"		imageID="&rsUrakMineMetallic;"		imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				<Image criteria="*primordial"	imageID="&rsUrakMinePrimordial;"		imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				<Image criteria="*volcanic"		imageID="&rsUrakMineVolcanic;"		imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
				
				<Image criteria="*~"			imageID="&rsUrakMineRocky;"			imageWidth="260" imageHeight="260"	viewportRatio="0.0325"/>
			</LocationCriteriaTable>
		</ImageVariants>

		<DockingPorts
				portCount=		"8"
				portRadius=		"120"
				>
		</DockingPorts>

	</StationType>
<StationType UNID="&stUrakFortress;"
			name=				"Urak fortress(es)"
			sovereign=			"&svUrakWarlords;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itUrakArmorHeavy;"
			hitPoints=			"790"
            regen=              "6"
			fireRateAdj=		"40"
			explosionType=		"&vtBlastExplosion3;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, envAir, envAvoidsFire, generic, human, majorStation, populated, urakFortress, urakWarlords"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+urakSpace;"
				systemAffinity=			"+envAir; -envFire;"
				levelFrequency=			"--vcu v---- ----- ----- -----"

				locationCriteria=		"-innerSystem, -void"
				enemyExclusionRadius=	"60"
				/>

		<Image			imageID="&rsStations4;" imageX="0" imageY="768" imageWidth="256" imageHeight="256"/>

		<Devices>
			<Device deviceID="&itUrakHowitzer;" omnidirectional="true" posAngle="90" posRadius="100"/>
			<Device deviceID="&itUrakHowitzer;" omnidirectional="true" posAngle="210" posRadius="100"/>
			<Device deviceID="&itUrakHowitzer;" omnidirectional="true" posAngle="330" posRadius="100"/>
		</Devices>

		<Ships>
			<Ship				count="1d4" class="&scUrakSentinel;" orders="patrol" patrolDist="4"/>
			<Ship				count="1d4" class="&scUrakSentinel;" orders="patrol" patrolDist="7"/>
			<Ship				count="1"	class="&scUrakDestroyer;" orders="patrol" patrolDist="15"/>
		</Ships>

		<Reinforcements minShips="5">
			<Table>
				<Ship chance="35"		count="1d2" class="&scUrakSentinel;" orders="patrol" patrolDist="4"/>
				<Ship chance="35"		count="1d2" class="&scUrakSentinel;" orders="patrol" patrolDist="7"/>
				<Ship chance="30"		count="1"	class="&scUrakDestroyer;" orders="patrol" patrolDist="15"/>
			</Table>
		</Reinforcements>

		<Items>
			<Group value="standard:level=4:x=3.5">
				<RandomItem
						criteria=			"* +Res; -NotStandard;"
						levelFrequency=		"-uccu"
						/>
				<RandomItem chance="10"
						criteria=			"* +Res; -NotStandard;"
						levelFrequency=		"---uc cu---"
						/>
				<Table count="1-4">
					<Lookup chance="15" count="1" table="&trConsumables5;"/>
					<Item chance="20" count="1d4" item="&itUrakArmorLight;"/>
					<Item chance="20" count="1" item="&itUrakMassDriver;"/>
					<Item chance="15" count="1d4" item="&itUrakArmorHeavy;"/>
					<Item chance="15" count="1" item="&itUrakHowitzer;"/>
					<Lookup chance="10" count="1" table="&trMinorItem5;"/>
					<Lookup chance="5" count="1" table="&trMajorItem5;"/>
				</Table>
			</Group>
		</Items>

	</StationType>
<!-- UsefulItems.xml -->
<!-- Ventari.xml -->
<StationType UNID="&stVentariColony;"
			name=				"Ventari colony|Ventari colonies"
			sovereign=			"&svVentariSettlers;"
			abandonedScreen=	"&dsRPGAbandonedStation;"
			dockingPorts=		"8"

			multiHull=			"true"
			armorID=			"&itOrthoSteel;"
			hitPoints=			"740"
            regen=              "15"
			fireRateAdj=		"40"
			explosionType=		"&vtThermoExplosion2;"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, envFire, envAvoidsWater, generic, human, majorStation, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+ventariSpace;"
				systemAffinity=			"+envFire; -envWater;"
				levelFrequency=			"----- ucur- ----- ----- -----"

				locationCriteria=		"+outerSystem, -planetary"
				enemyExclusionRadius=	"100"
				/>

		<Image			imageID="&rsStations7;" imageX="0" imageY="448" imageWidth="192" imageHeight="192"/>

		<Devices>
			<Device deviceID="&itIonCannon;"	omnidirectional="true" posAngle="60"  posRadius="85"/>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true" posAngle="155" posRadius="90"/>
			<Device deviceID="&itIonCannon;"	omnidirectional="true" posAngle="240" posRadius="100"/>
			<Device deviceID="&itTeV9Blaster;"	omnidirectional="true" posAngle="330" posRadius="110"/>
		</Devices>

		<Items>
			<Table>
				<Lookup chance="40" count="1" table="&trConsumables8;"/>
				<Lookup chance="40" count="1" table="&trMinorItem8;"/>
				<Lookup chance="20" count="1" table="&trMajorItem8;"/>
			</Table>
		</Items>

		<Ships>
			<Ship					count="1d2"	class="&scVentariDestroyer;"	orders="patrol" patrolDist="40"/>
		</Ships>

		<Reinforcements minShips="1">
			<Ship					count="1d2"	class="&scVentariDestroyer;"	orders="patrol" patrolDist="40"/>
		</Reinforcements>

		<Encounters frequency="common">
			<Ship count="1"	class="&scVentariDestroyer;"	eventHandler="&evStdWanderBehavior;"	maxShips="6"/>
		</Encounters>

	</StationType>
<!-- Volcanic.xml -->
<StationType UNID="&stVolcanicAsteroidSizeA;"
		name=				"volcanic asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, volcanic"
		inherit=			"&baVolcanicAsteroid;"

		scale=				"world"
		size=				"4"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsVolcanicAsteroidSizeA;"/>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stVolcanicAsteroidSizeB;"
		name=				"volcanic asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, volcanic"
		inherit=			"&baVolcanicAsteroid;"

		scale=				"world"
		size=				"70"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsVolcanicAsteroidSizeB;"/>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" count="1d6" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stVolcanicAsteroidSizeC;"
		name=				"volcanic asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, volcanic"
		inherit=			"&baVolcanicAsteroid;"

		scale=				"world"
		size=				"255"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsVolcanicAsteroidSizeC;"/>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" count="1d8" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stVolcanicAsteroidSizeD;"
		name=				"volcanic asteroid"
		attributes=			"asteroid, generic, inner, lifeZone, outer, volcanic"
		inherit=			"&baVolcanicAsteroid;"

		scale=				"world"
		size=				"590"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsVolcanicAsteroidSizeD;"/>

		<Items>
			<Table>
				<Null chance="85"/>
				<Lookup chance="15" count="1d10" table="&tbAsteroidOre;"/>
			</Table>
		</Items>
	</StationType>
<StationType UNID="&stVolcanicPlanetoidSizeE;"
		name=				"volcanic planetoid"
		attributes=			"generic, inner, lifeZone, outer, planetoid, volcanic"

		scale=				"world"
		size=				"1000"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsVolcanicPlanetoidSizeE;"/>
	</StationType>
<StationType UNID="&stVolcanicPlanetoidSizeF;"
		name=				"volcanic planetoid"
		attributes=			"generic, inner, lifeZone, outer, planetoid, volcanic"

		scale=				"world"
		size=				"2450"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsVolcanicPlanetoidSizeF;"/>
	</StationType>
<StationType UNID="&stVolcanicPlanetoidSizeG;"
		name=				"volcanic planetoid"
		attributes=			"generic, inner, lifeZone, outer, planetoid, volcanic"

		scale=				"world"
		size=				"3750"
		anonymous=			"true"

		ejectaType=			"&vtVolcanicAsteroidEjecta;"
		>
		<ImageLookup imageID="&rsVolcanicPlanetoidSizeG;"/>
	</StationType>
<StationType UNID="&stVolcanicTerrestrialSizeH;"
		name=				"volcanic terrestrial"
		attributes=			"generic, terrestrial, volcanic"

		scale=				"world"
		size=				"5250"
		anonymous=			"true"
		>
		<ImageVariants>
			<Image	imageID="&rsVolcanicTerrestrials;" imageX="0"   imageY="0"   imageWidth="200" imageHeight="200"/>
			<Image	imageID="&rsVolcanicTerrestrials;" imageX="0"   imageY="200" imageWidth="200" imageHeight="200"/>
			<Image	imageID="&rsVolcanicTerrestrials;" imageX="0"   imageY="400" imageWidth="200" imageHeight="200"/>
			<Image	imageID="&rsVolcanicTerrestrials;" imageX="0"   imageY="600" imageWidth="200" imageHeight="200"/>
		</ImageVariants>
	</StationType>
<!-- Volkov.xml -->
<StationType UNID="&stHelenaVolkov;"
			name=				"wreck of Helena Volkov's EI500 freighter"
			sovereign=			"&svNeutral;"
			inherit=			"&unidCommonText;"
			
			dockScreen=			"Main"
			scale=				"ship"
			noMapIcon=			"true"

			ejectaType=			"&vtWreckEjecta;"

			attributes=			"debris, friendly, helenaVolkov, locked, shipwreck"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+humanSpace;"
				systemAffinity=			"*"
				levelFrequency=			"---vr vvv-- ----- ----- -----"

				locationCriteria=		"-planetary"

				maxAppearing=			"1"
				/>

		<ImageShipwreck class="&scEI500;"/>

		<Events>
			<GetExplosionType>
				(intContainerGetExplosionType gSource)
			</GetExplosionType>
			
			<OnAttacked>
				(block (volkov)
					(if (and aOrderGiver (setq volkov (objGetObjRefData gSource "volkov")))
						(objSendMessage aOrderGiver volkov "\"Leave Helena alone!\"")
						)
					)
			</OnAttacked>
			
			<OnCreate>
				(sysAddObjRecurringTimerEvent 60 gSource "OnSearchForVolkov")
			</OnCreate>

			<OnDamage>
				(intContainerOnDamage gSource aDamageHP)
			</OnDamage>
			
			<OnDestroy>
				(block (volkov)
					(if (and aOrderGiver 
							(objCanAttack aOrderGiver)
							(setq volkov (objGetObjRefData gSource "volkov")))
						(block Nil
							(shpCancelOrders volkov)
							(shpOrder volkov 'attack aOrderGiver)
							(shpOrder volkov 'gate (intGetGateToSystem gSource (objGetData volkov "homeSystem")))
							)
						)
					)
			</OnDestroy>
			
			<OnSearchForVolkov>
				(block (volkov)
					(if (and (setq volkov (@ (sysFindObject gSource "sAN:100; +character:&chVolkov;;") 0))
							(not (eq (objGetData volkov "behavior") 'goingHome))
							)
						(block Nil
							(objSetObjRefData gSource "volkov" volkov)
							(setq aTargetObj gSource)
							(objFireEvent volkov "OrderJoinHelena")
							)
						)
					)
			</OnSearchForVolkov>
		</Events>

		<DockScreens>
			<Main>
				<InitialPane>
					(if (objIsDockedAt (objGetObjRefData gSource "volkov") gSource)
						(if (not (objGetData gSource "status"))
							"VolkovGrieving"
							"VolkovGrieving2"
							)
						(if (not (objGetData gSource "status"))
							"Helena"
							"Default"
							)
						)
				</InitialPane>

				<Panes>
					<Default>
						<OnPaneInit>
							(scrShowScreen gScreen &dsRPGAbandonedStation;)
						</OnPaneInit>
					</Default>
					
					<Helena	descID="descHelena">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								(scrExitDock gScreen)
							</Action>
						</Actions>
					</Helena>
					
					<VolkovGrieving descID="descVolkovGrieving">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								(block (volkov)
									(setq volkov (objGetObjRefData gSource "volkov"))
									(shpCancelOrders volkov)
									(shpOrder volkov 'wait 10)
									(shpOrder volkov 'gate (intGetGateToSystem gSource (objGetData volkov "homeSystem")))
									
									(objSetData gSource "status" 'volkovLeft)
									(scrExitDock gScreen)
									)
							</Action>
						</Actions>
					</VolkovGrieving>
					
					<VolkovGrieving2 descID="descVolkovGrieving2">
						<Actions>
							<Action id="actionUndock" default="1" cancel="1">
								(scrExitDock gScreen)
							</Action>
						</Actions>
					</VolkovGrieving2>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts
				portCount=		"2"
				portRadius=		"48"
				maxDist=		"3"
				/>
				
		<Language>
			<Text id="core.abandonedStationDesc">

				You are docked with the wreck of an EI500 freighter.

				There is a makeshift memorial here honoring Helena Volkov.

			</Text>
			<Text id="descHelena">
				
				You are docked with the wreck of an EI500 freighter.

				You see the body of a woman still strapped to the command chair 
				on the bridge.

			</Text>
			<Text id="descVolkovGrieving">

				You are docked with the wreck of an EI500 freighter. 
				You see Volkov on the deck cradling the body of his wife.

				"Helena was so beautiful and so loving! But Domina called her, 
				and now she is dead! Why? What reason?"

				You leave Volkov to his grief.

			</Text>
			<Text id="descVolkovGrieving2">

				You are docked with the wreck of an EI500 freighter.

				You see Volkov tenderly carrying his wife's body to his ship.

			</Text>
		</Language>
	</StationType>
<!-- WeaponEnhancementItems.xml -->
<!-- Worlds.xml -->
<StationType UNID="&stBiosphereTerrestrialSizeI;"
		name=				"(biosphere terrestrial)"
		scale=				"world"
		size=				"10000"

		attributes=			"biosphere, generic, terrestrial"
		>
		<ImageVariants>
			<Image	imageID="&rsBiosphereTerrestrials;" imageX="0"   imageY="0"   imageWidth="230" imageHeight="230"/>
			<Image	imageID="&rsBiosphereTerrestrials;" imageX="0"   imageY="230" imageWidth="230" imageHeight="230"/>
			<Image	imageID="&rsBiosphereTerrestrials;" imageX="0"   imageY="460" imageWidth="230" imageHeight="230"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stDesertTerrestrialSizeH;"
		name=				"(desert terrestrial)"
		scale=				"world"
		size=				"8300"

		attributes=			"desert, generic, terrestrial"
		>
		<ImageVariants>
			<Image	imageID="&rsDesertTerrestrials;" imageX="0"   imageY="0"   imageWidth="220" imageHeight="220"/>
			<Image	imageID="&rsDesertTerrestrials;" imageX="0"   imageY="220" imageWidth="220" imageHeight="220"/>
			<Image	imageID="&rsDesertTerrestrials;" imageX="0"   imageY="440" imageWidth="220" imageHeight="220"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stGreenhouseTerrestrialSizeI;"
		name=				"(greenhouse terrestrial)"
		scale=				"world"
		size=				"13250"

		attributes=			"generic, greenhouse, terrestrial"
		>
		<ImageVariants>
			<Image	imageID="&rsGreenhouseTerrestrials;" imageX="0"   imageY="0"   imageWidth="250" imageHeight="250"/>
			<Image	imageID="&rsGreenhouseTerrestrials;" imageX="0"   imageY="250" imageWidth="250" imageHeight="250"/>
			<Image	imageID="&rsGreenhouseTerrestrials;" imageX="0"   imageY="500" imageWidth="250" imageHeight="250"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stHydrogenGasGiantSizeM;"
		name=				"(hydrogen gas giant)"
		scale=				"world"
		size=				"151500"

		attributes=			"gasGiant, generic"
		>
		<ImageVariants>
			<Image	imageID="&rsHydrogenGasGiant01;" imageX="0"   imageY="0"   imageWidth="450" imageHeight="450"/>
			<Image	imageID="&rsHydrogenGasGiant02;" imageX="0"   imageY="0"   imageWidth="450" imageHeight="450"/>
			<Image	imageID="&rsHydrogenGasGiant03;" imageX="0"   imageY="0"   imageWidth="450" imageHeight="450"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stMethaneGasGiantSizeK;"
		name=				"(methane gas giant)"
		scale=				"world"
		size=				"49500"

		attributes=			"gasGiant, generic"
		>
		<ImageVariants>
			<Image	imageID="&rsMethaneGasGiant01;" imageX="0"   imageY="0"   imageWidth="340" imageHeight="340"/>
		</ImageVariants>
	</StationType>
<StationType UNID="&stRingedGasGiant;"
		name=				"(ringed gas giant)"
		scale=				"world"
		size=				"100000"

		attributes=			"gasGiant, generic, ringSystem"
		>

		<ImageVariants>
			<Image			imageID="&rsWorldsRingedGiant1;" imageX="0" imageY="0" imageWidth="512" imageHeight="256"/>
			<Image			imageID="&rsWorldsRingedGiant2;" imageX="0" imageY="0" imageWidth="512" imageHeight="256"/>
			<Image			imageID="&rsWorldsRingedGiant3;" imageX="0" imageY="0" imageWidth="512" imageHeight="340"/>
			<Image			imageID="&rsWorldsRingedGiant4;" imageX="0" imageY="0" imageWidth="462" imageHeight="400"/>
			<Image			imageID="&rsWorldsRingedGiant5;" imageX="0" imageY="0" imageWidth="412" imageHeight="400"/>
			<Image			imageID="&rsWorldsRingedGiant6;" imageX="0" imageY="0" imageWidth="412" imageHeight="340"/>
			<Image			imageID="&rsWorldsRingedGiant7;" imageX="0" imageY="0" imageWidth="448" imageHeight="340"/>
			<Image			imageID="&rsWorldsRingedGiant8;" imageX="0" imageY="0" imageWidth="432" imageHeight="380"/>
		</ImageVariants>
	</StationType>
<!-- Xenophobes.xml -->
<StationType<?xml version="1.0" encoding="utf-8"?>

<TranscendenceModule>

<!-- Bennin Xenophobes ==================================================== -->

	<Sovereign UNID="&svXenophobes;"
			name=":the Bennin Conclave"
			shortName=": Xenophobes"
			adjective="Xenophobe"
			demonym=":a Xenophobe disciple(s)"
			plural="true"

			alignment="sterilizer"
			/>
	
	<SystemMap unid="&smXenophobeSpace;"
			displayOn="&smHumanSpace;"
			>
		<TopologyProcessor priority="secondaryColony">
			<System criteria="+outerRealm;"				attributes="xenophobeSpace"/>
			<System criteria="+ungoverned; +envFire;"	attributes="xenophobeSpace"/>
		</TopologyProcessor>
	</SystemMap>

<!-- ENCOUNTERS -->

	<!-- Xenophobe Fleet Encounter -->

	<EncounterType UNID="&stXenophobeFleet;"
			name=				"(Xenophobe fleet)"
			sovereign=			"&svXenophobes;"

			attributes=			"benninXenophobes, enemy, envFire, envAvoidsWater"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+xenophobeSpace;"
				systemAffinity=			"+envFire; -envWater;"
				levelFrequency=			"----v cuv-- ----- ----- -----"

				locationCriteria=		"*"
				/>

		<Ships>
			<Ship	count="1"	class="&scXenophobeDefender;" eventHandler="&evXenophobeFleetBehavior;">
				<Escorts>
					<Ship		count="1d4+1"	class="&scXenophobeFighter;"	orders="escort"/>
				</Escorts>
			</Ship>
		</Ships>
	</EncounterType>

	<!-- Xenophobe Worldship Encounter -->

	<StationType </StationType>
<StationType UNID="&stXenophobeWorldship;"
			name=				"(Xenophobe worldship)"
			sovereign=			"&svCommonwealth;"
			controllingSovereign="&svXenophobes;"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			multiHull=			"true"
			armorID=			"&itPlasteelPlate;"
			maxHitPoints=		"100"
			hitPoints=			"0"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"enemy, envFire, envAvoidsWater, human, populated"
			>

		<!-- Encounter Info -->

		<Encounter
				systemCriteria=			"+commonwealthSpace; +xenophobeSpace;"
				systemAffinity=			"+envFire; -envWater;"
				levelFrequency=			"----- -vuv- ----- ----- -----"

				locationCriteria=		"*"
				/>

		<Names noArticle="true">Agricola Station; Britannia Station; Canterbury Station;
				Devonshire Colony; Enterprise Station; Farsend Station;
				Grenoble Colony; Hellas Station; Independence Station;
				Janus Colony; Koran Station; Lexington Colony; Massachusetts Colony;
				Nakura Colony; Ontario Station; Paduan Station; Qatar Station;
				Ryad Colony; Santiago Station; Tango Colony; Umber Station;
				Victory Colony; Winchell Station; %s Colony; %s Alpha Station;
				%s Beta Station; %s Gamma Station; %s Epsilon Station;
				Anacreon Colony %1%0%0%0; Anacreon Colony %1%0%0; Anacreon Colony %1%0%0;
				Anacreon Colony %1%0%0; Anacreon Colony %1%0%0
		</Names>

		<Image imageID="&rsCommonwealthSettlement;" imageWidth="320" imageHeight="290" viewportRatio="0.05"/>

		<DockingPorts
				portCount=		"10"
				portRadius=		"175"
				>
		</DockingPorts>
		
		<Ships>
			<Ship	count="1"	class="&scXenophobeWorldship;" sovereign="&svXenophobes;" eventHandler="&evXenophobeFleetBehavior;">
				<Escorts>
					<Ship		count="1d3+1"	class="&scXenophobeDefender;"	orders="escort">
						<Escorts>
							<Ship		count="1d4+1"	class="&scXenophobeFighter;"	orders="escort"/>
						</Escorts>
					</Ship>
				</Escorts>
			</Ship>
		</Ships>

		<Language>
			<Text id="core.abandonedStationDesc">

				You are docked at the lifeless ruins of a destroyed station. 
				A group of refugees, huddling in the cavernous bay, tell you 
				that the station was destroyed by Xenophobes.

			</Text>
		</Language>
	</StationType>
</TranscendenceModule>